/*! For license information please see app-59f1359a34.js.LICENSE.txt */
!function(){var e={2162:function(e,t,n){"use strict";n.d(t,{Xb:function(){return h},Gd:function(){return v},cu:function(){return p}});var i=n(655),r=n(7199),o=n(2844),s=n(1170),a=n(2343),c=n(1422),l=n(6769),u=n(2470),d=function(){function e(e){this.errors=0,this.sid=(0,o.DM)(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=r.$.Ok,this.init=!0,e&&this.update(e)}return e.prototype.update=function(e){void 0===e&&(e={}),e.user&&(e.user.ip_address&&(this.ipAddress=e.user.ip_address),e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Date.now(),e.sid&&(this.sid=32===e.sid.length?e.sid:(0,o.DM)()),void 0!==e.init&&(this.init=e.init),e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),"number"==typeof e.duration?this.duration=e.duration:this.duration=this.timestamp-this.started,e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),e.ipAddress&&(this.ipAddress=e.ipAddress),e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===r.$.Ok?this.update({status:r.$.Exited}):this.update()},e.prototype.toJSON=function(){return(0,u.Jr)({sid:""+this.sid,init:this.init,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:(0,u.Jr)({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),h=(function(){function e(e,t){var n=this;this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._transport=e,this._intervalId=setInterval((function(){return n.flush()}),1e3*this.flushTimeout),this._sessionAttrs=t}e.prototype.sendSessionAggregates=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){a.k.error("Error while sending session: "+e)})):a.k.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.flush=function(){var e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this.sendSessionAggregates(e))},e.prototype.getSessionAggregates=function(){var e=this,t=Object.keys(this._pendingAggregates).map((function(t){return e._pendingAggregates[parseInt(t)]})),n={attrs:this._sessionAttrs,aggregates:t};return(0,u.Jr)(n)},e.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},e.prototype.incrementSessionStatusCount=function(){var e,t;if(this._isEnabled){var n=v().getScope(),i=null===(e=n)||void 0===e?void 0:e.getRequestSession();i&&i.status&&(this._incrementSessionStatusCount(i.status,new Date),null===(t=n)||void 0===t||t.setRequestSession(void 0))}},e.prototype._incrementSessionStatusCount=function(e,t){var n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};var i=this._pendingAggregates[n];switch(i.started||(i.started=new Date(n).toISOString()),e){case r.H.Errored:return i.errored=(i.errored||0)+1,i.errored;case r.H.Ok:return i.exited=(i.exited||0)+1,i.exited;case r.H.Crashed:return i.crashed=(i.crashed||0)+1,i.crashed}}}(),function(){function e(e,t,n){void 0===t&&(t=new l.s),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=l.s.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=(0,o.DM)(),r=t;if(!t){var s=void 0;try{throw new Error("Sentry syntheticException")}catch(e){s=e}r={originalException:e,syntheticException:s}}return this._invokeClient("captureException",e,(0,i.pi)((0,i.pi)({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=(0,o.DM)(),s=n;if(!n){var a=void 0;try{throw new Error(e)}catch(e){a=e}s={originalException:e,syntheticException:a}}return this._invokeClient("captureMessage",e,t,(0,i.pi)((0,i.pi)({},s),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=this._lastEventId=(0,o.DM)();return this._invokeClient("captureEvent",e,(0,i.pi)((0,i.pi)({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,a=n.client;if(r&&a){var c=a.getOptions&&a.getOptions()||{},l=c.beforeBreadcrumb,u=void 0===l?null:l,d=c.maxBreadcrumbs,h=void 0===d?100:d;if(!(h<=0)){var p=(0,s.yW)(),f=(0,i.pi)({timestamp:p},e),v=u?(0,o.Cf)((function(){return u(f,t)})):f;null!==v&&r.addBreadcrumb(v,Math.min(h,100))}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,i=t.client;n&&i&&e(n)},e.prototype.run=function(e){var t=f(this);try{e(this)}finally{f(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return a.k.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e,t,n,i,r;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(r=null===(i=this.getStackTop())||void 0===i?void 0:i.scope)||void 0===r||r.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,o=t.client,s=o&&o.getOptions()||{},a=s.release,c=s.environment,l=new d((0,i.pi)((0,i.pi)({release:a,environment:c},n&&{user:n.getUser()}),e));if(n){var u=n.getSession&&n.getSession();u&&u.status===r.$.Ok&&u.update({status:r.$.Exited}),this.endSession(),n.setSession(l)}return l},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var i=t.getSession&&t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}},e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop(),s=o.scope,a=o.client;a&&a[e]&&(t=a)[e].apply(t,(0,i.fl)(n,[s]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=p(),r=i.__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);a.k.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}());function p(){var e=(0,o.Rf)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function f(e){var t=p(),n=g(t);return w(t,e),n}function v(){var e=p();return m(e)&&!g(e).isOlderThan(4)||w(e,new h),(0,c.KV)()?function(e){var t,n,i;try{var r=null===(i=null===(n=null===(t=p().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.domain)||void 0===i?void 0:i.active;if(!r)return g(e);if(!m(r)||g(r).isOlderThan(4)){var o=g(e).getStackTop();w(r,new h(o.client,l.s.clone(o.scope)))}return g(r)}catch(t){return g(e)}}(e):g(e)}function m(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function g(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new h),e.__SENTRY__.hub}function w(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}},6769:function(e,t,n){"use strict";n.d(t,{s:function(){return c},c:function(){return u}});var i=n(655),r=n(7597),o=n(1170),s=n(6893),a=n(2844),c=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=(0,i.fl)(t._breadcrumbs),n._tags=(0,i.pi)({},t._tags),n._extra=(0,i.pi)({},t._extra),n._contexts=(0,i.pi)({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=(0,i.fl)(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=(0,i.pi)((0,i.pi)({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=(0,i.pi)((0,i.pi)({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=(0,i.pi)((0,i.pi)({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=(0,i.pi)((0,i.pi)({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=(0,i.pi)((0,i.pi)({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,i,r=this.getSpan();return(null===(e=r)||void 0===e?void 0:e.transaction)?null===(t=r)||void 0===t?void 0:t.transaction:(null===(i=null===(n=r)||void 0===n?void 0:n.spanRecorder)||void 0===i?void 0:i.spans[0])?r.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=(0,i.pi)((0,i.pi)({},this._tags),t._tags),this._extra=(0,i.pi)((0,i.pi)({},this._extra),t._extra),this._contexts=(0,i.pi)((0,i.pi)({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):(0,r.PO)(t)&&(t=t,this._tags=(0,i.pi)((0,i.pi)({},this._tags),t.tags),this._extra=(0,i.pi)((0,i.pi)({},this._extra),t.extra),this._contexts=(0,i.pi)((0,i.pi)({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n=(0,i.pi)({timestamp:(0,o.yW)()},e);return this._breadcrumbs=void 0!==t&&t>=0?(0,i.fl)(this._breadcrumbs,[n]).slice(-t):(0,i.fl)(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=(0,i.pi)((0,i.pi)({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=(0,i.pi)((0,i.pi)({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=(0,i.pi)((0,i.pi)({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=(0,i.pi)((0,i.pi)({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=(0,i.pi)({trace:this._span.getTraceContext()},e.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(e.tags=(0,i.pi)({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=(0,i.fl)(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors((0,i.fl)(l(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,o){var a=this;return void 0===o&&(o=0),new s.c((function(s,c){var l=e[o];if(null===t||"function"!=typeof l)s(t);else{var u=l((0,i.pi)({},t),n);(0,r.J8)(u)?u.then((function(t){return a._notifyEventProcessors(e,t,n,o+1).then(s)})).then(null,c):a._notifyEventProcessors(e,u,n,o+1).then(s).then(null,c)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function l(){var e=(0,a.Rf)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function u(e){l().push(e)}},1109:function(e,t,n){"use strict";n.d(t,{ro:function(){return w},lb:function(){return g}});var i,r=n(655),o=n(2162);!function(e){e.Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"}(i||(i={}));var s=n(2343),a=n(1422),c=n(9732),l=n(5734),u=n(3233);function d(){var e=(0,u.x1)();e&&(s.k.log("[Tracing] Transaction: "+l.p.InternalError+" -> Global error occured"),e.setStatus(l.p.InternalError))}var h=n(6458),p=n(3391);function f(){var e=this.getScope();if(e){var t=e.getSpan();if(t)return{"sentry-trace":t.toTraceparent()}}return{}}function v(e,t,n){return(0,u.zu)()?void 0!==e.sampled?(e.setMetadata({transactionSampling:{method:i.Explicit}}),e):("function"==typeof t.tracesSampler?(o=t.tracesSampler(n),e.setMetadata({transactionSampling:{method:i.Sampler,rate:Number(o)}})):void 0!==n.parentSampled?(o=n.parentSampled,e.setMetadata({transactionSampling:{method:i.Inheritance}})):(o=t.tracesSampleRate,e.setMetadata({transactionSampling:{method:i.Rate,rate:Number(o)}})),r=o,(isNaN(r)||"number"!=typeof r&&"boolean"!=typeof r?(s.k.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(r)+" of type "+JSON.stringify(typeof r)+"."),0):!(r<0||r>1)||(s.k.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+r+"."),0))?o?(e.sampled=Math.random()<o,e.sampled?(s.k.log("[Tracing] starting "+e.op+" transaction - "+e.name),e):(s.k.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(o)+")"),e)):(s.k.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(s.k.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)):(e.sampled=!1,e);var r,o}function m(e,t){var n,i,o=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},s=new p.Y(e,this);return(s=v(s,o,(0,r.pi)({parentSampled:e.parentSampled,transactionContext:e},t))).sampled&&s.initSpanRecorder(null===(i=o._experiments)||void 0===i?void 0:i.maxSpans),s}function g(e,t,n,i,o){var s,a,c=(null===(s=e.getClient())||void 0===s?void 0:s.getOptions())||{},l=new h.io(t,e,n,i);return(l=v(l,c,(0,r.pi)({parentSampled:t.parentSampled,transactionContext:t},o))).sampled&&l.initSpanRecorder(null===(a=c._experiments)||void 0===a?void 0:a.maxSpans),l}function w(){var t;(t=(0,o.cu)()).__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=m),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=f)),(0,a.KV)()&&function(){var t=(0,o.cu)();if(t.__SENTRY__){var n={mongodb:function(){return new((0,a.l$)(e,"./integrations/mongo").Mongo)},mongoose:function(){return new((0,a.l$)(e,"./integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new((0,a.l$)(e,"./integrations/mysql").Mysql)},pg:function(){return new((0,a.l$)(e,"./integrations/postgres").Postgres)}},i=Object.keys(n).filter((function(e){return!!(0,a.$y)(e)})).map((function(e){try{return n[e]()}catch(e){return}})).filter((function(e){return e}));i.length>0&&(t.__SENTRY__.integrations=(0,r.fl)(t.__SENTRY__.integrations||[],i))}}(),(0,c.o)({callback:d,type:"error"}),(0,c.o)({callback:d,type:"unhandledrejection"})}e=n.hmd(e)},6458:function(e,t,n){"use strict";n.d(t,{nT:function(){return l},io:function(){return d}});var i=n(655),r=n(1170),o=n(2343),s=n(5334),a=n(5734),c=n(3391),l=1e3,u=function(e){function t(t,n,i,r){void 0===i&&(i="");var o=e.call(this,r)||this;return o._pushActivity=t,o._popActivity=n,o.transactionSpanId=i,o}return(0,i.ZT)(t,e),t.prototype.add=function(t){var n=this;t.spanId!==this.transactionSpanId&&(t.finish=function(e){t.endTimestamp="number"==typeof e?e:(0,r._I)(),n._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),e.prototype.add.call(this,t)},t}(s.g),d=function(e){function t(t,n,i,r){void 0===i&&(i=l),void 0===r&&(r=!1);var s=e.call(this,t,n)||this;return s._idleHub=n,s._idleTimeout=i,s._onScope=r,s.activities={},s._heartbeatTimer=0,s._heartbeatCounter=0,s._finished=!1,s._beforeFinishCallbacks=[],n&&r&&(h(n),o.k.log("Setting idle transaction on scope. Span ID: "+s.spanId),n.configureScope((function(e){return e.setSpan(s)}))),s._initTimeout=setTimeout((function(){s._finished||s.finish()}),s._idleTimeout),s}return(0,i.ZT)(t,e),t.prototype.finish=function(t){var n,s,c=this;if(void 0===t&&(t=(0,r._I)()),this._finished=!0,this.activities={},this.spanRecorder){o.k.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);try{for(var l=(0,i.XA)(this._beforeFinishCallbacks),u=l.next();!u.done;u=l.next())(0,u.value)(this,t)}catch(e){n={error:e}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(e){if(e.spanId===c.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus(a.p.Cancelled),o.k.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));var n=e.startTimestamp<t;return n||o.k.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,void 0,2)),n})),o.k.log("[Tracing] flushing IdleTransaction")}else o.k.log("[Tracing] No active IdleTransaction");return this._onScope&&h(this._idleHub),e.prototype.finish.call(this,t)},t.prototype.registerBeforeFinishCallback=function(e){this._beforeFinishCallbacks.push(e)},t.prototype.initSpanRecorder=function(e){var t=this;this.spanRecorder||(this.spanRecorder=new u((function(e){t._finished||t._pushActivity(e)}),(function(e){t._finished||t._popActivity(e)}),this.spanId,e),o.k.log("Starting heartbeat"),this._pingHeartbeat()),this.spanRecorder.add(this)},t.prototype._pushActivity=function(e){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),o.k.log("[Tracing] pushActivity: "+e),this.activities[e]=!0,o.k.log("[Tracing] new activities count",Object.keys(this.activities).length)},t.prototype._popActivity=function(e){var t=this;if(this.activities[e]&&(o.k.log("[Tracing] popActivity "+e),delete this.activities[e],o.k.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this._idleTimeout,i=(0,r._I)()+n/1e3;setTimeout((function(){t._finished||t.finish(i)}),n)}},t.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var e=Object.keys(this.activities),t=e.length?e.reduce((function(e,t){return e+t})):"";t===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(o.k.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(a.p.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},t.prototype._pingHeartbeat=function(){var e=this;o.k.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout((function(){e._beat()}),5e3)},t}(c.Y);function h(e){if(e){var t=e.getScope();t&&t.getTransaction()&&t.setSpan(void 0)}}},5334:function(e,t,n){"use strict";n.d(t,{g:function(){return c},D:function(){return l}});var i=n(655),r=n(2844),o=n(1170),s=n(2470),a=n(5734),c=function(){function e(e){void 0===e&&(e=1e3),this.spans=[],this._maxlen=e}return e.prototype.add=function(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)},e}(),l=function(){function e(e){if(this.traceId=(0,r.DM)(),this.spanId=(0,r.DM)().substring(16),this.startTimestamp=(0,o._I)(),this.tags={},this.data={},!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}return e.prototype.child=function(e){return this.startChild(e)},e.prototype.startChild=function(t){var n=new e((0,i.pi)((0,i.pi)({},t),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},e.prototype.setTag=function(e,t){var n;return this.tags=(0,i.pi)((0,i.pi)({},this.tags),((n={})[e]=t,n)),this},e.prototype.setData=function(e,t){var n;return this.data=(0,i.pi)((0,i.pi)({},this.data),((n={})[e]=t,n)),this},e.prototype.setStatus=function(e){return this.status=e,this},e.prototype.setHttpStatus=function(e){this.setTag("http.status_code",String(e));var t=a.p.fromHttpCode(e);return t!==a.p.UnknownError&&this.setStatus(t),this},e.prototype.isSuccess=function(){return this.status===a.p.Ok},e.prototype.finish=function(e){this.endTimestamp="number"==typeof e?e:(0,o._I)()},e.prototype.toTraceparent=function(){var e="";return void 0!==this.sampled&&(e=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+e},e.prototype.toContext=function(){return(0,s.Jr)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},e.prototype.updateWithContext=function(e){var t,n,i,r,o;return this.data=null!=(t=e.data)?t:{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=null!=(n=e.spanId)?n:this.spanId,this.startTimestamp=null!=(i=e.startTimestamp)?i:this.startTimestamp,this.status=e.status,this.tags=null!=(r=e.tags)?r:{},this.traceId=null!=(o=e.traceId)?o:this.traceId,this},e.prototype.getTraceContext=function(){return(0,s.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},e.prototype.toJSON=function(){return(0,s.Jr)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},e}()},5734:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(i||(i={})),function(e){e.fromHttpCode=function(t){if(t<400)return e.Ok;if(t>=400&&t<500)switch(t){case 401:return e.Unauthenticated;case 403:return e.PermissionDenied;case 404:return e.NotFound;case 409:return e.AlreadyExists;case 413:return e.FailedPrecondition;case 429:return e.ResourceExhausted;default:return e.InvalidArgument}if(t>=500&&t<600)switch(t){case 501:return e.Unimplemented;case 503:return e.Unavailable;case 504:return e.DeadlineExceeded;default:return e.InternalError}return e.UnknownError}}(i||(i={}))},3391:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var i=n(655),r=n(2162),o=n(7597),s=n(2343),a=n(2470),c=n(5334),l=function(e){function t(t,n){var i=e.call(this,t)||this;return i._metadata={},i._measurements={},i._hub=(0,r.Gd)(),(0,o.V9)(n,r.Xb)&&(i._hub=n),i.name=t.name||"",i._trimEnd=t.trimEnd,i.transaction=i,i}return(0,i.ZT)(t,e),t.prototype.setName=function(e){this.name=e},t.prototype.initSpanRecorder=function(e){void 0===e&&(e=1e3),this.spanRecorder||(this.spanRecorder=new c.g(e)),this.spanRecorder.add(this)},t.prototype.setMeasurements=function(e){this._measurements=(0,i.pi)({},e)},t.prototype.setMetadata=function(e){this._metadata=(0,i.pi)((0,i.pi)({},this._metadata),e)},t.prototype.finish=function(t){var n=this;if(void 0===this.endTimestamp){if(this.name||(s.k.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),e.prototype.finish.call(this,t),!0===this.sampled){var i=this.spanRecorder?this.spanRecorder.spans.filter((function(e){return e!==n&&e.endTimestamp})):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce((function(e,t){return e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e})).endTimestamp);var r={contexts:{trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this._metadata};return Object.keys(this._measurements).length>0&&(s.k.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),r.measurements=this._measurements),s.k.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(r)}s.k.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.")}},t.prototype.toContext=function(){var t=e.prototype.toContext.call(this);return(0,a.Jr)((0,i.pi)((0,i.pi)({},t),{name:this.name,trimEnd:this._trimEnd}))},t.prototype.updateWithContext=function(t){var n;return e.prototype.updateWithContext.call(this,t),this.name=null!=(n=t.name)?n:"",this._trimEnd=t.trimEnd,this},t}(c.D)},3233:function(e,t,n){"use strict";n.d(t,{zu:function(){return o},qG:function(){return s},x1:function(){return a},XL:function(){return c},WB:function(){return l}});var i=n(2162),r=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function o(e){var t;return void 0===e&&(e=null===(t=(0,i.Gd)().getClient())||void 0===t?void 0:t.getOptions()),!!e&&("tracesSampleRate"in e||"tracesSampler"in e)}function s(e){var t=e.match(r);if(t){var n=void 0;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}}function a(e){var t,n;return void 0===e&&(e=(0,i.Gd)()),null===(n=null===(t=e)||void 0===t?void 0:t.getScope())||void 0===n?void 0:n.getTransaction()}function c(e){return e/1e3}function l(e){return 1e3*e}},7199:function(e,t,n){"use strict";var i,r;n.d(t,{$:function(){return i},H:function(){return r}}),function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(i||(i={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(r||(r={}))},8464:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var i=n(7597);function r(e){try{for(var t=e,n=[],i=0,r=0,s=" > ".length,a=void 0;t&&i++<5&&!("html"===(a=o(t))||i>1&&r+n.length*s+a.length>=80);)n.push(a),r+=a.length,t=t.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function o(e){var t,n,r,o,s,a=e,c=[];if(!a||!a.tagName)return"";if(c.push(a.tagName.toLowerCase()),a.id&&c.push("#"+a.id),(t=a.className)&&(0,i.HD)(t))for(n=t.split(/\s+/),s=0;s<n.length;s++)c.push("."+n[s]);var l=["type","name","title","alt"];for(s=0;s<l.length;s++)r=l[s],(o=a.getAttribute(r))&&c.push("["+r+'="'+o+'"]');return c.join("")}},9732:function(e,t,n){"use strict";n.d(t,{o:function(){return m}});var i,r,o,s=n(655),a=n(7597),c=n(2343),l=n(2844),u=n(2470),d=n(360),h=n(8823),p=(0,l.Rf)(),f={},v={};function m(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(f[e.type]=f[e.type]||[],f[e.type].push(e.callback),function(e){if(!v[e])switch(v[e]=!0,e){case"console":"console"in p&&["debug","info","warn","error","log","assert"].forEach((function(e){e in p.console&&(0,u.hl)(p.console,e,(function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];g("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,p.console,n)}}))}));break;case"dom":!function(){if("document"in p){var e=g.bind(null,"dom"),t=E(e,!0);p.document.addEventListener("click",t,!1),p.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=p[t]&&p[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,u.hl)(n,"addEventListener",(function(t){return function(n,i,r){if("click"===n||"keypress"==n)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=o[n]=o[n]||{refCount:0};if(!s.handler){var a=E(e);s.handler=a,t.call(this,n,a,r)}s.refCount+=1}catch(e){}return t.call(this,n,i,r)}})),(0,u.hl)(n,"removeEventListener",(function(e){return function(t,n,i){if("click"===t||"keypress"==t)try{var r=this.__sentry_instrumentation_handlers__||{},o=r[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,i),o.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,i)}})))}))}}();break;case"xhr":!function(){if("XMLHttpRequest"in p){var e=[],t=[],n=XMLHttpRequest.prototype;(0,u.hl)(n,"open",(function(n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this,s=i[1];o.__sentry_xhr__={method:(0,a.HD)(i[0])?i[0].toUpperCase():i[0],url:i[1]},(0,a.HD)(s)&&"POST"===o.__sentry_xhr__.method&&s.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var c=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(e){}try{var n=e.indexOf(o);if(-1!==n){e.splice(n);var r=t.splice(n)[0];o.__sentry_xhr__&&void 0!==r[0]&&(o.__sentry_xhr__.body=r[0])}}catch(e){}g("xhr",{args:i,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?(0,u.hl)(o,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return c(),e.apply(o,t)}})):o.addEventListener("readystatechange",c),n.apply(o,i)}})),(0,u.hl)(n,"send",(function(n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return e.push(this),t.push(i),g("xhr",{args:i,startTimestamp:Date.now(),xhr:this}),n.apply(this,i)}}))}}();break;case"fetch":(0,h.t$)()&&(0,u.hl)(p,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={args:t,fetchData:{method:w(t),url:y(t)},startTimestamp:Date.now()};return g("fetch",(0,s.pi)({},i)),e.apply(p,t).then((function(e){return g("fetch",(0,s.pi)((0,s.pi)({},i),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw g("fetch",(0,s.pi)((0,s.pi)({},i),{endTimestamp:Date.now(),error:e})),e}))}}));break;case"history":!function(){if((0,h.Bf)()){var e=p.onpopstate;p.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=p.location.href,o=i;if(i=r,g("history",{from:o,to:r}),e)try{return e.apply(this,t)}catch(e){}},(0,u.hl)(p.history,"pushState",t),(0,u.hl)(p.history,"replaceState",t)}function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var o=i,s=String(r);i=s,g("history",{from:o,to:s})}return e.apply(this,t)}}}();break;case"error":b=p.onerror,p.onerror=function(e,t,n,i,r){return g("error",{column:i,error:r,line:n,msg:e,url:t}),!!b&&b.apply(this,arguments)};break;case"unhandledrejection":P=p.onunhandledrejection,p.onunhandledrejection=function(e){return g("unhandledrejection",e),!P||P.apply(this,arguments)};break;default:c.k.warn("unknown instrumentation type:",e)}}(e.type))}function g(e,t){var n,i;if(e&&f[e])try{for(var r=(0,s.XA)(f[e]||[]),o=r.next();!o.done;o=r.next()){var a=o.value;try{a(t)}catch(t){c.k.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+(0,d.$)(a)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}function w(e){return void 0===e&&(e=[]),"Request"in p&&(0,a.V9)(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function y(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in p&&(0,a.V9)(e[0],Request)?e[0].url:String(e[0])}function E(e,t){return void 0===t&&(t=!1),function(n){if(n&&o!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var i="keypress"===n.type?"input":n.type;(void 0===r||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(o,n))&&(e({event:n,name:i,global:t}),o=n),clearTimeout(r),r=p.setTimeout((function(){r=void 0}),1e3)}}}var b=null,P=null},7597:function(e,t,n){"use strict";function i(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(e,Error)}}function r(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function o(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function s(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function a(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return"undefined"!=typeof Event&&v(e,Event)}function d(e){return"undefined"!=typeof Element&&v(e,Element)}function h(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function f(e){return l(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function v(e,t){try{return e instanceof t}catch(e){return!1}}n.d(t,{VZ:function(){return i},VW:function(){return r},TX:function(){return o},fm:function(){return s},HD:function(){return a},pt:function(){return c},PO:function(){return l},cO:function(){return u},kK:function(){return d},Kj:function(){return h},J8:function(){return p},Cy:function(){return f},V9:function(){return v}})},2343:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i=n(2844),r=(0,i.Rf)(),o="Sentry Logger ",s=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,i.Cf)((function(){r.console.log(o+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,i.Cf)((function(){r.console.warn(o+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&(0,i.Cf)((function(){r.console.error(o+"[Error]: "+e.join(" "))}))},e}();r.__SENTRY__=r.__SENTRY__||{};var a=r.__SENTRY__.logger||(r.__SENTRY__.logger=new s)},2844:function(e,t,n){"use strict";n.d(t,{Rf:function(){return o},DM:function(){return s},en:function(){return a},jH:function(){return c},Cf:function(){return l},Db:function(){return u},EG:function(){return d},l4:function(){return h},JY:function(){return p}});var i=n(1422),r={};function o(){return(0,i.KV)()?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:r}function s(){var e=o(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(n[0])+i(n[1])+i(n[2])+i(n[3])+i(n[4])+i(n[5])+i(n[6])+i(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function a(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+i}}function c(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function l(e){var t=o();if(!("console"in t))return e();var n=t.console,i={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(i[e]=n[e],n[e]=n[e].__sentry_original__)}));var r=e();return Object.keys(i).forEach((function(e){n[e]=i[e]})),r}function u(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function d(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}function h(){try{return document.location.href}catch(e){return""}}function p(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var i=Date.parse(""+t);return isNaN(i)?6e4:i-e}},1422:function(e,t,n){"use strict";function i(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function r(e,t){return e.require(t)}function o(t){var n;try{n=r(e,t)}catch(e){}try{var i=r(e,"process").cwd;n=r(e,i()+"/node_modules/"+t)}catch(e){}return n}n.d(t,{KV:function(){return i},l$:function(){return r},$y:function(){return o}}),e=n.hmd(e)},2470:function(e,t,n){"use strict";n.d(t,{Jr:function(){return g},zf:function(){return m},hl:function(){return l},Fv:function(){return v},Qy:function(){return h},_j:function(){return u}});var i=n(655),r=n(8464),o=n(7597),s=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e)return!0;return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}(),a=n(360),c=n(7321);function l(e,t,n){if(t in e){var i=e[t],r=n(i);if("function"==typeof r)try{r.prototype=r.prototype||{},Object.defineProperties(r,{__sentry_original__:{enumerable:!1,value:i}})}catch(e){}e[t]=r}}function u(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}function d(e){if((0,o.VZ)(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}if((0,o.cO)(e)){var s=e,a={};a.type=s.type;try{a.target=(0,o.kK)(s.target)?(0,r.R)(s.target):Object.prototype.toString.call(s.target)}catch(e){a.target="<unknown>"}try{a.currentTarget=(0,o.kK)(s.currentTarget)?(0,r.R)(s.currentTarget):Object.prototype.toString.call(s.currentTarget)}catch(e){a.currentTarget="<unknown>"}for(var i in"undefined"!=typeof CustomEvent&&(0,o.V9)(e,CustomEvent)&&(a.detail=s.detail),s)Object.prototype.hasOwnProperty.call(s,i)&&(a[i]=s);return a}return e}function h(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var i,r=v(e,t);return i=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>n?h(e,t-1,n):r}function p(e,t){return"domain"===t&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":void 0!==n.g&&e===n.g?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":(0,o.Cy)(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+(0,a.$)(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e}function f(e,t,n,i){if(void 0===n&&(n=1/0),void 0===i&&(i=new s),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=p(e);return(0,o.pt)(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var r=p(t,e);if((0,o.pt)(r))return r;var a=d(t),c=Array.isArray(t)?[]:{};if(i.memoize(t))return"[Circular ~]";for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(c[l]=f(l,a[l],n-1,i));return i.unmemoize(t),c}function v(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return f(e,n,t)})))}catch(e){return"**non-serializable**"}}function m(e,t){void 0===t&&(t=40);var n=Object.keys(d(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return(0,c.$G)(n[0],t);for(var i=n.length;i>0;i--){var r=n.slice(0,i).join(", ");if(!(r.length>t))return i===n.length?r:(0,c.$G)(r,t)}return""}function g(e){var t,n;if((0,o.PO)(e)){var r=e,s={};try{for(var a=(0,i.XA)(Object.keys(r)),c=a.next();!c.done;c=a.next()){var l=c.value;void 0!==r[l]&&(s[l]=g(r[l]))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}return Array.isArray(e)?e.map(g):e}},360:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i="<anonymous>";function r(e){try{return e&&"function"==typeof e&&e.name||i}catch(e){return i}}},7321:function(e,t,n){"use strict";n.d(t,{$G:function(){return r},nK:function(){return o},zC:function(){return s}});var i=n(7597);function r(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function o(e,t){if(!Array.isArray(e))return"";for(var n=[],i=0;i<e.length;i++){var r=e[i];try{n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function s(e,t){return!!(0,i.HD)(e)&&((0,i.Kj)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},8823:function(e,t,n){"use strict";n.d(t,{Ak:function(){return o},Du:function(){return s},t$:function(){return a},hv:function(){return c},Bf:function(){return l}});var i=n(2343),r=n(2844);function o(){if(!("fetch"in(0,r.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function s(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function a(){if(!o())return!1;var e=(0,r.Rf)();if(s(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a),a.contentWindow&&a.contentWindow.fetch&&(t=s(a.contentWindow.fetch)),n.head.removeChild(a)}catch(e){i.k.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function c(){if(!o())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function l(){var e=(0,r.Rf)(),t=e.chrome,n=t&&t.app&&t.app.runtime,i="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&i}},6893:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var i,r=n(7597);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(i||(i={}));var o=function(){function e(e){var t=this;this._state=i.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(i.RESOLVED,e)},this._reject=function(e){t._setResult(i.REJECTED,e)},this._setResult=function(e,n){t._state===i.PENDING&&((0,r.J8)(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==i.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===i.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===i.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,i){if(Array.isArray(t))if(0!==t.length){var r=t.length,o=[];t.forEach((function(t,s){e.resolve(t).then((function(e){o[s]=e,0==(r-=1)&&n(o)})).then(null,i)}))}else n([]);else i(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var i=this;return new e((function(e,r){i._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void r(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void r(e)}else r(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,i){var r,o;return n.then((function(e){o=!1,r=e,t&&t()}),(function(e){o=!0,r=e,t&&t()})).then((function(){o?i(r):e(r)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}()},1170:function(e,t,n){"use strict";n.d(t,{yW:function(){return c},_I:function(){return l},Z1:function(){return u}});var i=n(2844),r=n(1422);e=n.hmd(e);var o={nowSeconds:function(){return Date.now()/1e3}},s=(0,r.KV)()?function(){try{return(0,r.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){var e=(0,i.Rf)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),a=void 0===s?o:{nowSeconds:function(){return(s.timeOrigin+s.now())/1e3}},c=o.nowSeconds.bind(o),l=a.nowSeconds.bind(a),u=function(){var e=(0,i.Rf)().performance;if(e){var t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;return s||c<t?o<=c?e.timeOrigin:a:r}}()},3934:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CREATOR_EVENT_TOUCHCANCEL=t.CREATOR_EVENT_TOUCHEND=t.CREATOR_EVENT_TOUCHMOVE=t.CREATOR_EVENT_TOUCHSTART=t.CREATOR_EVENT_CLICK=t.CREATOR_EVENT_OUT=t.CREATOR_EVENT_LEAVE=t.CREATOR_EVENT_MOVE=t.CREATOR_EVENT_UP=t.CREATOR_EVENT_DOWN=void 0;var n="mousedown",i="mouseup",r="mousemove";"undefined"!=typeof window&&(window.navigator.pointerEnabled?(n="pointerdown",i="pointerup",r="pointermove"):window.navigator.msPointerEnabled&&(n="MSPointerDown",i="MSPointerUp",r="MSPointerMove"));var o=n;t.CREATOR_EVENT_DOWN=o;var s=i;t.CREATOR_EVENT_UP=s;var a=r;t.CREATOR_EVENT_MOVE=a,t.CREATOR_EVENT_LEAVE="mouseleave",t.CREATOR_EVENT_OUT="mouseout",t.CREATOR_EVENT_CLICK="click",t.CREATOR_EVENT_TOUCHSTART="touchstart",t.CREATOR_EVENT_TOUCHMOVE="touchmove",t.CREATOR_EVENT_TOUCHEND="touchend",t.CREATOR_EVENT_TOUCHCANCEL="touchcancel"},7366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(8775)),r=c(n(3522)),o=c(n(8403)),s=c(n(2037)),a=c(n(9295));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"getRenderer",value:function(e,t,n,s){var a=null;if(1===e)a=new i.default(t,n,s);else if(2===e)a=new r.default(t,n,s);else{if(3!==e)throw new Error("Version {version} not implemented");a=new o.default(t,n,s)}return a}},{key:"getCreator",value:function(e,t,n,i){var r=null;return 3===e&&(r=new s.default(t,n,i)),r}},{key:"getSchema",value:function(e){var t=null;return 3===e&&(t=a.default),t}}],null&&l(t.prototype,null),n&&l(t,n),e}();t.default=u},4496:function(e,t,n){"use strict";t.Z=void 0;var i,r=(i=n(7366))&&i.__esModule?i:{default:i},o=n(7750);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a="clear",c="undo",l="redo",u=!1,d=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.info=n,this.info.data=this.info.data.map((function(e,t){return Object.assign({},e,{id:t})})),this.options=Object.assign({},{append:!0,devicePixelRatio:window.devicePixelRatio||1},i),this._schema=null,this._detectMetaVersion(),this._detectSchema(),this.annotationStack=[],!0===i.create&&this._initUndoStack(),this.redoStack=[],this.renderer=null,this.creator=null,this.listeners={},this._addRenderer(),this.renderer.render(),!0===i.create&&this._getMetaVersion()>=3&&(this._addCreator(i.creatorZoom||1),this._renderTextAnnotations())}var t,n;return t=e,(n=[{key:"_getMetaVersion",value:function(){return-1===Object.keys(this.info).indexOf("meta")&&(this.info.meta={}),"number"!=typeof this.info.meta.version&&(this.info.meta.version=this._detectMetaVersion()),this.info.meta.version}},{key:"_detectMetaVersion",value:function(){var e=this,t=3;return function(){var t=!1;if(e.info.data.length>0){var n=e.info.data[0].points[0];n.hasOwnProperty("x")&&n.hasOwnProperty("y")&&(t=!0)}return t}()?t=1:function(){var t=!1;if(e.info.data.length>0){var n=e.info.data[0];n.hasOwnProperty("coords")&&"normalized"===n.coords&&(t=!0)}return t}()&&(t=2),t}},{key:"_detectSchema",value:function(){this.schema=r.default.getSchema(this._getMetaVersion())}},{key:"_initUndoStack",value:function(){var e=this;this.annotationStack=this.info.data.map((function(t){if(t)return t.type===e.schema.TYPE_TEXT?Object.assign({},t,{type:e.schema.TYPE_TEXT_TMP}):t}))}},{key:"save",value:function(){var e=this;if(!0===this.options.create){this.info.data=this._getData(),this._initUndoStack();var t=this.info.data.filter((function(t){return!(t.type===e.schema.TYPE_TEXT||t.type===e.schema.TYPE_TEXT_TMP)}));this.renderer.setAnnotations(t),this.renderer.render()}}},{key:"_renderTextAnnotations",value:function(){var e=this;this.info.data.filter((function(t){return t.type===e.schema.TYPE_TEXT})).forEach((function(t){e.creator.restoreTextBox(t,t.id)}))}},{key:"_addRenderer",value:function(){var e=this,t=!0===this.options.create?this.info.data.filter((function(t){return!(t.type===e.schema.TYPE_TEXT||t.type===e.schema.TYPE_TEXT_TMP)})):this.info.data;this.renderer=r.default.getRenderer(this._getMetaVersion(),this.element,t,this)}},{key:"_addCreator",value:function(e){this.creator=r.default.getCreator(this._getMetaVersion(),this.element,[],this),this.creator.setZoomRatio(e),this.creator.on("annotation",function(e){this._doStackAction.call(this,"add",e)}.bind(this)),this.creator.on("settings-updated",function(){this._notify("update")}.bind(this))}},{key:"_doStackAction",value:function(e,t){var n=this,i=this,r=this.getSchema();if(e===a)i.annotationStack.push(a),i.annotationStack.forEach((function(e){e.type===r.TYPE_TEXT_TMP&&i.creator.hideTextBox(e.id,u)})),i.redoStack=[];else if("add"===e)!function(){if(!t)throw new Error("Could not add annotation to the stack ".concat(JSON.stringify(t)));i.annotationStack.push(t),i.redoStack=[]}();else if(e===c)!function(){var e=i.annotationStack.pop();if(!e)throw new Error("Could not undo the action ".concat(JSON.stringify(e)));e.type===r.TYPE_TEXT_TMP?i.creator.hideTextBox(e.id,true):e===a&&function(){for(var e=i.annotationStack.lastIndexOf(a)+1,t=i.annotationStack.length,n=e;n<t;n++){var o=i.annotationStack[n];o.type===r.TYPE_TEXT_TMP&&i.creator.showTextBox(o.id,u)}}(),i.redoStack.push(e)}();else{if(e!==l)throw new Error("Unknown stack action ".concat(e));!function(){var e=i.redoStack.pop();if(!e)throw new Error("Could not redo the action ".concat(JSON.stringify(e)));e.type===r.TYPE_TEXT_TMP?i.creator.showTextBox(e.id,true):e===a&&function(){for(var e=i.annotationStack.lastIndexOf(a)+1,t=i.annotationStack.length,n=e;n<t;n++){var o=i.annotationStack[n];o.type===r.TYPE_TEXT_TMP&&i.creator.hideTextBox(o.id,u)}}(),i.annotationStack.push(e)}()}var o=this.annotationStack,s=this.annotationStack.lastIndexOf(a);s>-1&&(o=this.annotationStack.slice(s+1)),!0===this.options.create&&(o=o.filter((function(e){return!(e.type===n.schema.TYPE_TEXT_TMP||e.type===n.schema.TYPE_TEXT)}))),this.renderer.setAnnotations(o),this.renderer.render(),this._notify("update")}},{key:"getSchema",value:function(){if(this.creator)return this.creator.getSchema()}},{key:"setToolType",value:function(e){this.creator&&this.creator.setToolType(e)}},{key:"getToolType",value:function(){if(this.creator)return this.creator.getToolType()}},{key:"finish",value:function(){this.creator&&"function"==typeof this.creator.finishTextAnnotations&&this.creator.finishTextAnnotations()}},{key:"setToolSize",value:function(e){this.creator&&this.creator.setToolSize(e)}},{key:"getToolSize",value:function(){if(this.creator)return this.creator.getToolSize()}},{key:"setToolColor",value:function(e){this.creator&&this.creator.setToolColor(e)}},{key:"getToolColor",value:function(){if(this.creator)return this.creator.getToolColor()}},{key:"getActiveTextBoxColorId",value:function(){if(this.creator)return this.creator.getActiveTextBoxColorId()}},{key:"getActiveTextBoxColorSizeIndex",value:function(){if(this.creator)return this.creator.getActiveTextBoxColorSizeIndex()}},{key:"undo",value:function(){this.canUndo()&&this._doStackAction.call(this,c)}},{key:"canUndo",value:function(){return this.annotationStack.length>0}},{key:"redo",value:function(){this.canRedo()&&this._doStackAction.call(this,l)}},{key:"canRedo",value:function(){return this.redoStack.length>0}},{key:"clear",value:function(){this.canClear()&&this._doStackAction.call(this,a)}},{key:"canClear",value:function(){var e=this.annotationStack.lastIndexOf(a);return this.annotationStack.slice(e+1).length>0}},{key:"reset",value:function(){var e=this;if(!0===this.options.create){for(var t in this.annotationStack.forEach((function(t){var n=e.info.data.map((function(e){return e.id})).indexOf(t.id);"TEXT_TMP"===t.type&&-1===n&&(e.creator.hideTextBox(t.id,!1),delete e.creator.textBoxMap[t.id])})),this.creator.finishTextAnnotations(),this.creator.textBoxMap)this.creator.showTextBox(t,!1);this._initUndoStack();var n=this.info.data.filter((function(t){return!(t.type===e.schema.TYPE_TEXT||t.type===e.schema.TYPE_TEXT_TMP)}));this.renderer.setAnnotations(n),this.renderer.render()}}},{key:"didAnnotationsChange",value:function(){var e=this;if(!0===this.options.create){var t=this.info.data||[],n=t.filter((function(t){return!(t.type===e.schema.TYPE_TEXT||t.type===e.schema.TYPE_TEXT_TMP)})),i=t.filter((function(t){return t.type===e.schema.TYPE_TEXT})),r=this.renderer.getAnnotations(),s=this.annotationStack.filter((function(t){return t.type===e.schema.TYPE_TEXT_TMP||t.type===e.schema.TYPE_TEXT})).map((function(t){return t&&t.type===e.schema.TYPE_TEXT_TMP?(e.creator&&e.creator.textBoxMap&&e.creator.textBoxMap[t.id]&&e.creator.textBoxMap[t.id].isVisible()&&(t=e.creator.textBoxMap[t.id].getData()),t):t}));return!((0,o.isEqual)(n.map((function(e){return e.id})),r.map((function(e){return e.id})))&&(0,o.isEqual)(i,s))}return!1}},{key:"isCreatingText",value:function(){if(this.creator)return this.creator.isCreatingText()}},{key:"resize",value:function(e){this.renderer.resize(),this.creator&&this.creator.resize(e)}},{key:"destroy",value:function(){this.creator&&this.creator.destroy(),this.renderer.destroy()}},{key:"_getData",value:function(){var e=this,t=this.getSchema(),n=this.renderer.getAnnotations(),i=this.annotationStack.filter((function(t){return t.type===e.schema.TYPE_TEXT_TMP||t.type===e.schema.TYPE_TEXT})),r=n.concat(i).map((function(n){return n&&n.type===t.TYPE_TEXT_TMP?(e.creator&&e.creator.textBoxMap&&e.creator.textBoxMap[n.id]&&e.creator.textBoxMap[n.id].isVisible()&&(n=e.creator.textBoxMap[n.id].getData()),n):n})).filter((function(e){return e.type!==t.TYPE_TEXT_TMP}));return this._optimize(r)}},{key:"getData",value:function(){return this._getData().map((function(e){var t=Object.assign({},e);return t.hasOwnProperty("id")&&delete t.id,t}))}},{key:"_optimize",value:function(e){var t=this;return null===this._schema||e.forEach((function(e){[t._schema.TYPE_PEN,t._schema.TYPE_HIGHLIGHTER].indexOf(e.type)>-1&&(e.points=function(e){var t,n=[],i=e.length;if(i>2){for(n.push(e[0]),t=1;t<i-1;t++){var r=n[n.length-1],o=e[t],s=r[0]-o[0],a=r[1]-o[1];Math.sqrt(s*s+a*a)>.005&&n.push(o)}n.push(e[i-1])}else n=e;return n}(e.points))})),e}},{key:"on",value:function(e,t){this.listeners.hasOwnProperty(e)||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"_notify",value:function(e,t){this.listeners.hasOwnProperty(e)&&function(e){for(var n in e)if(e.hasOwnProperty(n))try{var i=e[n];i.call(i,t)}catch(e){}}(this.listeners[e])}}])&&s(t.prototype,n),e}();t.Z=d},7970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(1169))&&i.__esModule?i:{default:i};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s="append",a=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.annotations=n,this.helper=i,this.canvas=null,this.context=null,this.width=0,this.height=0,this.element&&("CANVAS"===this.element.tagName?this._reuseCanvas():(this.domMode=s,this._createCanvas(),this.resize()))}var t,n;return t=e,n=[{key:"_createCanvas",value:function(){this.canvas=r.default.createCanvasForElement(this.element,this.helper.options.devicePixelRatio,this.helper.options.append,this.domMode===s),this.canvas.className+=" annotation-renderer",this.context=this.canvas.getContext("2d")}},{key:"_reuseCanvas",value:function(){this.canvas=this.element,this.canvas.className+=" annotation-renderer",this.context=this.canvas.getContext("2d");var e=this.canvas.getBoundingClientRect();this.width=e.width*this.helper.options.devicePixelRatio,this.height=e.height*this.helper.options.devicePixelRatio}},{key:"resize",value:function(){var e=this.element.getBoundingClientRect();this.width=e.width*this.helper.options.devicePixelRatio,this.height=e.height*this.helper.options.devicePixelRatio,this.canvas.width=e.width*this.helper.options.devicePixelRatio,this.canvas.height=e.height*this.helper.options.devicePixelRatio;var t=0,n=0;this.canvas!==this.element&&(this.domMode!==s&&(t="".concat(this.element.offsetTop,"px"),n="".concat(this.element.offsetLeft,"px")),this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px"),this.canvas.style.top=t,this.canvas.style.left=n),this.render()}},{key:"destroy",value:function(){this._destroyCanvas()}},{key:"_destroyCanvas",value:function(){this.context=null,this.element.parentNode.removeChild(this.canvas),this.canvas=null}},{key:"clear",value:function(){this.context&&this.context.clearRect(0,0,this.width,this.height)}},{key:"getAnnotations",value:function(){return this.annotations}},{key:"setAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.annotations=e,this}}],n&&o(t.prototype,n),e}(),c=a;t.default=c},1169:function(e,t){"use strict";function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i;return t=e,i=[{key:"createCanvasForElement",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=document.createElement("canvas"),o=e.getBoundingClientRect(),s=0,a=0;return i&&(a="".concat(e.offsetLeft,"px"),s="".concat(e.offsetTop,"px")),r.style.position="absolute",r.style.top=s,r.style.left=a,r.style.width="".concat(o.width,"px"),r.style.height="".concat(o.height,"px"),r.width=o.width*t,r.height=o.height*t,i&&n?e.appendChild(r):i&&e.parentNode.insertBefore(r,e.nextSibling),r}}],null&&n(t.prototype,null),i&&n(t,i),e}();t.default=i},8775:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(7970))&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,n,i,r,o=(i=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(i);if(r){var n=u(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function d(){return s(this,d),o.apply(this,arguments)}return t=d,(n=[{key:"render",value:function(){var e=this.context,t=this.annotations;this.width>this.height?(this.canvas.width=1024,this.canvas.height=768):(this.canvas.width=768,this.canvas.height=1024),this.clear(),e.lineCap="round",t.forEach((function(t){!function(t){var n=t.points,i=n.length;if(i>0){var r=n[0];e.beginPath(),e.moveTo(r.x,r.y);for(var o=1;o<i;o++)r=n[o],e.lineTo(r.x,r.y);var s=[255*t.strokeColor.r,255*t.strokeColor.g,255*t.strokeColor.b,t.strokeColor.a].join(",");e.lineWidth=t.lineWidth,e.strokeStyle="rgba(".concat(s,")"),e.stroke()}}(t)}))}}])&&a(t.prototype,n),d}(o.default),h=d;t.default=h},3522:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var r;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,n,i,r,u=(i=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(i);if(r){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function d(){return o(this,d),u.apply(this,arguments)}return t=d,(n=[{key:"render",value:function(){var e=this.context,t=this.width,n=this.height,i=this.annotations;this.clear(),e.lineCap="round",i.forEach((function(i){i.points.length>1&&function(i){var r=i.points,o=r.length,s=r[0],a=s[0]*t,c=s[1]*n;e.beginPath(),e.moveTo(a,c);for(var l=1;l<o;l++)a=(s=r[l])[0]*t,c=s[1]*n,e.lineTo(a,c);"marker"===i.type?e.lineWidth=Math.round(20/750*t):e.lineWidth=Math.round(8/750*t);var u=[i.strokeColor.r,i.strokeColor.g,i.strokeColor.b,i.strokeColor.a/255].join(",");e.strokeStyle="rgba(".concat(u,"})"),e.stroke()}(i)}))}}])&&s(t.prototype,n),d}(((r=n(7970))&&r.__esModule?r:{default:r}).default),d=u;t.default=d},2037:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(1169)),o=l(n(8403)),s=l(n(9295)),a=l(n(9648)),c=n(3934);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},d(e,t,n||e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(m,e);var t,n,i,o,l=(i=m,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(i);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function m(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(i=l.call(this,e,t,n)).eventId=null,i.bindedEventAnnotationStart=i._onEventAnnotationStart.bind(f(i)),i.bindedEventAnnotationEnd=i._onEventAnnotationEnd.bind(f(i)),i.bindedEventAnnotationMove=i._onEventAnnotationMove.bind(f(i)),i.bindedEventTextStart=i._onEventTextStart.bind(f(i)),i.bindedEventTextEnd=i._onEventTextEnd.bind(f(i)),i.bindedEventTextMove=i._onEventTextMove.bind(f(i)),i.bindedEventLeavePage=i._onEventLeavePage.bind(f(i)),i.toolType=null,i.toolSize=null,i.toolColor=null,i.zoomRatio=n.devicePixelRatio,i.creatingTextbox=null,i.isTextboxActive=!1,i._isCreatingAnnotation=!1,i.textBoxMap={},i.schema=s.default,i.enabled=!0,i.listeners={},i}return t=m,n=[{key:"_uniqId",value:function(){return Date.now()+Math.random()}},{key:"_createCanvas",value:function(){this.canvas=r.default.createCanvasForElement(this.element,this.helper.options.devicePixelRatio,this.helper.options.append,!0),this.canvas.className+=" annotation-creator",this.context=this.canvas.getContext("2d")}},{key:"_onEventAnnotationStart",value:function(e){!this.getIsEnabled()||0!==e.button&&e.type!==c.CREATOR_EVENT_TOUCHSTART||this._isCreatingAnnotation||(this.eventId=e.pointerId,this._isCreatingAnnotation=!0,document.body.addEventListener(c.CREATOR_EVENT_TOUCHEND,this.bindedEventAnnotationEnd,!0),document.body.addEventListener(c.CREATOR_EVENT_UP,this.bindedEventAnnotationEnd,!0),window.addEventListener(c.CREATOR_EVENT_TOUCHCANCEL,this.bindedEventLeavePage,!0),window.addEventListener(c.CREATOR_EVENT_OUT,this.bindedEventLeavePage,!0),this.canvas.addEventListener(c.CREATOR_EVENT_TOUCHMOVE,this.bindedEventAnnotationMove,!0),this.canvas.addEventListener(c.CREATOR_EVENT_MOVE,this.bindedEventAnnotationMove,!0),this.addAnnotationPoint(e))}},{key:"_onEventAnnotationEnd",value:function(){this._isCreatingAnnotation=!1,document.body.removeEventListener(c.CREATOR_EVENT_TOUCHEND,this.bindedEventAnnotationEnd),document.body.removeEventListener(c.CREATOR_EVENT_UP,this.bindedEventAnnotationEnd),window.removeEventListener(c.CREATOR_EVENT_TOUCHCANCEL,this.bindedEventLeavePage),window.removeEventListener(c.CREATOR_EVENT_OUT,this.bindedEventLeavePage),this.canvas.removeEventListener(c.CREATOR_EVENT_TOUCHMOVE,this.bindedEventAnnotationMove),this.canvas.removeEventListener(c.CREATOR_EVENT_MOVE,this.bindedEventAnnotationMove),this.notify("annotation",this.annotations[0]),this.annotations=[],this.clear()}},{key:"_onEventAnnotationMove",value:function(e){e.pointerId&&e.pointerId!==this.eventId||this.addAnnotationPoint(e)}},{key:"addAnnotationPoint",value:function(e,t){if(this._isCreatingAnnotation){var n=this,i=(e.offsetX?e.offsetX:e.touches?e.touches[0].pageX-e.touches[0].target.getBoundingClientRect().left:e.layerX)+(u=0,t&&(u=e.currentTarget.offsetLeft),u),r=(e.offsetY?e.offsetY:e.touches?e.touches[0].pageY-e.touches[0].target.getBoundingClientRect().top:e.layerY)+(l=0,t&&(l=e.currentTarget.offsetTop),l),o=this.helper.options.devicePixelRatio,s=i/(this.width/o),a=r/(this.height/o),c=null;!function(){if(null===n.toolType)throw new Error("Annotation type not initialized");if(null===n.toolSize)throw new Error("Annotation size not initialized");if(null===n.toolColor)throw new Error("Annotation color not initialized")}(),0===n.annotations.length&&n.annotations.push({type:n.toolType,color:n.toolColor,size:n.toolSize,points:[]}),this.annotations[0]&&this.annotations[0].points&&this.annotations[0].points.length>0&&(c=this.annotations[0].points[this.annotations.length-1]),null!==c&&c[0]===s&&c[1]===a||(this.annotations[0].points.push([s,a]),this.render())}var l,u}},{key:"restoreTextBox",value:function(e,t){var n=this.element.getBoundingClientRect(),i={};i.left=n.width*e.points[0][0],i.top=n.height*e.points[0][1],i.width=(e.points[1][0]-e.points[0][0])*n.width,i.height=(e.points[1][1]-e.points[0][1])*n.height;var r=new a.default(i,e.size,e.color,this);r.id=t,r.create(this.element,!0,e.text),this.textBoxMap[t]=r}},{key:"_onEventTextStart",value:function(e){var t,n,i,r,o,s,c=this,l=this.findActiveTextAnnotations();this.getIsEnabled()&&0===e.button&&(l.length>0?l.forEach((function(e){e.finish()})):(t=c._uniqId(),n=c.toolSize*c.zoomRatio*1e3,i=parseInt(1.15*n,10),r=Math.max((e.offsetY?e.offsetY:e.layerY)-i/2,0),o={left:e.offsetX?e.offsetX:e.layerX,top:r,width:200,height:i},(s=new a.default(o,c.toolSize,c.toolColor,c)).id=t,s.create(c.element),c.textBoxMap[t]=s,c.notify("annotation",{type:c.schema.TYPE_TEXT_TMP,id:t,points:[],restoreData:{dimensions:o,toolSize:c.toolSize,toolColor:c.toolColor}}))),this.notify("settings-updated")}},{key:"_onEventTextEnd",value:function(){}},{key:"_onEventTextMove",value:function(){}},{key:"_onEventLeavePage",value:function(e){var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||this._onEventAnnotationEnd()}},{key:"getSchema",value:function(){return this.schema}},{key:"setZoomRatio",value:function(e){e!==this.setZoomRatio&&(this.zoomRatio=e,this._updateTextBoxes())}},{key:"setToolType",value:function(e){var t=this;!function(){if(-1===t.schema.TYPES.indexOf(e))throw new Error("Invalid tool type specified")}(),this.toolType===this.schema.TYPE_TEXT?(null!==t.creatingTextbox&&(t.creatingTextbox.finish(),t.creatingTextbox=null),t.canvas.removeEventListener(c.CREATOR_EVENT_DOWN,t.bindedEventTextStart)):null!==this.toolType&&(t.canvas.removeEventListener(c.CREATOR_EVENT_TOUCHSTART,t.bindedEventAnnotationStart),t.canvas.removeEventListener(c.CREATOR_EVENT_DOWN,t.bindedEventAnnotationStart)),this.toolType=e,e===this.schema.TYPE_TEXT?this.canvas.addEventListener(c.CREATOR_EVENT_DOWN,this.bindedEventTextStart):(this.finishTextAnnotations(),this.canvas.addEventListener(c.CREATOR_EVENT_TOUCHSTART,this.bindedEventAnnotationStart),this.canvas.addEventListener(c.CREATOR_EVENT_DOWN,this.bindedEventAnnotationStart)),this.notify("settings-updated")}},{key:"getToolType",value:function(){return this.toolType}},{key:"setToolSize",value:function(e){null!==this.toolType&&this.schema.TYPE_SIZES[this.toolType].indexOf(e)>-1&&(this.toolSize=e,this.setActiveTextBoxSize(e),this.notify("settings-updated"))}},{key:"getToolSize",value:function(){return this.toolSize}},{key:"setToolColor",value:function(e){this.schema.COLORS.indexOf(e)>-1&&(this.toolColor=e,this.setActiveTextBoxColor(e),this.notify("settings-updated"))}},{key:"setActiveTextBoxColor",value:function(e){var t=this.findActiveTextAnnotations();if(t.length)for(var n in t)t.hasOwnProperty(n)&&(t[n].setColor(e),t[n].setFocus())}},{key:"setActiveTextBoxSize",value:function(e){if(this.toolType===this.schema.TYPE_TEXT){var t=this.findActiveTextAnnotations();t.length&&function(t){for(var n in t)t.hasOwnProperty(n)&&(t[n].setSize(e),t[n].setFocus())}(t)}}},{key:"getActiveTextBoxColorId",value:function(){var e=this.findActiveTextAnnotations()[0],t=0;if(e){var n=e.getColor(),i=this.schema.COLORS.indexOf(n);i>=0&&(t="color-".concat(i+1))}return t}},{key:"getActiveTextBoxColorSizeIndex",value:function(){var e,t=this.findActiveTextAnnotations()[0];if(t){var n=t.getSize();e=this.schema.TYPE_SIZES.TEXT.indexOf(n)}return e}},{key:"getToolColor",value:function(){return this.toolColor}},{key:"isCreatingText",value:function(){return this.isTextboxActive}},{key:"setTextboxActive",value:function(e){this.isTextboxActive=e,this.notify("settings-updated")}},{key:"setIsEnabled",value:function(e){if(!0!==e&&!1!==e)throw"Invalid state";e!==this.enabled&&(this.enabled=e,this.notify("settings-updated")),e||this.finishTextAnnotations()}},{key:"getIsEnabled",value:function(){return this.enabled}},{key:"hideTextBox",value:function(e,t){this.textBoxMap[e]&&this.textBoxMap[e].hide(t)}},{key:"showTextBox",value:function(e,t){this.textBoxMap[e]&&this.textBoxMap[e].show(t)}},{key:"_updateTextBoxes",value:function(){for(var e in this.textBoxMap)this.textBoxMap.hasOwnProperty(e)&&this.textBoxMap[e].setRatio(this.zoomRatio)}},{key:"_updateTextBoxesPosition",value:function(e,t){for(var n in this.textBoxMap)this.textBoxMap.hasOwnProperty(n)&&this.textBoxMap[n].updatePosition(e,t)}},{key:"setTextBoxesEditMode",value:function(e){for(var t in this.textBoxMap)this.textBoxMap.hasOwnProperty(t)&&this.textBoxMap[t].setEditMode(e)}},{key:"resize",value:function(e){d(v(m.prototype),"resize",this).call(this),"number"==typeof e&&this.setZoomRatio(e)}},{key:"getTextBoxAnnotations",value:function(){var e=[];for(var t in this.textBoxMap)this.textBoxMap.hasOwnProperty(t)&&e.push(this.textBoxMap[t].getData());return e}},{key:"isCreatingAnnotation",value:function(){return this._isCreatingAnnotation}},{key:"finishTextAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var t in this.textBoxMap)this.textBoxMap.hasOwnProperty(t)&&-1===e.indexOf(t)&&this.textBoxMap[t].finish()}},{key:"findActiveTextAnnotations",value:function(){var e,t,n=[];for(e in this.textBoxMap)this.textBoxMap.hasOwnProperty(e)&&(t=this.textBoxMap[e])._editing&&n.push(t);return n}},{key:"focusNextTextBox",value:function(e){e=Number(e);var t=Object.keys(this.textBoxMap).map(Number),n=t.indexOf(e),i=t[n===t.length-1?0:n+1];this.textBoxMap[i]._boundClosedTextAnnotationClick&&this.textBoxMap[i]._boundClosedTextAnnotationClick()}},{key:"focusPreviousTextBox",value:function(e){e=Number(e);var t=Object.keys(this.textBoxMap).map(Number),n=t.indexOf(e),i=t[0===n?t.length-1:n-1];this.textBoxMap[i]._boundClosedTextAnnotationClick&&this.textBoxMap[i]._boundClosedTextAnnotationClick()}},{key:"on",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"notify",value:function(e,t){e in this.listeners&&this.listeners[e].forEach((function(e){try{e.call(e,t)}catch(e){}}))}}],n&&u(t.prototype,n),m}(o.default),g=m;t.default=g},8403:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(7970)),o=s(n(9295));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(h,e);var t,n,i,r,s=(i=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(i);if(r){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function h(){return a(this,h),s.apply(this,arguments)}return t=h,(n=[{key:"render",value:function(){var e=this.context,t=this.height,n=this.width,i=this.annotations,r=o.default;this.clear(),e.lineCap="round",e.lineJoin="round",e.miterLimit=10,i.forEach((function(i){i&&([r.TYPE_PEN,r.TYPE_HIGHLIGHTER].indexOf(i.type)>-1?function(i){var o=i.points,s=o.length;if(s>0){var a=o[0],c=a[0]*n,l=a[1]*t;e.beginPath(),e.moveTo(c,l),e.lineTo(c+.01,l);for(var u=1;u<s;u++)c=(a=o[u])[0]*n,l=a[1]*t,e.lineTo(c,l);e.lineWidth=parseFloat(i.size)*n,e.strokeStyle="#"+i.color,e.globalAlpha=r.TYPE_COLOR_ALPHA[i.type],e.stroke()}}(i):i.type===r.TYPE_TEXT&&function(i){var o=i.points;if(2!==o.length)throw new Error("Text annotation expects 2 points");var s,a,c=o[0][0]*n,l=o[0][1]*t,u=o[1][0]*n,d=u-c,h=i.size*n,p=l,f=0;function v(){var t=(s=s.trim()).split("\n"),n=t[0],i=e.measureText(n).width;if(i>d){for(;n.indexOf(" ")>-1&&i>d;)n=n.substr(0,n.lastIndexOf(" ")),i=e.measureText(n).width;for(;i>d&&n.length>1;)n=n.substr(0,n.length-1),i=e.measureText(n).width;t[0]=t[0].substr(n.length),s=t.join("\n")}else t.shift(),s=t.join("\n");return n}for(s=i.text,a=v();"string"==typeof a&&a.length>0;)f+=r.TEXT_LINE_HEIGHT*h,a=v();for(e.fillStyle="rgba(255, 255, 255, 0.25)",e.fillRect(c,l,u-c,f),e.globalAlpha=1,e.font=h+"px "+r.TEXT_FONT_FAMILY.split(",")[0].trim(),e.fillStyle="#"+i.color,e.fontFamily=r.TEXT_FONT_FAMILY,s=i.text,a=v();"string"==typeof a&&a.length>0;)e.fillText(a,c,p+h),p+=r.TEXT_LINE_HEIGHT*h,a=v()}(i))}))}}])&&c(t.prototype,n),h}(r.default),p=h;t.default=p},9295:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={VERSION:3,TYPE_PEN:"PEN",TYPE_HIGHLIGHTER:"HIGHLIGHTER",TYPE_TEXT:"TEXT",TYPE_TEXT_TMP:"TEXT_TMP",COLORS:["f44336","E91E63","FF9800","FFEB3B","4CAF50","03A9F4","9C27B0","FFFFFF","000000"],TEXT_FONT_FAMILY:"helvetica, sans-serif",TEXT_LINE_HEIGHT:1.2};n.TYPES=[n.TYPE_PEN,n.TYPE_HIGHLIGHTER,n.TYPE_TEXT],n.TYPE_SIZES={},n.TYPE_SIZES[n.TYPE_PEN]=[.008,.015,.024],n.TYPE_SIZES[n.TYPE_HIGHLIGHTER]=[.018,.028,.044],n.TYPE_SIZES[n.TYPE_TEXT]=[.016,.032,.047],n.TYPE_COLOR_ALPHA={},n.TYPE_COLOR_ALPHA[n.TYPE_PEN]=1,n.TYPE_COLOR_ALPHA[n.TYPE_HIGHLIGHTER]=.5,n.TYPE_COLOR_ALPHA[n.TYPE_TEXT]=1;var i=n;t.default=i},9648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=n(3934),o=(i=n(9295))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a="move",c="resize",l="left",u="right",d="yellow",h=15,p=1e3,f=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.creator=r,this.id=null,this.ratio=r.zoomRatio,this.size=null,this.color=null,this.realRect={},this.rect={},this._visibleIndividual=!0,this._visibleAll=!0,this._dragging=!1,this._created=!1,this._editing=!1,this._fixedDimensions={},this.setRect(t),this.setColor(i),this.setSize(n),this.parent=null,this.element=null,this.repositionHandleLeft=null,this.resizeHandleRight=null,this._boundTextboxBlur=null,this._boundEditableKeyUp=null,this._boundResizeLeftMouseDown=null,this._boundResizeLeftMouseUp=null,this._boundResizeLeftMouseMove=null,this._boundResizeRightMouseDown=null,this._boundResizeRightMouseUp=null,this._boundResizeRightMouseMove=null}var t,n;return t=e,(n=[{key:"hide",value:function(e){e?this._visibleIndividual=!1:this._visibleAll=!1,this._updateProperties()}},{key:"show",value:function(e){e?this._visibleIndividual=!0:this._visibleAll=!0,this.isVisible()&&(this.element.style.display="block"),this._updateProperties()}},{key:"isVisible",value:function(){return this._visibleIndividual&&this._visibleAll}},{key:"setRect",value:function(e){for(var t in this.rect=e,this.realRect={},e)e.hasOwnProperty(t)&&(this.realRect[t]=e[t]/this.ratio)}},{key:"setSize",value:function(e){this.size=parseFloat(e),this.element&&this._updateProperties()}},{key:"getSize",value:function(){return this.size}},{key:"setRatio",value:function(e){this.ratio!==e&&(this.ratio=e,this.rect.top=this.realRect.top*e,this.rect.left=this.realRect.left*e,this.rect.width=this.realRect.width*e,this.rect.height=this.realRect.height*e,this._fixedDimensions.width&&(this._fixedDimensions.width=this._fixedDimensions.realWidth*e),this._fixedDimensions.widthByMax&&delete this._fixedDimensions.widthByMax,this._updateProperties(!0),this._updateProperties())}},{key:"setColor",value:function(e){this.color=e,this.element&&this._updateProperties()}},{key:"getColor",value:function(){return this.color}},{key:"setFocus",value:function(){this.element.focus()}},{key:"create",value:function(e,t,n){if(this._created)throw new Error("This TextAnnotationComponent has already been created");this.parent=e,this.repositionHandleLeft=this._createHandle(a,l),this.resizeHandleRight=this._createHandle(c,u),this.element=this._createContentElement(),this._editing=!0,this._created=!0,e.appendChild(this.element),e.appendChild(this.repositionHandleLeft),e.appendChild(this.resizeHandleRight);var i=this.rect.width;if(this._updateProperties(),this._addEditingEventListeners(),t)return this.element.innerHTML=n,this._updateProperties(),void(i<this.rect.width&&(this._fixedDimensions.width=i,this._fixedDimensions.realWidth=i/this.ratio,this._updateProperties()));this._focusElement(),this.creator.setTextboxActive(!0)}},{key:"getData",value:function(){var e=this._getParentRect(),t=this.rect.left/e.width,n=this.rect.top/e.height,i=(this.rect.left+this.rect.width)/e.width,r=(this.rect.top+this.rect.height)/e.height;return{id:this.id,type:o.default.TYPE_TEXT,text:this.getText(),color:this.color,size:this.size,points:[[t,n],[i,r]]}}},{key:"getText",value:function(){return this.element.value}},{key:"remove",value:function(){this.parent.removeChild(this.element)}},{key:"finish",value:function(){this._editing&&(this._editing=!1,this._updateProperties(),this._removeEditingEventListeners(),this._addFinishedEventListeners(),this.creator.setTextboxActive(!1),""===this.getText()&&(delete this.creator.textBoxMap[this.id],this.remove()))}},{key:"_escapeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}},{key:"_getParentRect",value:function(){var e=this.parent.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this.parentRect=e),this.parentRect}},{key:"_calculateRect",value:function(){var e=this,t={},n=this.element.getBoundingClientRect(),i=this._getParentRect(),r=function(t,n,i,r){var o=e._createContentElement(!0),s=e._createContentElement(!0);o.innerHTML=e._escapeHtml(t).replace(/\n/g,"<br>"),s.innerHTML=e._escapeHtml(t).replace(/\n/g,"<br>")+"|",e._fixedDimensions.width?(o.style.width=e._fixedDimensions.width,o.style.display="block",s.style.width=e._fixedDimensions.width,s.style.display="block"):(o.style.width="auto",o.style.display="inline",s.style.width="auto",s.style.display="inline"),document.body.appendChild(o),document.body.appendChild(s);var a=o.getBoundingClientRect(),c=s.getBoundingClientRect(),l=(e._getParentRect(),Math.round(a.width)),u=Math.max(parseInt(n*i*1.2*p,10),Math.round(c.height));return document.body.removeChild(o),document.body.removeChild(s),[l,u]}(this.element.value,this.size,this.ratio),o=r[0],s=r[1];o+=this.size*this.ratio*p;var a,c=i.left+i.width-n.left-20,l=i.top+i.height-n.top;return t.width=(a=null,e._fixedDimensions.width?a=e._fixedDimensions.width:e._fixedDimensions.widthByMax?a=e._fixedDimensions.widthByMax:o>c?(a=Math.round(c),e._fixedDimensions.widthByMax=c):a=Math.round(Math.min(c,Math.max(25,o))),a),s>l?i.height-s>0?(t.top=Math.round(i.height-s),t.height=Math.round(s)):(t.top=0,t.height=Math.round(i.height)):(t.top=Math.round(n.top-i.top),t.height=Math.round(s)),t.left=Math.round(n.left-i.left),this._dragging||t.top!==this.rect.top+1||(t.top=this.rect.top),t}},{key:"_updateProperties",value:function(e){!e&&this.isVisible()&&(this.rect=this._calculateRect(),this.realRect.width=this.rect.width/this.ratio,this.realRect.left=this.rect.left/this.ratio,this.realRect.top=this.rect.top/this.ratio,this.realRect.height=this.rect.height/this.ratio),this.element.style.top=this.rect.top+"px",this.element.style.left=this.rect.left+"px",this.element.style.width=this.rect.width+"px",this.element.style.height=this.rect.height+"px",this.element.style.color="#"+this.color,this.element.style.fontSize=parseInt(this.size*this.ratio*p,10)+"px",this.element.style.background="rgba(255, 255, 255, 0.25)",this.element.contentEditable=this._editing,this._editing&&this.isVisible()?(this.element.style.display="block",this.element.style.borderLeftColor=d,this.element.style.borderRightColor=this.element.style.borderLeftColor,this.repositionHandleLeft.style.display="block",this.repositionHandleLeft.style.top=this.rect.top+Math.round((this.rect.height-h)/2)+"px",this.repositionHandleLeft.style.left=this.rect.left-Math.round(7.5)+"px",this.resizeHandleRight.style.display="block",this.resizeHandleRight.style.top=this.repositionHandleLeft.style.top,this.resizeHandleRight.style.left=this.rect.left+this.rect.width+"px"):this.isVisible()?(this.element.style.display="block",this.element.style.borderLeftColor="transparent",this.element.style.borderRightColor=this.element.style.borderLeftColor,this.repositionHandleLeft.style.display="none",this.resizeHandleRight.style.display="none"):(this.element.style.display="none",this.repositionHandleLeft.style.display="none",this.resizeHandleRight.style.display="none")}},{key:"_addEditingEventListeners",value:function(){if(!this._created)throw new Error("Can not add event listeners when the elements have not been created");var e=0,t=0;this._boundEditableKeyUp=function(e){13===e.which&&(this._fixedDimensions.width=this.rect.width,this._fixedDimensions.realWidth=this.rect.width/this.ratio),this._updateProperties()}.bind(this),this._boundEditableKeyDown=function(e){e.stopPropagation(),9===e.which&&(e.shiftKey?this.creator.focusPreviousTextBox(this.id):this.creator.focusNextTextBox(this.id),e.preventDefault())}.bind(this),this._boundResizeLeftMouseDown=function(n){n.preventDefault(),0===n.button&&(this._dragging=!0,document.addEventListener(r.CREATOR_EVENT_MOVE,this._boundResizeLeftMouseMove),document.addEventListener(r.CREATOR_EVENT_UP,this._boundResizeLeftMouseUp),e=n.clientX,t=n.clientY)}.bind(this),this._boundResizeLeftMouseUp=function(e){0===e.button&&(this.dragging=!1,document.removeEventListener(r.CREATOR_EVENT_MOVE,this._boundResizeLeftMouseMove),document.removeEventListener(r.CREATOR_EVENT_UP,this._boundResizeLeftMouseUp))}.bind(this),this._boundResizeLeftMouseMove=function(n){var i=e-n.clientX,r=t-n.clientY;e=n.clientX,t=n.clientY;var o=this._getParentRect(),s=7.5,a=o.width-s,c=o.height-s;this.rect.left-i>s&&this.rect.left-i+this.rect.width<a&&(this.element.style.left=this.rect.left-i+"px"),this.rect.top-r>s&&this.rect.top-r+this.element.getBoundingClientRect().height<c&&(this.element.style.top=this.rect.top-r+"px"),this._updateProperties()}.bind(this),this._boundResizeRightMouseDown=function(n){n.preventDefault(),0===n.button&&(document.addEventListener(r.CREATOR_EVENT_MOVE,this._boundResizeRightMouseMove),document.addEventListener(r.CREATOR_EVENT_UP,this._boundResizeRightMouseUp),e=n.clientX,t=n.clientY)}.bind(this),this._boundResizeRightMouseUp=function(e){0===e.button&&(document.removeEventListener(r.CREATOR_EVENT_MOVE,this._boundResizeRightMouseMove),document.removeEventListener(r.CREATOR_EVENT_UP,this._boundResizeRightMouseUp))}.bind(this),this._boundResizeRightMouseMove=function(n){var i=n.clientX-e,r=this._getParentRect();e=n.clientX,t=n.clientY,this.rect.width+i>25&&this.rect.left+this.rect.width+i<r.width-10&&(this._fixedDimensions.width=this.rect.width+i,this._fixedDimensions.realWidth=this._fixedDimensions.width/this.ratio,this._updateProperties())}.bind(this),this._boundTextboxBlur=function(){this.creator.setTextboxActive(!1)}.bind(this),this.element.addEventListener("blur",this._boundTextboxBlur),this.element.addEventListener("keyup",this._boundEditableKeyUp),this.element.addEventListener("keydown",this._boundEditableKeyDown),this.repositionHandleLeft.addEventListener(r.CREATOR_EVENT_DOWN,this._boundResizeLeftMouseDown),this.resizeHandleRight.addEventListener(r.CREATOR_EVENT_DOWN,this._boundResizeRightMouseDown)}},{key:"_removeEditingEventListeners",value:function(){this.element.removeEventListener("blur",this._boundTextboxBlur),this.element.removeEventListener("keyup",this._boundEditableKeyUp),this.element.removeEventListener("keydown",this._boundEditableKeyDown),this.repositionHandleLeft.removeEventListener(r.CREATOR_EVENT_DOWN,this._boundResizeLeftMouseDown),this.resizeHandleRight.removeEventListener(r.CREATOR_EVENT_DOWN,this._boundResizeRightMouseDown)}},{key:"_addFinishedEventListeners",value:function(){this._boundClosedTextAnnotationClick=function(e){if(this.creator.finishTextAnnotations([this.id]),!this.creator.getIsEnabled())return this.element.blur(),e.preventDefault(),void e.stopPropagation();this._editing=!0,this.creator.setTextboxActive(!0),this._removeFinishedEventListeners(),this._updateProperties(),this._addEditingEventListeners(),this._focusElement()}.bind(this),this._boundClosedTextAnnotationMouseDown=function(e){this.creator.getIsEnabled()||(e.preventDefault(),e.stopPropagation())}.bind(this),this._boundClosedTextAnnotationMouseMove=function(e){this.creator.isCreatingAnnotation()&&this.creator.addAnnotationPoint(e,!0)}.bind(this),this.element.addEventListener(r.CREATOR_EVENT_MOVE,this._boundClosedTextAnnotationMouseMove),this.element.addEventListener(r.CREATOR_EVENT_DOWN,this._boundClosedTextAnnotationMouseDown),this.element.addEventListener(r.CREATOR_EVENT_CLICK,this._boundClosedTextAnnotationClick)}},{key:"_removeFinishedEventListeners",value:function(){this.element.removeEventListener(r.CREATOR_EVENT_MOVE,this._boundClosedTextAnnotationMouseMove),this.element.removeEventListener(r.CREATOR_EVENT_DOWN,this._boundClosedTextAnnotationMouseDown),this.element.removeEventListener(r.CREATOR_EVENT_CLICK,this._boundClosedTextAnnotationClick)}},{key:"_focusElement",value:function(){var e=this;window.setTimeout((function(){return e.element.focus()}),50)}},{key:"_createContentElement",value:function(e){var t;"boolean"!=typeof e&&(e=!1),t=e?"div":"textarea";var n=document.createElement(t);return n.style.fontFamily=o.default.TEXT_FONT_FAMILY,n.style.lineHeight=o.default.TEXT_LINE_HEIGHT,n.style.fontSize=parseInt(this.size*this.ratio*p,10)+"px",n.style.wordBreak="normal",n.style.wordWrap="break-word",n.style.position="absolute",n.style.boxSizing="border-box",n.style.setProperty("box-sizing","border-box","important"),n.style.outline="none",n.style.boxShadow="none",n.style.borderTop="none",n.style.borderBottom="none",n.style.borderLeft="2px solid yellow",n.style.borderRight="2px solid yellow",n.style.padding=0,n.style.margin=0,n.autocomplete="off",n.autocorrect="off",n.autocapitalize="off",n.spellcheck=!1,n.style.top=this.rect.top+"px",n.style.left=this.rect.left+"px",n.style.width=this.rect.width+"px",n.style.minHeight=0,n.style.minWidth=0,n.style.overflow="hidden",e?n.style.visibility="invisible":(n.cols=1,n.rows=1,n.style.resize="none"),n.tabIndex=-1,n}},{key:"_createHandle",value:function(e,t){if([a,c].indexOf(e)<0)throw new Error("Invalid handle type");if([l,u].indexOf(t)<0)throw new Error("Invalid position type");var n,i=document.createElement("div"),r=t===l?["".concat(h,"px"),0,0,"".concat(h,"px")]:[0,"".concat(h,"px"),"".concat(h,"px"),0],o=(n="move","resize"===e&&(n="ew-resize"),n);return i.style.position="absolute",i.style.background=d,i.style.cursor=o,i.style.width=Math.round(7.5)+"px",i.style.height="".concat(h,"px"),i.style.borderRadius=r.join(" "),i}}])&&s(t.prototype,n),e}();t.default=f},3623:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILD={version:"3.2.2",date:"Wed Sep 01 2021 08:31:57 GMT+0000 (Coordinated Universal Time)"}},5758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2634),r=n(8897);t.buildAnnotationPage=r.createBuilder({data:i.buildManyAnnotations(2),page:1,version:Math.floor(999*Math.random()),schemaVersion:"3"}),t.buildManyAnnotationPages=r.createManyBuilder(t.buildAnnotationPage),t.buildAnnotationsCollection=t.buildManyAnnotationPages},2634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8897);t.buildAnnotation=i.createBuilder({type:"PEN",color:"f44336",size:.015,points:[[.5065075921908894,.2622343937380768],[.5054229934924078,.2622343937380768]],text:"Hello world!"}),t.buildManyAnnotations=i.createManyBuilder(t.buildAnnotation)},1356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5901);function r(e,t,n,r,o,s){return void 0===e&&(e="photo"),void 0===t&&(t=[]),void 0===n&&(n="jpg"),new i.AssetViewerItem("fakeDisplayName",e,"images/1.jpg","images/1.jpg",t,n,r,o,s)}t.buildManyAssetViewerItems=function(e){for(var t=[],n=0;n<e;n++)t.push(r());return t},t.buildAssetViewerItem=r},7756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3168),r=n(1821),o=n(9514),s=n(9717),a=n(1356);function c(e){var t=new i.Config;t.getPdfJs=jest.fn();var n=new r.EventBus,c=e||a.buildAssetViewerItem(),l=new o.TokenService(t);return new s.AssetViewerView(t,n,{},c,l)}function l(e){var t=c(e);return{id:t.id,page:t.page,renderState:t.renderState,previewRenderState:t.previewRenderState,getAnnotations:t.getAnnotations,getAnnotationHelper:t.getAnnotationHelper,didAnnotationsChange:t.didAnnotationsChange,assetViewerItem:t.assetViewerItem}}t.buildManyAssetViewerViews=function(e){for(var t=[],n=0;n<e;n++){var i=c();i.index=n,t.push(i)}return t},t.buildAssetViewerView=c,t.buildPublicAssetViewerView=l,t.buildManyPublicAssetViewerViews=function(e){for(var t=[],n=0;n<e;n++){var i=l();t.push(i)}return t}},8897:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(7750);t.createBuilder=function(e){return function(t){void 0===t&&(t={});var n=i(i({},e),t);return r.cloneDeep(n)}},t.createManyBuilder=function(e,t){return void 0===t&&(t=null),function(n,r){return void 0===n&&(n=5),void 0===r&&(r={}),Array.from(Array(n).keys()).map((function(n){var o,s="object"==typeof r?r:r(n);return e(null!==t?i(((o={})[t]=n.toString(),o),s):s)}))}}},8671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7750),r=n(3623),o=n(2062),s=n(9186),a=n(3168),c=n(1821),l=n(2247),u=n(5770),d=n(9948),h=n(9514),p=n(3195),f=n(8727),v=n(5537),m=n(261),g=function(){function e(e,t){if(this.assetViewerItems=e,this.config=t,this.config=new a.Config(t),this.eventBus=new c.EventBus,this.tokenService=new h.TokenService(this.config),this.renderingQueue=new d.RenderingQueue(this.config),this.pdfJsLinkService=new u.PDFJSLinkService(this.eventBus),this.container=this.config.container,this.thumbnailContainer=this.config.thumbnailContainer,this.debouncedResize=i.debounce(this.onResize.bind(this),this.config.RESIZE_DEBOUNCE_TIMEOUT),this.toggleFullscreen=this.toggleFullscreen.bind(this),this.onFullscreenChange=this.onFullscreenChange.bind(this),this.build=r.BUILD,"caches"in self&&!0===this.config.PDFJS_PREVIEW_ENABLED&&(this.pdfJsPagePreviewService=new s.PdfJsPagePreviewService(this.config.getPdfJs())),!1===this.config.IS_SLAVE_ASSET_VIEWER&&(this.config.rootAssetViewer=this),this.viewer=new p.Viewer(this.config,this.eventBus,this.assetViewerItems,this.tokenService,this.renderingQueue,!1,void 0,this.pdfJsLinkService,null),this.renderingQueue.setViewer(this.viewer),this.renderingQueue.onIdle=this.viewer.onIdle,this.config.thumbnailViewer){var n=new a.Config(Object.assign({},this.config,{ENABLE_LINKS:!1,CAN_CREATE_ANNOTATIONS:!1,SHOW_VIEW_LOADER:!1,VIEWER_LAYOUT:this.config.THUMBNAIL_VIEWER_LAYOUT,VIEW_BORDER:this.config.THUMBNAIL_VIEW_BORDER,VIEW_PADDING_TOP:this.config.THUMBNAIL_VIEW_PADDING_TOP,VIEW_PADDING_BOTTOM:this.config.THUMBNAIL_VIEW_PADDING_BOTTOM,VIEW_PADDING_LEFT:this.config.THUMBNAIL_VIEW_PADDING_LEFT,VIEW_PADDING_RIGHT:this.config.THUMBNAIL_VIEW_PADDING_RIGHT,VIEW_BORDER_BOTTOM:this.config.THUMBNAIL_VIEW_BORDER_BOTTOM,SVG_EMBED_STRATEGY:this.config.THUMBNAIL_SVG_EMBED_STRATEGY,PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP:this.config.THUMBNAIL_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP,IS_SLAVE_ASSET_VIEWER:!1}));this.thumbnailViewerEventBus=new c.EventBus,this.linkService=new l.LinkService(this.viewer,this.eventBus),this.thumbnailViewer=new p.Viewer(n,this.thumbnailViewerEventBus,this.assetViewerItems,this.tokenService,this.renderingQueue,!0,this.linkService,null,this.pdfJsPagePreviewService),this.renderingQueue.setThumbnailViewer(this.thumbnailViewer)}}return e.prototype.init=function(e,t,n,i,r,o){var s=n||this.container;if(this.config.IS_SLAVE_ASSET_VIEWER||(this.fullscreenContainer=s.parentElement,this.viewer.viewerLayout.fullscreenContainer=this.fullscreenContainer),!this.viewer)throw"viewer was destroyed";this.addEventListeners(),this.viewer.init(s,e,t),r&&(this.enableViewSelection(),o&&o.length&&this.selectViews(o))},e.prototype.initThumbnailViewer=function(e){var t=e||this.thumbnailContainer;this.thumbnailViewer&&this.thumbnailContainer&&this.thumbnailViewer.init(t,void 0,void 0)},e.prototype.destroy=function(){this.removeEventListeners(),this.container=null,this.thumbnailContainer=null,this.viewer.destroy(),this.thumbnailViewer&&this.thumbnailViewer.destroy(),this.pdfJsPagePreviewService&&this.pdfJsPagePreviewService.destroy(),this.config=null,this.viewer=null,this.linkService=null,this.renderingQueue=null,this.thumbnailViewer=null,this.debouncedResize=null},e.prototype.setActive=function(){this.viewer&&(this.viewer.setActive(),this.thumbnailViewer&&(this.renderingQueue.thumbnailViewerActive=!0,this.thumbnailViewer.setActive()))},e.prototype.setPassive=function(){this.viewer&&(this.viewer.setPassive(),this.thumbnailViewer&&(this.renderingQueue.thumbnailViewerActive=!1,this.thumbnailViewer.setPassive()))},e.prototype.addEventListeners=function(){this.config.IS_SLAVE_ASSET_VIEWER||(window.addEventListener("resize",this.debouncedResize),this.eventBus.on(f.ViewerEventType.ToggleFullscreen,this.toggleFullscreen),o.FullscreenHelper.addFullscreenChangeListener(this.onFullscreenChange))},e.prototype.removeEventListeners=function(){this.config.IS_SLAVE_ASSET_VIEWER||(window.removeEventListener("resize",this.debouncedResize),this.eventBus.off(f.ViewerEventType.ToggleFullscreen,this.toggleFullscreen),o.FullscreenHelper.removeFullscreenChangeListener(this.onFullscreenChange))},e.prototype.onResize=function(){o.FullscreenHelper.isFullscreen()&&this.fullscreenContainer&&o.FullscreenHelper.getFullscreenElement()!==this.fullscreenContainer||(this.viewer.resize(),this.config&&this.config.thumbnailViewer&&this.thumbnailViewer.resize())},e.prototype.resize=function(){this.viewer&&this.viewer.resize()},e.prototype.canNavigateToNext=function(){return!!this.viewer&&this.viewer.canNavigateToNext()},e.prototype.next=function(){this.viewer&&this.viewer.next()},e.prototype.canNavigateToPrevious=function(){return!!this.viewer&&this.viewer.canNavigateToPrevious()},e.prototype.previous=function(){this.viewer&&this.viewer.previous()},e.prototype.navigateToAssetViewerItem=function(e,t){this.viewer&&this.viewer.navigateToAssetViewerItem(e,t)},e.prototype.toggleFullscreen=function(){if(!this.fullscreenContainer)throw"Trying to go fullscreen without initializing the AssetViewer";o.FullscreenHelper.isFullscreen()?(o.FullscreenHelper.exitFullscreen(),document.body.classList.remove("fullscreen")):(o.FullscreenHelper.enterFullscreen(this.fullscreenContainer),document.body.classList.add("fullscreen"))},e.prototype.onFullscreenChange=function(e){this.eventBus.dispatch(new f.ViewerFullscreenChangeEvent)},e.prototype.resetAnnotations=function(){this.viewer&&this.viewer.resetAnnotations(),this.thumbnailViewer&&this.thumbnailViewer.resetAnnotations()},e.prototype.enableViewSelection=function(){if(this.viewer.currentView){if(this.viewer.currentView.presentationRenderer instanceof v.PdfViewerPresentationRenderer)return void this.viewer.currentView.presentationRenderer.enableViewSelection();(this.viewer.currentView.presentationRenderer.assetViewer||this).thumbnailViewer.viewerLayout.enableViewSelection()}},e.prototype.disableViewSelection=function(){if(this.viewer.currentView){if(this.viewer.currentView.presentationRenderer instanceof v.PdfViewerPresentationRenderer)return void this.viewer.currentView.presentationRenderer.disableViewSelection();(this.viewer.currentView.presentationRenderer.assetViewer||this).thumbnailViewer.viewerLayout.disableViewSelection()}},e.prototype.selectViews=function(e){var t=this;this.viewer.views.forEach((function(t){t.presentationRenderer instanceof v.PdfViewerPresentationRenderer&&t.presentationRenderer.setViewsToSelect(e)}));var n=this.viewer.currentView.presentationRenderer.assetViewer||this,i=n.viewer.viewerLayout.views.filter((function(t){return!!e.find((function(e){return e.assetViewerItemId===t.assetViewerItem.id&&e.page===t.page}))}));i.forEach((function(e){return e.selectView()})),i&&n.thumbnailViewer&&n.thumbnailViewer.views.filter((function(e){return i.indexOf(e.linkedView)>-1})).forEach((function(e){return t.setSelectedViewStyle(e)}))},e.prototype.selectAllViewsOfCurrentAssetViewerItem=function(e){var t=this;if(e){if(this.viewer.currentView.presentationRenderer instanceof v.PdfViewerPresentationRenderer)return void this.viewer.currentView.presentationRenderer.selectAllViews();var n=this.viewer.currentView.presentationRenderer.assetViewer||this,i=n.viewer.views.filter((function(t){return t.assetViewerItem.id===e})),r=n.thumbnailViewer.views.filter((function(t){return t.assetViewerItem.id===e}));i.forEach((function(e){return e.selectView()})),r.forEach((function(e){return t.setSelectedViewStyle(e)}))}},e.prototype.setSelectedViewStyle=function(e){e.styledCheckbox.style.background=this.config.TINT_COLOR,e.checkboxInput.checked=!0},e.prototype.deselectAllViewsOfCurrentAssetViewerItem=function(e){if(e){if(this.viewer.currentView.presentationRenderer instanceof v.PdfViewerPresentationRenderer)return void this.viewer.currentView.presentationRenderer.deselectAllViews();var t=this.viewer.currentView.presentationRenderer.assetViewer||this,n=t.viewer.views.filter((function(t){return t.assetViewerItem.id===e})),i=t.thumbnailViewer.views.filter((function(t){return t.assetViewerItem.id===e}));n.forEach((function(e){return e.deselectView()})),i.forEach((function(e){e.styledCheckbox.style.background="white",e.checkboxInput.checked=!1}))}},e.prototype.getAssetViewerViews=function(){return this.viewer.getAssetViewerViews()},e.prototype.getAssetViewerViewComponentById=function(e){var t=[];return this.viewer.views.forEach((function(e){e.presentationRenderer instanceof m.AssetViewerPresentationRenderer?t.push.apply(t,e.presentationRenderer.assetViewer.viewer.views):e.presentationRenderer instanceof v.PdfViewerPresentationRenderer?console.warn("getAssetViewerViewComponentById not supported for PdfViewerPresentationRenderer"):t.push(e)})),t.find((function(t){return t.id===e}))},e}();t.AssetViewer=g},5901:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(7563),o=n(2299),s=n(3650),a=function(){function e(e,t,n,i,r,o,a,c,l,u,d,h,p,f,v,m,g){this.displayName=e,this.type=t,this.downloadUrl=n,this.previewUrl=i,this.presentations=r,this.extension=o,this.id=a,this.annotations=c,this.page=l,this.position=u,this.isDownloadable=d,this.embeddedData=h,this.pageRanges=p,this.annotationVersions=f,this.canRenderInIframe=v,this.assetDescription=m,this.canPresentInOfficeOnline=g,this.stylesheetPromise=null,this.loadPdfPromise=null,this.pdfLoaded=!1,this._numViews=null,this.presentations=s.PresentationHelper.parsePresentations(this.presentations,this.page,this.downloadUrl),this.stylesheet=s.PresentationHelper.getStylesheet(this.presentations)}return Object.defineProperty(e.prototype,"isPdf",{get:function(){return!(this.type!==o.ASSET_TYPE.DOCUMENT||"pdf"!==this.extension.toLocaleLowerCase())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numViews",{get:function(){if(this._numViews)return this._numViews;if(this.page||this.type!==o.ASSET_TYPE.DOCUMENT)return 1;var e=this.presentations.map((function(e){var t=e.urls;return e.details&&e.details.numpages||e.numberOfPages||t&&Object.keys(t).length})).filter((function(e){return!isNaN(e)}));return Math.max.apply(Math,e)},set:function(e){this._numViews=this.page?1:e},enumerable:!0,configurable:!0}),e.prototype.loadStylesheet=function(){return Promise.resolve()},e.prototype.loadPdf=function(e){var t=this;return this.loadPdfPromise||(this.loadPdfPromise=window.PDFJS.getDocument(e),this.loadPdfPromise.promise.catch((function(e){throw e&&401===e.status&&(t.loadPdfPromise=null),e}))),this.loadPdfPromise},e.prototype.download=function(){var e=i(i({},r.parse(r.extract(this.downloadUrl))),{filename:this.displayName});window.open(this.downloadUrl.split("?")[0]+"?"+r.stringify(e))},e}();t.AssetViewerItem=a},3168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2255),r=n(2299),o=n(3149);t.Config=function(e){var t=this;void 0===e&&(e={}),this.DEBUG=!1,this.TINT_COLOR="#00A67C",this.THREE_JS_DEPS=i.DEFAULT_THREE_JS_DEPS,this.DEFAULT_THUMB_BASE_PATH="/share/static/images/default",this.SHOWPAD_JS_PATH=null,this.showpadUser=null,this.thumbnailViewer=!0,this.container=null,this.thumbnailContainer=null,this.rootAssetViewer=null,this.CAN_CREATE_ANNOTATIONS=!1,this.VIEWER_LAYOUT=r.LAYOUT.VERTICAL,this.THUMBNAIL_VIEWER_LAYOUT=r.LAYOUT.VERTICAL_THUMBNAILS,this.PDF_VIEWER_LAYOUT=i.PdfViewerLayoutType.SinglePage,this.VIEWS_TO_PRELOAD=8,this.VIEWS_TO_PRELOAD_MOBILE=5,this.BATCH_DESTROY_VIEWS_COUNT=10,this.VIEWPORT_UPDATE_DEBOUNCE_TIMEOUT=60,this.IDLE_DEBOUNCE_TIMEOUT=400,this.RESIZE_DEBOUNCE_TIMEOUT=150,this.ACTION_BAR_HIDE_TIMEOUT=2500,this.SHOW_VIEW_LOADER_TIMEOUT=500,this.IS_SLAVE_ASSET_VIEWER=!1,this.VIEW_BORDER=1,this.VIEW_PADDING_TOP=r.VIEW_PADDING,this.VIEW_PADDING_BOTTOM=r.VIEW_PADDING,this.VIEW_PADDING_LEFT=o.browser.phone?0:r.VIEW_PADDING,this.VIEW_PADDING_RIGHT=o.browser.phone?0:r.VIEW_PADDING,this.VIEW_BORDER_BOTTOM=1,this.THUMBNAIL_VIEW_BORDER=1,this.THUMBNAIL_VIEW_BORDER_BOTTOM=1,this.THUMBNAIL_VIEW_PADDING_TOP=12,this.THUMBNAIL_VIEW_PADDING_BOTTOM=20,this.THUMBNAIL_VIEW_PADDING_LEFT=50,this.THUMBNAIL_VIEW_PADDING_RIGHT=50,this.PAGE_PADDING_BOTTOM=r.PAGE_PADDING,this.PAGE_PADDING_TOP=0,this.MAX_CONTENT_WIDTH=896,this.MAX_CONTENT_WIDTH_PORTRAIT_DOCUMENTS=896,this.MAX_CONTENT_WIDTH_PAGES=void 0,this.MAX_ZOOM_SCALE=2,this.MIN_ZOOM_SCALE=.5,this.LANDSCAPE_FIT_WIDTH_BREAKPOINT_WIDTH=600,this.LANDSCAPE_FIT_WIDTH_BREAKPOINT_HEIGHT=600,this.TRANSITIONS_ENABLED=!0,this.SHOW_VIEW_LOADER=!0,this.canZoom=!0,this.ENABLE_LINKS=!0,this.SVG_EMBED_STRATEGY=o.browser.ie?r.SVG_EMBED_STRATEGY.IFRAME_INNERHTML:r.SVG_EMBED_STRATEGY.DATA_URL_IMG,this.THUMBNAIL_SVG_EMBED_STRATEGY=o.browser.ie?r.SVG_EMBED_STRATEGY.IFRAME_INNERHTML:r.SVG_EMBED_STRATEGY.DATA_URL_IMG_PROCESSED,this.CANVAS_EMBED_STRATEGY=r.CANVAS_EMBED_STRATEGY.CANVAS,this.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP=r.DEFAULT_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP,this.THUMBNAIL_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP=r.DEFAULT_THUMBNAIL_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP,this.getText=function(e){return Promise.reject("getText wasn't configured")},this.getPdfJs=function(){return Promise.reject("getPdfJs wasn't configured")},this.getPdfJsWorker=function(){return Promise.reject("getPdfJsWorker wasn't configured")},this.refreshToken=void 0,this.DOCUMENT_ASSET_VIEWER_CONFIG=null,this.PORTRAIT_DOCUMENT_ASSET_VIEWER_CONFIG=null,this.PRELOAD_VIDEOS_ENABLED=!0,this.PDF_RENDERER=r.PDF_RENDERER.CANVAS,this.PDF_RENDER_STRATEGY=r.PDF_RENDER_STRATEGY.LOW_PREVIEW_PDFJS,this.PDF_PRELOAD_STRATEGY=r.PDF_PRELOAD_STRATEGY.FULL,this.PDFJS_ENHANCE_TEXT_SELECTION=!1,this.PDFJS_RENDER_INTERACTIVE_FORMS=!1,this.PDFJS_MAX_IMAGE_SIZE_TO_STORE=void 0,this.RENDER_VISIBLE_VIEWS_CONCURRENTLY=!0,this.PDFJS_RANGE_CHUNK_SIZE=void 0,this.PDFJS_MAX_RANGE_CHUNK_SIZE=4e6,this.PDFJS_MIN_RANGE_CHUNK_SIZE=256e3,this.PDFJS_MAX_CANVAS_PIXELS=9e6,this.PDFJS_PINCH_ZOOM_ENABLED=!1,this.PDFJS_EMBEDDED_MEDIA_HLS_JS_DISABLED=!0,this.PDFJS_PREVIEW_ENABLED=!1,this.THREEJS_USE_PREVIEW_DIMENSIONS=!1,this.THREEJS_VIEW_FULLSCREEN=!1,this.THREEJS_SCENE_BACKGROUND_COLOR="#D9D9D9",this.THREEJS_CROSS_ORIGIN="use-credentials",this.THREEJS_HELP_CENTRE_LEARNMORE_URL="https://help.showpad.com/hc/en-us/articles/360003822554#learnmore",this.HLS_JS_PATH="",this.VIDEO_POSTER_IMAGE_ENABLED=!1,this.VIDEO_HLS_JS_DISABLED=!1,this.VIDEO_HLS_DISABLED=!1,this.IFRAME_ALLOW="camera *; microphone *;",this.ENABLE_GROUPED_PAGE_SELECTION=!1,this.SCORM_API_AVAILABLE=!1,this.TRACK_HTML_PAGE_LOCATION_ENABLED=!1,this.DOCUMENT_FORCE_PORTRAIT_VIEWER=!1,this.TRANSLATIONS=i.DEFAULT_TRANSLATIONS,this.IS_WINDOWS_DESKTOP_APP=!1,this.VIEWS_TO_PRELOAD_PER_ASSET_TYPE={},Object.keys(e).forEach((function(n){if(!t.hasOwnProperty(n))throw'unknown configuration param passed to Config: "'+n+'"';t[n]=e[n]}))}},1821:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){var n=this.listeners[e];n||(n=[],this.listeners[e]=n),n.push(t)},e.prototype.off=function(e,t){var n=this.listeners[e];if(n){var i=n.indexOf(t);if(!n||i<0)return;n.splice(i,1)}},e.prototype.dispatch=function(e){var t=this.listeners[e.type];t&&0!==t.length&&t.slice(0).forEach((function(t){return t.apply(null,[e])}))},e}();t.EventBus=n},6949:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8727),r="av-action-bar-hidden",o=function(){function e(e,t,n){this.config=e,this.eventBus=t,this.assetViewerView=n,this.hideActionBarTimeout=null}return e.prototype.addEventListeners=function(e){void 0===e&&(e=null),this.eventBus.on(i.ViewerEventType.ViewportChange,this.onViewportChange.bind(this)),this.container.onmousemove=this.onMouseMove.bind(this),this.container.ontouchmove=this.onMouseMove.bind(this),e&&e.contentWindow&&(e.contentWindow.onmousemove=this.onMouseMove.bind(this),e.contentWindow.ontouchmove=this.onMouseMove.bind(this))},e.prototype.render=function(e,t){void 0===t&&(t=null),this.actionBar=this.createActionBarFullScreen(),this.container=e,this.container.appendChild(this.actionBar),this.addEventListeners(t),this.show()},e.prototype.show=function(){clearTimeout(this.hideActionBarTimeout),this.actionBar.classList.remove(r),this.setHideTimeout()},e.prototype.hide=function(){this.actionBar.classList.add(r)},e.prototype.focus=function(){this.clearHideTimeout(),this.actionBar.classList.remove(r)},e.prototype.onMouseMove=function(e){if(this.actionBar.contains(e.target))return this.focus();this.show()},e.prototype.clearHideTimeout=function(){clearTimeout(this.hideActionBarTimeout)},e.prototype.setHideTimeout=function(){var e=this;this.hideActionBarTimeout=setTimeout((function(){return e.hide()}),this.config.ACTION_BAR_HIDE_TIMEOUT)},e.prototype.onViewportChange=function(){this.show()},e.prototype.createActionBarFullScreen=function(){var e=this,t=this.actionBar=document.createElement("div"),n=document.createElement("div");if(n.classList.add("av-action-bar-button-container"),this.assetViewerView.assetViewerItem.isDownloadable){var o=this.downloadContainer=document.createElement("div");o.classList.add("av-action-bar-download"),o.innerHTML='\n                <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                    height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="afcae5a789ccd549f9c6e2a2f80cccc2"><path style="display: inline;" d="M400.617,154.126L256,332.976l-144.617-178.85H204.9V0.825h102.2v153.301H400.617z\n                        M460.399,154.126v102.2v204.401H51.6V256.326v-102.2l-51.1-51.1v51.1v102.2v255.5h511v-255.5v-102.2v-51.1L460.399,154.126z"></path></g></svg>\n                ',o.onclick=function(){return e.assetViewerView.download()},n.appendChild(o)}var s=this.closeFullscreenContainer=document.createElement("div");return s.classList.add("av-action-bar-close"),s.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="afcae5a789ccd549f9c6e2a2f80b2306"><path style="display: inline;" d="M339.023,256.022L504.57,427.387L420.104,511.5L256,341.852L91.896,511.5L7.43,427.387\n                    l165.549-171.364L7.43,84.884L92.183,0.5L256,170.077L419.818,0.5l84.752,84.384L339.023,256.022z"></path></g></svg>\n            ',s.onclick=function(){return e.eventBus.dispatch(new i.ViewerToggleFullscreenEvent)},n.appendChild(s),t.appendChild(n),t.classList.add("av-action-bar"),t.classList.add("av-action-bar-small"),t.classList.add(r),t.classList.add("av-action-bar-top"),t},e}();t.FullscreenActionBar=o},2284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6078),r=n(3729),o=n(2299),s=n(1641),a=function(){function e(){}return e.create=function(e,t,n,a,c,l,u,d){switch(e){case o.LAYOUT.HORIZONTAL:return new r.LayoutHorizontal(t,n,a,c,u);case o.LAYOUT.VERTICAL:return new s.LayoutVertical(t,n,a,c,u);case o.LAYOUT.VERTICAL_THUMBNAILS:return new i.LayoutVerticalThumbnails(t,n,a,c,l,d);default:throw new Error("unknown layout: "+e)}},e}();t.LayoutFactory=a},2247:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8727),r=n(7679),o=function(){function e(e,t){this.viewer=e,this.eventBus=t}return e.prototype.setViewer=function(e){this.viewer=e},Object.defineProperty(e.prototype,"view",{set:function(e){this.viewer.currentView=e,this.eventBus.dispatch(new i.ViewerSetViewEvent({assetViewerView:r.AssetViewerViewMapper.mapToPublicAssetViewerView(e)}))},enumerable:!0,configurable:!0}),e}();t.LinkService=o},5770:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8727),r=function(){function e(e){this.eventBus=e,this.pdfDocument=null,this._pagesRefCache=null,this.baseUrl=""}return e.prototype.setDocument=function(e){this.pdfDocument=e,this._pagesRefCache=Object.create(null)},Object.defineProperty(e.prototype,"pagesCount",{get:function(){return this.pdfDocument?this.pdfDocument.numPages:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.handleShowpadLink=function(e){var t={type:"showpad-asset-link"};t.data={link:e},window&&window.postMessage&&window.postMessage(JSON.stringify(t),"*")},e.prototype.navigateTo=function(e){var t=this;new Promise((function(n,i){"string"!=typeof e?n({namedDest:"",explicitDest:e}):t.pdfDocument.getDestination(e).then((function(t){n({namedDest:e,explicitDest:t})}))})).then((function(n){n.explicitDest instanceof Array?t.goToDestination(n):console.error('PDFLinkService.navigateTo: "'+n.explicitDest+'" is not a valid destination array, for dest="'+e+'".')}))},e.prototype.goToDestination=function(e){var t,n=this,r=e.namedDest,o=e.explicitDest,s=o[0];if(s instanceof Object){if(null===(t=this._cachedPageNumber(s)))return void this.pdfDocument.getPageIndex(s).then((function(e){n.cachePageRef(e+1,s),n.goToDestination({namedDest:r,explicitDest:o})})).catch((function(){console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid page reference".')}))}else{if(!Number.isInteger(s))return void console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid destination reference".');t=s+1}!t||t<1||t>this.pagesCount?console.error('PDFLinkService.navigateTo: "'+t+'" is not a valid page number".'):t&&this.eventBus.dispatch(new i.ViewerNavigateToPageEvent({page:t}))},e.prototype.cachePageRef=function(e,t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e},e.prototype._cachedPageNumber=function(e){var t=e.num+" "+e.gen+" R";return this._pagesRefCache&&this._pagesRefCache[t]||null},e.prototype.getDestinationHash=function(e){if("string"==typeof e)return this.getAnchorUrl("#"+window.escape(e));if(e instanceof Array){var t=JSON.stringify(e);return this.getAnchorUrl("#"+window.escape(t))}return this.getAnchorUrl("")},e.prototype.getAnchorUrl=function(e){return(this.baseUrl||"")+e},e.prototype.setHash=function(e){},e.prototype.executeNamedAction=function(e){},e.prototype.onFileAttachmentAnnotation=function(e){e.id,e.filename,e.content},e}();t.PDFJSLinkService=r},1684:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.LoadState||(t.LoadState={})).None="NONE",n.Loading="LOADING",n.Finished="FINISHED",n.Failed="FAILED"},3501:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FocusChange="[showpad-pdf-viewer] Focus Change",e.PageRendered="[showpad-pdf-viewer] Page Rendered",e.RenderedPageFocus="[showpad-pdf-viewer] Rendered Page Focus",e.NavigateToPage="[showpad-pdf-viewer] Navigate To Page",e.PageSelected="[showpad-pdf-viewer] Page Selected",e.SwitchLayout="[showpad-pdf-viewer] Switch Layout",e.ZoomIn="[showpad-pdf-viewer] ZoomIn",e.ZoomOut="[showpad-pdf-viewer] ZoomOut",e.PreviewRendered="[showpad-pdf-viewer] Preview Rendered",e.RenderedPreviewFocus="[showpad-pdf-viewer] Rendered Preview Focus",e.RenderFailed="[showpad-pdf-viewer] Render Failed",e.SelectPage="[showpad-pdf-viewer] Select Page",e.DeselectPage="[showpad-pdf-viewer] Deselect Page",e.DownloadAsset="[showpad-pdf-viewer] Download Asset",e.ThumbnailsOpenedChange="[showpad-pdf-viewer] Thumbnails Opened Change"}(n=t.PdfViewerEventType||(t.PdfViewerEventType={}));t.PdfViewerFocusChangeEvent=function(e){this.payload=e,this.type=n.FocusChange};t.PdfViewerPageRenderedEvent=function(e){this.payload=e,this.type=n.PageRendered};t.PdfViewerRenderedPageFocusEvent=function(e){this.payload=e,this.type=n.RenderedPageFocus};t.PdfViewerNavigateToPageEvent=function(e){this.payload=e,this.type=n.NavigateToPage};t.PdfViewerPageSelectedEvent=function(e){this.payload=e,this.type=n.PageSelected};t.PdfViewerSwitchLayoutEvent=function(e){this.payload=e,this.type=n.SwitchLayout};t.PdfViewerZoomInEvent=function(e){void 0===e&&(e=null),this.payload=e,this.type=n.ZoomIn};t.PdfViewerZoomOutEvent=function(e){void 0===e&&(e=null),this.payload=e,this.type=n.ZoomOut};t.PdfViewerPreviewRenderedEvent=function(e){this.payload=e,this.type=n.PreviewRendered};t.PdfViewerRenderedPreviewFocusEvent=function(e){this.payload=e,this.type=n.RenderedPreviewFocus};t.PdfViewerRenderFailedEvent=function(e){this.payload=e,this.type=n.RenderFailed};t.PdfViewerSelectPageEvent=function(e){this.payload=e,this.type=n.SelectPage};t.PdfViewerDeselectPageEvent=function(e){this.payload=e,this.type=n.DeselectPage};t.PdfViewerDownloadAssetEvent=function(e){void 0===e&&(e=null),this.payload=e,this.type=n.DownloadAsset};t.PdfViewerThumbnailsOpenedChangeEvent=function(e){this.payload=e,this.type=n.ThumbnailsOpenedChange}},447:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.PdfViewerLayoutType||(t.PdfViewerLayoutType={})).SinglePage="SinglePage",n.OneColumn="OneColumn"},734:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(3885),o=n(7750),s=n(3149),a=n(7816),c=n(1057),l=n(2419),u=n(8205),d=function(){function e(e,t,n,r,o,s){void 0===s&&(s=1e4),this.embeddedData=e,this.container=t,this.pdfPage=n,this.pdfPageExtractedImages=r,this.disableAutoPlay=o,this.maxCanvasPixels=s,this.htmlElement=null,this.className="sp-embedded-media-layer-component",this.mediaRenderers=[],this.canvasRenderedAtScale=null,this.media=this.orchestrateMedia(i(this.embeddedData.media)),this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.container.appendChild(this.htmlElement),this.pdfPageDimensions=u.PdfJsHelper.calculatePageDimensions(this.pdfPage)}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.containerWidth/this.pdfPageDimensions.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerWidth",{get:function(){return this.container.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerHeight",{get:function(){return this.container.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfWidth",{get:function(){return this.pdfPageDimensions.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfHeight",{get:function(){return this.pdfPageDimensions.height},enumerable:!0,configurable:!0}),e.prototype.getOperatorList=function(){var e=this;return this.getOperatorListPromise||(this.getOperatorListPromise=r.cancelable(new Promise((function(t,n){e.pdfPage.getOperatorList().then((function(n){e.pdfPageOperatorList=n,t()}),n)})))),this.getOperatorListPromise},e.prototype.renderMedia=function(){var e=this;this.mediaRenderers.length||(this.mediaRenderers=[],this.media.sort((function(e,t){return e.renderIndex>t.renderIndex?1:-1})).forEach((function(t){switch(t.type){case a.EmbeddedDataMediaType.VIDEO:case a.EmbeddedDataMediaType.GIF:var n=e.pdfPageExtractedImages.filter((function(e){return null!==e})).find((function(e){return e.index===t.renderIndex})),i=n?n.element.getAttribute("xlink:href"):null,r=new h(e.htmlElement,t,i,e.pdfWidth);e.mediaRenderers.push(r)}})))},e.prototype.pauseMedia=function(){this.mediaRenderers.forEach((function(e){return e.pause()}))},e.prototype.render=function(){var e=this;return this.destroyGetOperatorListPromise(),this.destroyRenderTask(),this.destroyRenderPromise(),this.canvasRenderedAtScale=this.scale,this.renderPromise=r.cancelable(new Promise((function(t,n){var i=window.devicePixelRatio,r=c.capDimensions(e.containerWidth*i,e.containerHeight*i,e.maxCanvasPixels).width/e.pdfWidth,o=e.pdfPage.getViewport(r),s=e.canvas=document.createElement("canvas"),a=s.getContext("2d");s.height=o.height,s.width=o.width,e.getOperatorList().then((function(){var i={canvasContext:a,viewport:o,operatorList:e.injectEraseMediaOperations(e.pdfPageOperatorList,e.media.map((function(e){return e.renderIndex})))};e.renderTask=e.pdfPage.render(i),e.renderTask.promise.then((function(){e.renderTask=null,e.renderMedia(),e.destroyCanvases(),e.htmlElement.appendChild(e.canvas),t()})).catch((function(e){"canvas"!==e.type?n():console.log("EmbeddedMediaLayerComponent :: error instanceof RenderingCancelledException")}))}))}))),this.renderPromise},e.prototype.resize=function(){this.mediaRenderers.forEach((function(e){return e.resize()}))},e.prototype.destroy=function(){this.destroyGetOperatorListPromise(),this.destroyRenderPromise(),this.destroyRenderTask(),this.destroyCanvases(),this.canvas=null,this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.mediaRenderers.forEach((function(e){return e.destroy()})),this.htmlElement.innerHTML=""},e.prototype.orchestrateMedia=function(e){return!0===this.disableAutoPlay||s.browser.ios?(e.map((function(e){return e.playOptions.autoPlay=!1})),e):(e.map((function(e){return e.playOptions.autoPlay})).filter((function(e,t,n){return n.indexOf(e)===t})).length>1&&e.map((function(e){return e.playOptions.autoPlay=!1})),e)},e.prototype.injectEraseMediaOperations=function(e,t){var n=["paintImageXObject","paintJpegXObject"],i=window.PDFJS.OPS,r=[];for(var o in i)r[i[o]]=o;return e.fnArray.map((function(t,n){return{name:r[t],index:n,fnId:t,fn:r[t],args:e.argsArray[n]}})).filter((function(e){return-1!==n.indexOf(e.fn)})).filter((function(e,n){return-1!==t.indexOf(n)})).map((function(e){return e.index})).forEach((function(t,n){t+=n,e.argsArray.splice(t,0,[[["BM","destination-out"]]]),e.fnArray.splice(t,0,i.setGState)})),e},e.prototype.destroyCanvases=function(){for(var e=this.htmlElement.querySelectorAll("canvas"),t=0;t<e.length;t++){var n=e[t];n.parentNode.removeChild(n)}},e.prototype.destroyRenderPromise=function(){this.renderPromise&&(this.renderPromise.cancel(),this.renderPromise=null)},e.prototype.destroyGetOperatorListPromise=function(){this.getOperatorListPromise&&(this.getOperatorListPromise.cancel(),this.getOperatorListPromise=null)},e.prototype.destroyRenderTask=function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null)},e}();t.EmbeddedMediaLayerComponent=d;var h=function(){function e(e,t,n,i){this.container=null,this.htmlElement=null,this.className="sp-embedded-media-layer-video-component",this.videoContainerElement=null,this.videoElement=null,this.imageElement=null,this.intersectionElement=null,this.container=e,this.media=t,this.posterSrc=n,this.pdfDefaultWidth=i,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.videoContainerElement=document.createElement("div"),this.videoElement=document.createElement("video"),this.intersectionElement=document.createElement("div"),this.addVideoEventListeners(),this.render()}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.containerWidth/this.pdfDefaultWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerWidth",{get:function(){return this.container.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerHeight",{get:function(){return this.container.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPlayHlsNatively",{get:function(){return""!==this.videoElement.canPlayType("application/vnd.apple.mpegURL")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intersectionRect",{get:function(){var e=this.htmlElement.getBoundingClientRect(),t=this.videoContainerElement.getBoundingClientRect();return this.intersection(e,t)},enumerable:!0,configurable:!0}),e.prototype.addVideoEventListeners=function(){this.oneVideoPlay=this.oneVideoPlay.bind(this),this.videoElement.addEventListener("play",this.oneVideoPlay)},e.prototype.removeVideoEventListeners=function(){this.videoElement.removeEventListener("play",this.oneVideoPlay)},e.prototype.oneVideoPlay=function(){this.load(),this.videoElement.classList.remove("off"),this.imageElement&&this.imageElement.parentNode&&this.imageElement.parentNode.removeChild(this.imageElement),this.videoElement.removeEventListener("play",this.oneVideoPlay)},e.prototype.render=function(){var e=this.videoElement;e.className=this.className+"__video",e.controls=!1,e.width=this.media.size.width,e.height=this.media.size.height,e.autoplay=this.media.playOptions.autoPlay,e.loop=this.media.playOptions.repeat!==a.EmbeddedDataMediaPlayOptionsRepeat.NONE,e.playsInline=!0,this.posterSrc&&(this.imageElement=document.createElement("img"),this.imageElement.className=this.className+"__poster",this.imageElement.src=this.posterSrc,this.htmlElement.appendChild(this.imageElement)),this.container.appendChild(this.htmlElement);var t=this.media.playOptions.trim,n=t&&t.start?l.millisecondsToSeconds(t.start):0,i=t&&t.end?l.millisecondsToSeconds(t.end):0,r=c.mapRange(this.media.playOptions.volume,0,100,0,1),o=isNaN(parseInt(this.media.playOptions.repeat))?null:parseInt(this.media.playOptions.repeat);this.controls=new p(this.container,e,n,i,r,o),e.autoplay&&this.load(),this.videoContainerElement.appendChild(e),this.htmlElement.appendChild(this.videoContainerElement),this.resize()},e.prototype.load=function(){this.videoElement.src||(this.videoElement.src=this.media.uri.processed||this.media.uri.converted)},e.prototype.pause=function(){this.videoElement.pause()},e.prototype.resize=function(){var e=this.media.size,t=this.media.arrangement,n=t.size,i=t.offset,r=t.crop,o=t.flip,s=!0===o.vertical?-1:1,a=!0===o.horizontal?-1:1,c=0,l=0,u=100,d=100;if(r&&(d=e.width/(e.width-e.width*(r.left/100)-e.width*(r.right/100))*100,c=-(u=e.height/(e.height-e.height*(r.top/100)-e.height*(r.bottom/100))*100)*r.top/100,l=-d*r.left/100),this.videoContainerElement.style.cssText="position: absolute; top:"+c+"%; left:"+l+"%; width:"+d+"%; height:"+u+"%;",this.imageElement){this.htmlElement.style.cssText="width:"+n.width*this.scale+"px; height:"+n.height*this.scale+"px; transform: translate("+i.x*this.scale+"px, "+i.y*this.scale+"px) rotate(0deg) scale("+a+", "+s+")";var h=this.intersectionRect,p=this.htmlElement.getBoundingClientRect();h.top-=p.top,h.left-=p.left,this.imageElement.style.cssText="position: absolute; top:"+h.top+"px; left:"+h.left+"px; width:"+h.width+"px; height:"+h.height+"px"}this.htmlElement.style.cssText="width:"+n.width*this.scale+"px; height:"+n.height*this.scale+"px; transform: translate("+i.x*this.scale+"px, "+i.y*this.scale+"px) rotate("+t.rotation+"deg) scale("+a+", "+s+")";var f=this.videoContainerElement.clientWidth/e.width,v=this.videoContainerElement.clientHeight/e.height;this.videoElement.style.cssText="position: absolute; top:0; left:0; transform: scale("+f+", "+v+");",this.controls.resize(this.intersectionRect)},e.prototype.intersection=function(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom);return{left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},e.prototype.destroy=function(){this.removeVideoEventListeners(),this.controls&&this.controls.destroy(),this.videoElement&&(this.videoElement.pause(),this.videoElement.src=""),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement.innerHTML=""},e}();t.EmbeddedMediaLayerVideoComponent=h;var p=function(){function e(e,t,n,i,r,s){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=100),void 0===s&&(s=null),this.container=null,this.htmlElement=null,this.className="sp-embedded-media-layer-video-controls-component",this.videoElement=null,this.videoDuration=null,this.maxVolume=null,this.repeatCount=null,this.startTime=null,this.endTime=null,this.duration=null,this.isLoadingMetaData=!0,this.isBuffering=!0,this.isScrubbing=!1,this.isPlaying=!1,this.wasPlaying=null,this.isMuted=!1,this.playedCount=0,this.previousCurrentTime=null,this.debouncedVideoWaitingMilliseconds=100,this.MINI_BREAKPOINT=300,this.TINY_BREAKPOINT=150,this.container=e,this.videoElement=t,this.trimStart=n,this.trimEnd=i,this.maxVolume=this.videoElement.volume=r,this.repeatCount=s,this.isPlaying=this.videoElement.autoplay,this.startTime=n,this.debouncedVideoWaiting=o.debounce(this.onVideoWaiting.bind(this),this.debouncedVideoWaitingMilliseconds),this.render(),this.update(),this.addEventListeners()}return Object.defineProperty(e.prototype,"currentTime",{get:function(){return c.mapRange(this.videoCurrentTime,this.startTime,this.endTime,0,this.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeFormatted",{get:function(){return this.secondsToMinutesSeconds(this.currentTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainingTime",{get:function(){return c.mapRange(this.videoCurrentTime,this.startTime,this.endTime,this.duration,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainingTimeFormatted",{get:function(){return"-"+this.secondsToMinutesSeconds(this.remainingTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoCurrentTime",{get:function(){return c.clamp(this.videoElement.currentTime,this.startTime,this.endTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){var e=[this.className];return this.isLoadingMetaData&&e.push("is-loading-metadata"),this.isBuffering&&this.isPlaying&&e.push("is-buffering"),this.width<=this.TINY_BREAKPOINT?e.push("tiny"):this.width<=this.MINI_BREAKPOINT&&e.push("mini"),s.browser.touch&&e.push("is-touch"),e.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.htmlElement.clientWidth},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.htmlElement=document.createElement("div"),this.htmlElement.className=this.classNames,this.htmlElement.innerHTML='\n    <div class="click-area" data-action=\'play\'></div>\n    <div class="click-area" data-action=\'pause\'></div>\n    <button class="play" data-action=\'play\'>\n        <svg viewBox="0 0 102 102" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><circle fill="#FFF" cx="50" cy="50" r="50"/><path fill="#000" d="M63.78 50L41.732 64.567V35.433z"/></g></svg>\n    </button>\n    <div class="buffering" data-action=\'buffering\'>\n        <svg class="circular" viewBox="25 25 50 50">\n            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>\n        </svg>\n    </div>\n    <div class="toolbar">\n        <button data-action=\'play\'>\n            <svg fill="currentColor" viewBox="0 0 18 18">\n                <path d="M15.562 8.1L3.87.225C3.052-.337 2 .225 2 1.125v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"></path>\n            </svg>\n        </button>\n        <button data-action=\'pause\'>\n            <svg fill="currentColor" viewBox="0 0 18 18">\n                <path d="M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zM12 1c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"></path>\n            </svg>\n        </button>\n        <div data-id="currentTime" class="time"></div>\n        <input data-id="progress" type="range" min="0" max="1" step="0.01" value="0" autocomplete="off" role="slider">\n        <div data-id="remainingTime" class="time"></div>\n        '+(0===this.maxVolume?"":'\n            <button data-action=\'mute\'>\n                <svg fill="currentColor" viewBox="0 0 18 18">\n                    <path d="M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"></path><path d="M11.282 5.282a.909.909 0 0 0 0 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 0 0 0 1.316c.145.145.636.262 1.018.156a.725.725 0 0 0 .298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 0 0-1.316 0zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path>\n                </svg>\n            </button>\n            <button data-action=\'unmute\'>\n                <svg fill="currentColor" viewBox="0 0 18 18">\n                    <path d="M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path>\n                </svg>\n            </button>')+'\n        <button data-action="enterFullscreen">\n            <svg fill="currentColor" viewBox="0 0 18 18"><path d="M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"></path></svg>\n        </button>\n        <button data-action="exitFullscreen">\n            <svg fill="currentColor" viewBox="0 0 18 18"><path fill="currentColor" d="M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"></path></svg>\n        </button>\n    </div>',this.progressElement=this.htmlElement.querySelector("[data-id='progress']"),this.currentTimeElement=this.htmlElement.querySelector("[data-id='currentTime']"),this.remainingTimeElement=this.htmlElement.querySelector("[data-id='remainingTime']"),this.container.appendChild(this.htmlElement)},e.prototype.update=function(){var e=this;this.htmlElement.className=this.classNames;var t=[this.isPlaying?"pause":"play",this.isMuted?"unmute":"mute"];["play","pause","mute","unmute","enterFullscreen","exitFullscreen"].forEach((function(n){for(var i=e.htmlElement.querySelectorAll("[data-action='"+n+"']"),r=0;r<i.length;r++){var o=i[r];-1===t.indexOf(n)?o.classList.add("off"):o.classList.remove("off")}}))},e.prototype.updateVideoDuration=function(e){this.videoDuration=e,this.endTime=this.videoDuration-this.trimEnd,this.duration=this.endTime-this.startTime,this.progressElement.setAttribute("min",String(this.startTime)),this.progressElement.setAttribute("max",String(this.endTime))},e.prototype.addEventListeners=function(){this.onClick=this.onClick.bind(this),this.onVideoPlay=this.onVideoPlay.bind(this),this.onVideoPause=this.onVideoPause.bind(this),this.onVideoWaiting=this.onVideoWaiting.bind(this),this.onVideoPlaying=this.onVideoPlaying.bind(this),this.onVideoTimeUpdate=this.onVideoTimeUpdate.bind(this),this.onVideoLoadedMetaData=this.onVideoLoadedMetaData.bind(this),this.htmlElement.addEventListener("click",this.onClick),this.onProgressInput=this.onProgressInput.bind(this),this.onProgressChange=this.onProgressChange.bind(this),this.videoElement.addEventListener("play",this.onVideoPlay),this.videoElement.addEventListener("pause",this.onVideoPause),this.videoElement.addEventListener("waiting",this.debouncedVideoWaiting),this.videoElement.addEventListener("playing",this.onVideoPlaying),this.videoElement.addEventListener("timeupdate",this.onVideoTimeUpdate),this.videoElement.addEventListener("loadedmetadata",this.onVideoLoadedMetaData),this.progressElement.addEventListener("input",this.onProgressInput),this.progressElement.addEventListener("change",this.onProgressChange)},e.prototype.removeEventListeners=function(){this.htmlElement.removeEventListener("click",this.onClick),this.videoElement.removeEventListener("play",this.onVideoPlay),this.videoElement.removeEventListener("pause",this.onVideoPause),this.videoElement.removeEventListener("waiting",this.onVideoWaiting),this.videoElement.removeEventListener("playing",this.onVideoPlaying),this.videoElement.removeEventListener("timeupdate",this.onVideoTimeUpdate),this.videoElement.removeEventListener("loadedmetadata",this.onVideoLoadedMetaData),this.progressElement.removeEventListener("input",this.onProgressInput),this.progressElement.removeEventListener("change",this.onProgressChange)},e.prototype.onClick=function(e){switch(e.target.getAttribute("data-action")){case"play":this.videoElement.play();break;case"pause":this.videoElement.pause();break;case"mute":this.isMuted=!0,this.videoElement.volume=0;break;case"unmute":this.isMuted=!1,this.videoElement.volume=this.maxVolume}this.update()},e.prototype.onVideoLoadedMetaData=function(){this.isLoadingMetaData=!1,this.videoElement.currentTime=this.startTime,this.updateVideoDuration(this.videoElement.duration),this.update()},e.prototype.onVideoTimeUpdate=function(){this.debouncedVideoWaiting.cancel(),this.isBuffering=!1,this.progressElement.value=String(this.videoCurrentTime),this.currentTimeElement.innerHTML=this.currentTimeFormatted,this.remainingTimeElement.innerHTML=this.remainingTimeFormatted,this.videoDuration!==this.videoElement.duration&&this.updateVideoDuration(this.videoElement.duration),null!==this.repeatCount&&!1===this.isScrubbing&&this.isPlaying&&this.videoElement.currentTime<this.previousCurrentTime&&(this.playedCount++,this.playedCount===this.repeatCount&&(this.videoElement.pause(),this.playedCount=0)),!1===this.isScrubbing&&this.isPlaying&&(this.trimStart>0||this.trimEnd>0)&&(this.videoElement.loop&&Math.floor(this.videoElement.currentTime)>=Math.floor(this.endTime)?this.videoElement.currentTime=this.startTime:this.videoElement.currentTime>=this.endTime&&(this.videoElement.pause(),this.videoElement.currentTime=this.endTime)),this.previousCurrentTime=this.videoElement.currentTime,this.update()},e.prototype.onVideoPlay=function(e){this.isPlaying=!0,Math.floor(this.videoElement.currentTime)>=Math.floor(this.endTime)&&(this.videoElement.currentTime=this.startTime),this.update()},e.prototype.onVideoPause=function(e){this.isPlaying=!1,this.update()},e.prototype.onVideoWaiting=function(e){this.isBuffering=!0,this.update()},e.prototype.onVideoPlaying=function(e){this.debouncedVideoWaiting.cancel(),this.isBuffering=!1,this.update()},e.prototype.onProgressInput=function(e){!1===this.isScrubbing&&(this.isScrubbing=!0,this.videoElement.pause(),this.wasPlaying=this.isPlaying);var t=e.target;this.videoElement.currentTime=parseFloat(t.value)},e.prototype.onProgressChange=function(e){this.isScrubbing=!1,this.wasPlaying&&this.videoElement.play(),this.wasPlaying=null},e.prototype.secondsToMinutesSeconds=function(e){return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},e.prototype.resize=function(e){var t=this.fromClientRect(e),n=this.fromClientRect(this.container.getBoundingClientRect()),i=this.intersection(n,t);i.x1-=n.x1,i.y1-=n.y1,i.x2-=n.x1,i.y2-=n.y1,this.htmlElement.style.cssText="position: absolute; top: "+i.y1+"px; left: "+i.x1+"px; width: "+(i.x2-i.x1)+"px; height: "+(i.y2-i.y1)+"px;",this.update()},e.prototype.intersection=function(e,t){return{x1:Math.max(e.x1,t.x1),y1:Math.max(e.y1,t.y1),x2:Math.min(e.x2,t.x2),y2:Math.min(e.y2,t.y2)}},e.prototype.fromClientRect=function(e){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom}},e.prototype.destroy=function(){this.removeEventListeners(),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement.innerHTML=""},e}();t.EmbeddedMediaLayerVideoControlsComponent=p},5394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4771),r=function(){function e(e,t,n){var r=this;this.container=e,this.config=t,this.eventBus=n,this.download=function(){r.eventBus.dispatch(new i.PdfViewerDownloadAssetEvent),window&&window.location&&window.location.assign?window.location.assign(r.config.downloadUrl):window.open(r.config.downloadUrl)},this.onOnline=function(){r.showDownloadElement(),r.updateErrorText()},this.onOffline=function(){r.hideDownloadElement(),r.updateErrorText()},this.onClose=function(){r.destroy()},this.render()}return Object.defineProperty(e.prototype,"isOnline",{get:function(){return navigator&&navigator.onLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorText",{get:function(){return this.isOnline?this.config.errorText:this.config.offlineErrorText},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.element=document.createElement("div"),this.element.classList.add("pdf-viewer-error-message"),this.messageElement=document.createElement("span"),this.messageElement.innerText=this.errorText,this.element.appendChild(this.messageElement),this.config.disableDownload||(this.downloadElement=document.createElement("button"),this.downloadElement.classList.add("pdf-viewer-error-message__download"),this.downloadElement.type="button",this.config.tintColor&&(this.downloadElement.style.color=this.config.tintColor),this.downloadElement.addEventListener("click",this.download),this.downloadElement.innerText=this.config.downloadText,this.element.appendChild(this.downloadElement)),this.closeButtonElement=document.createElement("button"),this.closeButtonElement.classList.add("pdf-viewer-error-message__close"),this.closeButtonElement.type="button",this.closeButtonElement.addEventListener("click",this.onClose),this.closeButtonElement.setAttribute("aria-label",this.config.closeText),this.closeButtonElement.innerText="✕",this.element.appendChild(this.closeButtonElement),this.container.appendChild(this.element),window.addEventListener("online",this.onOnline),window.addEventListener("offline",this.onOffline)},e.prototype.updateErrorText=function(){this.messageElement.innerText=this.errorText},e.prototype.showDownloadElement=function(){!this.config.disableDownload&&this.downloadElement&&this.downloadElement.classList.remove("hidden")},e.prototype.hideDownloadElement=function(){!this.config.disableDownload&&this.downloadElement&&this.downloadElement.classList.add("hidden")},e.prototype.destroy=function(){this.closeButtonElement&&this.closeButtonElement.removeEventListener("click",this.onClose),window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline),this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element.innerHTML="",this.element=null,this.messageElement=null,this.downloadElement=null,this.closeButtonElement=null},e}();t.ErrorMessageComponent=r},2678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9738),r=n(7570),o=n(3885),s=n(2299),a=function(){function e(e,t,n,r,o){void 0===t&&(t=null),void 0===r&&(r=null),this.hostElement=e,this.url=t,this.maxDimensions=n,this.pageNumber=r,this.pdfJsService=o,this.dimensions=null,this.renderState=i.RenderState.Initial,this.image=new Image,this.element=document.createElement("div"),this.element.classList.add("sp-pdf-thumbnail-viewer-page")}return e.prototype.render=function(){var e=this;return this.renderState=i.RenderState.Running,this.hostElement.appendChild(this.element),this.renderImage().then((function(){e.renderState=i.RenderState.Finished}),(function(){return e.renderPdfCanvas()})).then((function(){e.renderState=i.RenderState.Finished}),(function(){e.renderState=i.RenderState.Failed}))},e.prototype.renderImage=function(){var e=this;return this.renderImagePromise=o.cancelable(new Promise((function(t,n){e.url||n();var i=window.devicePixelRatio,o=Math.floor(i*e.maxDimensions.width),s=Math.floor(i*e.maxDimensions.height),a=r.replaceParam("size",o+"x"+s,e.url);e.image.onload=function(){e.dimensions={width:e.image.naturalWidth,height:e.image.naturalHeight},e.element.appendChild(e.image),t()},e.image.onerror=function(e){n()},e.image.src=a}))),this.renderImagePromise},e.prototype.renderPdfCanvas=function(){var e=this;return this.renderPdfCanvasPromise=o.cancelable(new Promise((function(t,n){e.loadPdfPage().then((function(){var i=e.pdfPage.getViewport(1),r=window.devicePixelRatio,o=e.maxDimensions.width*r/i.width,s=i.clone({scale:o}),a=e.canvas=document.createElement("canvas"),c=a.getContext("2d");e.dimensions={width:Math.floor(s.width),height:Math.floor(s.height)},a.width=s.width,a.height=s.height;var l={canvasContext:c,viewport:s};e.renderPdfCanvasTask=e.pdfPage.render(l),e.renderPdfCanvasTask.promise.then((function(){e.element.appendChild(e.canvas),t()})).catch((function(e){"canvas"!==e.type?n():console.log("PfdJsService :: error instanceof RenderingCancelledException")}))}),(function(){return n()}))}))),this.renderPdfCanvasPromise},e.prototype.loadPdfPage=function(){var e=this;return this.loadPdfPagePromise=o.cancelable(new Promise((function(t,n){return e.pdfJsService.getPage(e.pageNumber).then((function(n){e.pdfPage=n,t()})).catch((function(e){n()}))}))),this.loadPdfPagePromise},e.prototype.destroy=function(){this.renderImagePromise&&(this.renderImagePromise.cancel(),this.renderImagePromise=null),this.renderPdfCanvasPromise&&(this.renderPdfCanvasPromise.cancel(),this.renderPdfCanvasPromise=null),this.loadPdfPagePromise&&(this.loadPdfPagePromise.cancel(),this.loadPdfPagePromise=null),this.renderPdfCanvasTask&&(this.renderPdfCanvasTask.cancel(),this.renderPdfCanvasTask=null),this.image.onload=null,this.image.onerror=null,this.image.src=s.TRANSPARENT_IMAGE_SRC,this.image=null,this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.element.innerHTML=""},e}();t.PdfThumbnailViewerPageComponent=a},3951:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7750),r=n(3501),o=n(2678),s=n(9738),a=function(){function e(e,t,n){var s=this;this.eventBus=e,this.pdfThumbnailViewerConfig=t,this.pdfJsService=n,this.selectedPageIds=new Set,this.defaultPageDimensions={width:600,height:600},this.maxPreviewDimensions={width:160,height:100},this.pageComponentsByPageId=new Map,this.isOn=!1,this.isScrolling=!1,this.onFocusChangeEvent=function(e){s.goto(e.payload.pdfViewerPage.id)},this.onScroll=function(e){s.isScrolling=!0,s.containerScrollTop=e.target.scrollTop,s.updateViewport(),s.updatePageIdsInViewport(),s.debouncedScroll()},this.onDebouncedScroll=function(){s.isScrolling=!1,s.orchestrateRendering()},this.onDebouncedResize=function(){s.orchestrateRendering()},this.onCheckboxClicked=function(e){var t=e.currentTarget,n=t.parentElement.parentElement.dataset.pageId;t.checked?s.selectPage(n):s.deselectPage(n)},this.onThumbnailClicked=function(e){var t=e.currentTarget.parentElement.parentElement.dataset.pageId;s.eventBus.dispatch(new r.PdfViewerNavigateToPageEvent({pageId:t}))},this.orchestrateRendering=function(){var e=s.determinePageIdToRender();if(e){var t=s.getThumbnailPreviewElement(e),n=s.thumbnailsByPageId.get(e),i=new o.PdfThumbnailViewerPageComponent(t,n.url,s.maxPreviewDimensions,n.pageNumber,s.pdfJsService);s.pageComponentsByPageId.set(e,i),i.render().then((function(){n.dimensions||s.resizePreview(e,i.dimensions),s.isScrolling||s.debouncedOrchestrateRenderingOnNextTick()}))}},this.container=this.pdfThumbnailViewerConfig.thumbnailContainer,this.tintColor=this.pdfThumbnailViewerConfig.tintColor,this.selectedPageIds=new Set(this.pdfThumbnailViewerConfig.selectedPageIds),this.thumbnails=[],this.thumbnailsByPageId=new Map,this.thumbnailsByPageNumber=new Map,this.buildThumbnailsList(),this.thumbnailHeight=152,this.container.classList.add("sp-pdf-thumbnail-viewer"),this.container.setAttribute("data-pdf-thumbnail-viewer-id",""+this.pdfThumbnailViewerConfig.id),this.throttledScroll=i.throttle(this.onScroll,50),this.debouncedScroll=i.debounce(this.onDebouncedScroll,100),this.debouncedResize=i.debounce(this.onDebouncedResize,50),this.debouncedOrchestrateRenderingOnNextTick=i.debounce(this.orchestrateRendering,0)}return e.prototype.on=function(e){this.isOn||(this.isOn=!0,this.viewport=null,this.containerScrollTop=null,this.isScrolling=!1,this.pageIdFocused=e,this._pageIdsInViewport=[],this._pageIdsEnteredViewport=[],this._pageIdsLeftViewport=[],this.container.innerHTML=this.renderThumbnails(this.thumbnails,e),this.removeEventListeners(),this.addEventListeners(),this.scrollToActiveThumbnail(e),this.orchestrateRendering())},e.prototype.off=function(){this.isOn&&(this.isOn=!1,this.isScrolling=!1,this.removeEventListeners(),this.destroyPageComponents(),this.resetContainerElement())},e.prototype.resize=function(){this.isOn&&(this.updateViewport(),this.updatePageIdsInViewport(),this.debouncedResize())},e.prototype.enablePageSelection=function(){this.container.classList.add("enable-page-selection")},e.prototype.disablePageSelection=function(){this.container.classList.remove("enable-page-selection")},e.prototype.selectAllPages=function(){var e=this;this.thumbnails.forEach((function(t){e.selectPage(t.pageId)}))},e.prototype.deselectAllPages=function(){var e=this;Array.from(this.selectedPageIds.keys()).forEach((function(t){e.deselectPage(t)}))},e.prototype.destroy=function(){this.thumbnails=[],this.removeEventListeners(),this.destroyPageComponents(),this.throttledScroll.cancel(),this.debouncedScroll.cancel(),this.debouncedResize.cancel(),this.debouncedOrchestrateRenderingOnNextTick.cancel(),this.resetContainerElement()},e.prototype.goto=function(e){if(this.pageIdFocused!==e){var t=this.getThumbnailContainerElement(this.pageIdFocused),n=this.getThumbnailContainerElement(e);this.pageIdFocused=e,t&&t.classList.remove("thumbnail-active"),n&&n.classList.add("thumbnail-active"),this.scrollToActiveThumbnail(e)}},e.prototype.resetContainerElement=function(){this.container.getAttribute("data-pdf-thumbnail-viewer-id")===this.pdfThumbnailViewerConfig.id&&(this.container.innerHTML="")},e.prototype.buildThumbnailsList=function(){var e=this;this.pdfThumbnailViewerConfig.pages.forEach((function(t){var n=t.id,i=t.previewUrl,r=t.dimensions,o=t.pageNumber,s=t.annotations,a=!1,c=!1;e.pdfThumbnailViewerConfig.lockedPages&&e.pdfThumbnailViewerConfig.lockedPages.forEach((function(e){var t=e.split("-").map((function(e){return Number(e)})),n=t[0],i=t[1];o>=n&&o<=i&&(a=!0,c=o===n)}));var l={pageId:n,pageNumber:o,url:i,isPartOfRange:a,isFirstPageOfRange:c,annotations:s,dimensions:r};e.thumbnails.push(l),e.thumbnailsByPageId.set(n,l),e.thumbnailsByPageNumber.set(o,l)}))},e.prototype.renderThumbnails=function(e,t){var n=this;return'\n        <div class="group-container">'+e.map((function(e){var i=e.pageId,r=e.pageNumber,o=e.isPartOfRange,s=e.isFirstPageOfRange,a=o&&!s?"indent-on-selection":"",c=!o||s,l=t===i?"thumbnail-active":"",u=n.selectedPageIds.has(i),d=e.dimensions||n.defaultPageDimensions,h=n.scaleDimensions(d,n.maxPreviewDimensions);return'\n                    <div class="sp-pdf-viewer-thumbnail-container '+l+" "+a+'" style="height: 152px" data-page-id="'+i+'">\n                        '+(c?n.renderCheckbox(u):"")+'\n                        <div class="thumbnail-label" title="'+r+'">'+r+'</div>\n                        <div class="preview-wrapper">\n                            <div class="preview" style="width: '+h.width+"px; height: "+h.height+'px;" ></div>\n                        </div>\n                    </div>'})).join("\n")+"\n        </div>"},e.prototype.scaleDimensions=function(e,t,n){void 0===n&&(n=!1);var i=t.width/e.width,r=t.height/e.height,o=n?i>r?i:r:i<r?i:r;return{width:e.width*o,height:e.height*o}},e.prototype.renderCheckbox=function(e){return'\n            <label class="sp-pdf-thumbnail-viewer-checkbox">\n                <input type="checkbox" '+(e?"checked":"")+' />\n                <div class="sp-pdf-thumbnail-viewer-checkbox__indicator" style="background: '+this.tintColor+'"></div>\n            </label>\n        '},e.prototype.addEventListeners=function(){var e=this,t=this.container.querySelectorAll(".sp-pdf-viewer-thumbnail-container");Array.from(t).forEach((function(t){var n=t.querySelector('input[type="checkbox"]');n&&n.addEventListener("click",e.onCheckboxClicked);var i=t.querySelector(".preview");i&&i.addEventListener("click",e.onThumbnailClicked)})),this.container.addEventListener("scroll",this.throttledScroll),this.eventBus.on(r.PdfViewerEventType.FocusChange,this.onFocusChangeEvent)},e.prototype.removeEventListeners=function(){var e=this,t=this.container.querySelectorAll(".sp-pdf-viewer-thumbnail-container");Array.from(t).forEach((function(t){var n=t.querySelector('input[type="checkbox"]');n&&n.removeEventListener("click",e.onCheckboxClicked);var i=t.querySelector(".thumbnail-image");i&&i.removeEventListener("click",e.onThumbnailClicked)})),this.container.removeEventListener("scroll",this.throttledScroll),this.eventBus.off(r.PdfViewerEventType.FocusChange,this.onFocusChangeEvent)},e.prototype.updateViewport=function(){this.viewport={y1:this.containerScrollTop,y2:this.container.clientHeight+this.containerScrollTop}},e.prototype.updatePageIdsInViewport=function(){var e=this,t=[],n=0;if(this.thumbnails.forEach((function(i){var r=n,o=n+e.thumbnailHeight;e.viewport.y1<=o&&e.viewport.y2>=r&&t.push(i.pageId),n+=e.thumbnailHeight})),!i.isEqual(this.pageIdsInViewport,t)){var r=t.filter((function(t){return!e.pageIdsInViewport.includes(t)})),o=this.pageIdsInViewport.filter((function(e){return!t.includes(e)}));this.pageIdsInViewport=t,r.length&&(this.pageIdsEnteredViewport=r),o.length&&(this.pageIdsLeftViewport=o)}},e.prototype.resizePreview=function(e,t){var n=this.getThumbnailPreviewElement(e),i=this.scaleDimensions(t,this.maxPreviewDimensions);n.style.width=i.width+"px",n.style.height=i.height+"px"},e.prototype.selectPage=function(e){var t=this.thumbnailsByPageId.get(e);if(!this.selectedPageIds.has(e)&&(!t.isPartOfRange||t.isFirstPageOfRange)){this.eventBus.dispatch(new r.PdfViewerSelectPageEvent({pageId:e})),this.selectedPageIds.add(e);var n=this.getCheckboxElement(e);if(n&&(n.checked=!0),t.isFirstPageOfRange)for(var i=this.thumbnailsByPageNumber.get(t.pageNumber+1);i&&!this.selectedPageIds.has(i.pageId)&&i.isPartOfRange&&!i.isFirstPageOfRange;)this.eventBus.dispatch(new r.PdfViewerSelectPageEvent({pageId:i.pageId})),this.selectedPageIds.add(i.pageId),i=this.thumbnailsByPageNumber.get(i.pageNumber+1)}},e.prototype.deselectPage=function(e){var t=this.thumbnailsByPageId.get(e);if(this.selectedPageIds.has(e)&&(!t.isPartOfRange||t.isFirstPageOfRange)){this.eventBus.dispatch(new r.PdfViewerDeselectPageEvent({pageId:e})),this.selectedPageIds.delete(e);var n=this.getCheckboxElement(e);if(n&&(n.checked=!1),t.isFirstPageOfRange)for(var i=this.thumbnailsByPageNumber.get(t.pageNumber+1);i&&this.selectedPageIds.has(i.pageId)&&i.isPartOfRange&&!i.isFirstPageOfRange;)this.eventBus.dispatch(new r.PdfViewerDeselectPageEvent({pageId:i.pageId})),this.selectedPageIds.delete(i.pageId),i=this.thumbnailsByPageNumber.get(i.pageNumber+1)}},e.prototype.scrollToActiveThumbnail=function(e){var t=this.getThumbnailContainerElement(e);if(t){var n=t.getBoundingClientRect().top-this.container.getBoundingClientRect().top,i=t.clientHeight,r=this.container.clientHeight,o=n<0;n+i>r&&(this.container.scrollTop+=n+i-r),o&&(this.container.scrollTop+=n),this.updateViewport(),this.updatePageIdsInViewport()}},Object.defineProperty(e.prototype,"pageIdsInViewport",{get:function(){return this._pageIdsInViewport},set:function(e){this._pageIdsInViewport=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdsEnteredViewport",{get:function(){return this._pageIdsEnteredViewport},set:function(e){this._pageIdsEnteredViewport=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdsLeftViewport",{get:function(){return this._pageIdsLeftViewport},set:function(e){var t=this;this._pageIdsLeftViewport=e,e.forEach((function(e){var n;(n=t.pageComponentsByPageId.get(e))&&(n.destroy(),t.pageComponentsByPageId.delete(e))}))},enumerable:!0,configurable:!0}),e.prototype.getThumbnailContainerElement=function(e){return this.container.querySelector('[data-page-id="'+e+'"]')},e.prototype.getThumbnailPreviewElement=function(e){return this.container.querySelector('[data-page-id="'+e+'"] .preview')},e.prototype.getCheckboxElement=function(e){return this.container.querySelector('[data-page-id="'+e+'"] input[type=checkbox]')},e.prototype.destroyPageComponents=function(){this.pageComponentsByPageId.forEach((function(e){return e.destroy()})),this.pageComponentsByPageId=new Map},e.prototype.determinePageIdToRender=function(){var e=this;return Array.from(this.pageComponentsByPageId.values()).find((function(e){return e.renderState===s.RenderState.Running}))?null:this.pageIdsInViewport.find((function(t){return!e.pageComponentsByPageId.has(t)}))},e}();t.PdfThumbnailViewer=a},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1684),r=n(9738),o=n(5255),s=function(){function e(e,t){var n=this;this.pdfViewerPage=e,this.parentElement=t,this.loadStateColors={},this.renderStateColors={},window.dat&&(this.loadStateColors[i.LoadState.None]="#000000",this.loadStateColors[i.LoadState.Loading]="#0000FF",this.loadStateColors[i.LoadState.Finished]="#00FF00",this.loadStateColors[i.LoadState.Failed]="#FF0000",this.renderStateColors[r.RenderState.Initial]="#000000",this.renderStateColors[r.RenderState.Running]="#0000FF",this.renderStateColors[r.RenderState.Finished]="#00FF00",this.renderStateColors[r.RenderState.Failed]="#FF0000",this.render(),this.updateInterval=setInterval((function(){n.update()}),94))}return e.prototype.render=function(){var e=this.datGUI=new window.dat.GUI({width:500,closeOnTop:!0,autoPlace:!1}),t=this.datGUIConfig={};this.update(),e.add(this.pdfViewerPage,"id").name("Id").listen();var n=e.addFolder("Load");n.addColor(t,"loadStateColor").name("Load state").listen(),n.open();var i=e.addFolder("Preview");i.addColor(t,"previewRenderStateColor").name("Render state").listen(),i.open();var r=e.addFolder("Render");r.addColor(t,"renderStateColor").name("Render state").listen(),r.open();var o=e.addFolder("Pdf Canvas");o.addColor(t,"pdfCanvasRenderStateColor").name("Render state").listen(),o.open();var s=e.addFolder("Pdf Text Layer");s.addColor(t,"pdfTextRenderStateColor").name("Render state").listen(),s.open();var a=e.addFolder("Pdf Annotation Layer");a.addColor(t,"pdfAnnotationRenderStateColor").name("Render state").listen(),a.open();var c=e.addFolder("Pdf Embedded Media");c.addColor(t,"pdfEmbeddedMediaRenderStateColor").name("Render state").listen(),c.open();var l=e.addFolder("Annotation Layer");l.addColor(t,"annotationRenderStateColor").name("Render state").listen(),l.open(),this.parentElement.appendChild(this.datGUI.domElement)},e.prototype.update=function(){this.datGUIConfig.pdfWidth=this.pdfViewerPage.dimensions?this.pdfViewerPage.dimensions.width:null,this.datGUIConfig.pdfHeight=this.pdfViewerPage.dimensions?this.pdfViewerPage.dimensions.height:null,this.datGUIConfig.loadStateColor=this.loadStateColors[this.pdfViewerPage.loadState],this.datGUIConfig.previewRenderStateColor=this.renderStateColors[this.pdfViewerPage.previewRenderState],this.datGUIConfig.renderStateColor=this.renderStateColors[this.pdfViewerPage.renderState],this.datGUIConfig.pdfCanvasRenderStateColor=this.renderStateColors[this.pdfViewerPage.layersRenderState.get(o.PdfViewerPageLayer.PdfCanvas)],this.datGUIConfig.pdfEmbeddedMediaRenderStateColor=this.renderStateColors[this.pdfViewerPage.layersRenderState.get(o.PdfViewerPageLayer.PdfEmbeddedMedia)],this.datGUIConfig.pdfTextRenderStateColor=this.renderStateColors[this.pdfViewerPage.layersRenderState.get(o.PdfViewerPageLayer.PdfText)],this.datGUIConfig.pdfAnnotationRenderStateColor=this.renderStateColors[this.pdfViewerPage.layersRenderState.get(o.PdfViewerPageLayer.PdfAnnotations)],this.datGUIConfig.annotationRenderStateColor=this.renderStateColors[this.pdfViewerPage.layersRenderState.get(o.PdfViewerPageLayer.Annotations)]},e.prototype.destroy=function(){clearInterval(this.updateInterval),this.datGUI&&this.datGUI.destroy()},e}();t.PdfViewerPageDebug=s},3571:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LoadStateChange="[showpad-pdf-viewer-page] Load State Change",e.PreviewRenderStateChange="[showpad-pdf-viewer-page] Preview Render State Change",e.RenderStateChange="[showpad-pdf-viewer-page] Render State Change",e.LayerRenderStateChange="[showpad-pdf-viewer-page] Layer Render State Change",e.DimensionsChange="[showpad-pdf-viewer-page] Dimensions Change"}(n=t.PdfViewerPageEventType||(t.PdfViewerPageEventType={}));t.PdfViewerPageLoadStateChangeEvent=function(e){this.payload=e,this.type=n.LoadStateChange};t.PdfViewerPagePreviewRenderStateChangeEvent=function(e){this.payload=e,this.type=n.PreviewRenderStateChange};t.PdfViewerPageRenderStateChangeEvent=function(e){this.payload=e,this.type=n.RenderStateChange};t.PdfViewerPageLayerRenderStateChangeEvent=function(e){this.payload=e,this.type=n.LayerRenderStateChange};t.PdfViewerPageDimensionsChangeEvent=function(e){this.payload=e,this.type=n.DimensionsChange}},7338:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(7570),o=n(7750),s=n(3885),a=n(1057),c=n(9738),l=n(3501),u=n(3571),d=n(9892),h=n(734),p=n(145),f=n(4695),v=n(5394),m=n(8815),g=n(1684),w=n(2299),y=n(5255),E=n(8205),b=n(4496).Z,P=function(){function e(e,t,n,i,r){var o=this;this.config=e,this.pageConfig=t,this.eventBus=n,this.pdfJsService=i,this.tokenService=r,this._previewRenderState=c.RenderState.Initial,this._loadState=g.LoadState.None,this.renderState=c.RenderState.Initial,this._requiredLayers=new Set([y.PdfViewerPageLayer.PdfCanvas,y.PdfViewerPageLayer.PdfText,y.PdfViewerPageLayer.PdfAnnotations,y.PdfViewerPageLayer.PdfEmbeddedMedia,y.PdfViewerPageLayer.Annotations]),this.layersRenderState=new Map([[y.PdfViewerPageLayer.PdfCanvas,c.RenderState.Initial],[y.PdfViewerPageLayer.PdfText,c.RenderState.Initial],[y.PdfViewerPageLayer.PdfAnnotations,c.RenderState.Initial],[y.PdfViewerPageLayer.PdfEmbeddedMedia,c.RenderState.Initial],[y.PdfViewerPageLayer.Annotations,c.RenderState.Initial]]),this.annotationHelper=null,this.previewImage=new Image,this.pdfCanvasRenderedAtScale=null,this.isFocused=!1,this.disableEmbeddedMediaAutoPlay=!1,this.maxCanvasPixels=9e6,this.dispatchOneRenderedPreviewFocusEvent=function(e){e.payload.pdfViewerPage.id===o.id&&(o.eventBus.dispatch(new l.PdfViewerRenderedPreviewFocusEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(o)})),o.eventBus.off(l.PdfViewerEventType.PreviewRendered,o.dispatchOneRenderedPreviewFocusEvent))},this.dispatchOneRenderedPageFocusEvent=function(e){e.payload.pdfViewerPage.id===o.id&&(o.eventBus.dispatch(new l.PdfViewerRenderedPageFocusEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(o)})),o.eventBus.off(l.PdfViewerEventType.PageRendered,o.dispatchOneRenderedPageFocusEvent))},this.createAnnotationHelperElement()}return Object.defineProperty(e.prototype,"previewRenderState",{get:function(){return this._previewRenderState},set:function(e){this._previewRenderState=e,this.eventBus.dispatch(new u.PdfViewerPagePreviewRenderStateChangeEvent({id:this.id,renderState:this.previewRenderState}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadState",{get:function(){return this._loadState},set:function(e){this._loadState=e,this.eventBus.dispatch(new u.PdfViewerPageLoadStateChangeEvent({pageId:this.id,loadState:this.loadState}))},enumerable:!0,configurable:!0}),e.prototype.updateRenderState=function(){var e=this.calculateRenderState();this.renderState!==e&&(this.renderState=e,this.eventBus.dispatch(new u.PdfViewerPageRenderStateChangeEvent({id:this.id,renderState:e})),e===c.RenderState.Finished&&this.eventBus.dispatch(new l.PdfViewerPageRenderedEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(this)})),e===c.RenderState.Failed&&this.eventBus.dispatch(new l.PdfViewerRenderFailedEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(this)})))},Object.defineProperty(e.prototype,"requiredLayers",{get:function(){return this._requiredLayers},set:function(e){var t=new Set(e);t.has(y.PdfViewerPageLayer.PdfCanvas)||this.destroyPdfCanvas(),t.has(y.PdfViewerPageLayer.PdfText)||this.destroyPdfText(),t.has(y.PdfViewerPageLayer.PdfAnnotations)||this.destroyPdfAnnotations(),t.has(y.PdfViewerPageLayer.Annotations)||this.destroyAnnotations(),t.has(y.PdfViewerPageLayer.PdfEmbeddedMedia)||this.destroyPdfEmbeddedMedia(),t.has(y.PdfViewerPageLayer.PdfEmbeddedMedia)&&!this.embeddedData&&t.delete(y.PdfViewerPageLayer.PdfEmbeddedMedia),this._requiredLayers=t,this.updateRenderState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredLayersRenderState",{get:function(){var e=this,t=new Map;return this.requiredLayers.forEach((function(n){return t.set(n,e.layersRenderState.get(n))})),t},enumerable:!0,configurable:!0}),e.prototype.calculateRenderState=function(){var e=this,t=[];return this.requiredLayers.forEach((function(n){return t.push(e.layersRenderState.get(n))})),t.length?t.every((function(e){return e===c.RenderState.Initial}))?c.RenderState.Initial:t.every((function(e){return e===c.RenderState.Finished}))?c.RenderState.Finished:t.some((function(e){return e===c.RenderState.Failed}))?c.RenderState.Failed:c.RenderState.Running:c.RenderState.Finished},e.prototype.updateLayersRenderState=function(e,t){this.layersRenderState.set(e,t),this.eventBus.dispatch(new u.PdfViewerPageLayerRenderStateChangeEvent({id:this.id,layer:e,renderState:t})),this.updateRenderState()},Object.defineProperty(e.prototype,"id",{get:function(){return this.pageConfig.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageNumber",{get:function(){return this.pageConfig.pageNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){return this.pageConfig.previewUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"annotations",{get:function(){if(this.annotationHelper){var e=this.annotationHelper.getData();return e.length?e:null}return this.pageConfig.annotations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"embeddedData",{get:function(){return this.pageConfig.embeddedData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageElementWidth",{get:function(){if(this.pageElement)return this.pageElement.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageElementHeight",{get:function(){if(this.pageElement)return this.pageElement.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this._dimensions||this.pageConfig.dimensions},set:function(e){this._dimensions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.pageElementWidth/this.dimensions.width},enumerable:!0,configurable:!0}),e.prototype.renderPreview=function(){var e=this;if(this.previewRenderState===c.RenderState.Initial){this.previewRenderState=c.RenderState.Running;var t=r.replaceParam("size","1600x1600",this.previewUrl);this.previewImage.onload=function(){e.previewRenderState=c.RenderState.Finished,e.eventBus.dispatch(new l.PdfViewerPreviewRenderedEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(e)})),e.pageElement.classList.add("sp-pdf-viewer-page--preview-rendered")},this.previewImage.onerror=function(t){e.previewRenderState=c.RenderState.Failed},this.pageElement.style.backgroundImage="url("+t+")",this.previewImage.src=t}},e.prototype.destroyPreview=function(){this.previewImage.onload=null,this.previewImage.onerror=null,this.previewImage.src=w.TRANSPARENT_IMAGE_SRC,this.pageElement&&(this.pageElement.style.backgroundImage=null),this.previewRenderState=c.RenderState.Initial},e.prototype.load=function(){var e=this;this.loadState===g.LoadState.None&&(this.loadState=g.LoadState.Loading,this.loadPromise=s.cancelable(new Promise((function(t,n){e.loadPdfPage().then((function(){return e.ensurePdfEmbeddedMediaDependencies()})).then((function(){e.loadState=g.LoadState.Finished,e.destroyErrorMessage(),t()})).catch((function(t){e.loadState=g.LoadState.Failed,e.renderErrorMessage(),console.error(t),n()}))}))))},e.prototype.loadPdfPage=function(){var e=this;return this.loadPdfPagePromise||(this.loadPdfPagePromise=s.cancelable(new Promise((function(t,n){return e.pdfJsService.getPage(e.pageNumber).then((function(n){e.pdfPage=n;var i=E.PdfJsHelper.calculatePageDimensions(e.pdfPage);o.isEqual(i,e.dimensions)||(e.dimensions=i,e.eventBus.dispatch(new u.PdfViewerPageDimensionsChangeEvent({pageId:e.id}))),t()})).catch((function(t){e.loadPdfPagePromise=null,n()}))})))),this.loadPdfPagePromise},e.prototype.ensurePdfEmbeddedMediaDependencies=function(){var e=this;return this.embeddedData?(this.ensurePdfEmbeddedMediaDependenciesPromise||(this.imageExtractorService=new m.PdfJsEmbeddedMediaSVGRendererImageExtractorService(this.pdfPage,this.embeddedData.media),this.ensurePdfEmbeddedMediaDependenciesPromise=s.cancelable(new Promise((function(t,n){e.imageExtractorService.render().then((function(n){e.pdfPageExtractedImages=n,e.embeddedData.media.forEach((function(e,t){e.renderIndex=null;var i=n[t];i&&(e.renderIndex=i.index)})),e.imageExtractorService.destroy(),e.imageExtractorService=null,t()}),(function(){e.ensurePdfEmbeddedMediaDependenciesPromise=null,e.imageExtractorService.destroy(),e.imageExtractorService=null,n()}))})))),this.ensurePdfEmbeddedMediaDependenciesPromise):s.cancelable(Promise.resolve())},e.prototype.renderPdfCanvas=function(){var e=this;this.updateLayersRenderState(y.PdfViewerPageLayer.PdfCanvas,c.RenderState.Running),this.pdfCanvasRenderedAtScale=this.scale,this.renderPdfCanvasTask&&(this.renderPdfCanvasTask.cancel(),this.renderPdfCanvasTask=null);var t=window.devicePixelRatio,n=a.capDimensions(this.pageElementWidth*t,this.pageElementHeight*t,this.maxCanvasPixels).width/this.dimensions.width,i=this.pdfPage.getViewport(n),r=document.createElement("canvas"),o=r.getContext("2d");r.width=i.width,r.height=i.height;var s={canvasContext:o,viewport:i};this.renderPdfCanvasTask=this.pdfPage.render(s),this.renderPdfCanvasTask.promise.then((function(){e.pdfCanvasLayerWrapperElement.innerHTML="",e.pdfCanvasLayerWrapperElement.appendChild(r),e.pdfCanvasLayerElement=r,e.pageElement.classList.add("sp-pdf-viewer-page--pdf-canvas-rendered"),e.updateLayersRenderState(y.PdfViewerPageLayer.PdfCanvas,c.RenderState.Finished)})).catch((function(t){"canvas"!==t.type?(console.error(t),e.updateLayersRenderState(y.PdfViewerPageLayer.PdfCanvas,c.RenderState.Failed)):console.log("PfdJsService :: error instanceof RenderingCancelledException")}))},e.prototype.destroyPdfCanvas=function(){this.renderPdfCanvasTask&&(this.renderPdfCanvasTask.cancel(),this.renderPdfCanvasTask=null),this.pdfCanvasLayerWrapperElement&&(this.pdfCanvasLayerWrapperElement.innerHTML=""),this.pdfCanvasLayerElement&&(this.pdfCanvasLayerElement=null),this.pdfCanvasRenderedAtScale=null,this.updateLayersRenderState(y.PdfViewerPageLayer.PdfCanvas,c.RenderState.Initial)},e.prototype.renderPdfEmbeddedMedia=function(){var e=this;this.embeddedData?(this.updateLayersRenderState(y.PdfViewerPageLayer.PdfEmbeddedMedia,c.RenderState.Running),this.pdfEmbeddedMediaLayerComponent||(this.pdfEmbeddedMediaLayerComponent=new h.EmbeddedMediaLayerComponent(JSON.parse(JSON.stringify(this.embeddedData)),this.pdfEmbeddedMediaLayerWrapperElement,this.pdfPage,this.pdfPageExtractedImages,this.disableEmbeddedMediaAutoPlay,this.maxCanvasPixels)),this.pdfEmbeddedMediaLayerComponent.render().then((function(){e.updateLayersRenderState(y.PdfViewerPageLayer.PdfEmbeddedMedia,c.RenderState.Finished)}),(function(){e.updateLayersRenderState(y.PdfViewerPageLayer.PdfEmbeddedMedia,c.RenderState.Failed)}))):this.updateLayersRenderState(y.PdfViewerPageLayer.PdfEmbeddedMedia,c.RenderState.Finished)},e.prototype.resizePdfEmbeddedMedia=function(){this.pdfEmbeddedMediaLayerComponent&&this.pdfEmbeddedMediaLayerComponent.resize()},e.prototype.destroyPdfEmbeddedMedia=function(){this.pdfEmbeddedMediaLayerComponent&&(this.pdfEmbeddedMediaLayerComponent.destroy(),this.pdfEmbeddedMediaLayerComponent=null),this.updateLayersRenderState(y.PdfViewerPageLayer.PdfEmbeddedMedia,c.RenderState.Initial)},e.prototype.renderPdfText=function(){if(this.layersRenderState.get(y.PdfViewerPageLayer.PdfText)===c.RenderState.Initial){this.updateLayersRenderState(y.PdfViewerPageLayer.PdfText,c.RenderState.Running);try{var e=new window.PDFJS.DefaultTextLayerFactory,t=document.createElement("div"),n=this.pdfPage.getViewport(1),i=e.createTextLayerBuilder(t,0,n,!1),r=this.pdfPage.streamTextContent({normalizeWhitespace:!0});t.classList.add("pdf-text-layer-element"),t.style.width=n.width+"px",t.style.height=n.height+"px",i.setTextContentStream(r),i.render(),this.pdfTextLayerWrapperElement.innerHTML="",this.pdfTextLayerWrapperElement.appendChild(t),this.pdfTextLayerElement=t,this.resizePdfText(),this.updateLayersRenderState(y.PdfViewerPageLayer.PdfText,c.RenderState.Finished)}catch(e){console.error(e),this.updateLayersRenderState(y.PdfViewerPageLayer.PdfText,c.RenderState.Failed)}}},e.prototype.repaintPdfCanvas=function(){var e=this;this.pdfCanvasLayerElement&&(this.pdfCanvasLayerElement.style.setProperty("transform","translateZ(0)"),requestAnimationFrame((function(){e.pdfCanvasLayerElement&&e.pdfCanvasLayerElement.style.removeProperty("transform")})))},e.prototype.resizePdfText=function(){this.pdfTextLayerElement&&this.pageElement&&(this.pdfTextLayerElement.style.transform="scale("+this.scale+")")},e.prototype.destroyPdfText=function(){this.pdfTextLayerWrapperElement&&(this.pdfTextLayerWrapperElement.innerHTML=""),this.pdfTextLayerElement=null,this.updateLayersRenderState(y.PdfViewerPageLayer.PdfText,c.RenderState.Initial)},e.prototype.renderPdfAnnotations=function(){var e=this;this.layersRenderState.get(y.PdfViewerPageLayer.PdfAnnotations)===c.RenderState.Initial&&(this.updateLayersRenderState(y.PdfViewerPageLayer.PdfAnnotations,c.RenderState.Running),this.pdfPageGetAnnotationsPromise=s.cancelable(this.pdfPage.getAnnotations("display")),this.pdfPageGetAnnotationsPromise.then((function(t){if(t&&t.length){var n=e.pdfPage.getViewport(1),i=document.createElement("div");i.classList.add("pdf-annotation-layer-element"),i.style.width=n.width+"px",i.style.height=n.height+"px",new window.PDFJS.AnnotationLayerBuilder({pageDiv:i,pdfPage:e.pdfPage,renderInteractiveForms:!1,linkService:e.pdfJsService.pdfJsLinkService,l10n:window.PDFJS.NullL10n,imageResourcesPath:"/images/"}).render(n,"display"),e.pdfAnnotationLayerWrapperElement.innerHTML="",e.pdfAnnotationLayerWrapperElement.appendChild(i),e.pdfAnnotationLayerElement=i,e.resizePdfAnnotations()}e.updateLayersRenderState(y.PdfViewerPageLayer.PdfAnnotations,c.RenderState.Finished)}),(function(t){console.error(t),e.updateLayersRenderState(y.PdfViewerPageLayer.PdfAnnotations,c.RenderState.Failed)})))},e.prototype.resizePdfAnnotations=function(){this.pdfAnnotationLayerElement&&this.pageElement&&(this.pdfAnnotationLayerElement.style.transform="scale("+this.scale+")")},e.prototype.destroyPdfAnnotations=function(){this.pdfPageGetAnnotationsPromise&&(this.pdfPageGetAnnotationsPromise.cancel(),this.pdfPageGetAnnotationsPromise=null),this.pdfAnnotationLayerWrapperElement&&(this.pdfAnnotationLayerWrapperElement.innerHTML=""),this.pdfAnnotationLayerElement=null,this.updateLayersRenderState(y.PdfViewerPageLayer.PdfAnnotations,c.RenderState.Initial)},e.prototype.renderPageElement=function(e){e&&(this.parentElement=e,this.pageElement||(this.pageElement=document.createElement("div"),this.pageElement.classList.add(y.PdfViewerPageClasses.Page),this.pdfCanvasLayerWrapperElement=document.createElement("div"),this.pdfCanvasLayerWrapperElement.classList.add(y.PdfViewerPageClasses.CanvasLayer),this.pageElement.appendChild(this.pdfCanvasLayerWrapperElement),this.pdfEmbeddedMediaLayerWrapperElement=document.createElement("div"),this.pdfEmbeddedMediaLayerWrapperElement.classList.add(y.PdfViewerPageClasses.MediaLayer),this.pageElement.appendChild(this.pdfEmbeddedMediaLayerWrapperElement),this.pdfTextLayerWrapperElement=document.createElement("div"),this.pdfTextLayerWrapperElement.classList.add(y.PdfViewerPageClasses.TextLayer),this.pageElement.appendChild(this.pdfTextLayerWrapperElement),this.pdfAnnotationLayerWrapperElement=document.createElement("div"),this.pdfAnnotationLayerWrapperElement.classList.add(y.PdfViewerPageClasses.PdfAnnotationLayer),this.pageElement.appendChild(this.pdfAnnotationLayerWrapperElement),this.annotationLayerWrapperElement=document.createElement("div"),this.annotationLayerWrapperElement.classList.add(y.PdfViewerPageClasses.AnnotationLayer),this.annotationLayerWrapperElement.appendChild(this.annotationHelperElement),this.pageElement.appendChild(this.annotationLayerWrapperElement)),this.pageElement.parentElement||this.parentElement.appendChild(this.pageElement))},e.prototype.getAnnotationHelper=function(){if(!this.annotationHelper)try{this.createAnnotationHelper()}catch(e){}return this.annotationHelper},e.prototype.didAnnotationsChange=function(){return!!this.annotationHelper&&this.annotationHelper.didAnnotationsChange()},e.prototype.getAnnotations=function(){return this.annotations},e.prototype.createAnnotationHelperElement=function(){this.annotationHelperElement=document.createElement("div"),this.annotationHelperElement.classList.add("sp-pdf-viewer-page__annotation-helper-element")},e.prototype.createAnnotationHelper=function(){if(!this.annotationHelper){var e=this.annotations||[];this.annotationHelper=new b(this.annotationHelperElement,{meta:{},data:i(e)},{create:this.pageConfig.canCreateAnnotations,creatorZoom:this.scale,append:!0}),this.annotationHelper.creator&&this.annotationHelper.creator.setIsEnabled(!1)}},Object.defineProperty(e.prototype,"hasAnnotations",{get:function(){return this.annotations&&!!this.annotations.length},enumerable:!0,configurable:!0}),e.prototype.renderAnnotations=function(){if(this.hasAnnotations){if(this.layersRenderState.get(y.PdfViewerPageLayer.Annotations)!==c.RenderState.Initial)return;this.updateLayersRenderState(y.PdfViewerPageLayer.Annotations,c.RenderState.Running);try{this.createAnnotationHelper(),this.resizeAnnotations(),this.updateLayersRenderState(y.PdfViewerPageLayer.Annotations,c.RenderState.Finished)}catch(e){console.error(e),this.updateLayersRenderState(y.PdfViewerPageLayer.Annotations,c.RenderState.Failed)}}else this.updateLayersRenderState(y.PdfViewerPageLayer.Annotations,c.RenderState.Finished)},e.prototype.resizeAnnotations=function(){this.annotationHelper&&this.annotationHelper.resize(this.scale)},e.prototype.destroyAnnotations=function(){this.annotationLayerWrapperElement&&(this.annotationLayerWrapperElement.innerHTML=""),this.updateLayersRenderState(y.PdfViewerPageLayer.Annotations,c.RenderState.Initial)},e.prototype.resetAnnotations=function(){this.annotationHelper&&this.annotationHelper.reset()},e.prototype.resize=function(){this.pdfPage&&this.pageElement&&(this.repaintPdfCanvas(),this.resizePdfText(),this.resizePdfAnnotations(),this.resizePdfEmbeddedMedia(),this.resizeAnnotations())},e.prototype.enableAnnotations=function(){this.annotationHelper&&this.pageElement&&(this.annotationHelper.creator.setIsEnabled(!0),this.pageElement.classList.add(y.PdfViewerPageClasses.IsAnnotating)),this.pdfEmbeddedMediaLayerComponent&&this.pdfEmbeddedMediaLayerComponent.pauseMedia()},e.prototype.disableAnnotations=function(){this.annotationHelper&&this.pageElement&&(this.annotationHelper.creator.setIsEnabled(!1),this.pageElement.classList.remove(y.PdfViewerPageClasses.IsAnnotating))},e.prototype.destroyPageElement=function(){this.pageElement&&this.pageElement.parentElement&&this.pageElement.parentElement.removeChild(this.pageElement),this.pageElement=null},e.prototype.reset=function(){this.loadPromise&&(this.loadPromise.cancel(),this.loadPromise=null),this.loadPdfPagePromise&&(this.loadPdfPagePromise.cancel(),this.loadPdfPagePromise=null),this.ensurePdfEmbeddedMediaDependenciesPromise&&(this.ensurePdfEmbeddedMediaDependenciesPromise.cancel(),this.ensurePdfEmbeddedMediaDependenciesPromise=null),this.imageExtractorService&&(this.imageExtractorService.destroy(),this.imageExtractorService=null),this.pdfPage&&(this.pdfPage.cleanup(),this.pdfPage=null),this.destroyPreview(),this.destroyPdfCanvas(),this.destroyPdfText(),this.destroyPdfAnnotations(),this.destroyPdfEmbeddedMedia(),this.destroyAnnotations(),this.destroyErrorMessage(),this.destroyDebug(),this.destroyPageElement(),this.blur(),this.loadState=g.LoadState.None},e.prototype.destroy=function(){this.reset()},e.prototype.renderLayer=function(e){void 0===e&&(e=null),this.pdfPage&&this.requiredLayers.has(e)&&(e===y.PdfViewerPageLayer.PdfCanvas&&this.renderPdfCanvas(),e===y.PdfViewerPageLayer.PdfText&&this.renderPdfText(),e===y.PdfViewerPageLayer.PdfAnnotations&&this.renderPdfAnnotations(),e===y.PdfViewerPageLayer.PdfEmbeddedMedia&&this.renderPdfEmbeddedMedia(),e===y.PdfViewerPageLayer.Annotations&&this.renderAnnotations())},e.prototype.renderDebug=function(){this.pdfViewerPageDebug||(this.pdfViewerPageDebug=new p.PdfViewerPageDebug(this,this.pageElement))},e.prototype.destroyDebug=function(){this.pdfViewerPageDebug&&this.pdfViewerPageDebug.destroy(),this.pdfViewerPageDebug=null},e.prototype.renderErrorMessage=function(){this.errorMessageComponent||(this.errorMessageComponent=new v.ErrorMessageComponent(this.pageElement,{disableDownload:this.config.disableDownload,downloadUrl:this.config.downloadUrl,downloadText:this.config.translations[f.TranslationKeys.Download],errorText:this.config.translations[f.TranslationKeys.RenderError],offlineErrorText:this.config.translations[f.TranslationKeys.RenderErrorWhenOffline],closeText:this.config.translations[f.TranslationKeys.Close],tintColor:this.config.tintColor},this.eventBus))},e.prototype.destroyErrorMessage=function(){this.errorMessageComponent&&(this.errorMessageComponent.destroy(),this.errorMessageComponent=null)},e.prototype.focus=function(){this.isFocused||(this.eventBus.dispatch(new l.PdfViewerFocusChangeEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(this)})),this.isFocused=!0,this.previewRenderState===c.RenderState.Finished?this.eventBus.dispatch(new l.PdfViewerRenderedPreviewFocusEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(this)})):this.eventBus.on(l.PdfViewerEventType.PreviewRendered,this.dispatchOneRenderedPreviewFocusEvent),this.renderState===c.RenderState.Finished?this.eventBus.dispatch(new l.PdfViewerRenderedPageFocusEvent({pdfViewerPage:d.PdfViewerPageMapper.mapToPublicPdfViewerPage(this)})):this.eventBus.on(l.PdfViewerEventType.PageRendered,this.dispatchOneRenderedPageFocusEvent))},e.prototype.blur=function(){this.isFocused&&(this.isFocused=!1,this.eventBus.off(l.PdfViewerEventType.PreviewRendered,this.dispatchOneRenderedPreviewFocusEvent),this.eventBus.off(l.PdfViewerEventType.PageRendered,this.dispatchOneRenderedPageFocusEvent))},Object.defineProperty(e.prototype,"pdfEmbeddedMediaCanvasRenderedAtScale",{get:function(){return this.pdfEmbeddedMediaLayerComponent?this.pdfEmbeddedMediaLayerComponent.canvasRenderedAtScale:null},enumerable:!0,configurable:!0}),e}();t.PdfViewerPage=P},5255:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.PdfViewerPageLayer||(t.PdfViewerPageLayer={})).PdfCanvas="PDF Canvas",i.PdfText="PDF Text",i.PdfAnnotations="PDF Annotation",i.PdfEmbeddedMedia="PDF Embedded Media",i.Annotations="Annotations",(n=t.PdfViewerPageClasses||(t.PdfViewerPageClasses={})).Page="sp-pdf-viewer-page",n.CanvasLayer="sp-pdf-viewer-page__pdf-canvas-layer-wrapper",n.MediaLayer="sp-pdf-viewer-page__pdf-embedded-media-layer-wrapper",n.TextLayer="sp-pdf-viewer-page__pdf-text-layer-wrapper",n.PdfAnnotationLayer="sp-pdf-viewer-page__pdf-annotation-layer-wrapper",n.AnnotationLayer="sp-pdf-viewer-page__annotation-layer-wrapper",n.IsAnnotating="sp-pdf-viewer-page--is-annotating"},9892:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.mapToPublicPdfViewerPage=function(e){return{id:e.id,pageNumber:e.pageNumber,renderState:e.renderState,previewRenderState:e.previewRenderState,getAnnotationHelper:function(){return e.getAnnotationHelper()},getAnnotations:function(){return e.getAnnotations()},didAnnotationsChange:function(){return e.didAnnotationsChange()},enableAnnotations:function(){return e.enableAnnotations()},disableAnnotations:function(){return e.disableAnnotations()}}},e}();t.PdfViewerPageMapper=n},8205:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.calculatePageDimensions=function(e){var t=e.getViewport(1);return{width:Math.floor(t.width),height:Math.floor(t.height)}},e}();t.PdfJsHelper=n},4771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3501);t.PdfViewerEventType=i.PdfViewerEventType,t.PdfViewerFocusChangeEvent=i.PdfViewerFocusChangeEvent,t.PdfViewerRenderedPreviewFocusEvent=i.PdfViewerRenderedPreviewFocusEvent,t.PdfViewerRenderedPageFocusEvent=i.PdfViewerRenderedPageFocusEvent,t.PdfViewerSelectPageEvent=i.PdfViewerSelectPageEvent,t.PdfViewerDownloadAssetEvent=i.PdfViewerDownloadAssetEvent,t.PdfViewerSwitchLayoutEvent=i.PdfViewerSwitchLayoutEvent,t.PdfViewerZoomInEvent=i.PdfViewerZoomInEvent,t.PdfViewerZoomOutEvent=i.PdfViewerZoomOutEvent,t.PdfViewerThumbnailsOpenedChangeEvent=i.PdfViewerThumbnailsOpenedChangeEvent;var r=n(7494);t.PdfViewer=r.PdfViewer;var o=n(447);t.PdfViewerLayoutType=o.PdfViewerLayoutType},6889:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9381);t.PdfViewerLayoutSinglePage=i.PdfViewerLayoutSinglePage;var r=n(5234);t.PdfViewerLayoutOneColumn=r.PdfViewerLayoutOneColumn},563:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1684),o=n(9738),s=n(5255);!function(e){e.Load="Load",e.Render="Render"}(i=t.PageActionType||(t.PageActionType={}));var a=function(e){this.payload=e,this.type=i.Load};t.PageLoadAction=a;var c=function(e){this.payload=e,this.type=i.Render};function l(e){return e.scale!==e.pdfCanvasRenderedAtScale}function u(e){return e.scale!==e.pdfEmbeddedMediaCanvasRenderedAtScale}t.PageRenderAction=c,t.shouldRerenderPdfCanvasLayerForPage=l,t.shouldRerenderPdfEmbeddedMediaLayerForPage=u,t.determinePageAction=function(e){for(var t=function(e){if(e.loadState===r.LoadState.None)return{value:new a({page:e})};if(e.loadState===r.LoadState.Loading)return{value:void 0};if(e.loadState===r.LoadState.Failed)return"continue";var t=e.requiredLayersRenderState;if(Array.from(t.values()).includes(o.RenderState.Running))return{value:void 0};var n=Array.from(t.keys()).find((function(n){var i=t.get(n);if(i===o.RenderState.Initial)return!0;if(n===s.PdfViewerPageLayer.PdfCanvas&&l(e))return!0;if(n===s.PdfViewerPageLayer.PdfEmbeddedMedia&&u(e))return!0;if(i===o.RenderState.Failed||i===o.RenderState.Finished)return!1;throw new Error("Unexpected render state")}));return n?{value:new c({page:e,layer:n})}:void 0},n=0,i=e;n<i.length;n++){var d=t(i[n]);if("object"==typeof d)return d.value}}},5234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7750),r=n(7750),o=n(5255),s=n(563),a=n(3571),c=n(1684),l=function(){function e(){}return e.combine=function(e){var t={x1:0,y1:0,x2:0,y2:0,width:0,height:0};return e.forEach((function(e){t.x1=Math.min(t.x1,e.x1),t.y1=Math.min(t.y1,e.y1),t.x2=Math.max(t.x2,e.x2),t.y2=Math.max(t.y2,e.y2)})),t.width=t.x2-t.x1,t.height=t.y2-t.y1,t},e}(),u=function(){function e(e,t){var n=this;this.eventBus=e,this.pdfViewerConfig=t,this._pageIdsInViewport=[],this._pageIdsEnteredViewport=[],this._pageIdsLeftViewport=[],this._zoom=1,this.pagesPadding=10,this.pageMarginBottom=14,this.zoomIncrement=.2,this.defaultPageDimensions={width:600,height:600},this.pageIdsRendered=new Set,this.isScrolling=!1,this.isZooming=!1,this.onInitialPageLoadStateChange=function(e){var t=e.payload,i=t.pageId,r=t.loadState;r!==c.LoadState.Finished&&r!==c.LoadState.Failed||(n.eventBus.off(a.PdfViewerPageEventType.LoadStateChange,n.onInitialPageLoadStateChange),n.updateViewport(),n.updatePagesLayout(),n.zoomToFitWidth(i),n.updatePagesLayout(!0),n.goto(i),n.updateViewport(),n.updatePageIdsInViewport(),n.orchestratePages(),n.addEventListeners(),n.containerElement.classList.remove("sp-pdf-viewer__layout-one-column--hidden"))},this.onPdfViewerPageLoadStateChange=function(e){n.debouncedOrchestratePagesOnNextTick()},this.onPdfViewerPageLayerRenderStateChange=function(e){n.debouncedOrchestratePagesOnNextTick()},this.onPdfViewerPageDimensionsChange=function(e){n.updatePagesLayout(),n.updatePageIdsInViewport(),n.updatePageIdFocused()},this.onContainerScrolling=function(){n.isScrolling=!0,n.updateViewport(),n.updatePageIdsInViewport(),n.updatePageIdFocused()},this.onContainerScrolled=function(){n.isScrolling=!1,n.debouncedOrchestratePagesOnNextTick()},this.orchestratePages=function(){if(!n.isScrolling&&!n.isZooming){var e=s.determinePageAction(n.pagesInDescendingOrderOfPriority);if(e){var t=e.payload.page,i=n.getPageContainer(t.id);switch(n.pageIdsRendered.add(t.id),t.renderPageElement(i),t.renderPreview(),e.type){case s.PageActionType.Load:t.load();break;case s.PageActionType.Render:t.renderLayer(e.payload.layer)}}}},this.onZoomingEnded=function(){n.isZooming=!1,n.debouncedOrchestratePagesOnNextTick()},this.onContainerScrollThrottled=r.throttle(this.onContainerScrolling,25),this.onContainerScrollDebounced=r.debounce(this.onContainerScrolled,100),this.debouncedOrchestratePagesOnNextTick=r.debounce(this.orchestratePages,0),this.debouncedOrchestratePagesForZoom=r.debounce(this.onZoomingEnded,500),this.debouncedOrchestratePagesForResize=r.debounce(this.debouncedOrchestratePagesOnNextTick,500)}return e.prototype.init=function(e,t,n){var i=this;this.pages=t,this.pagesById=new Map,this.pageIndexesById=new Map,t.forEach((function(e,t){i.pagesById.set(e.id,e),i.pageIndexesById.set(e.id,t),e.requiredLayers=new Set([o.PdfViewerPageLayer.PdfCanvas,o.PdfViewerPageLayer.PdfText,o.PdfViewerPageLayer.PdfAnnotations,o.PdfViewerPageLayer.PdfEmbeddedMedia,o.PdfViewerPageLayer.Annotations]),e.disableEmbeddedMediaAutoPlay=!0})),this.parentElement=e,this.render();var r=this.pagesById.get(n),s=this.getPageContainer(r.id);this.pageIdsRendered.add(r.id),this.eventBus.on(a.PdfViewerPageEventType.LoadStateChange,this.onInitialPageLoadStateChange),r.renderPageElement(s),r.renderPreview(),r.load()},e.prototype.zoomToFitWidth=function(e){var t=this.pagesLayout.pageRects.get(e);this._zoom=(this.viewport.width-2*this.pagesPadding)/t.width},e.prototype.canNavigateToPrevious=function(){return 0!==this.pageIdFocusedIndex},e.prototype.canNavigateToNext=function(){return this.pageIdFocusedIndex!==this.pages.length-1},e.prototype.next=function(){var e=this.pageIdFocusedIndex,t=e+1!==this.pages.length?e+1:0;this.goto(this.pages[t].id)},e.prototype.previous=function(){var e=this.pageIdFocusedIndex,t=e-1>=0?e-1:this.pages.length-1;this.goto(this.pages[t].id)},e.prototype.goto=function(e){if(e!==this.pageIdFocused){if(this.gotoPageId=e,0===this.pageIndexesById.get(e))return this.gotoScrollTop=0,this.containerElement.scrollTop=this.gotoScrollTop,void this.updatePageIdFocused();var t=this.pagesLayout.pageRects.get(e);this.gotoScrollTop=Math.round(Math.min(this.containerElement.scrollHeight-this.containerElementHeight,t.y1-this.pagesPadding)),this.containerElement.scrollTop=this.gotoScrollTop,this.updatePageIdFocused()}},e.prototype.zoomIn=function(){this.zoom=this.zoom+this.zoomIncrement},e.prototype.zoomOut=function(){this.zoom=this.zoom-this.zoomIncrement},e.prototype.destroy=function(){if(this.containerElement){this.containerElement.innerHTML="",this.resetPages(),this.removeEventListeners(),this.onContainerScrollThrottled.cancel(),this.onContainerScrollDebounced.cancel(),this.debouncedOrchestratePagesOnNextTick.cancel(),this.debouncedOrchestratePagesForZoom.cancel(),this.debouncedOrchestratePagesForResize.cancel(),this._pageIdFocused=null;try{this.parentElement.removeChild(this.containerElement)}catch(e){}}},e.prototype.getPageContainer=function(e){return this.containerElement.querySelector("[data-id='"+e+"']")},e.prototype.addEventListeners=function(){this.containerElement.addEventListener("scroll",this.onContainerScrollThrottled),this.containerElement.addEventListener("scroll",this.onContainerScrollDebounced),this.eventBus.on(a.PdfViewerPageEventType.LoadStateChange,this.onPdfViewerPageLoadStateChange),this.eventBus.on(a.PdfViewerPageEventType.DimensionsChange,this.onPdfViewerPageDimensionsChange),this.eventBus.on(a.PdfViewerPageEventType.LayerRenderStateChange,this.onPdfViewerPageLayerRenderStateChange)},e.prototype.removeEventListeners=function(){this.containerElement.removeEventListener("scroll",this.onContainerScrollThrottled),this.containerElement.removeEventListener("scroll",this.onContainerScrollDebounced),this.eventBus.off(a.PdfViewerPageEventType.LoadStateChange,this.onInitialPageLoadStateChange),this.eventBus.off(a.PdfViewerPageEventType.LoadStateChange,this.onPdfViewerPageLoadStateChange),this.eventBus.off(a.PdfViewerPageEventType.DimensionsChange,this.onPdfViewerPageDimensionsChange),this.eventBus.off(a.PdfViewerPageEventType.LayerRenderStateChange,this.onPdfViewerPageLayerRenderStateChange)},e.prototype.resize=function(){this.updateViewport(),this.updatePagesElementWidth(this.pagesLayout),this.updatePageIdsInViewport(),this.updatePageIdFocused(),this.debouncedOrchestratePagesForResize()},e.prototype.updatePagesElementWidth=function(e){e&&(e.bounds.width>this.viewport.width?this.pagesElement.style.width=e.bounds.width+"px":this.pagesElement.style.width="")},e.prototype.updateViewport=function(){var e=this.containerElementWidth,t=this.containerElementHeight,n=1*t,i=1*t,r=this.containerElement.scrollLeft,o=this.containerElement.scrollTop,s=e,a=n+t+i;this.viewport={x1:r,y1:o-n,x2:r+s,y2:o-n+a,width:s,height:a}},e.prototype.updatePagesLayout=function(e){var t=this;void 0===e&&(e=!1);var n=this.containerElement.scrollTop,i=new Map,r=this.pagesPadding;this.pages.forEach((function(e,n){var o=e.dimensions||t.defaultPageDimensions;i.set(e.id,{x1:0,y1:r,x2:o.width*t.zoom,y2:r+o.height*t.zoom,width:o.width*t.zoom,height:o.height*t.zoom}),r+=o.height*t.zoom,n!==t.pages.length-1&&(r+=t.pageMarginBottom)}));var o=0;this.pagesLayout&&(o=this.containerElement.scrollLeft/(this.pagesLayout.bounds.width-this.containerElement.clientWidth));var s={zoom:this.zoom,bounds:l.combine(Array.from(i.values())),pageRects:i};s.bounds.x2+=2*this.pagesPadding,s.bounds.y2+=2*this.pagesPadding,s.bounds.width+=2*this.pagesPadding,s.bounds.height+=2*this.pagesPadding,this.updatePagesElementWidth(s),s.pageRects.forEach((function(e,n){var i=t.getPageContainer(n);i.style.width=e.width+"px",i.style.height=e.height+"px"})),this.pagesLayout&&(this.containerElement.scrollTop=Math.round(n*(s.bounds.height/this.pagesLayout.bounds.height))),this.containerElement.scrollLeft=e?(s.bounds.width-this.containerElement.clientWidth)/2:o*(s.bounds.width-this.containerElement.clientWidth),this.pagesLayout=s},e.prototype.updatePageIdsInViewport=function(){var e=this,t=this.determinePageIdsInViewport();if(!i.isEqual(this.pageIdsInViewport,t)){var n=t.filter((function(t){return!e.pageIdsInViewport.includes(t)})),r=this.pageIdsInViewport.filter((function(e){return!t.includes(e)}));this.pageIdsInViewport=t,n.length&&(this.pageIdsEnteredViewport=n),r.length&&(this.pageIdsLeftViewport=r)}},e.prototype.determinePageIdsInViewport=function(){var e=this,t=[];return this.pagesLayout.pageRects.forEach((function(n,i){n.y2>=e.viewport.y1&&n.y1<=e.viewport.y2&&t.push(i)})),t},e.prototype.updatePageIdFocused=function(){if(this.pagesLayout)if(this.gotoPageId&&null!==this.gotoScrollTop&&Math.abs(this.gotoScrollTop-Math.round(this.containerElement.scrollTop))<10)this.pageIdFocused!==this.gotoPageId&&(this.pageIdFocused&&(this.pageIdBlurred=this.pageIdFocused),this.pageIdFocused=this.gotoPageId);else{this.gotoPageId=null,this.gotoScrollTop=null;var e=this.determinePageIdClosestToCenterOfView();this.pageIdFocused!==e&&(this.pageIdFocused&&(this.pageIdBlurred=this.pageIdFocused),this.pageIdFocused=e)}},e.prototype.determinePageIdClosestToCenterOfView=function(){var e=this,t=this.containerElement.scrollTop+this.containerElementHeight/2,n=[];if(this.pageIdsInViewport.forEach((function(i){var r=e.pagesLayout.pageRects.get(i);n.push({id:i,value:Math.min(Math.abs(r.y1-t),Math.abs(r.y2-t))})})),n.length)return n.sort((function(e,t){return e.value-t.value}))[0].id},e.prototype.render=function(){var e=this;this.containerElement=document.createElement("div"),this.containerElement.classList.add("sp-pdf-viewer__layout-one-column","sp-pdf-viewer__layout-one-column--hidden"),this.pagesElement=document.createElement("div"),this.pagesElement.style.padding=this.pagesPadding+"px",this.pagesElement.classList.add("sp-pdf-viewer__layout-one-column__pages"),this.viewportElement=document.createElement("div"),this.viewportElement.classList.add("viewport"),this.containerElement.appendChild(this.pagesElement),this.containerElement.appendChild(this.viewportElement),this.parentElement.appendChild(this.containerElement);var t="";this.pages.forEach((function(n,i){var r=n.dimensions||e.defaultPageDimensions,o=r.width*e.zoom,s=r.height*e.zoom,a=i!==e.pages.length-1?e.pageMarginBottom:0;t+='<div data-id="'+n.id+'" style="width:'+o+"px; height:"+s+"px; margin-bottom:"+a+'px;" class="sp-pdf-viewer__layout-one-column__page"></div>'})),this.pagesElement.innerHTML=t},e.prototype.resetPages=function(){this.pages.forEach((function(e){return e.reset()}))},Object.defineProperty(e.prototype,"pagesInDescendingOrderOfPriority",{get:function(){for(var e=this,t=[this.pageIdFocused],n=this.pageIdsInViewport.indexOf(this.pageIdFocused),i=1;i<this.pageIdsInViewport.length;i++)t.push(this.pageIdsInViewport[n+i]),t.push(this.pageIdsInViewport[n-i]);return t.filter((function(e){return!!e})).map((function(t){return e.pagesById.get(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(e){var t=this;if(this.pdfViewerConfig.canZoom){var n=Math.max(Math.min(e,this.pdfViewerConfig.maxZoomScale),this.pdfViewerConfig.minZoomScale);this._zoom!==n&&(this.isZooming=!0,this._zoom=n,this.updatePagesLayout(),this.updateViewport(),this.updatePageIdsInViewport(),this.updatePageIdFocused(),this.pageIdsRendered.forEach((function(e){return t.pagesById.get(e).resize()})),this.debouncedOrchestratePagesForZoom())}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdsInViewport",{get:function(){return this._pageIdsInViewport},set:function(e){this._pageIdsInViewport=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdsEnteredViewport",{get:function(){return this._pageIdsEnteredViewport},set:function(e){this._pageIdsEnteredViewport=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdsLeftViewport",{get:function(){return this._pageIdsLeftViewport},set:function(e){var t=this;this._pageIdsLeftViewport=e,e.forEach((function(e){t.pageIdsRendered.has(e)&&(t.pageIdsRendered.delete(e),t.pagesById.get(e).reset())}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdFocused",{get:function(){return this._pageIdFocused},set:function(e){this._pageIdFocused=e,this.pagesById.get(e).focus()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdBlurred",{get:function(){return this._pageIdBlurred},set:function(e){this._pageIdBlurred=e,this.pagesById.get(e).blur()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIdFocusedIndex",{get:function(){return this.pageIndexesById.get(this.pageIdFocused)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerElementWidth",{get:function(){if(this.containerElement)return this.containerElement.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerElementHeight",{get:function(){if(this.containerElement)return this.containerElement.clientHeight},enumerable:!0,configurable:!0}),e}();t.PdfViewerLayoutOneColumn=u},9381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5255),r=n(3501),o=n(7750),s=n(563),a=n(3571),c=n(7620),l=function(){function e(e,t){var n=this;this.eventBus=e,this.pdfViewerConfig=t,this.pages=[],this.defaultPageDimensions={width:600,height:600},this._zoom=1,this.userScrolled=!1,this.fitToViewport=!0,this.bypassScrollEvent=!1,this.pageWrapperElements=[],this.zoomIncrement=.2,this.onPreviewRendered=function(e){var t=n.pages.findIndex((function(t){return t.id===e.payload.pdfViewerPage.id}));t>=0&&n.calculateLayout(n.pages[t])},this.onPageRendered=function(){n.debouncedOrchestratePagesOnNextTick()},this.onPdfViewerPageLoadStateChangeEvent=function(e){n.debouncedOrchestratePagesOnNextTick()},this.onPdfViewerPageLayerRenderStateChange=function(e){n.debouncedOrchestratePagesOnNextTick()},this.onScroll=function(){n.bypassScrollEvent?n.bypassScrollEvent=!1:n.debouncedOnParentUserScroll()},this.debouncedOnParentUserScroll=o.debounce(this.onParentUserScroll,100),this.debouncedOrchestratePagesOnNextTick=o.debounce(this.orchestratePages,0),this.debouncedOrchestratePagesForPageNavigation=o.debounce(this.debouncedOrchestratePagesOnNextTick,100),this.debouncedOrchestratePagesForZoomAndResize=o.debounce(this.debouncedOrchestratePagesOnNextTick,500)}return e.prototype.init=function(e,t,n){var i=this;if(e){this.parentElement=e;var r='\n            <div class="'+c.PdfViewerLayoutSinglePageClasses.Layout+'">\n                <div '+c.PdfViewerLayoutSinglePageAttributes.DataType+'="'+c.PdfViewerLayoutSinglePageDataTypes.PageWrapper+'" class="'+c.PdfViewerLayoutSinglePageClasses.PageWrapper+'"></div>\n                <div '+c.PdfViewerLayoutSinglePageAttributes.DataType+'="'+c.PdfViewerLayoutSinglePageDataTypes.PageWrapper+'" class="'+c.PdfViewerLayoutSinglePageClasses.PageWrapper+'"></div>\n                <div '+c.PdfViewerLayoutSinglePageAttributes.DataType+'="'+c.PdfViewerLayoutSinglePageDataTypes.PageWrapper+'" class="'+c.PdfViewerLayoutSinglePageClasses.PageWrapper+'"></div>\n            </div>\n        ';this.parentElement.innerHTML=r,this.containerElement=this.parentElement.querySelector("."+c.PdfViewerLayoutSinglePageClasses.Layout),this.containerElement.querySelectorAll("["+c.PdfViewerLayoutSinglePageAttributes.DataType+"='"+c.PdfViewerLayoutSinglePageDataTypes.PageWrapper+"']").forEach((function(e){return i.pageWrapperElements.push(e)})),this.initPages(t),this.addEventListeners(),this.goto(n)}},e.prototype.initPages=function(e){var t=this;this.pages=e,this.pagesByPageId=new Map,this.pagesByPageNumber=new Map,this.pageIndexesByPageNumber=new Map,this.pages.forEach((function(e,n){t.pagesByPageId.set(e.id,e),t.pagesByPageNumber.set(e.pageNumber,e),t.pageIndexesByPageNumber.set(e.pageNumber,n),e.disableEmbeddedMediaAutoPlay=!1}))},e.prototype.ensurePageWrapperContainers=function(e){var t=this,n=this.getCurrentPageNumbers(),i=[e,this.getNextPageNumber(e),this.getPreviousPageNumber(e)].filter((function(e){return null!==e})),r=n.filter((function(e){return!i.includes(e)}));r.forEach((function(e){try{var n=t.pagesByPageNumber.get(e);n&&n.reset()}catch(e){console.log(e)}t.resetPageWrapper(e)})),i.forEach((function(e){t.getPageWrapper(e)||t.allocatePageWrapper(e)}))},e.prototype.gotoPage=function(e){if(e!==this.currentPage){this.ensurePageWrapperContainers(e),this.resetScroll();var t=this.parentElement.querySelector("."+c.PdfViewerLayoutSinglePageClasses.FocusedWrapper);t&&t.classList.remove(c.PdfViewerLayoutSinglePageClasses.FocusedWrapper),this.updateFocusedPage(e),this.setRenderLayers();var n=this.getPageWrapper(e);n&&n.classList.add(c.PdfViewerLayoutSinglePageClasses.FocusedWrapper),this.calculateAllLayouts(),this.debouncedOrchestratePagesForPageNavigation()}},e.prototype.goto=function(e){var t=this.pagesByPageId.get(e);t&&this.gotoPage(t.pageNumber)},e.prototype.getCurrentPageNumbers=function(){return this.pageWrapperElements.reduce((function(e,t){var n=t.getAttribute(c.PdfViewerLayoutSinglePageAttributes.PageNumber);return n&&e.push(Number.parseInt(n)),e}),[])},Object.defineProperty(e.prototype,"pagesInDescendingOrderOfPriority",{get:function(){var e=this;return[this.currentPage,this.getNextPageNumber(this.currentPage),this.getPreviousPageNumber(this.currentPage)].filter((function(e){return null!==e})).map((function(t){return e.pagesByPageNumber.get(t)}))},enumerable:!0,configurable:!0}),e.prototype.orchestratePages=function(){var e=s.determinePageAction(this.pagesInDescendingOrderOfPriority);if(e){var t=e.payload.page,n=this.getPageWrapper(t.pageNumber);switch(t.renderPageElement(n),t.renderPreview(),e.type){case s.PageActionType.Load:t.load();break;case s.PageActionType.Render:this.calculateLayout(t),t.renderLayer(e.payload.layer)}}},e.prototype.allocatePageWrapper=function(e){var t=this.pageWrapperElements.find((function(e){return!1===e.hasAttribute(c.PdfViewerLayoutSinglePageAttributes.PageNumber)}));if(t)return t.setAttribute(c.PdfViewerLayoutSinglePageAttributes.PageNumber,""+e),t.style.order=""+e,t},e.prototype.resetPageWrapper=function(e){var t=this.getPageWrapper(e);t&&(t.innerHTML="",t.removeAttribute(c.PdfViewerLayoutSinglePageAttributes.PageNumber),t.style.order="",t.style.backgroundImage="")},e.prototype.getPageWrapper=function(e){return this.pageWrapperElements.find((function(t){return t.getAttribute(c.PdfViewerLayoutSinglePageAttributes.PageNumber)===""+e}))},e.prototype.setRenderLayers=function(){var e=this,t=this.pagesByPageNumber.get(this.currentPage);t&&(t.requiredLayers=new Set([i.PdfViewerPageLayer.PdfCanvas,i.PdfViewerPageLayer.PdfText,i.PdfViewerPageLayer.PdfAnnotations,i.PdfViewerPageLayer.PdfEmbeddedMedia,i.PdfViewerPageLayer.Annotations])),[this.getNextPageNumber(this.currentPage),this.getPreviousPageNumber(this.currentPage)].filter((function(e){return null!==e})).map((function(t){return e.pagesByPageNumber.get(t)})).forEach((function(e){e.requiredLayers=new Set([i.PdfViewerPageLayer.PdfCanvas,i.PdfViewerPageLayer.PdfText,i.PdfViewerPageLayer.PdfAnnotations,i.PdfViewerPageLayer.Annotations])}))},e.prototype.updateFocusedPage=function(e){var t=this.pagesByPageNumber.get(this.currentPage);t&&t.blur(),this.currentPage=e;var n=this.pagesByPageNumber.get(e);n&&(this.pageIdFocused=n.id,n.focus())},e.prototype.next=function(){var e=this.getNextPageNumber(this.currentPage);null!==e&&this.gotoPage(e)},e.prototype.previous=function(){var e=this.getPreviousPageNumber(this.currentPage);null!==e&&this.gotoPage(e)},e.prototype.canNavigateToNext=function(){return null!==this.getNextPageNumber(this.currentPage)},e.prototype.canNavigateToPrevious=function(){return null!==this.getPreviousPageNumber(this.currentPage)},Object.defineProperty(e.prototype,"zoom",{get:function(){return this._zoom},set:function(e){if(this.pdfViewerConfig.canZoom){var t=Math.max(Math.min(e,this.pdfViewerConfig.maxZoomScale),this.pdfViewerConfig.minZoomScale);this._zoom!==t&&(this._zoom=t,this.fitToViewport=!1,this.calculateAllLayouts(),this.resizeAllPages(),this.debouncedOrchestratePagesForZoomAndResize())}},enumerable:!0,configurable:!0}),e.prototype.zoomIn=function(){this.zoom=this.zoom+this.zoomIncrement},e.prototype.zoomOut=function(){this.zoom=this.zoom-this.zoomIncrement},e.prototype.resize=function(){this.userScrolled||(this.calculateAllLayouts(),this.resizeAllPages(),this.debouncedOrchestratePagesForZoomAndResize())},e.prototype.destroy=function(){this._zoom=1,this.pageIdFocused=null,this.userScrolled=!1,this.resetPages(),this.removeEventListeners(),this.debouncedOnParentUserScroll.cancel(),this.debouncedOrchestratePagesOnNextTick.cancel(),this.debouncedOrchestratePagesForPageNavigation.cancel(),this.debouncedOrchestratePagesForZoomAndResize.cancel();try{this.parentElement.removeChild(this.containerElement)}catch(e){}this.parentElement=null,this.containerElement=null},e.prototype.resetPages=function(){this.pages.forEach((function(e){return e.reset()}))},e.prototype.resizeAllPages=function(){for(var e=0,t=this.getCurrentPageNumbers();e<t.length;e++){var n=t[e],i=this.pagesByPageNumber.get(n);i&&i.resize()}},e.prototype.updatePageLayout=function(e,t){var n=this.getPageWrapper(e.pageNumber);if(n){var i=e.dimensions||this.defaultPageDimensions;e.renderPageElement(n);var r=this.fitToViewport?this.fitDimensionsToViewport(i,t):this.applyZoom(i);this.applyDimensionsToPage(e.pageElement,r),this.adjustPagePositioning(r,t)}else console.warn("Wrapper not found")},e.prototype.calculateAllLayouts=function(){var e=this,t={width:this.parentElement.clientWidth,height:this.parentElement.clientHeight};[this.currentPage,this.getNextPageNumber(this.currentPage),this.getPreviousPageNumber(this.currentPage)].filter((function(e){return null!==e})).map((function(t){return e.pagesByPageNumber.get(t)})).forEach((function(n){return e.updatePageLayout(n,t)}))},e.prototype.calculateLayout=function(e){var t={width:this.parentElement.clientWidth,height:this.parentElement.clientHeight};this.updatePageLayout(e,t)},e.prototype.addEventListeners=function(){this.parentElement&&this.parentElement.addEventListener("scroll",this.onScroll),this.eventBus.on(r.PdfViewerEventType.PreviewRendered,this.onPreviewRendered),this.eventBus.on(a.PdfViewerPageEventType.LoadStateChange,this.onPdfViewerPageLoadStateChangeEvent),this.eventBus.on(a.PdfViewerPageEventType.LayerRenderStateChange,this.onPdfViewerPageLayerRenderStateChange),this.eventBus.on(r.PdfViewerEventType.PageRendered,this.onPageRendered)},e.prototype.getNextPageNumber=function(e){var t=this.pages[this.pageIndexesByPageNumber.get(e)+1];return t?t.pageNumber:null},e.prototype.getPreviousPageNumber=function(e){var t=this.pages[this.pageIndexesByPageNumber.get(e)-1];return t?t.pageNumber:null},e.prototype.removeEventListeners=function(){this.parentElement&&this.parentElement.removeEventListener("scroll",this.onScroll),this.eventBus.off(r.PdfViewerEventType.PreviewRendered,this.onPreviewRendered),this.eventBus.off(a.PdfViewerPageEventType.LoadStateChange,this.onPdfViewerPageLoadStateChangeEvent),this.eventBus.off(a.PdfViewerPageEventType.LayerRenderStateChange,this.onPdfViewerPageLayerRenderStateChange),this.eventBus.off(r.PdfViewerEventType.PageRendered,this.onPageRendered)},e.prototype.onParentUserScroll=function(){this.userScrolled=!0;var e=this.pagesByPageNumber.get(this.currentPage);e&&this.calculateLayout(e)},e.prototype.resetScroll=function(){this.bypassScrollEvent=!0,this.parentElement.scrollTop=this.parentElement.scrollLeft=0,this.userScrolled=!0},e.prototype.fitDimensionsToViewport=function(e,t){var n=(t.width-20)/(t.height-20),i=e.width/e.height,r=0,o=0;return n>i?(o=t.height-20,r=(t.height-20)*i):(r=t.width-20,o=(t.width-20)/i),this._zoom=r/e.width,{width:r,height:o}},e.prototype.applyZoom=function(e){var t=e.width,n=e.height;return{width:t*=this.zoom,height:n*=this.zoom}},e.prototype.applyDimensionsToPage=function(e,t){e.style.width=t.width+"px",e.style.height=t.height+"px"},e.prototype.adjustPagePositioning=function(e,t){var n=e.width,i=e.height,r=i>t.height,o=n>t.width;r?(this.parentElement.style.justifyContent="start",this.userScrolled||(this.bypassScrollEvent=!0,this.parentElement.scrollTop=(i-t.height)/2)):this.parentElement.style.justifyContent="center",o?(this.parentElement.style.alignItems="start",this.userScrolled||(this.bypassScrollEvent=!0,this.parentElement.scrollLeft=(n-t.width)/2)):this.parentElement.style.alignItems="center",o||r||(this.userScrolled=!1)},e}();t.PdfViewerLayoutSinglePage=l},7620:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.PdfViewerLayoutSinglePageClasses||(t.PdfViewerLayoutSinglePageClasses={})).Layout="sp-pdf-viewer__layout-single-page",i.PageWrapper="sp-pdf-viewer__layout-single-page__page-wrapper",i.FocusedWrapper="focused",(t.PdfViewerLayoutSinglePageDataTypes||(t.PdfViewerLayoutSinglePageDataTypes={})).PageWrapper="pageWrapper",(n=t.PdfViewerLayoutSinglePageAttributes||(t.PdfViewerLayoutSinglePageAttributes={})).DataType="data-type",n.PageNumber="data-page-number"},7494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7200),r=n(9514),o=n(7338),s=n(9892),a=n(3951),c=n(3501),l=n(447),u=n(6889),d=n(3448),h=function(){function e(e){var t=this;if(this.config=e,this.pages=[],this.pagesMappedById=new Map,this.resize=function(){t.viewerLayout&&t.viewerLayout.resize(),t.thumbnailViewer&&t.thumbnailViewer.resize()},this.onSwitchLayout=function(e){e&&e.payload.layout&&t.setLayout(e.payload.layout)},this.onThumbnailsOpenedChange=function(e){var n=e.payload.opened;if(t.thumbnailViewer){if(n)return t.thumbnailViewer.on(t.pageIdFocused);t.thumbnailViewer.off()}},this.onNavigateToPage=function(e){t.viewerLayout.goto(e.payload.pageId)},this.onResize=function(){t.resize()},this.onZoomIn=function(e){t.viewerLayout.zoomIn()},this.onZoomOut=function(e){t.viewerLayout.zoomOut()},this.eventBus=new i.EventBus,this.tokenService=new r.TokenService({refreshToken:this.config.refreshToken}),this.pdfJsService=new d.PdfJsService(e.getPdfJs(),e.url,e.pages,e.fileSize,e.defaultRangeChunkSize,e.minRangeChunkSize,e.maxRangeChunkSize,this.eventBus),this.config.thumbnailContainer){var n=this.getPdfThumbnailViewerConfig(this.config);this.thumbnailViewer=new a.PdfThumbnailViewer(this.eventBus,n,this.pdfJsService)}this.createPdfViewerPages()}return Object.defineProperty(e.prototype,"pageIdFocused",{get:function(){return this.viewerLayout&&this.viewerLayout.pageIdFocused?this.viewerLayout.pageIdFocused:this.initialPageId},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,n){void 0===e&&(e=null),void 0===n&&(n=!0),e&&(this.container=e),this.initialPageId=t||Array.from(this.pages)[0].id,this.container.innerHTML="",this.layoutElement=document.createElement("div"),this.layoutElement.classList.add("sp-pdf-viewer-layout"),this.container.appendChild(this.layoutElement),this.setLayout(this.config.layout),this.thumbnailViewer&&n&&this.thumbnailViewer.on(this.pageIdFocused),this.removeEventListeners(),this.addEventListeners()},e.prototype.resetAnnotations=function(){this.pages.forEach((function(e){return e.resetAnnotations()}))},e.prototype.next=function(){this.viewerLayout.next()},e.prototype.previous=function(){this.viewerLayout.previous()},e.prototype.goto=function(e){this.viewerLayout&&this.viewerLayout.goto(e)},e.prototype.getPages=function(){return this.pages.map((function(e){return s.PdfViewerPageMapper.mapToPublicPdfViewerPage(e)}))},e.prototype.canNavigateToNext=function(){return this.viewerLayout.canNavigateToNext()},e.prototype.canNavigateToPrevious=function(){return this.viewerLayout.canNavigateToPrevious()},e.prototype.destroy=function(){this.removeEventListeners(),this.pdfJsService&&this.pdfJsService.destroy(),this.viewerLayout&&this.viewerLayout.destroy(),this.thumbnailViewer&&this.thumbnailViewer.destroy()},e.prototype.addEventListeners=function(){this.eventBus.on(c.PdfViewerEventType.NavigateToPage,this.onNavigateToPage),this.eventBus.on(c.PdfViewerEventType.ZoomIn,this.onZoomIn),this.eventBus.on(c.PdfViewerEventType.ZoomOut,this.onZoomOut),this.eventBus.on(c.PdfViewerEventType.SwitchLayout,this.onSwitchLayout),this.eventBus.on(c.PdfViewerEventType.ThumbnailsOpenedChange,this.onThumbnailsOpenedChange),window.addEventListener("resize",this.onResize)},e.prototype.setLayout=function(e){var t=this.pageIdFocused;switch(this.viewerLayout&&this.viewerLayout.destroy(),e){case l.PdfViewerLayoutType.OneColumn:this.viewerLayout=new u.PdfViewerLayoutOneColumn(this.eventBus,this.config);break;case l.PdfViewerLayoutType.SinglePage:default:this.viewerLayout=new u.PdfViewerLayoutSinglePage(this.eventBus,this.config)}this.viewerLayout.init(this.layoutElement,this.pages,t)},e.prototype.removeEventListeners=function(){this.eventBus.off(c.PdfViewerEventType.NavigateToPage,this.onNavigateToPage),this.eventBus.off(c.PdfViewerEventType.ZoomIn,this.onZoomIn),this.eventBus.off(c.PdfViewerEventType.ZoomOut,this.onZoomOut),this.eventBus.off(c.PdfViewerEventType.SwitchLayout,this.onSwitchLayout),window.removeEventListener("resize",this.onResize)},e.prototype.getPdfThumbnailViewerConfig=function(e){return{id:e.id,thumbnailContainer:e.thumbnailContainer,name:e.name,url:e.url,pages:e.pages,tintColor:e.tintColor,getPdfJs:e.getPdfJs,getPdfJsWorker:e.getPdfJsWorker,lockedPages:e.lockedPages,selectedPageIds:e.selectedPageIds}},e.prototype.createPdfViewerPages=function(){var e=this;this.config.pages.forEach((function(t){var n=new o.PdfViewerPage(e.config,t,e.eventBus,e.pdfJsService,e.tokenService);e.pages.push(n),e.pagesMappedById.set(n.id,n)}))},e}();t.PdfViewer=h},8815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3885),r=function(){function e(e,t,n){void 0===n&&(n=5),this.htmlElement=null,this.className="sp-pdfjs-embedded-media-svg-renderer-image-extractor",this.pdfPage=e,this.media=t,this.BEST_MATCH_BOUNDS_PRECISION=n,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.htmlElement.style.cssText="position: absolute; top: 0; left: 0; pointer-events: none; opacity: 0;"}return e.prototype.render=function(){var e=this;return this.renderPromise||(this.renderPromise=i.cancelable(new Promise((function(t){e.pdfPage.getOperatorList().then((function(n){e.pdfPageOperatorList=n,document.body.appendChild(e.htmlElement);var i=e.htmlElement.getBoundingClientRect();new window.PDFJS.SVGGraphics(e.pdfPage.commonObjs,e.pdfPage.objs).getSVG(e.pdfPageOperatorList,e.pdfPage.getViewport(1)).then((function(n){e.htmlElement.appendChild(n);var r=[].slice.call(n.querySelectorAll("image")),o=function(e){return e.reduce((function(e,t){return e.then((function(e){return t().then(Array.prototype.concat.bind(e))}))}),Promise.resolve([]))},s=e.media.map((function(t){return function(){return new Promise((function(n,s){var a=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),u=t.arrangement,d=u.size,h=u.offset,p=t.size,f=u.crop;a.style.cssText="position: absolute; top: 0; left: 0; width:"+d.width+"px; height:"+d.height+"px; transform: translate("+h.x+"px, "+h.y+"px) rotate(0deg);";var v=0,m=0,g=100,w=100;f&&(w=p.width/(p.width-p.width*(f.left/100)-p.width*(f.right/100))*100,v=-(g=p.height/(p.height-p.height*(f.top/100)-p.height*(f.bottom/100))*100)*f.top/100,m=-w*f.left/100),c.style.cssText="position: absolute; top:"+v+"%; left:"+m+"%; width:"+w+"%; height:"+g+"%;",a.appendChild(c),e.htmlElement.appendChild(a);var y=a.getBoundingClientRect(),E=c.getBoundingClientRect(),b=e.intersection(y,E);b.top-=h.y,b.left-=h.x,b.top-=i.top,b.left-=i.left,l.style.cssText="position: absolute; top:"+b.top+"px; left:"+b.left+"px; width:"+b.width+"px; height:"+b.height+"px; background:#0FF;",a.appendChild(l),a.style.cssText="position: absolute; top: 0; left: 0; width:"+d.width+"px; height:"+d.height+"px; transform: translate("+h.x+"px, "+h.y+"px) rotate("+u.rotation+"deg);";var P=l.getBoundingClientRect(),_=r.map((function(e,t){var n=e.getBoundingClientRect(),i=Math.abs(P.left-n.left),r=Math.abs(P.top-n.top),o=Math.abs(P.width-n.width),s=Math.abs(P.height-n.height);return{index:t,element:e,boundsDiff:parseFloat((i+r+o+s).toFixed(1))}})).sort((function(e,t){return e.boundsDiff<t.boundsDiff?-1:e.boundsDiff>t.boundsDiff||e.index<t.index?1:e.index>t.index?-1:0})).filter((function(t){return t.boundsDiff<=e.BEST_MATCH_BOUNDS_PRECISION}));if(_.length>1&&_[0].boundsDiff===_[1].boundsDiff){var T=_.map((function(t){return function(){return new Promise((function(n,i){var r=new Image,o=document.createElement("canvas"),s=o.getContext("2d");r.src=t.element.getAttribute("xlink:href"),r.onload=function(){o.width=50,o.height=50,s.drawImage(r,0,0,o.width,o.height);for(var i=s.getImageData(0,0,o.width,o.height).data,a=!1,c=0;c<i.length;c+=4)if(i[c+3]<255){a=!0;break}t.transparency=a,e.htmlElement.appendChild(o),n(t)}}))}}));o(T).then((function(e){_=_.filter((function(e){return!1===e.transparency})),n(_[0]||null)}))}else n(_[0]||null)}))}}));o(s).then((function(n){e.htmlElement.innerHTML="",document.body.removeChild(e.htmlElement),t(n)}))}))}))})))),this.renderPromise},e.prototype.intersection=function(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom);return{left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},e.prototype.destroy=function(){this.renderPromise&&(this.renderPromise.cancel(),this.renderPromise=null),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement.innerHTML=""},e}();t.PdfJsEmbeddedMediaSVGRendererImageExtractorService=r},2755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3501),r=function(){function e(e,t){this.eventBus=e,this.pages=t,this.pdfDocument=null,this._pagesRefCache=null,this.baseUrl=""}return e.prototype.setDocument=function(e){this.pdfDocument=e,this._pagesRefCache=Object.create(null)},Object.defineProperty(e.prototype,"pagesCount",{get:function(){return this.pdfDocument?this.pdfDocument.numPages:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.handleShowpadLink=function(e){var t={type:"showpad-asset-link"};t.data={link:e},window&&window.postMessage&&window.postMessage(JSON.stringify(t),"*")},e.prototype.navigateTo=function(e){var t=this;new Promise((function(n,i){"string"!=typeof e?n({namedDest:"",explicitDest:e}):t.pdfDocument.getDestination(e).then((function(t){n({namedDest:e,explicitDest:t})}))})).then((function(n){n.explicitDest instanceof Array?t.goToDestination(n):console.error('PDFLinkService.navigateTo: "'+n.explicitDest+'" is not a valid destination array, for dest="'+e+'".')}))},e.prototype.goToDestination=function(e){var t,n=this,r=e.namedDest,o=e.explicitDest,s=o[0];if(s instanceof Object){if(null===(t=this._cachedPageNumber(s)))return void this.pdfDocument.getPageIndex(s).then((function(e){n.cachePageRef(e+1,s),n.goToDestination({namedDest:r,explicitDest:o})})).catch((function(){console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid page reference".')}))}else{if(!Number.isInteger(s))return void console.error('PDFLinkService.navigateTo: "'+s+'" is not a valid destination reference".');t=s+1}if(!t||t<1||t>this.pagesCount)console.error('PDFLinkService.navigateTo: "'+t+'" is not a valid page number".');else if(t&&this.pages.has(t)){var a=this.pages.get(t).id;this.eventBus.dispatch(new i.PdfViewerNavigateToPageEvent({pageId:a}))}},e.prototype.cachePageRef=function(e,t){var n=t.num+" "+t.gen+" R";this._pagesRefCache[n]=e},e.prototype._cachedPageNumber=function(e){var t=e.num+" "+e.gen+" R";return this._pagesRefCache&&this._pagesRefCache[t]||null},e.prototype.getDestinationHash=function(e){if("string"==typeof e)return this.getAnchorUrl("#"+window.escape(e));if(e instanceof Array){var t=JSON.stringify(e);return this.getAnchorUrl("#"+window.escape(t))}return this.getAnchorUrl("")},e.prototype.getAnchorUrl=function(e){return(this.baseUrl||"")+e},e.prototype.setHash=function(e){},e.prototype.executeNamedAction=function(e){},e.prototype.onFileAttachmentAnnotation=function(e){e.id,e.filename,e.content},e}();t.PdfJsLinkService=r},3448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3885),r=n(2755),o=function(){function e(e,t,n,i,o,s,a,c){this.loadPdfJsResourcesPromise=e,this.url=t,this.pages=n,this.fileSize=i,this.defaultRangeChunkSize=o,this.minRangeChunkSize=s,this.maxRangeChunkSize=a,this.eventBus=c,this.pdfJsLinkService=new r.PdfJsLinkService(c,this.pages),window.pdfJsService=this}return e.prototype.getPage=function(e){var t=this;return i.cancelable(new Promise((function(n,i){t.loadPdfJs().then((function(){return t.configurePdfJs()})).then((function(){return t.loadWorker()})).then((function(){return t.loadDocument()})).then((function(){return t.pdfJsDocument.getPage(e)})).then((function(e){return n(e)})).catch((function(e){return i(e)}))})))},e.prototype.destroy=function(){this.loadPdfJsPromise&&(this.loadPdfJsPromise.cancel(),this.loadPdfJsPromise=null),this.getDocumentTask&&(this.getDocumentTask.destroy(),this.getDocumentTask=null),this.loadDocumentPromise&&(this.loadDocumentPromise.cancel(),this.loadDocumentPromise=null),this.pdfJsDocument&&(this.pdfJsDocument.cleanup(),this.pdfJsDocument.destroy(),this.pdfJsDocument=null),this.pdfJsWorker&&(this.pdfJsWorker.promise.catch((function(){})),this.pdfJsWorker.destroy(),this.pdfJsWorker=null)},e.prototype.loadPdfJs=function(){var e=this;return this.loadPdfJsPromise||(this.loadPdfJsPromise=i.cancelable(new Promise((function(t,n){e.loadPdfJsResourcesPromise.then(t).catch(n)})))),this.loadPdfJsPromise},e.prototype.configurePdfJs=function(){return window.PDFJS.externalLinkTarget=2,Promise.resolve()},e.prototype.loadWorker=function(){return this.pdfJsWorker||(this.pdfJsWorker=new window.PDFJS.PDFWorker),Promise.resolve()},e.prototype.loadDocument=function(){var e=this;return this.loadDocumentPromise||(this.loadDocumentPromise=i.cancelable(new Promise((function(t,n){e.getDocumentTask=window.PDFJS.getDocument(e.getDocumentConfig()),e.getDocumentTask.then((function(n){e.pdfJsDocument=n,e.pdfJsLinkService.setDocument(e.pdfJsDocument),t()})).catch((function(t){e.loadDocumentPromise=null,n()}))})))),this.loadDocumentPromise},e.prototype.getDocumentConfig=function(){var e=this.fileSize,t=this.pages.size,n=this.calculateRangeChunkSize(e,t,this.minRangeChunkSize,this.maxRangeChunkSize,this.defaultRangeChunkSize);return{url:this.url,worker:this.pdfJsWorker,withCredentials:!0,contentLength:e,rangeChunkSize:n}},e.prototype.calculateRangeChunkSize=function(e,t,n,i,r){return e&&t?Math.round(Math.max(Math.min(e/t,i),n)):r},e}();t.PdfJsService=o},7200:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){var n=this.listeners[e];n||(n=[],this.listeners[e]=n),n.push(t)},e.prototype.off=function(e,t){var n=this.listeners[e];if(n){var i=n.indexOf(t);if(!n||i<0)return;n.splice(i,1)}},e.prototype.dispatch=function(e){var t=this.listeners[e.type];t&&0!==t.length&&t.slice(0).forEach((function(t){return t.apply(null,[e])}))},e}();t.EventBus=n},9948:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(7750),o=n(2299),s=n(8219),a=n(8671),c=n(5537),l=n(5325),u=n(3942),d=n(9738),h=function(){function e(e){this.config=e,this.thumbnailViewerActive=!0,this.onIdle=null}return e.prototype.setViewer=function(e){this.viewer=e},e.prototype.setThumbnailViewer=function(e){this.thumbnailViewer=e},e.prototype.renderHighestPriority=function(){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.viewer.forceRendering()||this.thumbnailViewer&&this.thumbnailViewerActive&&this.thumbnailViewer.forceRendering()||this.viewer.currentView&&this.viewer.currentView.presentationRenderer.assetViewer&&this.viewer.currentView.presentationRenderer.assetViewer.thumbnailViewer&&this.viewer.currentView.presentationRenderer.assetViewer.thumbnailViewer.active&&this.thumbnailViewerActive&&this.viewer.currentView.presentationRenderer.assetViewer.thumbnailViewer.forceRendering()||this.checkIdle()},e.prototype.checkIdle=function(){this.onIdle&&(this.viewer.views.some((function(e){return e.renderState===d.RenderState.Running}))||(this.idleTimeout=setTimeout(this.onIdle,this.config.IDLE_DEBOUNCE_TIMEOUT)))},e.prototype.getHighestPriorityView=function(e){var t=this.getAllVisibleViews(e),n=this.getFocussedView(e),r=t.findIndex((function(e){return e.view===n.view})),o=i([n],t.slice(0,r),t.slice(r+1,t.length)),s=o.length;if(0===s)return null;for(var a=0;a<s;a++){var c=o[a];if(c.parentView&&this.shouldRenderView(c.parentView))return{view:c.parentView};if(this.shouldRenderView(c.view))return c}return null},e.prototype.getHighestPriorityViews=function(e){var t=this,n=this.getAllVisibleViews(e);if(!(n&&n.length>0))return null;var r=this.getFocussedView(e),o=n.findIndex((function(e){return e.view===r.view}));return i([r],n.slice(0,o),n.slice(o+1,n.length)).map((function(e){return e.parentView&&t.shouldRenderView(e.parentView)?{view:e.parentView}:t.shouldRenderView(e.view)?e:null})).filter((function(e){return!!e}))},e.prototype.renderView=function(e,t){var n=this;void 0===t&&(t=!1),this.shouldRenderView(e)&&(t?e.renderPreview:e.render)().then((function(){(e.presentationRenderer instanceof u.UrlPresentationRenderer||e.presentationRenderer instanceof l.UrlIframePresentationRenderer||s.shouldShowPresentInOfficeOnlineBar(e))&&e.viewerLayout.update(),n.renderHighestPriority()}))},e.prototype.cancelNonVisibleViews=function(e,t){var n=e.views.map((function(e){return e.view}));t.forEach((function(e){e.renderState===d.RenderState.Running&&-1===n.indexOf(e)&&e.cancel()}))},e.prototype.getAllVisibleViews=function(e){return r.flatten(e.views.map((function(e){return e.view})).map((function(e){return e.presentationRenderer.assetViewer instanceof a.AssetViewer&&e.presentationRenderer.assetViewer.viewer.viewerLayout.viewState&&e.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.views.length?e.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.views.map((function(e){return e.view})).map((function(t){return{view:t,parentView:e}})):{view:e}})))},e.prototype.getFocussedView=function(e){var t=e.focus.view;return t.presentationRenderer.assetViewer instanceof a.AssetViewer&&t.presentationRenderer.assetViewer.viewer.viewerLayout.viewState&&t.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.focus.view?{view:t.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.focus.view,parentView:t}:{view:t}},e.prototype.isViewFinished=function(e){var t=!!(e.presentationRenderer.assetViewer||e.presentationRenderer instanceof c.PdfViewerPresentationRenderer)||e.contentElement.childElementCount>0;return this.config.DEBUG&&!t&&e.renderState===d.RenderState.Finished&&console.warn("investigate",e),e.renderState===d.RenderState.Finished&&t},e.prototype.isViewRendering=function(e){return e.renderState===d.RenderState.Running},e.prototype.isViewLoading=function(e){return e.isLoading},e.prototype.isViewRenderingDisabled=function(e){return!1===this.config.PRELOAD_VIDEOS_ENABLED&&(e.assetViewerItem.type===o.ASSET_TYPE.VIDEO||e.assetViewerItem.type===o.ASSET_TYPE.MEETING_VIDEO||e.assetViewerItem.type===o.ASSET_TYPE.PERSONAL_VIDEO_RECORDING)&&e!==this.viewer.currentView&&this.config.VIEWER_LAYOUT===o.LAYOUT.HORIZONTAL||this.config.VIEWER_LAYOUT===o.LAYOUT.HORIZONTAL&&e.assetViewerItem.type===o.ASSET_TYPE.WEBAPP&&e!==this.viewer.currentView},e.prototype.isViewCollapsed=function(e){return e.parentView&&!e.parentView.isExpanded},e.prototype.shouldRenderView=function(e){return!(this.isViewFinished(e)||this.isViewLoading(e)||this.isViewRendering(e)||this.isViewRenderingDisabled(e)||this.isViewCollapsed(e))},e}();t.RenderingQueue=h},9514:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.config=e}return e.prototype.refreshToken=function(){var e=this;return this.refreshTokenPromise||(this.refreshTokenPromise=this.config.refreshToken().then((function(t){return e.refreshTokenPromise=null,t})).catch((function(t){throw e.refreshTokenPromise=null,t}))),this.refreshTokenPromise},e.prototype.ensureToken=function(){return this.refreshTokenPromise?this.refreshTokenPromise:Promise.resolve()},e}();t.TokenService=n},3195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7750),r=n(9738),o=n(2299),s=n(3149),a=n(2284),c=n(3729),l=n(261),u=n(1232),d=n(5537),h=n(8671),p=n(7679),f=n(8727),v=0,m=function(){function e(e,t,n,r,o,s,c,l,u){this.config=e,this.eventBus=t,this.assetViewerItems=n,this.tokenService=r,this.renderingQueue=o,this.isThumbnailViewer=s,this.linkService=c,this.pdfJsLinkService=l,this.pdfJsPagePreviewService=u,this.isDestroyed=!1,this.active=!0,this.debouncedUpdate=i.debounce(this.update.bind(this),this.config.VIEWPORT_UPDATE_DEBOUNCE_TIMEOUT),this.viewsLoadedWhileIdle=0,this.instance=v,v++,this.viewerLayout=a.LayoutFactory.create(this.config.VIEWER_LAYOUT,this.config,this.eventBus,this.assetViewerItems,this.tokenService,this.linkService,this.pdfJsLinkService,this.pdfJsPagePreviewService),this.idleTimeout=null,this.onViewportUpdate=this.onViewportUpdate.bind(this),this.onFocusChange=this.onFocusChange.bind(this),this.onRenderedViewFocus=this.onRenderedViewFocus.bind(this),this.onRenderedPreviewFocus=this.onRenderedPreviewFocus.bind(this),this.onViewRendered=this.onViewRendered.bind(this),this.onPreviewRendered=this.onPreviewRendered.bind(this),this.onNavigateToPage=this.onNavigateToPage.bind(this),this.onLayoutZoomChange=this.onLayoutZoomChange.bind(this),this.onIdle=this.onIdle.bind(this),this.addEventListeners()}return Object.defineProperty(e.prototype,"layout",{get:function(){return this.config.VIEWER_LAYOUT},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,n){var i,r=this;if(this.viewerLayout.render(e),"number"==typeof t&&t>-1&&(i="number"==typeof n?this.viewerLayout.views.find((function(e){return e.assetViewerItem===r.assetViewerItems[t]&&e.page===n})):this.viewerLayout.views.find((function(e){return e.assetViewerItem===r.assetViewerItems[t]}))),i)this.currentView=i;else if("number"==typeof t&&t>-1&&"number"==typeof n){var o,s=this.viewerLayout.views.find((function(e){return r.assetViewerItems[t]===e.assetViewerItem}));if(this.currentView=s,s&&s.presentationRenderer instanceof l.AssetViewerPresentationRenderer){var a=s.presentationRenderer.assetViewer.viewer.views.find((function(e){return e.assetViewerItem===r.assetViewerItems[t]&&e.page===n}));a&&(s.presentationRenderer.pageToInit=a.page)}s&&s.presentationRenderer instanceof d.PdfViewerPresentationRenderer&&(s.presentationRenderer.pdfViewerConfig.pages.forEach((function(e){e.pageNumber===n&&(o=e.id)})),o&&(s.presentationRenderer.initialPageId=o))}this.currentView||(this.currentView=this.views[0]),this.eventBus.dispatch(new f.ViewerViewportChangeEvent({viewState:this.viewerLayout.viewState}))},Object.defineProperty(e.prototype,"currentViewIndex",{set:function(e){this.currentView=this.views[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentView",{get:function(){return this._currentView},set:function(e){this.viewerLayout.currentView=e,this._setCurrentView(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"views",{get:function(){return this.viewerLayout.views},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allViews",{get:function(){return i.flatten(this.viewerLayout.views.map((function(e){return e.presentationRenderer.assetViewer instanceof h.AssetViewer?[e].concat(e.presentationRenderer.assetViewer.viewer.views):e})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allViewsWithParents",{get:function(){return i.flatten(this.viewerLayout.views.map((function(e){return e.presentationRenderer.assetViewer instanceof h.AssetViewer?e.presentationRenderer.assetViewer.viewer.views.map((function(t){return{view:t,parentView:e}})):{view:e}})))},enumerable:!0,configurable:!0}),e.prototype.setActive=function(){this.active||(this.active=!0,this.viewerLayout.addEventListeners(),this.addEventListeners(),this.update(),this.views.forEach((function(e){e.presentationRenderer&&e.presentationRenderer.assetViewer&&e.presentationRenderer.assetViewer.setActive()})))},e.prototype.setPassive=function(){this.active&&(this.active=!1,this.viewerLayout.removeEventListeners(),this.removeEventListeners(),this.views.forEach((function(e){e.presentationRenderer&&e.presentationRenderer.assetViewer&&e.presentationRenderer.assetViewer.setPassive()})))},e.prototype.update=function(){this.eventBus.dispatch(new f.ViewerUpdateEvent),this.isDestroyed||this.config.IS_SLAVE_ASSET_VIEWER||(this.config.DEBUG&&console.log("update",this.instance),this.active&&this.renderingQueue.renderHighestPriority())},e.prototype.forceRendering=function(e,t){var n=this;if(void 0===t&&(t=!1),this.isDestroyed)return!1;var i=e,r=i?[i]:null;if(!r){if(!this.viewerLayout.container)return!1;var o=this.viewerLayout.viewState;if(!o||"object"!=typeof o)throw new Error("viewState not an object");r=this.config.RENDER_VISIBLE_VIEWS_CONCURRENTLY?this.renderingQueue.getHighestPriorityViews(o):(i=this.renderingQueue.getHighestPriorityView(o))?[i]:null}return!(!r||!r.length||(r.forEach((function(e){var i=e.view;if(i.shouldLoad)return i.load().then((function(t){if(t&&t.numViews){if(t.numViews!==i.assetViewerItem.numViews&&1===i.assetViewerItem.numViews&&!i.assetViewerItem.page){var r=t.numViews,o=t.width,s=t.width;i.assetViewerItem.numViews=r,i.eventBus.dispatch(new f.ViewerAddViewsEvent({view:i,numViews:r,suggestedWidth:o,suggestedHeight:s}));var a=i.viewerLayout.addViews(i,r,o,s),c=e&&e.parentView?e.parentView.presentationRenderer.assetViewer.viewer:n;c.currentView===i&&(c.currentView=a[0])}if(t.numViews!==i.assetViewerItem.numViews&&1!==i.assetViewerItem.numViews)throw"offset in numViews between SvgPresentation and PdfJsPresentation";return i.viewerLayout.update()}return i.viewerLayout.update(i.viewerLayout.views.indexOf(i))})).then((function(){return requestAnimationFrame((function(){return n.update()}))}),(function(e){console.error(e),requestAnimationFrame((function(){return n.update()}))})),!0;n.renderingQueue.renderView(i,t)})),0))},e.prototype.addEventListeners=function(){this.eventBus.on(f.ViewerEventType.ViewportChange,this.onViewportUpdate),this.eventBus.on(f.ViewerEventType.FocusChange,this.onFocusChange),this.eventBus.on(f.ViewerEventType.RenderedViewFocus,this.onRenderedViewFocus),this.eventBus.on(f.ViewerEventType.RenderedPreviewFocus,this.onRenderedPreviewFocus),this.eventBus.on(f.ViewerEventType.ViewRendered,this.onViewRendered),this.eventBus.on(f.ViewerEventType.PreviewRendered,this.onPreviewRendered),this.eventBus.on(f.ViewerEventType.NavigateToPage,this.onNavigateToPage),this.eventBus.on(f.ViewerEventType.LayoutZoomChange,this.onLayoutZoomChange)},e.prototype.removeEventListeners=function(){this.eventBus.off(f.ViewerEventType.ViewportChange,this.onViewportUpdate),this.eventBus.off(f.ViewerEventType.FocusChange,this.onFocusChange),this.eventBus.off(f.ViewerEventType.RenderedViewFocus,this.onRenderedViewFocus),this.eventBus.off(f.ViewerEventType.RenderedPreviewFocus,this.onRenderedPreviewFocus),this.eventBus.off(f.ViewerEventType.ViewRendered,this.onViewRendered),this.eventBus.off(f.ViewerEventType.PreviewRendered,this.onPreviewRendered),this.eventBus.off(f.ViewerEventType.NavigateToPage,this.onNavigateToPage),this.eventBus.off(f.ViewerEventType.LayoutZoomChange,this.onLayoutZoomChange)},e.prototype.onViewportUpdate=function(e){var t=e.payload.viewState.focus.view,n=this.views.indexOf(t);t&&-1!==n&&(this.viewerLayout instanceof c.LayoutHorizontal&&!this.viewerLayout.currentView&&(this.viewerLayout.currentView=t),this._setCurrentView(t)),this.debouncedUpdate(),this.viewsLoadedWhileIdle=0},e.prototype.onRenderedViewFocus=function(e){var t=e.payload.assetViewerView;t&&this.publicAssetViewerViewIds.includes(t.id)&&this.eventBus.dispatch(new f.ViewerPublicRenderedViewFocusEvent({assetViewerView:t}))},e.prototype.onRenderedPreviewFocus=function(e){var t=e.payload.assetViewerView;t&&this.publicAssetViewerViewIds.includes(t.id)&&this.eventBus.dispatch(new f.ViewerPublicRenderedPreviewFocusEvent({assetViewerView:t}))},e.prototype.onFocusChange=function(e){var t=e.payload.assetViewerView;t&&this.publicAssetViewerViewIds.includes(t.id)&&this.eventBus.dispatch(new f.ViewerPublicFocusChangeEvent({assetViewerView:t}))},e.prototype.onPreviewRendered=function(e){var t=e.payload.assetViewerView;this.currentView.id===t.id&&this.eventBus.dispatch(new f.ViewerRenderedPreviewFocusEvent({assetViewerView:t}))},e.prototype.onViewRendered=function(e){var t=e.payload.assetViewerView;this.currentView.id===t.id&&this.eventBus.dispatch(new f.ViewerRenderedViewFocusEvent({assetViewerView:t}))},e.prototype.onNavigateToPage=function(e){var t=e.payload.page,n=this.currentView;if(n){var i=this.views.filter((function(e){return e.assetViewerItem.id===n.assetViewerItem.id&&e.page===t}))[0];i&&(this.currentView=i)}},e.prototype.onLayoutZoomChange=function(e){this.debouncedUpdate()},e.prototype._setCurrentView=function(e){this.currentView!==e&&(this._currentView=e,this.eventBus.dispatch(new f.ViewerFocusChangeEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(e)})),e.renderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedViewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(e)})),e.previewRenderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedPreviewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(e)})))},e.prototype.getAllVisibleViews=function(e){return i.flatten(e.views.map((function(e){return e.view})).map((function(e){return e.presentationRenderer.assetViewer instanceof h.AssetViewer&&e.presentationRenderer.assetViewer.viewer.viewerLayout.viewState&&e.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.views.length?e.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.views.map((function(e){return e.view})).map((function(t){return{view:t,parentView:e}})):{view:e}})))},e.prototype.getFocussedView=function(e){var t=e.focus.view;return t.presentationRenderer.assetViewer instanceof h.AssetViewer&&t.presentationRenderer.assetViewer.viewer.viewerLayout.viewState&&t.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.focus.view?{view:t.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.focus.view,parentView:t}:{view:t}},e.prototype.shouldRenderPreview=function(e){return e.previewRenderState===r.RenderState.Initial&&e.renderState===r.RenderState.Initial},e.prototype.getLowerPriorityView=function(e){var t=this,n=this.getViewsToBeLoaded(e).filter((function(e){return t.shouldRenderPreview(e.view)})),i=this.getFocussedView(e).view,r=n.sort((function(e,n){return t.sortByLessPriority(i,e.view,n.view,!0)}));if(0!==r.length){var o=r[r.length-1].parentView;return o&&this.renderingQueue.shouldRenderView(o)?{view:o}:r[r.length-1]}},e.prototype.getViewsToBeLoaded=function(e){var t=this.getAllVisibleViews(e),n=t.length,i=this.allViewsWithParents.findIndex((function(t){return t.view===e.first.view})),r=e.last.view.presentationRenderer.assetViewer instanceof h.AssetViewer&&e.last.view.presentationRenderer.assetViewer.viewer.viewerLayout.viewState&&e.last.view.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.last.view?e.last.view.presentationRenderer.assetViewer.viewer.viewerLayout.viewState.last.view:e.last.view,o=this.allViewsWithParents.findIndex((function(e){return e.view===r})),a=i>0,c=o<this.allViewsWithParents.length-1,l=s.browser.mobile?this.config.VIEWS_TO_PRELOAD_MOBILE:this.config.VIEWS_TO_PRELOAD,u=n+(a?1:0)+(c?1:0),d=Math.max(l,u),p=a?[this.allViewsWithParents[i-1]]:[],f=this.filterViewsThatCanBePreloaded(p),v=d-t.length-f.length,m=this.allViewsWithParents.slice(o+1,o+v+1),g=this.filterViewsThatCanBePreloaded(m);return f.concat(t,g)},e.prototype.filterViewsThatCanBePreloaded=function(e){var t=this,n=new Map;return e.filter((function(e){var i=e.view.assetViewerItem.type;if(n.has(i)||n.set(i,0),void 0===t.config.VIEWS_TO_PRELOAD_PER_ASSET_TYPE[i])return!0;var r=t.config.VIEWS_TO_PRELOAD_PER_ASSET_TYPE[i];if((n.get(i)||0)<r){var o=n.get(i)+1;return n.set(i,o),!0}return!1}))},e.prototype.isViewVisible=function(e){return this.viewerLayout.viewState.views.map((function(e){return e.view})).indexOf(e)>-1},e.prototype.destroyViewsIfNecessary=function(e){var t=this;if(!this.config.IS_SLAVE_ASSET_VIEWER){var n=this.allViewsWithParents.filter((function(e){return e.view.renderState!==r.RenderState.Initial})),i=this.getViewsToBeLoaded(e).map((function(e){return e.view}));if(n.length>i.length){var s=n.filter((function(e){var n=e.view;return-1===i.indexOf(n)&&!t.isViewVisible(n)&&n.canBeDestroyed}));if(s.length>this.config.BATCH_DESTROY_VIEWS_COUNT)try{s.forEach((function(e){e.view.destroy(),e.parentView&&!t.isViewVisible(e.parentView)&&e.parentView.canBeDestroyed&&e.parentView.destroy()}))}catch(e){console.error(e)}}!1===this.config.PRELOAD_VIDEOS_ENABLED&&this.config.VIEWER_LAYOUT===o.LAYOUT.HORIZONTAL&&this.views.map((function(e){e.assetViewerItem.type!==o.ASSET_TYPE.VIDEO&&e.assetViewerItem.type!==o.ASSET_TYPE.MEETING_VIDEO&&e.assetViewerItem.type!==o.ASSET_TYPE.PERSONAL_VIDEO_RECORDING||e===t.currentView||e.destroy()}))}},e.prototype.sortByLessPriority=function(e,t,n,i){var r=this.isViewPositionedInScrollDirection(e,t,i);if(r===this.isViewPositionedInScrollDirection(e,n,i)){var o=Math.abs(this.allViews.indexOf(e)-this.allViews.indexOf(t)),s=Math.abs(this.allViews.indexOf(e)-this.allViews.indexOf(n));return o===s?0:o<s?1:-1}return!0===r?1:-1},e.prototype.isViewPositionedInScrollDirection=function(e,t,n){return!0===n?this.allViews.indexOf(e)<=this.allViews.indexOf(t):this.allViews.indexOf(e)>=this.allViews.indexOf(t)},e.prototype.onIdle=function(){if(!this.isThumbnailViewer){this.config.DEBUG&&console.log("idle",this.instance);var e=this.viewerLayout.viewState;this.destroyViewsIfNecessary(e);var t=this.getLowerPriorityView(e);if(t&&t.view&&this.renderingQueue.shouldRenderView(t.view)){if(this.config.DEBUG&&console.log("render low prio view",t,this.instance,t.view.page),!(t.view.presentationRenderer instanceof u.PdfJsPresentationRenderer))return this.forceRendering(t);if(this.config.PDF_PRELOAD_STRATEGY===o.PDF_PRELOAD_STRATEGY.LOW_PREVIEW||this.config.PDF_PRELOAD_STRATEGY===o.PDF_PRELOAD_STRATEGY.HIGH_PREVIEW)return this.forceRendering(t,!0);if(this.config.PDF_PRELOAD_STRATEGY===o.PDF_PRELOAD_STRATEGY.FULL)return this.forceRendering(t)}}},e.prototype.canNavigateToNext=function(){return this.views.indexOf(this.currentView)<this.views.length-1},e.prototype.canNavigateToPrevious=function(){return 0!==this.views.indexOf(this.currentView)},e.prototype.next=function(){if(this.currentView){if(this.currentView.presentationRenderer instanceof d.PdfViewerPresentationRenderer&&this.currentView.presentationRenderer.pdfViewer&&this.currentView.presentationRenderer.pdfViewer.canNavigateToNext())this.currentView.presentationRenderer.pdfViewer.next();else if(this.currentView.presentationRenderer instanceof l.AssetViewerPresentationRenderer&&this.currentView.presentationRenderer.assetViewer.canNavigateToNext())this.currentView.presentationRenderer.assetViewer.next();else{var e=this.canNavigateToNext()?this.views.indexOf(this.currentView)+1:0,t=this.views[e];if(t.presentationRenderer instanceof l.AssetViewerPresentationRenderer)if(this.renderingQueue.shouldRenderView(t))this.renderingQueue.renderView(t);else{var n=t.presentationRenderer.assetViewer.viewer.views[0];t.presentationRenderer.assetViewer.viewer.currentView===n&&(this.eventBus.dispatch(new f.ViewerFocusChangeEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(n)})),n.renderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedViewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(n)}))),t.presentationRenderer.assetViewer.viewer.currentView=n}if(t.presentationRenderer instanceof d.PdfViewerPresentationRenderer){var i=Array.from(t.presentationRenderer.pdfViewerConfig.pages.values()).shift();t.presentationRenderer.initialPageId=i.id,this.renderingQueue.shouldRenderView(t)&&this.renderingQueue.renderView(t)}this.currentView=t}this.viewerLayout.lastNavigatedNext=!0}},e.prototype.previous=function(){if(this.currentView){if(this.currentView.presentationRenderer instanceof d.PdfViewerPresentationRenderer&&this.currentView.presentationRenderer.pdfViewer&&this.currentView.presentationRenderer.pdfViewer.canNavigateToPrevious())this.currentView.presentationRenderer.pdfViewer.previous();else if(this.currentView.presentationRenderer instanceof l.AssetViewerPresentationRenderer&&this.currentView.presentationRenderer.assetViewer.canNavigateToPrevious())this.currentView.presentationRenderer.assetViewer.previous();else{var e=this.canNavigateToPrevious()?this.views.indexOf(this.currentView)-1:this.views.length-1,t=this.views[e];if(t.presentationRenderer instanceof l.AssetViewerPresentationRenderer)if(this.renderingQueue.shouldRenderView(t)){var n=t.presentationRenderer.assetViewer.viewer.views.length-1;t.presentationRenderer.pageToInit=t.presentationRenderer.assetViewer.viewer.views[n].page,this.renderingQueue.renderView(t)}else{var i=t.presentationRenderer.assetViewer.viewer.views[t.presentationRenderer.assetViewer.viewer.views.length-1];t.presentationRenderer.assetViewer.viewer.currentView===i&&(this.eventBus.dispatch(new f.ViewerFocusChangeEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(i)})),i.previewRenderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedPreviewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(i)})),i.renderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedViewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(i)}))),t.presentationRenderer.assetViewer.viewer.currentView=i}if(t.presentationRenderer instanceof d.PdfViewerPresentationRenderer){var o=Array.from(t.presentationRenderer.pdfViewerConfig.pages.values()).pop();t.presentationRenderer.initialPageId=o.id,this.renderingQueue.shouldRenderView(t)&&this.renderingQueue.renderView(t)}this.currentView=t}this.viewerLayout.lastNavigatedNext=!1}},e.prototype.navigateToAssetViewerItem=function(e,t){var n=t||1,i=this.views.findIndex((function(t){return t.assetViewerItem.id===e&&t.page===n}));if(-1===i){var o=this.views.find((function(t){return t.assetViewerItem.id===e}));if(o){if(o.presentationRenderer instanceof l.AssetViewerPresentationRenderer){var s=o.presentationRenderer.assetViewer.viewer.views.find((function(t){return t.assetViewerItem.id===e&&t.page===n}));s&&(o.presentationRenderer.assetViewer.viewer.currentView===s?(o.presentationRenderer.pageToInit=s.page,o.presentationRenderer.assetViewer.viewer.currentView=s,this.eventBus.dispatch(new f.ViewerFocusChangeEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(s)})),s.previewRenderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedPreviewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(s)})),s.renderState===r.RenderState.Finished&&this.eventBus.dispatch(new f.ViewerRenderedViewFocusEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(s)}))):(o.presentationRenderer.pageToInit=s.page,o.presentationRenderer.assetViewer.viewer.currentView=s),o.presentationRenderer.assetViewer.viewer.viewerLayout.lastNavigatedNext=!0)}if(o.presentationRenderer instanceof d.PdfViewerPresentationRenderer){var a=o.presentationRenderer,c=e+"-"+t;a.pdfViewer?a.pdfViewer.goto(c):a.initialPageId=c}this.currentView=o}}else"number"==typeof i&&(this.currentViewIndex=i,this.viewerLayout.lastNavigatedNext=!0)},e.prototype.destroy=function(){this.isDestroyed=!0,this.removeEventListeners(),this.viewerLayout.destroy(),this.views.forEach((function(e){return e.destroyFinal()}))},e.prototype.resetAnnotations=function(){this.views.forEach((function(e){return e.resetAnnotations()}))},e.prototype.resize=function(){this.viewerLayout.viewState&&this.destroyViewsIfNecessary(this.viewerLayout.viewState),this.viewerLayout.resize(),this.views.forEach((function(e){return e.resize()})),this.update()},e.prototype.getAssetViewerViews=function(){var e=[];return this.views.forEach((function(t){t.presentationRenderer instanceof l.AssetViewerPresentationRenderer||t.presentationRenderer instanceof d.PdfViewerPresentationRenderer?e.push.apply(e,t.presentationRenderer.getAssetViewerViews()):e.push(p.AssetViewerViewMapper.mapToPublicAssetViewerView(t))})),e},Object.defineProperty(e.prototype,"publicAssetViewerViewIds",{get:function(){return this.getAssetViewerViews().map((function(e){return e.id}))},enumerable:!0,configurable:!0}),e}();t.Viewer=m},3729:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2062),a=n(2299),c=n(7648),l=n(9717),u=n(387),d=n(261),h=n(3650),p=n(1232),f=n(8727),v=n(5537),m="past",g="present",w="future",y=function(e){function t(t,n,i,r,o){var s=e.call(this,t,n,i)||this;return s.config=t,s.eventBus=n,s.assetViewerItems=i,s.tokenService=r,s.pdfJsLinkService=o,s.isZoomed=!1,s.currentScale=1,s._currentView=null,s.lastNavigatedNext=!0,s.container=null,s.views=s.createViews(),s.onPublicRenderedViewFocus=s.onPublicRenderedViewFocus.bind(s),s.onRenderedViewFocus=s.onRenderedViewFocus.bind(s),s.addEventListeners(),s}return r(t,e),Object.defineProperty(t.prototype,"currentView",{get:function(){return this._currentView},set:function(e){var t=this;this._currentView=e,requestAnimationFrame((function(){return t.setLayoutClasses()}))},enumerable:!0,configurable:!0}),t.prototype.setLayoutClasses=function(){var e=this.views.indexOf(this.currentView);if(-1===e)throw"no current view index";this.views.forEach((function(t,n){t.container&&(n<e?(t.container.classList.remove(g),t.container.classList.remove(w),t.container.classList.add(m)):n===e?(t.container.classList.remove(m),t.container.classList.remove(w),t.container.classList.add(g)):n>e&&(t.container.classList.remove(m),t.container.classList.remove(g),t.container.classList.add(w)))})),this.eventBus.dispatch(new f.ViewerViewportChangeEvent({viewState:this.viewState}))},Object.defineProperty(t.prototype,"viewState",{get:function(){var e=this.currentView||this.views[0],t={view:e,id:this.views.indexOf(e),percent:100};return{first:t,focus:t,last:t,scroll:{down:!!this.lastNavigatedNext},views:this.views.length?[t]:[]}},enumerable:!0,configurable:!0}),t.prototype.render=function(e){this.container=e,this.container.classList.add("av-layout-horizontal"),this.viewportWidth=this.container.clientWidth,this.viewportHeight=this.container.clientHeight,this.resetLayoutContainer()},t.prototype.resetLayoutContainer=function(){this.container.innerHTML=""},t.prototype.renderViewContainer=function(e){-1===Array.from(this.container.children).indexOf(e.container)&&(this.calculateLayout(),"url"===e.assetViewerItem.type&&e.presentationRenderer instanceof u.IframePresentationRenderer&&(e.container.style.width="0px",e.container.style.height="0px",e.container.style.visibility="hidden"),this.container.appendChild(e.container))},t.prototype.destroyViewContainer=function(e){try{this.container.removeChild(e.container)}catch(e){}try{this.container.removeChild(e.contentWrapper)}catch(e){}},t.prototype.setViewSize=function(e){var t=e.contentWrapper,n=e.contentElement;t&&n&&(s.FullscreenHelper.isFullscreen()&&s.FullscreenHelper.getFullscreenElement()===this.fullscreenContainer&&e.presentationRenderer instanceof u.IframePresentationRenderer?(e.contentWrapper.style.padding=null,e.contentElement.style.width="100%",e.contentElement.style.height="100%"):(t.style.paddingTop=e.paddingTop+"px",t.style.paddingBottom=e.paddingBottom+"px",t.style.paddingLeft=e.paddingLeft+"px",t.style.paddingRight=e.paddingRight+"px",n.style.width=e.slideWidth+"px",n.style.height=e.slideHeight+"px",n.style.borderWidth=e.border+"px"))},t.prototype.update=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=!1),void 0===n&&(n=!1),this.calculateLayout()},t.prototype.addViews=function(e,t,n,i){var r=this.views.indexOf(e);if(-1!==r){for(var s=[],a=0;a<t;a++){var c=a+1,l=this.createAssetViewerViewFromAssetViewerItem(e.assetViewerItem,c);l.contentElement.style.width=n+"px",l.contentElement.style.height=i+"px",s.push(l)}this.views=o(this.views.slice(0,r),s,this.views.slice(r+1)),e===this.currentView&&(this.currentView=s[0])}else console.error("view not found in addViews")},t.prototype.createViews=function(){return this.createAssetViewerViewsFromAssetViewerItems(this.assetViewerItems)},t.prototype.calculateLayout=function(){var e=this;this.views=this.views.map((function(t,n){var i=e.config.VIEW_BORDER,r=e.config.VIEW_BORDER_BOTTOM,o=e.config.VIEW_PADDING_TOP,s=e.config.VIEW_PADDING_BOTTOM,c=e.config.VIEW_PADDING_LEFT,l=e.config.VIEW_PADDING_RIGHT;t.presentationRenderer instanceof d.AssetViewerPresentationRenderer||t.presentationRenderer instanceof v.PdfViewerPresentationRenderer?o=s=c=l=i=r=0:t.assetViewerItem.type===a.ASSET_TYPE.PAGE&&(o=s=0);var h=2*i,p=Math.min(e.viewportWidth-(c+l+h),e.config.MAX_CONTENT_WIDTH),f=e.viewportHeight-(o+s+i+r);if(t.assetViewerItem.type===a.ASSET_TYPE.DOCUMENT?p=Math.min(e.viewportWidth-(c+l+h),e.config.MAX_CONTENT_WIDTH,e.config.MAX_CONTENT_WIDTH_PORTRAIT_DOCUMENTS):t.assetViewerItem.type===a.ASSET_TYPE.PAGE&&e.config.MAX_CONTENT_WIDTH_PAGES&&(p=Math.min(e.viewportWidth-(c+l+h),e.config.MAX_CONTENT_WIDTH_PAGES)),!t.dimensions||t.presentationRenderer instanceof u.IframePresentationRenderer||t.presentationRenderer instanceof d.AssetViewerPresentationRenderer)t.slideWidth=p,t.slideHeight=f;else{var m=t.dimensions.width/t.dimensions.height>1,g=t.assetViewerItem.type!==a.ASSET_TYPE.DOCUMENT||m?e.config.MAX_CONTENT_WIDTH:e.config.MAX_CONTENT_WIDTH_PORTRAIT_DOCUMENTS,w=Math.min(e.viewportWidth-(c+l+h),g),y=t.dimensions.width/w,E=t.dimensions.height/y;if((t.assetViewerItem.type!==a.ASSET_TYPE.DOCUMENT||t.assetViewerItem.type===a.ASSET_TYPE.DOCUMENT&&m)&&e.viewportWidth>e.config.LANDSCAPE_FIT_WIDTH_BREAKPOINT_WIDTH&&e.viewportHeight>e.config.LANDSCAPE_FIT_WIDTH_BREAKPOINT_HEIGHT&&E>f)if((t.assetViewerItem.type===a.ASSET_TYPE.PHOTO||t.assetViewerItem.type===a.ASSET_TYPE.VIDEO||t.assetViewerItem.type===a.ASSET_TYPE.MEETING_VIDEO||t.assetViewerItem.type===a.ASSET_TYPE.PERSONAL_VIDEO_RECORDING)&&t.dimensions.width<w&&t.dimensions.height<f&&y>0)t.slideWidth=t.dimensions.width,t.slideHeight=t.dimensions.height;else{var b=t.dimensions.height/f;t.slideWidth=t.dimensions.width/b,t.slideHeight=t.dimensions.height/b}else(t.assetViewerItem.type===a.ASSET_TYPE.PHOTO||t.assetViewerItem.type===a.ASSET_TYPE.VIDEO||t.assetViewerItem.type===a.ASSET_TYPE.MEETING_VIDEO||t.assetViewerItem.type===a.ASSET_TYPE.PERSONAL_VIDEO_RECORDING)&&t.dimensions.width<e.viewportWidth&&y>0?(t.slideWidth=t.dimensions.width,t.slideHeight=t.dimensions.height):(t.slideWidth=t.dimensions.width/y,t.slideHeight=t.dimensions.height/y);t.slideHeight>e.viewportHeight?t.contentElement.classList.add("vrow-content-container-exceeds-viewport"):t.contentElement.classList.contains("vrow-content-container-exceeds-viewport")&&t.contentElement.classList.remove("vrow-content-container-exceeds-viewport"),t.currentScale=t.slideWidth/t.dimensions.width}return t.width=t.slideWidth+c+l+h,t.height=t.slideHeight+o+s+r+h,t.border=i,t.borderBottom=r,t.paddingTop=o,t.paddingBottom=s,t.paddingLeft=c,t.paddingRight=l,e.setViewSize(t),t}))},t.prototype.addEventListeners=function(){e.prototype.addEventListeners.call(this),this.eventBus.on(f.ViewerEventType.PublicRenderedViewFocus,this.onPublicRenderedViewFocus),this.eventBus.on(f.ViewerEventType.RenderedViewFocus,this.onRenderedViewFocus)},t.prototype.removeEventListeners=function(){e.prototype.removeEventListeners.call(this),this.eventBus.off(f.ViewerEventType.PublicRenderedViewFocus,this.onPublicRenderedViewFocus),this.eventBus.off(f.ViewerEventType.RenderedViewFocus,this.onRenderedViewFocus)},t.prototype.resize=function(){this.container&&(this.viewportWidth=this.container.clientWidth,this.viewportHeight=this.container.clientHeight,this.calculateLayout())},t.prototype.onRenderedViewFocus=function(e){var t=e.payload.assetViewerView;t&&this.views.find((function(e){return e.id===t.id}))&&this.preventTabFocus()},t.prototype.preventTabFocus=function(){if(!this.currentView)throw"no current view";var e=this.views.indexOf(this.currentView);-1!==e&&this.views.forEach((function(t,n){t.container&&(n===e?t.presentationRenderer.audio?(t.presentationRenderer.audio.tabIndex=0,t.presentationRenderer.audio.style.visibility="initial"):t.presentationRenderer.video?(t.presentationRenderer.video.tabIndex=0,t.presentationRenderer.video.style.visibility="initial"):t.presentationRenderer.iframe&&(t.presentationRenderer.iframe.tabIndex=0,t.presentationRenderer.iframe.style.visibility="initial"):t.presentationRenderer.audio?(t.presentationRenderer.audio.tabIndex=-1,t.presentationRenderer.audio.style.visibility="hidden"):t.presentationRenderer.video?(t.presentationRenderer.video.tabIndex=-1,t.presentationRenderer.video.style.visibility="hidden"):t.presentationRenderer.iframe&&(t.presentationRenderer.iframe.tabIndex=-1,t.presentationRenderer.iframe.style.visibility="hidden"))}))},Object.defineProperty(t.prototype,"canZoomIn",{get:function(){return this.config.canZoom&&this.currentScale<this.config.MAX_ZOOM_SCALE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canZoomOut",{get:function(){return this.config.canZoom&&this.currentScale>this.config.MIN_ZOOM_SCALE},enumerable:!0,configurable:!0}),t.prototype.zoomIn=function(){this.canZoomIn&&(this.currentScale=this.currentScale+.2,this.zoom(this.currentScale))},t.prototype.zoomOut=function(){this.canZoomOut&&(this.currentScale=this.currentScale-.2,this.zoom(this.currentScale))},t.prototype.zoom=function(e){1===e?this.resetZoom():(this.views.forEach((function(t){t.isZoomed=!0,t.currentScale=e,t.presentationRenderer instanceof p.PdfJsPresentationRenderer&&t.reset()})),this.isZoomed=!0,this.update())},t.prototype.resetZoom=function(){this.isZoomed=null,this.currentScale=1,this.views.forEach((function(e){e.isZoomed=!1,e.currentScale=null,e.presentationRenderer instanceof p.PdfJsPresentationRenderer&&e.reset()})),this.update()},t.prototype.onPublicRenderedViewFocus=function(e){var t=e.payload.assetViewerView;this.views.forEach((function(e){e.presentationRenderer.video&&(e.id===t.id?e.presentationRenderer.video.play():e.presentationRenderer.video.pause()),e.presentationRenderer.audio&&(e.id===t.id?e.presentationRenderer.audio.play():e.presentationRenderer.audio.pause())}))},t.prototype.createAssetViewerViewFromAssetViewerItem=function(e,t){var n=t||1,i=e.id+(t?"-"+parseInt(t):""),r=e.annotations&&e.annotations[n]||null;return new l.AssetViewerView(this.config,this.eventBus,this,e,this.tokenService,this.pdfJsLinkService,i,n,r)},t.prototype.createAssetViewerViewsFromAssetViewerItems=function(e){var t=this,n=[];return e.forEach((function(e){var i=e.type===a.ASSET_TYPE.DOCUMENT,r=i&&h.PresentationHelper.isDocumentPortrait(e)&&i&&t.config.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP.DOCUMENT_PORTRAIT?"DOCUMENT_PORTRAIT":e.type;if(!t.config.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP[r]||t.config.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP[r][0]!==a.PRESENTATION_RENDERERS.ASSET_VIEWER&&t.config.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP[r][0]!==a.PRESENTATION_RENDERERS.PDF_VIEWER)if(e.pageRanges&&e.pageRanges.length)e.pageRanges.forEach((function(i){for(var r=i.start;r<=i.end;r++){var o=t.createAssetViewerViewFromAssetViewerItem(e,r);n.push(o)}}));else for(var o=0;o<e.numViews;o++)if(e.numViews>1){var s=o+1;n.push(t.createAssetViewerViewFromAssetViewerItem(e,s))}else n.push(t.createAssetViewerViewFromAssetViewerItem(e,e.page));else n.push(t.createAssetViewerViewFromAssetViewerItem(e,e.page))})),n},t.prototype.createContentWrapper=function(){var e=document.createElement("div");return e.style.display="flex",e.style.touchAction="manipulation",e.style.justifyContent="center",e.style.width="100%",e.style.height="100%",e.style.overflowY="auto",e.style.overflowX="hidden",e.classList.add("vrow-content-container-wrapper"),e},t.prototype.createContentContainer=function(e){var t=document.createElement("div");return t.classList.add("vrow-content-container"),t.classList.add("vrow-content-container-"+e.assetViewerItem.type),t.classList.add("vrow-content-container-vertical-center"),t.classList.add("loading"),t.style.position="relative",t.style.borderWidth="1px",t.style.boxSizing="content-box",t.style.flex="0 0 auto",this.config.TRANSITIONS_ENABLED&&(t.style.transition="opacity .5s ease-in-out"),t},t.prototype.createContainer=function(){var e=document.createElement("div");return e.classList.add("av-slide"),e.classList.add(w),e},t}(c.ViewerLayout);t.LayoutHorizontal=y},1641:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(8727),a=n(2299),c=n(3149),l=n(2062),u=n(8219),d=n(6829),h=n(387),p=n(7917),f=n(1232),v=n(9717),m=function(e){function t(t,n,i,r,o){var s=e.call(this,t,n,i)||this;return s.config=t,s.eventBus=n,s.assetViewerItems=i,s.tokenService=r,s.pdfJsLinkService=o,s.isZoomed=!1,s.currentScale=1,s.container=null,s.views=s.createAssetViewerViewsFromAssetViewerItems(s.assetViewerItems),s.onFullscreenChange=s.onFullscreenChange.bind(s),s.onObservableDimensionsIframeDimensionsChanged=s.onObservableDimensionsIframeDimensionsChanged.bind(s),s.addEventListeners(),s}return r(t,e),Object.defineProperty(t.prototype,"currentView",{set:function(e){this.scrollIntoView(e)},enumerable:!0,configurable:!0}),t.prototype.render=function(e){this.container=e,this.container.classList.add("viewer-app-container"),this.viewportWidth=this.container.clientWidth,this.viewportHeight=this.container.clientHeight,this.container.style.overflow="auto",this.scrollContainer=this.container,this.scroll=d.watchScroll(this.scrollContainer,this.onScroll.bind(this)),this.calculateLayout(),this._viewState=d.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll),this.renderAll()},t.prototype.renderAll=function(){var e=this,t=document.createDocumentFragment();this.views.forEach((function(n){t.appendChild(e.renderView(n))})),this.container.innerHTML="",this.container.appendChild(t),this.eventBus.dispatch(new s.ViewerViewportChangeEvent({viewState:this._viewState}))},t.prototype.renderView=function(e){var t=e.container,n=e.contentWrapper;u.shouldShowPresentInOfficeOnlineBar(e)&&(n.style.position="relative",n.appendChild(e.presentInOfficeOnlineBar));var i=e.contentElement;return e.borderBottom&&(e.container.style.borderBottomWidth=e.borderBottom+"px"),this.updateView(e),n.appendChild(i),t.appendChild(n),t},t.prototype.updateView=function(e){var t=e.container,n=e.contentWrapper,i=e.contentElement;n.style.paddingTop=e.paddingTop+"px",n.style.paddingBottom=e.paddingBottom+"px",n.style.paddingLeft=e.paddingLeft+"px",n.style.paddingRight=e.paddingRight+"px",i.style.width=e.slideWidth+"px",i.style.height=e.slideHeight+"px",e.isZoomed&&(t.scrollLeft=e.scrollXOffset)},t.prototype.update=function(e,t,n){if(void 0===e&&(e=null),void 0===t&&(t=!0),void 0===n&&(n=!1),-1===e&&(console.error("update called with view index -1"),e=null),this.calculateLayout(e,t,null,n),null!==e){var i=this.views[e];this.updateView(i),this.scrollYOffset&&(this.scrollContainer.scrollTop=this.viewState.top+this.scrollYOffset)}else this.updateAll();this._viewState=d.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll)},t.prototype.updateAll=function(){var e=this;this.views.forEach((function(t){return e.updateView(t)}))},t.prototype.updateAndKeepScrollPosition=function(){var e=this.scrollContainer.scrollHeight;this.update(null,!0,!0);var t=this.scrollContainer.scrollHeight/e;this.scrollContainer.scrollTop=this.scroll.lastY*t,this.scrollContainer.scrollLeft=this.isZoomed?(this.views[0].width-this.viewportWidth)/2:0},t.prototype.addViews=function(e,t,n,i){var r=this,s=this.views.indexOf(e);if(-1!==s){for(var a=[],c=document.createDocumentFragment(),l=0;l<t;l++){var u=l+1,h=this.createAssetViewerViewFromAssetViewerItem(e.assetViewerItem,u);h.groupId=h.assetViewerItem.id,0===l&&(h.isFirstOfGroup=!0),l===h.assetViewerItem.numViews-1&&(h.isLastOfGroup=!0),h.contentElement.style.width=n+"px",h.contentElement.style.height=i+"px",a.push(h)}return this.views=o(this.views.slice(0,s),a,this.views.slice(s+1)),e.container.parentNode||console.error("no parent",e.container),this.calculateLayout(s+t,!0,t),this.scrollYOffset&&(this.scrollContainer.scrollTop=this.viewState.top+this.scrollYOffset),a.forEach((function(e){return c.appendChild(r.renderView(e))})),e.container.parentNode&&(e.container.parentNode.insertBefore(c,e.container.nextSibling),e.container.parentNode.removeChild(e.container)),this._viewState=d.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll),a}console.error("view not found in addViews")},t.prototype.calculateLayout=function(e,t,n,i){var r=this;void 0===e&&(e=null),void 0===t&&(t=!0),void 0===n&&(n=null),void 0===i&&(i=!1);var o=0;this.scrollYOffset=null,this.views=this.views.map((function(s,c){var l,d=c===r.views.length-1||s.groupId&&!s.isLastOfGroup?0:r.config.VIEW_BORDER_BOTTOM;if(null===s.groupId||s.groupId&&s.isFirstOfGroup)if(u.shouldShowPresentInOfficeOnlineBar(s)){var f=s.presentInOfficeOnlineBar.clientHeight||40;l=r.config.VIEW_PADDING_TOP+f}else l=r.config.VIEW_PADDING_TOP;else l=r.config.PAGE_PADDING_TOP;var v=null===s.groupId||s.groupId&&s.isLastOfGroup?r.config.VIEW_PADDING_BOTTOM:r.config.PAGE_PADDING_BOTTOM,m=r.config.VIEW_PADDING_LEFT,g=r.config.VIEW_PADDING_RIGHT,w=2*r.config.VIEW_BORDER,y=Object.assign({},s),E=s.assetViewerItem.type===a.ASSET_TYPE.DOCUMENT?Math.min(r.viewportWidth-(m+g+w),r.config.MAX_CONTENT_WIDTH,r.config.MAX_CONTENT_WIDTH_PORTRAIT_DOCUMENTS):Math.min(r.viewportWidth-(m+g+w),r.config.MAX_CONTENT_WIDTH),b=r.viewportHeight-(r.config.VIEW_PADDING_TOP+r.config.VIEW_PADDING_BOTTOM+w);if(s.dimensions){var P=s.dimensions.width/s.dimensions.height>1,_=s.assetViewerItem.type!==a.ASSET_TYPE.DOCUMENT||P?r.config.MAX_CONTENT_WIDTH:r.config.MAX_CONTENT_WIDTH_PORTRAIT_DOCUMENTS,T=Math.min(r.viewportWidth-(m+g+w),_);s.assetViewerItem.type===a.ASSET_TYPE.PAGE&&r.config.MAX_CONTENT_WIDTH_PAGES&&(T=Math.min(r.viewportWidth-(m+g+w),r.config.MAX_CONTENT_WIDTH_PAGES));var S=s.presentationRenderer instanceof h.IframePresentationRenderer?T:s.dimensions.width,V=s.presentationRenderer instanceof h.IframePresentationRenderer||s.presentationRenderer instanceof p.ObservableDimensionsIframePresentationRenderer&&s.dimensions.height===p.OBSERVABLE_DIMENSIONS_MIN_IFRAME_HEIGHT?b:s.dimensions.height,R=S/T,A=V/R;if(P&&r.viewportWidth>r.config.LANDSCAPE_FIT_WIDTH_BREAKPOINT_WIDTH&&r.viewportHeight>r.config.LANDSCAPE_FIT_WIDTH_BREAKPOINT_HEIGHT&&A>b)if((s.assetViewerItem.type===a.ASSET_TYPE.PHOTO||s.assetViewerItem.type===a.ASSET_TYPE.VIDEO||s.assetViewerItem.type===a.ASSET_TYPE.MEETING_VIDEO||s.assetViewerItem.type===a.ASSET_TYPE.PERSONAL_VIDEO_RECORDING)&&S<T&&V<b&&R>0)s.slideWidth=S,s.slideHeight=V;else{var O=V/b;s.slideWidth=S/O,s.slideHeight=V/O}else(s.assetViewerItem.type===a.ASSET_TYPE.PHOTO||s.assetViewerItem.type===a.ASSET_TYPE.VIDEO||s.assetViewerItem.type===a.ASSET_TYPE.MEETING_VIDEO||s.assetViewerItem.type===a.ASSET_TYPE.PERSONAL_VIDEO_RECORDING)&&S<r.viewportWidth&&R>0?(s.slideWidth=S,s.slideHeight=V):(s.slideWidth=S/R,s.slideHeight=V/R);s.presentationRenderer instanceof p.ObservableDimensionsIframePresentationRenderer&&(s.slideWidth=T,s.slideHeight=V),s.defaultScaledWidth&&!i||(s.defaultScaledWidth=s.slideWidth,s.defaultScaledHeight=s.slideHeight),s.isZoomed&&(s.slideWidth=s.defaultScaledWidth*s.currentScale,s.presentationRenderer instanceof p.ObservableDimensionsIframePresentationRenderer||(s.slideHeight=s.defaultScaledHeight*s.currentScale)),s.currentScale=s.slideWidth/S}else s.slideWidth=E,s.slideHeight=b;if(s.width=s.slideWidth+m+g+w,s.height=s.slideHeight+l+v+d+w,s.top=o,s.viewTop=o,s.bottom=s.top+s.height,s.paddingTop=l,s.paddingBottom=v,s.paddingLeft=m,s.paddingRight=g,s.borderBottom=d,o=s.bottom,r._viewState){if(c===e&&y&&!n){var I=y.height,L=s.height,C=y.bottom<r._viewState.bottom;r.scrollYOffset=null,C&&t&&(r.scrollYOffset=L-I),s.scrollXOffset=s.isZoomed?(s.width-r.viewportWidth)/2:null}var x=y.top<r._viewState.bottom;if(n&&c===e&&x){var D=y.top,N=s.top;r.scrollYOffset=N-D}}return s})),this.layoutHeight=o},t.prototype.scrollIntoView=function(e){this.scrollContainer?this.scrollContainer.scrollTop=e.groupId&&!e.isFirstOfGroup?e.top-this.config.PAGE_PADDING_BOTTOM+3:e.top+1:console.warn("Render ViewerLayout to be able to scrollIntoView")},t.prototype.addEventListeners=function(){e.prototype.addEventListeners.call(this),this.eventBus.on(s.ViewerEventType.FocusChange,this.onFullscreenChange),this.eventBus.on(s.ViewerEventType.ObservableDimensionsIframeDimensionsChanged,this.onObservableDimensionsIframeDimensionsChanged)},t.prototype.removeEventListeners=function(){e.prototype.removeEventListeners.call(this),this.eventBus.off(s.ViewerEventType.FocusChange,this.onFullscreenChange),this.eventBus.off(s.ViewerEventType.ObservableDimensionsIframeDimensionsChanged,this.onObservableDimensionsIframeDimensionsChanged)},t.prototype.onScroll=function(e,t){this._viewState=d.getViewState(this.views,this.viewportHeight,this.viewportWidth,t),l.FullscreenHelper.isFullscreen()&&this.fullscreenContainer&&l.FullscreenHelper.getFullscreenElement()!==this.fullscreenContainer||this._previousViewState&&this._previousViewState.first.view===this._viewState.first.view&&this._previousViewState.last.view===this._viewState.last.view&&this._previousViewState.focus.view===this._viewState.focus.view||(this._previousViewState=this._viewState,this.eventBus.dispatch(new s.ViewerViewportChangeEvent({viewState:this._viewState})))},t.prototype.resize=function(){this.container&&(this.viewportWidth=this.container.clientWidth,this.viewportHeight=this.container.clientHeight,this._viewState=d.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll),this.resetZoom(),this.calculateLayout())},Object.defineProperty(t.prototype,"canZoomIn",{get:function(){return this.config.canZoom&&this.currentScale<this.config.MAX_ZOOM_SCALE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canZoomOut",{get:function(){return this.config.canZoom&&this.currentScale>this.config.MIN_ZOOM_SCALE},enumerable:!0,configurable:!0}),t.prototype.zoomIn=function(){this.canZoomIn&&(this.currentScale=this.currentScale+.2,this.zoom(this.currentScale))},t.prototype.zoomOut=function(){this.canZoomOut&&(this.currentScale=this.currentScale-.2,this.zoom(this.currentScale))},t.prototype.zoom=function(e){1===e?this.resetZoom():(this.views.forEach((function(t){t.isZoomed=!0,t.currentScale=e,t.presentationRenderer instanceof f.PdfJsPresentationRenderer&&t.reset()})),this.isZoomed=!0,this.updateAndKeepScrollPosition(),this.views.forEach((function(e){return e.resizeAnnotations()})),this.eventBus.dispatch(new s.ViewerLayoutZoomChangeEvent))},t.prototype.resetZoom=function(){this.isZoomed=!1,this.currentScale=1,this.views.forEach((function(e){e.isZoomed=!1,e.currentScale=null,e.presentationRenderer instanceof f.PdfJsPresentationRenderer&&e.reset()})),this.updateAndKeepScrollPosition(),this.views.forEach((function(e){return e.resizeAnnotations()})),this.eventBus.dispatch(new s.ViewerLayoutZoomChangeEvent)},t.prototype.onFullscreenChange=function(e){l.FullscreenHelper.isFullscreen()||this.eventBus.dispatch(new s.ViewerViewportChangeEvent({viewState:this._viewState}))},t.prototype.onObservableDimensionsIframeDimensionsChanged=function(e){this.update()},t.prototype.createAssetViewerViewFromAssetViewerItem=function(e,t){var n=t||1,i=e.id+(t?"-"+parseInt(t):""),r=e.annotations&&e.annotations[n]||null;return new v.AssetViewerView(this.config,this.eventBus,this,e,this.tokenService,this.pdfJsLinkService,i,n,r)},t.prototype.createAssetViewerViewsFromAssetViewerItems=function(e){var t=this,n=[];return e.forEach((function(e){if(e.pageRanges&&e.pageRanges.length)e.pageRanges.forEach((function(i,r){for(var o=i.start;o<=i.end;o++){var s=t.createAssetViewerViewFromAssetViewerItem(e,o);s.isFirstOfGroup=0===r&&o===i.start,s.isLastOfGroup=r===e.pageRanges.length-1&&o===i.end,s.groupId=e.id,n.push(s)}}));else for(var i=0;i<e.numViews;i++){var r=void 0;if(e.numViews>1){var o=i+1;(r=t.createAssetViewerViewFromAssetViewerItem(e,o)).groupId=e.id,0===i&&(r.isFirstOfGroup=!0),i===e.numViews-1&&(r.isLastOfGroup=!0)}else r=t.createAssetViewerViewFromAssetViewerItem(e,e.page);n.push(r)}})),n},t.prototype.createContentWrapper=function(){var e=document.createElement("div");return e.style.display="flex",e.style.justifyContent="center",e.style.boxSizing="content-box",e.style.touchAction="manipulation",e.classList.add("vrow-content-container-wrapper"),e},t.prototype.createContentContainer=function(e){var t=document.createElement("div");return t.classList.add("vrow-content-container"),t.classList.add("vrow-content-container-"+e.assetViewerItem.type),t.classList.add("loading"),t.style.position="relative",t.style.borderWidth=this.config.VIEW_BORDER?this.config.VIEW_BORDER+"px":"0px",t.style.boxSizing="content-box",t.style.background="white",t.style.willChange="transform",c.browser.ie||(t.style.justifyContent="center",t.style.alignItems="center"),this.config.TRANSITIONS_ENABLED&&(t.style.transition="opacity .5s ease-in-out"),t},t.prototype.createContainer=function(){var e=document.createElement("div");return e.style.boxSizing="border-box",e.style.minWidth="100%",e.style.display="inline-block",e.style.justifyContent="center",e.style.textAlign="center",e.classList.add("vrow"),e},t}(n(7648).ViewerLayout);t.LayoutVertical=m},6078:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var s=n(7750),a=n(8727),c=n(3149),l=n(6829),u=n(9142),d=n(7648),h="enable-view-selection",p=function(e){function t(t,n,i,r,o,c){var l=e.call(this,t,n,i)||this;return l.config=t,l.eventBus=n,l.assetViewerItems=i,l.tokenService=r,l.linkService=o,l.pdfJsPagePreviewService=c,l.container=null,l.viewSelectionEnabled=!1,l.canExpandGroup=!0,l.canExpandGroup=i.length>1,l.onFocusChange=l.onFocusChange.bind(l),l.addViews=l.addViews.bind(l),l.views=l.createAssetViewerViewsFromAssetViewerItems(l.assetViewerItems),l.addEventListeners(),l.setCurrentView=s.debounce(l.setCurrentView.bind(l),80),l.linkService.eventBus.on(a.ViewerEventType.AddViews,l.addViews),l}return r(t,e),t.prototype.addEventListeners=function(){e.prototype.addEventListeners.call(this),this.linkService.eventBus.on(a.ViewerEventType.FocusChange,this.onFocusChange)},t.prototype.removeEventListeners=function(){e.prototype.removeEventListeners.call(this),this.linkService.eventBus.off(a.ViewerEventType.FocusChange,this.onFocusChange)},t.prototype.render=function(e){this.container=e,this.viewSelectionEnabled&&this.addEnableViewSelectionClass(this.container),this.viewportWidth=this.container.clientWidth,this.viewportHeight=this.container.clientHeight,this.calculateLayout(),this.container.classList.add("viewer-app-thumbnail-container"),this.container.style.overflowY="scroll",this.container.style.transform="translateZ(0)",this.scrollContainer=this.container,this.scroll=l.watchScroll(this.scrollContainer,this.onScroll.bind(this)),this._viewState=l.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll),this.renderAll(),this.eventBus.dispatch(new a.ViewerViewportChangeEvent({viewState:this._viewState}))},t.prototype.renderAll=function(){var e=this;this.container.innerHTML="";var t=document.createDocumentFragment();if(this.views.forEach((function(n){n.parentView&&n.parentView.childElement?n.parentView.childElement.appendChild(e.renderView(n)):(t.appendChild(e.renderView(n)),n.childElement&&t.appendChild(n.childElement))})),this.container.appendChild(t),!c.browser.ie&&!c.browser.mobile&&this.container.clientWidth!==this.container.offsetWidth){this.viewportWidth=this.container.clientWidth,this.calculateLayout(),this.container.innerHTML="";var n=document.createDocumentFragment();this.views.forEach((function(t){t.parentView&&t.parentView.childElement?t.parentView.childElement.appendChild(e.renderView(t)):(n.appendChild(e.renderView(t)),t.childElement&&n.appendChild(t.childElement))})),this.container.appendChild(n)}},t.prototype.renderView=function(e){var t=this,n=this.views.indexOf(e)===this.views.length-1,i=e.container,r=e.contentWrapper,o=e.contentElement;n||(i.style.borderBottomWidth=e.borderBottom+"px"),r.style.paddingTop=e.paddingTop+"px",r.style.paddingBottom=e.paddingBottom+"px",r.style.paddingLeft=e.paddingLeft+"px",r.style.paddingRight=e.paddingRight+"px",o.style.width=e.slideWidth+"px",o.style.height=e.slideHeight+"px",o.style.backgroundImage="url("+e.defaultThumb+")";var s=Math.min(e.slideHeight,e.slideWidth,60)-10;o.style.backgroundSize=s+"px",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="center",i.style.height=e.height+"px",e.isZoomed&&(i.scrollLeft=e.scrollXOffset),r.appendChild(o),i.appendChild(r);var a,c=e.contentLabel=e.contentLabel||((a=document.createElement("div")).classList.add("thumbnail-label"),a);if(""===c.innerText&&(c.innerText=e.labelText,c.title=e.labelText),c.style.position="absolute",c.style.padding="5px 8px",c.style.bottom="0",c.style.whiteSpace="nowrap",c.style.textOverflow="ellipsis",c.style.overflow="hidden",c.style.fontSize="14px",c.style.borderRadius="2px",c.style.textAlign="center",c.style.touchAction="manipulation",c.style.transform="translateX(-50%)",c.style.left="50%",this.canExpandGroup&&e.isCover&&e.assetViewerItem.numViews>1&&this.addChevron(e),e.isCover||e.isPartOfRange&&!e.isFirstPageOfRange)e.isCover||!e.isPartOfRange||e.isFirstPageOfRange||(c.classList.add("indent-on-selection"),r.classList.add("indent-on-selection"));else{var l=e.checkbox,u=e.checkboxInput,d=e.styledCheckbox;u.onclick=function(){var n=u.checked;if(e.linkedView&&(t.toggleView(e,!!n),e.isFirstPageOfRange))for(var i=t.views[e.page+1];i&&i.isPartOfRange&&!i.isFirstPageOfRange;)t.toggleView(i,n),i=t.views[i.page+1]},l.appendChild(u),l.appendChild(d),i.appendChild(e.checkbox)}return i.appendChild(c),i},t.prototype.toggleView=function(e,t){var n=e.styledCheckbox;n&&(n.style.background=t?this.config.TINT_COLOR:"white"),t?e.linkedView.selectView():e.linkedView.deselectView()},t.prototype.addChevron=function(e){var t=this,n=e.chevron=e.chevron||document.createElement("div"),i=e.contentLabel;n.classList.add("chevron-icon"),n.innerHTML='\n            <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 704q0 26-19 45l-448 448q-19 19-45 19t-45-19l-448-448q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45z"/></svg>\n        ',i.style.paddingRight="30px",i.style.cursor="pointer",i.onclick=s.debounce((function(n){return t.toggleGroup(n,e)}),500,{leading:!0,trailing:!1}),i.appendChild(n)},t.prototype.toggleGroup=function(e,t){var n=this;e.stopPropagation();var i=t.childElement;t.isExpanded?(t.isExpanded=!1,i.style.height="0px",t.container.classList.remove("expanded")):(t.isExpanded=!0,i.style.height="auto",t.container.classList.add("expanded")),n.calculateLayout(),n._viewState=l.getViewState(n.views,n.viewportHeight,n.viewportWidth,n.scroll),n.eventBus.dispatch(new a.ViewerViewportChangeEvent({viewState:n.viewState}))},t.prototype.update=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=!0),this.calculateLayout(e),null!==e){var n=this.views[e];this.renderView(n),this.scrollYOffset&&(this.container.scrollTop=this.viewState.top+this.scrollYOffset)}else this.renderAll();this._viewState=l.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll)},t.prototype.addViews=function(e){var n=this,i=e.payload,r=i.view,s=i.numViews;if(!(s<=1)){var a=this.views.findIndex((function(e){return e.linkId===r.id}));if(-1!==a){var c=this.views[a],u=[],d=1===this.assetViewerItems.length,h=t.createGroupContainer();h.style.height=d?"auto":"0px",c.isCover=!0,c.isExpanded=d,c.childElement=h,c.container.classList.add("thumbnail-cover"),d&&c.container.classList.add("expanded");for(var p=0;p<s;p++){var f=p+1,v=this.createAssetViewerViewFromAssetViewerItem(r.assetViewerItem,f);u.push(v)}this.views=o(this.views.slice(0,a+1),u,this.views.slice(a+1)),c.container.parentNode&&(this.calculateLayout(),u.forEach((function(e){return h.appendChild(n.renderView(e))})),c.container.parentNode.insertBefore(h,c.container.nextSibling),this.canExpandGroup&&this.addChevron(c),this._viewState=l.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll))}else console.error("view not found in addViews")}},t.prototype.calculateLayout=function(e){var t=this,n=0,i=0,r=null,o=null;this.views=this.views.map((function(s,a){var c=a===t.views.length-1||s.groupId&&!s.isLastOfGroup?0:t.config.VIEW_BORDER_BOTTOM,l=null===s.groupId||s.isCover?t.config.VIEW_PADDING_TOP:t.config.PAGE_PADDING_TOP,u=null===s.groupId||s.groupId&&s.isLastOfGroup||s.isCover?t.config.VIEW_PADDING_BOTTOM:t.config.PAGE_PADDING_BOTTOM,d=t.config.VIEW_PADDING_LEFT,h=t.config.VIEW_PADDING_RIGHT,p=2*t.config.VIEW_BORDER,f=Object.assign({},s);if(s.linkedView=t.linkService.viewer?t.linkService.viewer.views.find((function(e){return s.linkId===e.id})):null,s.dimensions&&!s.isZoomed){var v=s.dimensions.width/(t.viewportWidth-(d+h+p));if(s.dimensions.height/v>96){var m=s.dimensions.height/96;s.slideWidth=s.dimensions.width/m,s.slideHeight=s.dimensions.height/m}else s.slideWidth=s.dimensions.width/v,s.slideHeight=s.dimensions.height/v;s.currentScale=s.slideWidth/s.dimensions.width}else s.isZoomed||(s.slideWidth=Math.min(t.viewportWidth-(d+h+p),96),s.slideHeight=96);if(s.width=s.slideWidth+d+h+p,s.height=96+(l+u+p+40),s.isCover&&s.isExpanded&&(s.height=56),s.top=n,s.bottom=s.top+s.height,s.slideBorder=t.config.VIEW_BORDER,s.paddingTop=l,s.paddingBottom=u,s.paddingLeft=d,s.paddingRight=h,s.totalBorderWidth=p,s.borderBottom=c,(s.isCover||s.groupId!==r)&&(i=0),s.isCover&&(o=s),(!s.parentView||o&&o.isExpanded&&s.parentView)&&(n+=s.height),s.parentView&&(s.isFirstOfGroup,t.views[a+1]&&(t.views[a+1].groupId,s.groupId),i+=s.height,r=s.groupId,o.groupHeight=i),a===e&&f){var g=f.height,w=s.height,y=f.bottom<t._viewState.bottom;t.scrollYOffset=null,y&&(t.scrollYOffset=w-g),s.scrollXOffset=s.isZoomed?(s.width-t.viewportWidth)/2:null}return s})),this.layoutHeight=n},t.prototype.onScroll=function(e,t){this._viewState=l.getViewState(this.views,this.viewportHeight,this.viewportWidth,t),this._previousViewState&&this._previousViewState.first.view===this._viewState.first.view&&this._previousViewState.last.view===this._viewState.last.view&&this._previousViewState.focus.view===this._viewState.focus.view||(this._previousViewState=this._viewState,this.eventBus.dispatch(new a.ViewerViewportChangeEvent({viewState:this._viewState})))},t.prototype.resize=function(){this.container&&(this.viewportWidth=this.container.clientWidth,this.viewportHeight=this.container.clientHeight,this._viewState=l.getViewState(this.views,this.viewportHeight,this.viewportWidth,this.scroll),this.calculateLayout())},t.prototype.onFocusChange=function(e){this.setCurrentView(e.payload.assetViewerView)},t.prototype.setCurrentView=function(e){var t=this.views.find((function(t){return t.linkId===e.id}));t?(this.scrollThumbnailIntoView(t),this.setSelectedViewStyles(t)):console.error("no view")},t.prototype.setSelectedViewStyles=function(e){var t=document.querySelectorAll(".viewer-app-thumbnail-container .selected");if(t&&t.length)for(var n=0;n<t.length;n++)t[n].classList.remove("selected");e.container.classList.add("selected"),e.isCover&&this.views[this.views.indexOf(e)+1]&&(this.views[this.views.indexOf(e)+1].container.classList.add("selected"),e.childElement.classList.add("selected")),e.parentView&&(e.parentView.container.classList.add("selected"),e.parentView.childElement.classList.add("selected"))},t.prototype.scrollThumbnailIntoView=function(e){var t=this.viewState;if(t){var n=t.views,i=n&&n.length;if(i>0){var r=t.first.id,o=i>1?t.last.id:r,s=e.parentView&&!e.parentView.isExpanded?e.parentView:e,a=this.views.indexOf(s);(a<=r||a>=o)&&(this.scrollContainer.scrollTop=s.top)}}},t.prototype.enableViewSelection=function(){this.viewSelectionEnabled=!0,this.container&&this.addEnableViewSelectionClass(this.container)},t.prototype.addEnableViewSelectionClass=function(e){e.classList.add(h)},t.prototype.disableViewSelection=function(){this.viewSelectionEnabled=!1,this.container&&this.removeEnableViewSelectionClass(this.container)},t.prototype.removeEnableViewSelectionClass=function(e){e.classList.remove(h)},t.prototype.createAssetViewerViewFromAssetViewerItem=function(e,t){var n=t||1,i=e.id+(t?"-"+parseInt(t):""),r=e.annotations&&e.annotations[n]||null,o=new u.ThumbnailAssetViewerView(this.config,this.eventBus,this,e,this.tokenService,i,n,r,this.pdfJsPagePreviewService);return o.linkId=e.id+(t?"-"+parseInt(t):""),o.linkService=this.linkService,o},t.prototype.createAssetViewerViewsFromAssetViewerItems=function(e){var n=this,i=[];return e.forEach((function(r){if(r.numViews>1){var o=1===e.length;(f=n.createAssetViewerViewFromAssetViewerItem(r,1)).childElement=t.createGroupContainer(),f.childElement.style.height=o?"auto":"0px",f.isCover=!0,f.isExpanded=o,o&&f.container.classList.add("expanded"),f.container.classList.add("thumbnail-cover"),i.push(f);var s=[],a=f.assetViewerItem,c=(void 0===a?{}:a).nodeItem,l=(void 0===c?{}:c).asset,u=(void 0===l?{}:l).lockedPages,d=void 0===u?[]:u;n.config.ENABLE_GROUPED_PAGE_SELECTION&&d&&(s=d.map((function(e){var t=e.split("-"),n=t[0],i=t[1];return{start:Number(n),end:Number(i)}})));for(var h=function(e){var t=e+1,o=n.createAssetViewerViewFromAssetViewerItem(r,t);o.parentView=f,o.groupId=r.id,0===e&&(o.isFirstOfGroup=!0),e===r.numViews-1&&(o.isLastOfGroup=!0),s.forEach((function(e){t>=e.start&&t<=e.end&&(o.isPartOfRange=!0,o.isFirstPageOfRange=t===e.start)})),i.push(o)},p=0;p<r.numViews;p++)h(p)}else if(r.pageRanges&&r.pageRanges.length)r.pageRanges.forEach((function(e,t){for(var o=e.start;o<=e.end;o++){var s=n.createAssetViewerViewFromAssetViewerItem(r,o);i.push(s)}}));else{var f=n.createAssetViewerViewFromAssetViewerItem(r,r.page);i.push(f)}})),i},t.prototype.createContainer=function(){var e=document.createElement("div");return e.style.position="relative",e.style.boxSizing="border-box",e.style.width="100%",e.classList.add("vrow"),e.classList.add("thumbnail-container"),e},t.prototype.createCheckbox=function(){var e=document.createElement("label");return e.classList.add("checkbox"),e.style.position="absolute",e.style.left="14px",e.style.top="44px",e.style.zIndex="10",e},t.prototype.createStyledCheckbox=function(){var e=document.createElement("div");return e.classList.add("checkbox__indicator"),e.style.width="23px",e.style.height="23px",e},t.prototype.createCheckboxInput=function(){var e=document.createElement("input");return e.type="checkbox",e},t.prototype.createContentWrapper=function(){var e=document.createElement("div");return window._wrapper=e,e.style.position="absolute",e.style.top="39%",e.style.left="50%",e.style.transform="translate(-50%,-50%)",e.classList.add("vrow-content-container-wrapper"),e},t.prototype.createContentContainer=function(){var e=document.createElement("div");return e.classList.add("vrow-content-container"),e.classList.add("loading"),e.style.position="relative",e.style.boxSizing="content-box",e.style.background="white",e.style.display="flex",this.config.TRANSITIONS_ENABLED&&(e.style.transition="opacity .5s ease-in-out"),e},t.createGroupContainer=function(){var e=document.createElement("div");return e.style.overflow="hidden",e.classList.add("group-container"),e},t}(d.ViewerLayout);t.LayoutVerticalThumbnails=p},7648:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.config=e,this.eventBus=t,this.assetViewerItems=n,this.layoutHeight=null,this.lastNavigatedNext=!0,this._viewState=null}return Object.defineProperty(e.prototype,"viewState",{get:function(){return this._viewState},enumerable:!0,configurable:!0}),e.prototype.addEventListeners=function(){},e.prototype.removeEventListeners=function(){},e.prototype.update=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=!0),void 0===n&&(n=!1)},e.prototype.render=function(e){},e.prototype.resize=function(){},e.prototype.destroy=function(){this.removeEventListeners()},e.prototype.createContentContainer=function(e){return document.createElement("div")},e.prototype.createContentWrapper=function(){return document.createElement("div")},e.prototype.createContainer=function(){return document.createElement("div")},e.prototype.destroyViewContainer=function(e){},e.prototype.renderViewContainer=function(e){},e}();t.ViewerLayout=n},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8671),r=n(2299),o=n(3650),s=n(8727),a=n(7679),c=function(){function e(e){this.assetViewerView=e,this.isActive=!0,this.isLoading=!1,this.assetViewer=null,this.createAssetViewer(),this.onAssetViewerUpdate=this.onAssetViewerUpdate.bind(this),this.onAssetViewerFocusChange=this.onAssetViewerFocusChange.bind(this),this.onAssetViewerRenderedViewFocus=this.onAssetViewerRenderedViewFocus.bind(this),this.onAssetViewerRenderedPreviewFocus=this.onAssetViewerRenderedPreviewFocus.bind(this),this.onAssetViewerViewportChange=this.onAssetViewerViewportChange.bind(this),this.onAssetViewerViewRendered=this.onAssetViewerViewRendered.bind(this),this.onAssetViewerSelectView=this.onAssetViewerSelectView.bind(this),this.onAssetViewerDeselectView=this.onAssetViewerDeselectView.bind(this),this.onAssetViewerUrlAssetClicked=this.onAssetViewerUrlAssetClicked.bind(this),this.onOpenInOfficeOnline=this.onOpenInOfficeOnline.bind(this),this.addEventListeners()}return Object.defineProperty(e.prototype,"url",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:400,height:300}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),e.prototype.load=function(){},e.prototype.render=function(e){return this.assetViewer&&this.initAssetViewer(e),Promise.resolve()},e.prototype.destroy=function(){},e.prototype.destroyFinal=function(){this.assetViewer&&(this.removeEventListeners(),this.assetViewer.destroy(),this.assetViewer=null)},e.prototype.createAssetViewer=function(){var e,t=[this.assetViewerView.assetViewerItem],n=this.assetViewerView.assetViewerItem.type===r.ASSET_TYPE.DOCUMENT,s=!!n&&o.PresentationHelper.isDocumentPortrait(this.assetViewerView.assetViewerItem);(e=n?(s||this.assetViewerView.config.DOCUMENT_FORCE_PORTRAIT_VIEWER)&&this.assetViewerView.config.PORTRAIT_DOCUMENT_ASSET_VIEWER_CONFIG?this.assetViewerView.config.PORTRAIT_DOCUMENT_ASSET_VIEWER_CONFIG:this.assetViewerView.config.DOCUMENT_ASSET_VIEWER_CONFIG?this.assetViewerView.config.DOCUMENT_ASSET_VIEWER_CONFIG:this.assetViewerView.config:this.assetViewerView.config).container=this.assetViewerView.contentElement,e.IS_SLAVE_ASSET_VIEWER=!0,e.rootAssetViewer=this.assetViewerView.config.rootAssetViewer,this.assetViewerView.contentElement.classList.add("av-embedded-asset-viewer"),this.assetViewer=new i.AssetViewer(t,e)},e.prototype.initAssetViewer=function(e){this.assetViewer.init(0,this.pageToInit,e)},e.prototype.addEventListeners=function(){this.assetViewer.eventBus.on(s.ViewerEventType.Update,this.onAssetViewerUpdate),this.assetViewer.eventBus.on(s.ViewerEventType.FocusChange,this.onAssetViewerFocusChange),this.assetViewer.eventBus.on(s.ViewerEventType.RenderedViewFocus,this.onAssetViewerRenderedViewFocus),this.assetViewer.eventBus.on(s.ViewerEventType.RenderedPreviewFocus,this.onAssetViewerRenderedPreviewFocus),this.assetViewer.eventBus.on(s.ViewerEventType.ViewportChange,this.onAssetViewerViewportChange),this.assetViewer.eventBus.on(s.ViewerEventType.SelectView,this.onAssetViewerSelectView),this.assetViewer.eventBus.on(s.ViewerEventType.DeselectView,this.onAssetViewerDeselectView),this.assetViewer.eventBus.on(s.ViewerEventType.UrlAssetClicked,this.onAssetViewerUrlAssetClicked),this.assetViewer.eventBus.on(s.ViewerEventType.OpenInOfficeOnline,this.onOpenInOfficeOnline)},e.prototype.removeEventListeners=function(){this.assetViewer.eventBus.off(s.ViewerEventType.Update,this.onAssetViewerUpdate),this.assetViewer.eventBus.off(s.ViewerEventType.FocusChange,this.onAssetViewerFocusChange),this.assetViewer.eventBus.off(s.ViewerEventType.RenderedViewFocus,this.onAssetViewerRenderedViewFocus),this.assetViewer.eventBus.off(s.ViewerEventType.RenderedPreviewFocus,this.onAssetViewerViewportChange),this.assetViewer.eventBus.off(s.ViewerEventType.ViewportChange,this.onAssetViewerViewportChange),this.assetViewer.eventBus.off(s.ViewerEventType.SelectView,this.onAssetViewerSelectView),this.assetViewer.eventBus.off(s.ViewerEventType.DeselectView,this.onAssetViewerDeselectView),this.assetViewer.eventBus.off(s.ViewerEventType.UrlAssetClicked,this.onAssetViewerUrlAssetClicked),this.assetViewer.eventBus.off(s.ViewerEventType.OpenInOfficeOnline,this.onOpenInOfficeOnline)},e.prototype.isViewFocussed=function(e){return e===e.viewerLayout.viewState.focus.view},e.prototype.onAssetViewerUpdate=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.onAssetViewerFocusChange=function(e){this.isViewFocussed(this.assetViewerView)&&this.assetViewerView.eventBus.dispatch(new s.ViewerPublicFocusChangeEvent({assetViewerView:e.payload.assetViewerView}))},e.prototype.onAssetViewerRenderedViewFocus=function(e){this.isViewFocussed(this.assetViewerView)&&this.assetViewerView.eventBus.dispatch(new s.ViewerPublicRenderedViewFocusEvent({assetViewerView:e.payload.assetViewerView}))},e.prototype.onAssetViewerRenderedPreviewFocus=function(e){this.isViewFocussed(this.assetViewerView)&&this.assetViewerView.eventBus.dispatch(new s.ViewerPublicRenderedPreviewFocusEvent({assetViewerView:e.payload.assetViewerView}))},e.prototype.onAssetViewerViewportChange=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.onAssetViewerViewRendered=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.onAssetViewerSelectView=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.onAssetViewerDeselectView=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.onAssetViewerUrlAssetClicked=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.onOpenInOfficeOnline=function(e){this.assetViewerView.eventBus.dispatch(e)},e.prototype.getAssetViewerViews=function(){return this.assetViewer.viewer.views.map((function(e){return a.AssetViewerViewMapper.mapToPublicAssetViewerView(e)}))},e}();t.AssetViewerPresentationRenderer=c},8782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(156),r=n(2062),o=n(2299),s=n(8727),a=n(7679),c=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.audio=null,this.isActive=!1,this.isLoading=!1,this.loadPromise=null}return Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return this.presentation.urls[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:400,height:200}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),e.prototype.load=function(){this.isLoading=!0;var e=i.PromiseHelper.defer();return this.loadPromise=e.promise,this.audio=document.createElement("audio"),this.audio.onloadedmetadata=function(){this.isLoading=!1}.bind(this),this.audio.onerror=function(t){this.isLoading=!1,this.audio.onerror=null,this.audio.oncanplay=null,this.audio=null,e.reject(t),!0===this.isActive&&(this.assetViewerView.eventBus.dispatch(new s.ViewerPlaybackEndEvent({assetViewerView:a.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)})),this.isActive=!1)}.bind(this),this.audio.oncanplay=function(){this.audio&&(this.assetViewerView.viewerLayout.currentView===this.assetViewerView&&this.assetViewerView.config.VIEWER_LAYOUT===o.LAYOUT.HORIZONTAL&&this.audio.play(),this.audio.onerror=null,this.audio.oncanplay=null)}.bind(this),this.audio.onplay=function(){this.isActive=!0,this.assetViewerView.eventBus.dispatch(new s.ViewerPlaybackStartEvent({assetViewerView:a.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))}.bind(this),this.audio.onended=function(){this.isActive=!1,this.assetViewerView.eventBus.dispatch(new s.ViewerPlaybackEndEvent({assetViewerView:a.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))}.bind(this),this.audio.onpause=function(){this.assetViewerView.eventBus.dispatch(new s.ViewerPlaybackPauseEvent({assetViewerView:a.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))}.bind(this),this.addEventListeners(),this.audio.src=""+this.url,this.audio.controls=!0,this.audio.setAttribute("controlsList","nodownload"),this.audio.title=this.assetViewerView.assetViewerItem.displayName,this.audio.style.maxWidth="100%",!1===this.assetViewerView.assetViewerItem.isDownloadable&&this.audio.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.resolve(this.dimensions),e.promise},e.prototype.render=function(e){var t=this;return this.container=e,(this.loadPromise||this.load()).then((function(){return e.appendChild(t.audio)}))},e.prototype.destroy=function(){this.container&&(this.container.innerHTML="",this.container=null),this.audio&&(this.audio.pause(),this.audio.onerror=null,this.audio.onplay=null,this.audio.onended=null,this.audio.onpause=null,this.audio=null),this.loadPromise=null},e.prototype.destroyFinal=function(){this.destroy()},e.prototype.addEventListeners=function(){this.audio.addEventListener("webkitbeginfullscreen",this.onWebkitBeginFullscreen.bind(this)),this.audio.addEventListener("webkitendfullscreen",this.onWebkitEndFullscreen.bind(this)),this.audio.addEventListener("webkitfullscreenchange",this.onWebkitFullscreenChange.bind(this))},e.prototype.onWebkitBeginFullscreen=function(e){r.FullscreenHelper.setWebkitBeginFullscreen(this.audio),document.body.classList.add("webkit-full-screen")},e.prototype.onWebkitEndFullscreen=function(e){r.FullscreenHelper.setWebkitEndFullscreen(),document.body.classList.remove("webkit-full-screen")},e.prototype.onWebkitFullscreenChange=function(e){r.FullscreenHelper.triggerFullscreenChange()},e}();t.AudioPresentationRenderer=c},3284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4695),r=function(){function e(e,t,n){this.assetViewerView=e,this.lowQualityPreviewUrl=t,this.previewDimensions=n,this.image=null,this.isLoading=!1,this.isActive=!1}return Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.previewDimensions?this.previewDimensions:{width:400,height:300}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.assetViewerView.assetViewerItem.downloadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.assetViewerView.config.TRANSLATIONS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){return this.lowQualityPreviewUrl?this.lowQualityPreviewUrl:this.assetViewerView.assetViewerItem.previewUrl},enumerable:!0,configurable:!0}),e.prototype.load=function(){return Promise.resolve()},Object.defineProperty(e.prototype,"errorMessage",{get:function(){return navigator.onLine?this.lowQualityPreviewUrl?this.translations[i.TranslationKeys.RenderError]:this.translations[i.TranslationKeys.RenderErrorNoLowQualityPreview]:this.translations[i.TranslationKeys.RenderErrorWhenOffline]},enumerable:!0,configurable:!0}),e.prototype.render=function(e){var t=this;return Promise.resolve().then((function(){var n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div");if(o.classList.add("error-message"),o.style.padding=t.lowQualityPreviewUrl?"6px 20px":"15px 20px",o.innerHTML=t.errorMessage,r.appendChild(o),n.style.width="100%",n.style.height="100%",n.style.backgroundImage=t.previewUrl?"url("+t.previewUrl+")":"",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.webkitFilter=t.lowQualityPreviewUrl?"none":"blur(20px)",n.style.transform=t.lowQualityPreviewUrl?"none":"scale(1.2)",!t.assetViewerView.isWindowsDesktopApp&&(!1===t.assetViewerView.assetViewerItem.isDownloadable||t.lowQualityPreviewUrl||((s=document.createElement("div")).classList.add("button-download"),s.innerHTML=t.translations[i.TranslationKeys.Download],s.onclick=function(){t.assetViewerView.download()},r.appendChild(s)),!1!==t.assetViewerView.assetViewerItem.isDownloadable&&t.lowQualityPreviewUrl)){var s;(s=document.createElement("a")).innerHTML=t.translations[i.TranslationKeys.Download],s.onclick=function(){t.assetViewerView.download()},o.appendChild(s);var a=document.createElement("button");a.classList.add("error-message-close-button"),a.innerHTML="✕",o.appendChild(a),a.onclick=function(){r.removeChild(o)}}r.appendChild(n),r.classList.add("error-presentation-wrapper"),e.appendChild(r)}))},e.prototype.destroy=function(){},e.prototype.destroyFinal=function(){},e}();t.ErrorPresentationRenderer=r},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2299),r=n(3149),o=n(5067),s=n(7488),a=n(8147),c=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.isActive=!0,this.isLoading=!1,Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null})}return Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return s.interpolateUrlVariables(this.presentation.urls[e],this.config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:400,height:300}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),e.prototype.load=function(){},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){t.renderIframe(e)}))},e.prototype.renderIframe=function(e){var t=this;this.isLoading=!0;var n=document.createElement("div"),s=this.assetViewerView.config;n.style.width="100%",n.style.height="100%",n.style.overflow="hidden",n.style.webkitOverflowScrolling="touch",n.style.background="black",(r.browser.ios||r.browser.safari&&"ontouchstart"in window)&&(n.style.overflow="auto"),n.classList.add("iframe-wrapper");var c=this.iframe=document.createElement("iframe");c.classList.add("av-webapp-iframe"),n.appendChild(c),c.scrolling="yes",c.allowFullscreen=!0,c.setAttribute("allow",s.IFRAME_ALLOW),e.appendChild(n),this.assetViewerView.assetViewerItem.type===i.ASSET_TYPE.SCORM&&!1===this.config.SCORM_API_AVAILABLE&&(this.scormMock=new a.ScormMock,this.scormMock.ensureAPI()),c.onload=function(){if(e){var n=e.closest(".av-slide");n&&("0px"===n.style.width&&(n.style.width=null),"0px"===n.style.height&&(n.style.height=null),"hidden"===n.style.visibility&&(n.style.visibility=null))}t.isLoading=!1,t.width=400,t.height=300,c.onerror=null;var r=null;try{r=t.iframe.contentDocument}catch(e){}if(r)if(o.IframeHelper.injectShowpadScripts(t.iframe,{iframeUrl:t.url,trackHtmlPageLocation:s.TRACK_HTML_PAGE_LOCATION_ENABLED&&t.assetViewerView.assetViewerItem.type===i.ASSET_TYPE.WEBAPP,showpadJsPath:s.SHOWPAD_JS_PATH,user:s.showpadUser}),t.presentation.json)try{var a=JSON.parse(t.presentation.json);t.iframe.contentWindow.postMessage({type:t.presentation.type,payload:a},"*")}catch(e){throw Error("Could not parse presentation JSON and post it to iframe")}else if(t.presentation.jsonUrl)try{t.iframe.contentWindow.postMessage({action:i.PRESENTATION_ACTIONS[t.presentation.type],origin:"asset-viewer",payload:t.presentation.jsonUrl},"*")}catch(e){throw Error("Could not post the json url to iframe")}}.bind(this),c.onerror=function(e){t.isLoading=!1,c.onload=null,c.onerror=null,t.iframe=null}.bind(this),this.iframe.src=this.url},e.prototype.destroy=function(){this.iframe=null,this.container&&(this.container.innerHTML="",this.container=null)},e.prototype.destroyFinal=function(){this.destroy()},e}();t.IframePresentationRenderer=c},3996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3885),r=n(156),o=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.image=null,this.loadPromise=null,this.isLoading=!1,this.isActive=!1}return Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.width&&this.height?{width:this.width,height:this.height}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){if(this._width)return this._width;var e=[this.presentation].find((function(e){return!!(e&&e.details&&e.details.dimensions&&e.details.dimensions.width)}));if(e){var t=e.details.dimensions.exceptions;return t&&t[this.assetViewerView.page]?t[this.assetViewerView.page].width:e.details.dimensions.width}},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(this._height)return this._height;var e=[this.presentation].find((function(e){return!!(e&&e.details&&e.details.dimensions&&e.details.dimensions.height)}));if(e){var t=e.details.dimensions.exceptions;return t&&t[this.assetViewerView.page]?t[this.assetViewerView.page].height:e.details.dimensions.height}},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return this.presentation.urls[e]||this.assetViewerView.assetViewerItem.downloadUrl},enumerable:!0,configurable:!0}),e.prototype.load=function(){this.isLoading=!0;var e=r.PromiseHelper.defer();this.loadPromise=e.promise;var t=this.image=new Image;return t.src=this.url,t.onload=function(){this.isLoading=!1,t.width&&t.height?(this.width=t.naturalWidth,this.height=t.naturalHeight,e.resolve({width:this.width,height:this.height})):(this.isLoading=!1,e.reject()),t.onload=null,t.onerror=null}.bind(this),t.onerror=function(n){this.isLoading=!1,t.onload=null,t.onerror=null,this.image=null,e.reject(n)}.bind(this),!1===this.assetViewerView.assetViewerItem.isDownloadable&&this.image.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.promise},e.prototype.render=function(e){var t=this;return this.container=e,i.cancelable(Promise.resolve().then((function(){t.image.style.width="100%",t.image.style.height="100%",e.appendChild(t.image)})))},e.prototype.destroy=function(){this.container&&(this.container.innerHTML="",this.container=null),this.image=null},e.prototype.destroyFinal=function(){this.destroy()},e}();t.ImagePresentationRenderer=o},644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8727),r=n(2299),o=n(3149),s=n(2062),a=n(5067),c=n(7488),l=n(8147),u=n(4695),d=n(6949),h=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.isActive=!1,this.isLoading=!1,this.isFullscreen=!1}return Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return c.interpolateUrlVariables(this.presentation.urls[e],this.config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:400,height:300}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.assetViewerView.config.TRANSLATIONS},enumerable:!0,configurable:!0}),e.prototype.load=function(){},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){var n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div");o.classList.add("button-open"),n.style.width="100%",n.style.height="100%",n.style.backgroundImage="url("+t.assetViewerView.assetViewerItem.previewUrl+")",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.webkitFilter="blur(20px)",n.style.transform="scale(1.2)",r.appendChild(o),o.innerHTML=t.translations[u.TranslationKeys.Open],r.style.width="100%",r.style.height="100%",r.style.overflow="hidden",r.appendChild(n),o.onclick=function(){t.newWindow?(t.newWindow.style.display="block",s.FullscreenHelper.enterFullscreen(t.newWindow),t.isFullscreen=!0):t.renderIframe(),t.assetViewerView.eventBus.dispatch(new i.ViewerWebappOpenEvent({assetViewerItem:t.assetViewerView.assetViewerItem}))},e.appendChild(r)}))},e.prototype.renderIframe=function(){var e=this;this.isLoading=!0;var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.webkitOverflowScrolling="touch",t.style.background="black",(o.browser.ios||o.browser.safari&&"ontouchstart"in window)&&(t.style.overflow="auto"),t.classList.add("iframe-wrapper");var n=this.iframe=document.createElement("iframe");n.classList.add("av-webapp-iframe"),t.appendChild(n),n.scrolling="yes",n.onload=function(){var e=this.assetViewerView.config;this.iframe.contentDocument&&a.IframeHelper.injectShowpadScripts(this.iframe,{iframeUrl:this.url,trackHtmlPageLocation:e.TRACK_HTML_PAGE_LOCATION_ENABLED&&this.assetViewerView.assetViewerItem.type===r.ASSET_TYPE.WEBAPP,showpadJsPath:e.SHOWPAD_JS_PATH,user:e.showpadUser}),this.isLoading=!1,this.width=400,this.height=300,n.onerror=null}.bind(this),n.onerror=function(e){this.isLoading=!1,n.onload=null,n.onerror=null,this.iframe=null}.bind(this),n.src=this.url,this.assetViewerView.config.container.parentNode.appendChild(t),this.newWindow=t,this.assetViewerView.assetViewerItem.type===r.ASSET_TYPE.SCORM&&!1===this.config.SCORM_API_AVAILABLE&&(this.scormMock=new l.ScormMock,this.scormMock.ensureAPI()),this.iframe.src=this.url,this.renderActionBar(t,n),s.FullscreenHelper.isFullscreen()||s.FullscreenHelper.enterFullscreen(t),this.isFullscreen=!0,this.assetViewerView.eventBus.on(i.ViewerEventType.FullscreenChange,(function(){!0!==e.isFullscreen||s.FullscreenHelper.isFullscreen()||(t.style.display="none",e.isFullscreen=null,e.assetViewerView.eventBus.dispatch(new i.ViewerWebappCloseEvent({assetViewerItem:e.assetViewerView.assetViewerItem})))}))},e.prototype.renderActionBar=function(e,t){this.actionBar=new d.FullscreenActionBar(this.assetViewerView.config,this.assetViewerView.eventBus,this.assetViewerView),this.actionBar.render(e,t)},e.prototype.destroy=function(){this.iframe=null,this.container&&(this.container.innerHTML="",this.container=null)},e.prototype.destroyFinal=function(){this.destroy()},e}();t.NewWindowPresentationRenderer=h},7917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2299),r=n(3149),o=n(5067),s=n(7488),a=n(8147),c=n(8727);t.OBSERVABLE_DIMENSIONS_MIN_IFRAME_HEIGHT=300;var l=function(){function e(e,n){this.assetViewerView=e,this.presentation=n,this.container=null,this.width=400,this.height=t.OBSERVABLE_DIMENSIONS_MIN_IFRAME_HEIGHT,this.scrollWidth=0,this.scrollHeight=0,this.isActive=!0,this.isLoading=!1,this.resizeCheckInterval=null,Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null})}return e.prototype.dispatchDimensionsChangedEvent=function(e,t){this.assetViewerView.eventBus.dispatch(new c.ViewerObservableDimensionsIframeDimensionsChangedEvent({scrollHeight:t,scrollWidth:e}))},Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return s.interpolateUrlVariables(this.presentation.urls[e],this.config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:this.width,height:this.height}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),e.prototype.load=function(){},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){t.renderIframe(e)}))},e.prototype.renderIframe=function(e){var n=this;this.isLoading=!0;var s=document.createElement("div"),c=this.assetViewerView.config;s.style.width="100%",s.style.height="100%",s.style.overflow="hidden",s.style.webkitOverflowScrolling="touch",s.style.background="black",(r.browser.ios||r.browser.safari&&"ontouchstart"in window)&&(s.style.overflow="auto"),s.classList.add("iframe-wrapper");var l=this.iframe=document.createElement("iframe");l.classList.add("av-webapp-iframe"),s.appendChild(l),l.scrolling="yes",l.allowFullscreen=!0,l.setAttribute("allow",c.IFRAME_ALLOW),e.appendChild(s),this.assetViewerView.assetViewerItem.type===i.ASSET_TYPE.SCORM&&!1===this.config.SCORM_API_AVAILABLE&&(this.scormMock=new a.ScormMock,this.scormMock.ensureAPI()),l.onload=function(){if(e){var r=e.closest(".av-slide");r&&("0px"===r.style.width&&(r.style.width=null),"0px"===r.style.height&&(r.style.height=null),"hidden"===r.style.visibility&&(r.style.visibility=null))}n.isLoading=!1,n.width=400,n.height=t.OBSERVABLE_DIMENSIONS_MIN_IFRAME_HEIGHT,l.onerror=null;var s=null;try{s=n.iframe.contentDocument}catch(e){}if(s)if(n.resizeCheckInterval&&clearInterval(n.resizeCheckInterval),n.resizeCheckInterval=setInterval((function(){var e=l.contentDocument.body,i=e.scrollHeight,r=e.scrollWidth;n.scrollHeight!==i&&i>t.OBSERVABLE_DIMENSIONS_MIN_IFRAME_HEIGHT&&(n.scrollWidth=r,n.scrollHeight=i,n.width=r,n.height=i,n.dispatchDimensionsChangedEvent(r,i))}),1e3),o.IframeHelper.injectShowpadScripts(n.iframe,{iframeUrl:n.url,trackHtmlPageLocation:c.TRACK_HTML_PAGE_LOCATION_ENABLED&&n.assetViewerView.assetViewerItem.type===i.ASSET_TYPE.WEBAPP,showpadJsPath:c.SHOWPAD_JS_PATH,user:c.showpadUser}),n.presentation.json)try{var a=JSON.parse(n.presentation.json);n.iframe.contentWindow.postMessage({type:n.presentation.type,payload:a},"*")}catch(e){throw Error("Could not parse presentation JSON and post it to iframe")}else if(n.presentation.jsonUrl)try{n.iframe.contentWindow.postMessage({action:i.PRESENTATION_ACTIONS[n.presentation.type],origin:"asset-viewer",payload:n.presentation.jsonUrl},"*")}catch(e){throw Error("Could not post the json url to iframe")}}.bind(this),l.onerror=function(e){n.isLoading=!1,l.onload=null,l.onerror=null,n.iframe=null}.bind(this),this.iframe.src=this.url},e.prototype.destroy=function(){this.iframe=null,this.resizeCheckInterval&&(clearInterval(this.resizeCheckInterval),this.resizeCheckInterval=null),this.container&&(this.container.innerHTML="",this.container=null)},e.prototype.destroyFinal=function(){this.destroy()},e.prototype.resize=function(){this.scrollHeight=0,this.height=t.OBSERVABLE_DIMENSIONS_MIN_IFRAME_HEIGHT},e}();t.ObservableDimensionsIframePresentationRenderer=l},1232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3885),r=n(7750),o=n(7563),s=n(8727),a=n(2299),c=n(3149),l=n(2187),u=n(156),d=n(7816),h=n(1057),p=n(2419),f=n(7679),v=n(9738),m=function(){function e(e,t,n,i,r,o){this.config=e,this.assetViewerView=t,this.pdfJsLinkService=n,this.presentation=i,this.lowQualityPreviewPresentation=r,this.highQualityPreviewPresentation=o,this.isLoading=!1,this.pdfDocumentPromise=null,this.pdfPagePromise=null,this.renderHighQualityPreviewPromise=null,this.renderLowQualityPreviewPromise=null,this.renderLowAndHighQualityPreviewPromise=null,this.renderPromise=null,this.highQualityImageLoaded=!1,this.lowQualityImageLoaded=!1,this.pdfCanvasLoaded=!1,this.pdfDocument=null,this.pdfPage=null,this.operatorList=null,this.textLayerDiv=null,this.annotationLayer=null,this.isActive=!1,this.renderTask=null,this.containerWidth=null,this.containerHeight=null,this.defaultViewport=null,this.scale=1,this.pinchZoomLayer=null,this.embeddedMediaLayer=null,this.onPreviewError=this.onPreviewError.bind(this),this.onAnnotationLayerError=this.onAnnotationLayerError.bind(this)}return Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return this.presentation.urls[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highQualityPreviewUrl",{get:function(){var e=this.highQualityPreviewPresentation&&this.highQualityPreviewPresentation.details&&1===this.highQualityPreviewPresentation.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1,t=this.highQualityPreviewPresentation&&this.highQualityPreviewPresentation.urls[e];if(!t)return null;var n=o.parse(o.extract(t));return n.size="1600x1600",t.split("?")[0]+"?"+o.stringify(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lowQualityPreviewUrl",{get:function(){var e=this.lowQualityPreviewPresentation&&this.lowQualityPreviewPresentation.details&&1===this.lowQualityPreviewPresentation.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1,t=this.lowQualityPreviewPresentation&&this.lowQualityPreviewPresentation.urls[e];if(!t)return null;var n=o.parse(o.extract(t));return n.size="1600x1600",t.split("?")[0]+"?"+o.stringify(n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){if(this._width)return this._width;var e=[this.presentation,this.highQualityPreviewPresentation,this.lowQualityPreviewPresentation].find((function(e){return!!(e&&e.details&&e.details.dimensions&&e.details.dimensions.width)}));if(e){var t=1===e.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1,n=e.details.dimensions.exceptions;return n&&n[t]?n[t].width:e.details.dimensions.width}},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(this._height)return this._height;var e=[this.presentation,this.highQualityPreviewPresentation,this.lowQualityPreviewPresentation].find((function(e){return!!(e&&e.details&&e.details.dimensions&&e.details.dimensions.height)}));if(e){var t=1===e.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1,n=e.details.dimensions.exceptions;return n&&n[t]?n[t].height:e.details.dimensions.height}},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.width&&this.height?{width:this.width,height:this.height}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"embeddedData",{get:function(){return this.assetViewerView.assetViewerItem.embeddedData},enumerable:!0,configurable:!0}),e.prototype.loadPdfJsResources=function(){return this.config.getPdfJs()},e.prototype.loadPdfJsDocument=function(){var e=this;return this.pdfDocumentPromise||(this.pdfDocumentPromise=this.loadPdfJsResources().then((function(){window.PDFJS.maxImageSizeToStore=e.config.PDFJS_MAX_IMAGE_SIZE_TO_STORE,window.PDFJS.externalLinkTarget=2,(!e.assetViewerView.assetViewerItem.worker||e.assetViewerView.assetViewerItem.worker&&e.assetViewerView.assetViewerItem.worker.destroyed)&&(e.assetViewerView.assetViewerItem.worker=e.config.getPdfJsWorker());var t=e.presentation.details&&e.presentation.details.fileSize,n=e.assetViewerView.assetViewerItem.numViews,i=t&&n?Math.round(Math.max(Math.min(t/n,e.config.PDFJS_MAX_RANGE_CHUNK_SIZE),e.config.PDFJS_MIN_RANGE_CHUNK_SIZE)):void 0,r=e.config.PDFJS_RANGE_CHUNK_SIZE||i,o={url:e.url,worker:e.assetViewerView.assetViewerItem.worker,withCredentials:!0,contentLength:t,rangeChunkSize:r};return e.assetViewerView.assetViewerItem.loadPdf(o)})).then((function(t){return e.pdfDocument=t,t}))),this.pdfDocumentPromise},e.prototype.loadPdfJsPage=function(){var e=this;return this.pdfPagePromise||(this.pdfPagePromise=i.cancelable(this.loadPdfJsDocument().then((function(t){var n;return n=e.pdfDocument.numPages>1&&e.assetViewerView.assetViewerItem.page&&!e.assetViewerView.assetViewerItem.pageRanges?e.assetViewerView.assetViewerItem.page:e.assetViewerView.assetViewerItem.page&&!e.assetViewerView.assetViewerItem.pageRanges?1:e.assetViewerView.page,t.getPage(n)})).then((function(t){return e.pdfPage=t,e.defaultViewport=t.getViewport(1),e.width=e.defaultViewport.width,e.height=e.defaultViewport.height,t})).then((function(e){return e.getOperatorList()})).then((function(t){return e.operatorList=t,e.pdfPage})))),this.pdfPagePromise},e.prototype.load=function(e,t,n,r){var o=this;return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1),void 0===r&&(r=!1),this.isLoading=!0,!n&&this.lowQualityPreviewPresentation&&this.lowQualityPreviewUrl?i.cancelable(this.loadLowQualityImage(this.lowQualityPreviewUrl).then((function(e){return o.isLoading=!1,o.width=e.naturalWidth,o.height=e.naturalHeight,{width:e.naturalWidth,height:e.naturalHeight}})).catch((function(){return o.load(null,null,!0)}))):!r&&this.highQualityPreviewPresentation&&this.highQualityPreviewUrl?i.cancelable(this.loadHighQualityImage(this.highQualityPreviewUrl).then((function(e){return o.isLoading=!1,o.width=e.naturalWidth,o.height=e.naturalHeight,{width:e.naturalWidth,height:e.naturalHeight}})).catch((function(){return o.load(null,null,!0,!0)}))):this.loadPdfJsPage().then((function(){return o.isLoading=!1,{width:o.width,height:o.height,numViews:1!==o.assetViewerView.page||o.assetViewerView.assetViewerItem.page?null:o.pdfDocument.numPages}}))},e.prototype.addHighQualityPreviewImageTagToDOM=function(e,t){var n=this;return this.pdfCanvasLoaded?Promise.resolve():new Promise((function(i,r){n.highQualityImage=new Image,n.highQualityImage.src=e,n.highQualityImage.classList.add("hidden-until-loaded"),n.highQualityImage.onload=function(){n.highQualityImage.classList.remove("hidden-until-loaded"),n.highQualityImageLoaded=!0,i(n.highQualityImage)},n.highQualityImage.onerror=function(e){r(e)},!1===n.assetViewerView.assetViewerItem.isDownloadable&&n.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),t.appendChild(n.highQualityImage)}))},e.prototype.addLowQualityPreviewImageTagToDOM=function(e,t){var n=this;return this.highQualityImageLoaded||this.pdfCanvasLoaded?Promise.resolve():new Promise((function(i,r){n.lowQualityImage=new Image,n.lowQualityImage.src=e,n.lowQualityImage.classList.add("hidden-until-loaded"),n.lowQualityImage.onerror=function(e){r(e)},n.lowQualityImage.onload=function(){n.lowQualityImage.classList.remove("hidden-until-loaded"),n.lowQualityImageLoaded=!0,n.onPreviewRendered(),i(n.lowQualityImage)},!1===n.assetViewerView.assetViewerItem.isDownloadable&&n.lowQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),t.appendChild(n.lowQualityImage)}))},e.prototype.loadLowQualityImage=function(e){var t=this;return new Promise((function(n,i){t.lowQualityImage=new Image,t.lowQualityImage.src=e,t.lowQualityImage.onload=function(){t.lowQualityImageLoaded=!0,n(t.lowQualityImage)},t.lowQualityImage.onerror=function(e){return i(e)}}))},e.prototype.loadHighQualityImage=function(e){var t=this;return new Promise((function(n,i){t.highQualityImage=new Image,t.highQualityImage.src=e,t.highQualityImage.onload=function(){t.highQualityImageLoaded=!0,n(t.highQualityImage)},t.highQualityImage.onerror=function(e){return i(e)}}))},e.prototype.renderHighQualityPreview=function(e,t){var n=this;return this.renderHighQualityPreviewPromise||(this.renderHighQualityPreviewPromise=Promise.resolve().then((function(){return n.addHighQualityPreviewImageTagToDOM(t,e)})).then((function(){n.onPreviewRendered()}))),this.renderHighQualityPreviewPromise},e.prototype.renderLowQualityPreview=function(e,t){var n=this;return this.renderLowQualityPreviewPromise||(this.renderLowQualityPreviewPromise=Promise.resolve().then((function(){return n.addLowQualityPreviewImageTagToDOM(t,e)}))),this.renderLowQualityPreviewPromise},e.prototype.renderLowAndHighQualityPreview=function(e,t,n){var i=this;return this.renderLowAndHighQualityPreviewPromise||(this.renderLowAndHighQualityPreviewPromise=this.renderLowQualityPreview(e,n).then((function(){return i.loadHighQualityImage(t)})).then((function(){e.appendChild(i.highQualityImage),!1===i.assetViewerView.assetViewerItem.isDownloadable&&i.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),i.onPreviewRendered(),e.removeChild(i.lowQualityImage)}))),this.renderLowAndHighQualityPreviewPromise},e.prototype.renderPdfJs=function(e){var t=this;return this.loadPdfJsPage().then((function(n){if(t.config.PDF_RENDERER===a.PDF_RENDERER.CANVAS)return t.renderPdfPage(n,e);throw new Error("unknown PDF_RENDERER specified in Config")}))},e.prototype.renderPreview=function(e){return this.config.PDF_PRELOAD_STRATEGY===a.PDF_PRELOAD_STRATEGY.LOW_PREVIEW&&this.lowQualityPreviewUrl?this.renderLowQualityPreview(e,this.lowQualityPreviewUrl):this.config.PDF_PRELOAD_STRATEGY===a.PDF_PRELOAD_STRATEGY.HIGH_PREVIEW&&this.highQualityPreviewUrl?this.renderHighQualityPreview(e,this.highQualityPreviewUrl):Promise.resolve()},e.prototype.render=function(e){var t=this;this.container=e;var n=e.clientWidth,r=e.clientHeight;if(n===this.containerWidth&&r===this.containerHeight)return i.cancelable(Promise.resolve());switch(this.containerWidth=n,this.containerHeight=r,this.pdfPagePromise&&(this.pdfPagePromise.cancel(),this.pdfPagePromise=null),this.renderPromise&&this.renderPromise.cancel(),this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.embeddedMediaLayer&&(this.embeddedMediaLayer.destroy(),this.embeddedMediaLayer=null),this.highQualityImage?this.highQualityImage.style.display="block":this.lowQualityImage&&(this.lowQualityImage.style.display="block"),this.pdfJsCanvas&&this.pdfJsCanvas.parentNode&&this.container.removeChild(this.pdfJsCanvas),this.textLayerDiv&&this.textLayerDiv.parentNode&&this.container.removeChild(this.textLayerDiv),this.annotationLayer&&this.annotationLayer.div&&this.annotationLayer.div.parentNode&&this.container.removeChild(this.annotationLayer.div),this.config.PDF_RENDER_STRATEGY){case a.PDF_RENDER_STRATEGY.LOW_PREVIEW_HIGH_PREVIEW_NO_ANNOTATIONS:if(this.highQualityPreviewUrl&&this.lowQualityPreviewUrl)return this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(this.renderLowAndHighQualityPreview(e,this.highQualityPreviewUrl,this.lowQualityPreviewUrl)),this.renderPromise;case a.PDF_RENDER_STRATEGY.HIGH_PREVIEW_NO_ANNOTATIONS:if(this.highQualityPreviewUrl)return this.renderLowQualityPreviewPromise?(this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(this.loadHighQualityImage(this.highQualityPreviewUrl).then((function(){!1===t.assetViewerView.assetViewerItem.isDownloadable&&t.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.appendChild(t.highQualityImage),t.onPreviewRendered(),t.lowQualityImage&&(t.lowQualityImage.style.display="none")}))),this.renderPromise):(this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(this.renderHighQualityPreview(e,this.highQualityPreviewUrl)),this.renderPromise);case a.PDF_RENDER_STRATEGY.LOW_PREVIEW_NO_ANNOTATIONS:if(this.lowQualityPreviewUrl)return this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(this.renderLowQualityPreview(e,this.lowQualityPreviewUrl)),this.renderPromise;case a.PDF_RENDER_STRATEGY.LOW_PREVIEW_HIGH_PREVIEW:if(this.highQualityPreviewUrl&&this.lowQualityPreviewUrl)return this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.renderLowQualityPreview(e,this.lowQualityPreviewUrl).catch(this.onPreviewError),this.loadHighQualityImage(this.highQualityPreviewUrl).then((function(){t.pdfCanvasLoaded||(!1===t.assetViewerView.assetViewerItem.isDownloadable&&t.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.appendChild(t.highQualityImage),t.onPreviewRendered(),t.lowQualityImage&&(t.lowQualityImage.style.display="none"))})),this.renderAnnotationAndTextLayer(e)])),this.renderPromise;case a.PDF_RENDER_STRATEGY.HIGH_PREVIEW:if(this.highQualityPreviewUrl)return this.renderLowQualityPreviewPromise?(this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.loadHighQualityImage(this.highQualityPreviewUrl).then((function(){!1===t.assetViewerView.assetViewerItem.isDownloadable&&t.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.appendChild(t.highQualityImage),t.onPreviewRendered(),t.lowQualityImage&&(t.lowQualityImage.style.display="none")})),this.renderAnnotationAndTextLayer(e)])),this.renderPromise):(this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.renderHighQualityPreview(e,this.highQualityPreviewUrl),this.renderAnnotationAndTextLayer(e)])),this.renderPromise);case a.PDF_RENDER_STRATEGY.LOW_PREVIEW:if(this.lowQualityPreviewUrl)return this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.renderLowQualityPreview(e,this.lowQualityPreviewUrl),this.renderAnnotationAndTextLayer(e)])),this.renderPromise;case a.PDF_RENDER_STRATEGY.LOW_PREVIEW_HIGH_PREVIEW_PDFJS:if(this.highQualityPreviewUrl&&this.lowQualityPreviewUrl)return this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.renderLowQualityPreview(e,this.lowQualityPreviewUrl).catch((function(e){return console.error(e),Promise.resolve()})),this.loadHighQualityImage(this.highQualityPreviewUrl).then((function(){t.pdfCanvasLoaded||(!1===t.assetViewerView.assetViewerItem.isDownloadable&&t.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.appendChild(t.highQualityImage),t.onPreviewRendered(),t.lowQualityImage.style.display="none")})).catch(this.onPreviewError),this.renderAnnotationAndTextLayer(e),this.renderPdfJs(e).then((function(){t.lowQualityImage&&(t.lowQualityImage.style.display="none"),t.highQualityImage&&(t.highQualityImage.style.display="none")}))])),this.renderPromise;case a.PDF_RENDER_STRATEGY.HIGH_PREVIEW_PDFJS:if(this.highQualityPreviewUrl)return this.renderLowQualityPreviewPromise?(this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.loadHighQualityImage(this.highQualityPreviewUrl).then((function(){!1===t.assetViewerView.assetViewerItem.isDownloadable&&t.highQualityImage.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.appendChild(t.highQualityImage),t.onPreviewRendered(),t.lowQualityImage&&(t.lowQualityImage.style.display="none")})).catch(this.onPreviewError),this.renderAnnotationAndTextLayer(e),this.renderPdfJs(e).then((function(){t.highQualityImage.style.display="none"}))])),this.renderPromise):(this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.renderHighQualityPreview(e,this.highQualityPreviewUrl).catch(this.onPreviewError),this.renderAnnotationAndTextLayer(e),this.renderPdfJs(e).then((function(){t.highQualityImage.style.display="none"}))])),this.renderPromise);case a.PDF_RENDER_STRATEGY.LOW_PREVIEW_PDFJS:if(this.lowQualityPreviewUrl)return this.assetViewerView.hideLoader(),this.renderPromise=i.cancelable(Promise.all([this.renderLowQualityPreview(e,this.lowQualityPreviewUrl).catch(this.onPreviewError),this.renderAnnotationAndTextLayer(e),this.renderPdfJs(e).then((function(){t.lowQualityImage&&(t.lowQualityImage.style.display="none")}))])),this.renderPromise;case a.PDF_RENDER_STRATEGY.PDFJS:return this.renderPromise=i.cancelable(Promise.all([this.renderAnnotationAndTextLayer(e),this.renderPdfJs(e)])),this.renderPromise;default:return i.cancelable(Promise.reject("no matching renderStrategy "+this.config.PDF_RENDER_STRATEGY))}},e.prototype.renderAnnotationAndTextLayer=function(e){var t=this;return this.loadPdfJsPage().then((function(n){t.renderAnnotationLayer(n,e),t.renderTextLayer(n,e,t.assetViewerView.page-1)})).catch(this.onAnnotationLayerError)},e.prototype.onAnnotationLayerError=function(e){if(e&&401===e.status&&"function"==typeof this.config.refreshToken)throw e;return console.error(e),Promise.resolve()},e.prototype.onPreviewRendered=function(){this.assetViewerView.previewRenderState=v.RenderState.Finished,this.assetViewerView.eventBus.dispatch(new s.ViewerPreviewRenderedEvent({assetViewerView:f.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))},e.prototype.onPreviewError=function(e){return this.assetViewerView.onPreviewError(e),Promise.resolve()},e.prototype.renderTextLayer=function(e,t,n){var i=new window.PDFJS.DefaultTextLayerFactory,r=document.createElement("div");this.annotationLayer&&this.annotationLayer.div?t.insertBefore(r,this.annotationLayer.div):t.appendChild(r),this.textLayerDiv=r,this.resizeTextLayer(),r.className="textLayer";var o=i.createTextLayerBuilder(r,n,this.defaultViewport,this.config.PDFJS_ENHANCE_TEXT_SELECTION),s=e.streamTextContent({normalizeWhitespace:!0});o.setTextContentStream(s),o.render()},e.prototype.renderAnnotationLayer=function(e,t){this.pdfJsLinkService.setDocument(this.pdfDocument);var n=new window.PDFJS.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,renderInteractiveForms:this.config.PDFJS_RENDER_INTERACTIVE_FORMS,linkService:this.pdfJsLinkService,l10n:window.PDFJS.NullL10n});this.annotationLayer=n,this.resizeAnnotationLayer()},e.prototype.renderPdfPage=function(e,t){var n=this,r=window.devicePixelRatio,o=h.capDimensions(t.clientWidth*r,t.clientHeight*r,this.config.PDFJS_MAX_CANVAS_PIXELS).width/this.defaultViewport.width,s=this.defaultViewport.clone({scale:o}),c=this.pdfJsCanvas=document.createElement("canvas"),l=c.getContext("2d");c.style.width="100%",c.style.height="100%",c.height=s.height,c.width=s.width,c.classList.add("pdfjs-canvas");var u=this.assetViewerView.assetViewerItem.page;u||(u=e.pageIndex+1);var d=this.embeddedData?this.embeddedData.find((function(e){return e.page===u})):null,p={canvasContext:l,viewport:s,renderInteractiveForms:this.config.PDFJS_RENDER_INTERACTIVE_FORMS};return this.renderTask=i.cancelable(Promise.resolve().then((function(){return n.pdfJsRenderTask=e.render(p).promise,n.pdfJsRenderTask.catch((function(e){if("canvas"!==e.type)throw e;console.log("error instanceof RenderingCancelledException")}))}))),this.renderTask.then((function(i){return n.pdfCanvasLoaded=!0,n.config.PDFJS_PINCH_ZOOM_ENABLED&&!d&&(null===n.pinchZoomLayer?n.pinchZoomLayer=new w(t,e):n.pinchZoomLayer.render()),d&&(n.embeddedMediaLayer=new y(t,n.pdfDocument,e,n.assetViewerView,d.media,n.config.rootAssetViewer,n.config.PDFJS_MAX_CANVAS_PIXELS,n.config.VIDEO_HLS_DISABLED,n.config.PDFJS_EMBEDDED_MEDIA_HLS_JS_DISABLED,n.config.HLS_JS_PATH,a.HLS_JS_CONFIG)),n.textLayerDiv&&n.textLayerDiv.parentNode?(t.insertBefore(c,n.textLayerDiv),n.pinchZoomLayer&&t.insertBefore(n.pinchZoomLayer.htmlElement,n.textLayerDiv),n.embeddedMediaLayer&&t.insertBefore(n.embeddedMediaLayer.htmlElement,n.textLayerDiv)):(t.appendChild(c),n.pinchZoomLayer&&t.appendChild(n.pinchZoomLayer.htmlElement),n.embeddedMediaLayer&&t.appendChild(n.embeddedMediaLayer.htmlElement)),i}),(function(e){return console.log(e)}))},e.prototype.resetPdf=function(){this.pdfDocumentPromise=null,this.pdfPagePromise=null},e.prototype.resetPreview=function(){this.renderHighQualityPreviewPromise=null,this.renderLowQualityPreviewPromise=null,this.renderLowAndHighQualityPreviewPromise=null},e.prototype.cancel=function(){this.containerWidth=null,this.containerHeight=null,this.pdfPagePromise&&(this.pdfPagePromise.cancel(),this.pdfPagePromise=null),this.renderPromise&&this.renderPromise.cancel(),this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.highQualityImage&&!this.highQualityImageLoaded&&(this.highQualityImage.src="",this.highQualityImage.parentNode&&this.container.removeChild(this.highQualityImage),this.highQualityImage.width=0,this.highQualityImage.height=0,this.highQualityImage=null,this.renderHighQualityPreviewPromise=null),this.lowQualityImage&&!this.lowQualityImageLoaded&&(this.lowQualityImage.src="",this.lowQualityImage.parentNode&&this.container.removeChild(this.lowQualityImage),this.lowQualityImage.width=0,this.lowQualityImage.height=0,this.lowQualityImage=null,this.renderLowQualityPreviewPromise=null)},e.prototype.destroy=function(){this.containerWidth=null,this.containerHeight=null,this.container&&(this.container.innerHTML="",this.container=null),this.pdfPagePromise&&(this.pdfPagePromise.cancel(),this.pdfPagePromise=null),this.renderPromise&&this.renderPromise.cancel(),this.renderTask&&(this.renderTask.cancel(),this.renderTask=null)},e.prototype.destroyFinal=function(){this.destroy(),this.pinchZoomLayer&&(this.pinchZoomLayer.destroy(),this.pinchZoomLayer=null),this.embeddedMediaLayer&&(this.embeddedMediaLayer.destroy(),this.embeddedMediaLayer=null),this.pdfDocument&&(this.pdfDocument.cleanup(),this.pdfDocument.destroy(),this.pdfDocument=null,this.assetViewerView.assetViewerItem.worker&&(this.assetViewerView.assetViewerItem.worker.destroy(),this.assetViewerView.assetViewerItem.worker=null),this.assetViewerView.assetViewerItem.loadPdfPromise=null),this.pdfDocumentPromise=null},e.prototype.resizeTextLayer=function(){if(this.container&&this.textLayerDiv){var e=this.defaultViewport,t=this.container.clientWidth/e.width;this.textLayerDiv.style.cssText="width: "+e.width+"px; height: "+e.height+"px; transform-origin: top left; transform: scale("+t+")"}},e.prototype.resizeAnnotationLayer=function(){if(this.container&&this.annotationLayer){var e=this.pdfPage.getViewport(this.container.clientWidth/this.defaultViewport.width);this.annotationLayer.render(e,"display")}},e.prototype.resize=function(){this.embeddedMediaLayer&&this.embeddedMediaLayer.resize(),this.resizeTextLayer(),this.resizeAnnotationLayer()},e}();t.PdfJsPresentationRenderer=m;var g=function(){function e(e){this.pdfjsLinkService=e}return e.prototype.createAnnotationLayerBuilder=function(e,t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=window.PDFJS.NullL10n),new window.PDFJS.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,renderInteractiveForms:n,linkService:this.pdfjsLinkService,l10n:i})},e}();t.PDFJSAnnotationLayerFactory=g;var w=function(){function e(e,t){this.container=null,this.htmlElement=null,this.className="sv-pdfjs-presentation-renderer__pinch-zoom-layer",this.renderId=0,this.debouncedRenderMilliseconds=100,this.minimumRequiredViewportScale=2,this.debug=!1,this.container=e,this.pdfPage=t,this.pdfDefaultViewport=this.pdfPage.getViewport(1),this.render=this.render.bind(this),this.debouncedRender=r.debounce(this.render.bind(this),this.debouncedRenderMilliseconds),this.onAnimationEnd=this.onAnimationEnd.bind(this),this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.addEventListeners(),this.render()}return e.prototype.addEventListeners=function(){this.htmlElement.addEventListener("animationend",this.onAnimationEnd),window.addEventListener("orientationchange",this.debouncedRender),window.addEventListener("resize",this.debouncedRender),window.addEventListener("scroll",this.debouncedRender)},e.prototype.removeEventListener=function(){window.removeEventListener("orientationchange",this.debouncedRender),window.removeEventListener("resize",this.debouncedRender),window.removeEventListener("scroll",this.debouncedRender)},e.prototype.render=function(){var e=this;this.destroyRenderTask();var t=this.fromDOMRect({top:0,left:0,bottom:window.innerHeight,right:window.innerWidth}),n=this.container.getBoundingClientRect(),i=this.fromDOMRect(n),r=(n.width-this.container.clientWidth)/2;i.x1+=r,i.y1+=r,i.x2-=r,i.y2-=r;var o=this.intersect(t,i),s=this.pdfDefaultViewport.width,a=this.pdfDefaultViewport.height,c=0,l=0,u=0,d=0,h=0,p=0,f=!1;if(o){var v=this.intersection(t,i);i.x1<=0&&(c=-i.x1),i.y1<=0&&(l=-i.y1),u=v.x2-v.x1,d=v.y2-v.y1,h=i.x2-i.x1,p=i.y2-i.y1;var m=.05*u,g=.05*d;c=Math.max(0,c-m),l=Math.max(0,l-g),u=Math.min(h,u+2*m),d=Math.min(p,d+2*g),f=!0}var w=window.devicePixelRatio,y=h/u,E=h*w/s,b=y*E,P=-c/h*s,_=l/p*a;if(!f||y<this.minimumRequiredViewportScale)this.destroyCanvases();else{var T=document.createElement("canvas"),S=T.getContext("2d");T.setAttribute("render-id",String(++this.renderId)),T.className="fade-in",T.width=s*(u/h)*b,T.height=a*(d/p)*b,T.style.position="absolute",T.style.left=c+"px",T.style.top=l+"px",T.style.width=u+"px",T.style.height=d+"px";var V=this.pdfPage.getViewport(b);this.translate(V.transform,P,_);var R={canvasContext:S,viewport:V};this.renderTask=this.pdfPage.render(R);var A=performance.now();this.renderTask.promise.then((function(t){if(e.debug){var n=110,i=110,r=24;S.fillRect(100,100,500,300),S.font="20px monospace",S.fillStyle="white",S.fillText("Render id: "+e.renderId,n,i+=r),S.fillText("Render: "+(performance.now()-A).toFixed(2)+"ms",n,i+=r),S.fillText("Viewport: "+c.toFixed(0)+"px "+l.toFixed(0)+"px "+u.toFixed(0)+"px x "+d.toFixed(0)+"px",n,i+=r),S.fillText("Pdf: "+s.toFixed(0)+"px x "+a.toFixed(0)+"px",n,i+=r),S.fillText("Container: "+h.toFixed(0)+"px x "+p.toFixed(0)+"px",n,i+=r),S.fillText("Viewport scale: "+y.toFixed(2),n,i+=r),S.fillText("Viewport pdf scale: "+E.toFixed(2),n,i+=r),S.fillText("Scale: "+b.toFixed(2),n,i+=r),S.fillText("Canvas: "+T.width.toFixed(2)+"px x "+T.height.toFixed(2)+"px",n,i+=r)}e.htmlElement.appendChild(T),e.renderTask=null})).catch((function(e){if("canvas"!==e.type)throw e;console.log("PfdJsPresentationRendererZoomLayer :: error instanceof RenderingCancelledException")}))}},e.prototype.onAnimationEnd=function(e){var t=parseInt(e.target.getAttribute("render-id"));if(e.target.className="",t===this.renderId)for(var n=this.htmlElement.querySelectorAll('canvas:not([render-id="'+this.renderId+'"])'),i=0;i<n.length;i++){var r=n[i];r.parentNode.removeChild(r)}},e.prototype.translate=function(e,t,n){e[4]+=e[0]*t+e[2]*n,e[5]+=e[1]*t+e[3]*n},e.prototype.intersect=function(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1},e.prototype.intersection=function(e,t){return{x1:Math.max(e.x1,t.x1),y1:Math.max(e.y1,t.y1),x2:Math.min(e.x2,t.x2),y2:Math.min(e.y2,t.y2)}},e.prototype.fromDOMRect=function(e){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom}},e.prototype.destroyCanvases=function(){for(var e=this.htmlElement.querySelectorAll("canvas"),t=0;t<e.length;t++){var n=e[t];n.parentNode.removeChild(n)}},e.prototype.destroyRenderTask=function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null)},e.prototype.destroy=function(){this.removeEventListener(),this.destroyRenderTask(),this.destroyCanvases()},e}();t.PfdJsPresentationRendererPinchZoomLayer=w;var y=function(){function e(e,t,n,i,o,s,a,c,l,u,d){this.container=null,this.htmlElement=null,this.className="sv-pdfjs-presentation-renderer__embedded-media-layer",this.CLASS_ANNOTATIONS_ENABLED="annotations-layer--enabled",this.debouncedOnMilliseconds=100,this.isOn=!1,this.mediaRenderers=[],this.extractedImages=[],this.container=e,this.pdfDoc=t,this.pdfPage=n,this.assetViewerView=i,this.rootAssetViewer=s,this.MAX_CANVAS_PIXELS=a,this.HLS_DISABLED=c,this.HLS_JS_DISABLED=l,this.HLS_JS_PATH=u,this.HLS_JS_CONFIG=d,this.media=this.orchestrateMedia(o),this.pdfDefaultViewport=this.pdfPage.getViewport(1),this.render=this.render.bind(this),this.onAssetViewerPublicRenderedViewFocus=this.onAssetViewerPublicRenderedViewFocus.bind(this),this.debouncedOn=r.debounce(this.on.bind(this),this.debouncedOnMilliseconds),this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.imageExtractor=new P(this.pdfDoc,this.pdfPage.pageNumber,this.media),this.addAnnotationsEnabledObserver(),!0===this.orchastrateOnFocus?this.addViewFocusEventListener():this.on()}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.container.clientWidth/this.pdfDefaultViewport.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerWidth",{get:function(){return this.container.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerHeight",{get:function(){return this.container.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfWidth",{get:function(){return this.pdfDefaultViewport.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfHeight",{get:function(){return this.pdfDefaultViewport.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orchastrateOnFocus",{get:function(){return this.assetViewerView.config.VIEWER_LAYOUT===a.LAYOUT.HORIZONTAL},enumerable:!0,configurable:!0}),e.prototype.render=function(){var e=this;this.destroyRenderTask();var t=u.PromiseHelper.defer(),n=window.devicePixelRatio,i=h.capDimensions(this.containerWidth*n,this.containerHeight*n,this.MAX_CANVAS_PIXELS).width/this.pdfWidth,r=this.pdfDefaultViewport.clone({scale:i}),o=this.canvas=document.createElement("canvas"),s=o.getContext("2d");return o.height=r.height,o.width=r.width,this.pdfDoc.getPage(this.pdfPage.pageNumber).then((function(n){e.pdfPage=n,n.getOperatorList().then((function(n){e.pdfPageOperatorList=n;var i={canvasContext:s,viewport:r,operatorList:e.injectEraseMediaOperations(e.pdfPageOperatorList,e.media.map((function(e){return e.renderIndex})))};e.renderTask=e.pdfPage.render(i),e.renderTask.promise.then((function(){e.renderTask=null,t.resolve()})).catch((function(e){if("canvas"!==e.type)throw e;console.log("PfdJsPresentationRendererEmbeddedMediaLayer :: error instanceof RenderingCancelledException")}))}))})),t.promise},e.prototype.renderMedia=function(){var e=this;this.mediaRenderers=[],this.media.sort((function(e,t){return e.renderIndex>t.renderIndex?1:-1})).forEach((function(t){switch(t.type){case d.EmbeddedDataMediaType.VIDEO:case d.EmbeddedDataMediaType.GIF:var n=e.extractedImages.filter((function(e){return null!==e})).find((function(e){return e.index===t.renderIndex})),i=n?n.element.getAttribute("xlink:href"):null,r=new E(e.htmlElement,t,i,e.pdfWidth,e.HLS_DISABLED,e.HLS_JS_DISABLED,e.HLS_JS_PATH,e.HLS_JS_CONFIG);e.mediaRenderers.push(r)}}))},e.prototype.addViewFocusEventListener=function(){this.rootAssetViewer.eventBus.on(s.ViewerEventType.PublicRenderedViewFocus,this.onAssetViewerPublicRenderedViewFocus)},e.prototype.removeViewFocusEventListener=function(){this.rootAssetViewer.eventBus.off(s.ViewerEventType.PublicRenderedViewFocus,this.onAssetViewerPublicRenderedViewFocus)},e.prototype.addAnnotationsEnabledObserver=function(){var e=this;c.browser.ie||(this.annotationsEnabledObserver=new MutationObserver((function(t){t.forEach((function(t){-1!==t.target.className.indexOf(e.CLASS_ANNOTATIONS_ENABLED)&&e.onAnnotationsEnabled()}))})),this.annotationsEnabledObserver.observe(this.container,{attributeFilter:["class"],subtree:!0}))},e.prototype.removeAnnotationsEnabledObserver=function(){this.annotationsEnabledObserver&&this.annotationsEnabledObserver.disconnect()},e.prototype.onAnnotationsEnabled=function(){this.mediaRenderers.forEach((function(e){return e.pause()}))},e.prototype.onAssetViewerPublicRenderedViewFocus=function(e){e.payload.assetViewerView.id===this.assetViewerView.id?this.debouncedOn():this.off()},e.prototype.on=function(){var e=this;this.isOn||(this.isOn=!0,this.imageExtractor.render().then((function(t){return e.extractedImages=t,e.media.forEach((function(t,n){t.renderIndex=null;var i=e.extractedImages[n];i&&(t.renderIndex=i.index)})),e.render()})).then((function(){e.renderMedia(),e.htmlElement.appendChild(e.canvas)})))},e.prototype.off=function(){this.debouncedOn&&this.debouncedOn.cancel(),this.isOn&&(this.isOn=!1,this.destroyRenderTask(),this.mediaRenderers.forEach((function(e){return e.destroy()})),this.htmlElement.innerHTML="")},e.prototype.resize=function(){var e=this;this.isOn&&(this.render().then((function(){e.destroyCanvases(),e.htmlElement.appendChild(e.canvas)})),this.mediaRenderers.forEach((function(e){return e.resize()})))},e.prototype.orchestrateMedia=function(e){return c.browser.ios||!1===this.orchastrateOnFocus?(e.map((function(e){return e.playOptions.autoPlay=!1})),e):(e.map((function(e){return e.playOptions.autoPlay})).filter((function(e,t,n){return n.indexOf(e)===t})).length>1&&e.map((function(e){return e.playOptions.autoPlay=!1})),e)},e.prototype.injectEraseMediaOperations=function(e,t){var n=["paintImageXObject","paintJpegXObject"],i=window.PDFJS.OPS,r=[];for(var o in i)r[i[o]]=o;return e.fnArray.map((function(t,n){return{name:r[t],index:n,fnId:t,fn:r[t],args:e.argsArray[n]}})).filter((function(e){return-1!==n.indexOf(e.fn)})).filter((function(e,n){return-1!==t.indexOf(n)})).map((function(e){return e.index})).forEach((function(t,n){t+=n,e.argsArray.splice(t,0,[[["BM","destination-out"]]]),e.fnArray.splice(t,0,i.setGState)})),e},e.prototype.destroyCanvases=function(){for(var e=this.htmlElement.querySelectorAll("canvas"),t=0;t<e.length;t++){var n=e[t];n.parentNode.removeChild(n)}},e.prototype.destroyRenderTask=function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null)},e.prototype.destroy=function(){this.removeViewFocusEventListener(),this.removeAnnotationsEnabledObserver(),this.destroyRenderTask(),this.imageExtractor&&this.imageExtractor.destroy(),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.mediaRenderers.forEach((function(e){return e.destroy()})),this.htmlElement.innerHTML=""},e}();t.PfdJsPresentationRendererEmbeddedMediaLayer=y;var E=function(){function e(e,t,n,i,r,o,s,a){this.container=null,this.htmlElement=null,this.className="sv-pdfjs-presentation-renderer__embedded-media-layer__video-renderer",this.videoContainerElement=null,this.videoElement=null,this.imageElement=null,this.intersectionElement=null,this.loadHlsJsPromise=null,this.container=e,this.media=t,this.posterSrc=n,this.pdfDefaultWidth=i,this.HLS_DISABLED=r,this.HLS_JS_DISABLED=o,this.HLS_JS_PATH=s,this.HLS_JS_CONFIG=a,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.videoContainerElement=document.createElement("div"),this.videoElement=document.createElement("video"),this.intersectionElement=document.createElement("div"),this.addVideoEventListeners(),this.render()}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.containerWidth/this.pdfDefaultWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerWidth",{get:function(){return this.container.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerHeight",{get:function(){return this.container.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canPlayHlsNatively",{get:function(){return""!==this.videoElement.canPlayType("application/vnd.apple.mpegURL")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intersectionRect",{get:function(){var e=this.htmlElement.getBoundingClientRect(),t=this.videoContainerElement.getBoundingClientRect();return this.intersection(e,t)},enumerable:!0,configurable:!0}),e.prototype.addVideoEventListeners=function(){this.oneVideoPlay=this.oneVideoPlay.bind(this),this.videoElement.addEventListener("play",this.oneVideoPlay)},e.prototype.removeVideoEventListeners=function(){this.videoElement.removeEventListener("play",this.oneVideoPlay)},e.prototype.oneVideoPlay=function(){this.load(),this.videoElement.classList.remove("off"),this.imageElement&&this.imageElement.parentNode&&this.imageElement.parentNode.removeChild(this.imageElement),this.videoElement.removeEventListener("play",this.oneVideoPlay)},e.prototype.render=function(){var e=this.videoElement;e.className=this.className+"__video",e.controls=!1,e.width=this.media.size.width,e.height=this.media.size.height,e.autoplay=this.media.playOptions.autoPlay,e.loop=this.media.playOptions.repeat!==d.EmbeddedDataMediaPlayOptionsRepeat.NONE,e.playsInline=!0,this.posterSrc&&(this.imageElement=document.createElement("img"),this.imageElement.className=this.className+"__poster",this.imageElement.src=this.posterSrc,this.htmlElement.appendChild(this.imageElement)),this.container.appendChild(this.htmlElement);var t=this.media.playOptions.trim,n=t&&t.start?p.millisecondsToSeconds(t.start):0,i=t&&t.end?p.millisecondsToSeconds(t.end):0,r=h.mapRange(this.media.playOptions.volume,0,100,0,1),o=isNaN(parseInt(this.media.playOptions.repeat))?null:parseInt(this.media.playOptions.repeat);this.controls=new b(this.container,e,n,i,r,o),e.autoplay&&this.load(),this.videoContainerElement.appendChild(e),this.htmlElement.appendChild(this.videoContainerElement),this.resize()},e.prototype.load=function(){var e=this;this.videoElement.src||(!1===this.HLS_DISABLED&&this.canPlayHlsNatively&&this.media.uri.adaptive?this.videoElement.src=this.media.uri.adaptive:!1===this.HLS_DISABLED&&!1===this.HLS_JS_DISABLED&&this.media.uri.adaptive?(this.loadHlsJsPromise=i.cancelable(new Promise((function(t){return l.DomHelper.loadScriptsInOrder([e.HLS_JS_PATH]).then(t)}))),this.loadHlsJsPromise.then((function(){var t=window.Hls,n=e.hls=new t(a.HLS_JS_CONFIG);n.on(t.Events.MEDIA_ATTACHED,(function(){n.loadSource(e.media.uri.adaptive)})),n.attachMedia(e.videoElement)}))):this.videoElement.src=this.media.uri.processed||this.media.uri.converted)},e.prototype.pause=function(){this.videoElement.pause()},e.prototype.resize=function(){var e=this.media.size,t=this.media.arrangement,n=t.size,i=t.offset,r=t.crop,o=t.flip,s=!0===o.vertical?-1:1,a=!0===o.horizontal?-1:1,c=0,l=0,u=100,d=100;if(r&&(d=e.width/(e.width-e.width*(r.left/100)-e.width*(r.right/100))*100,c=-(u=e.height/(e.height-e.height*(r.top/100)-e.height*(r.bottom/100))*100)*r.top/100,l=-d*r.left/100),this.videoContainerElement.style.cssText="position: absolute; top:"+c+"%; left:"+l+"%; width:"+d+"%; height:"+u+"%;",this.imageElement){this.htmlElement.style.cssText="width:"+n.width*this.scale+"px; height:"+n.height*this.scale+"px; transform: translate("+i.x*this.scale+"px, "+i.y*this.scale+"px) rotate(0deg) scale("+a+", "+s+")";var h=this.intersectionRect,p=this.htmlElement.getBoundingClientRect();h.top-=p.top,h.left-=p.left,this.imageElement.style.cssText="position: absolute; top:"+h.top+"px; left:"+h.left+"px; width:"+h.width+"px; height:"+h.height+"px"}this.htmlElement.style.cssText="width:"+n.width*this.scale+"px; height:"+n.height*this.scale+"px; transform: translate("+i.x*this.scale+"px, "+i.y*this.scale+"px) rotate("+t.rotation+"deg) scale("+a+", "+s+")";var f=this.videoContainerElement.clientWidth/e.width,v=this.videoContainerElement.clientHeight/e.height;this.videoElement.style.cssText="position: absolute; top:0; left:0; transform: scale("+f+", "+v+");",this.controls.resize(this.intersectionRect)},e.prototype.intersection=function(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom);return{left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},e.prototype.destroy=function(){this.removeVideoEventListeners(),this.loadHlsJsPromise&&this.loadHlsJsPromise.cancel(),this.hls&&this.hls.destroy(),this.controls&&this.controls.destroy(),this.videoElement&&(this.videoElement.pause(),this.videoElement.src=""),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement.innerHTML=""},e}();t.PfdJsPresentationRendererEmbeddedMediaLayerVideoRenderer=E;var b=function(){function e(e,t,n,i,o,s){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=100),void 0===s&&(s=null),this.container=null,this.htmlElement=null,this.className="sv-pdfjs-presentation-renderer__embedded-media-layer__video-renderer-controls",this.videoElement=null,this.videoDuration=null,this.maxVolume=null,this.repeatCount=null,this.startTime=null,this.endTime=null,this.duration=null,this.isLoadingMetaData=!0,this.isBuffering=!0,this.isScrubbing=!1,this.isPlaying=!1,this.wasPlaying=null,this.isMuted=!1,this.playedCount=0,this.previousCurrentTime=null,this.debouncedVideoWaitingMilliseconds=100,this.MINI_BREAKPOINT=300,this.TINY_BREAKPOINT=150,this.container=e,this.videoElement=t,this.trimStart=n,this.trimEnd=i,this.maxVolume=this.videoElement.volume=o,this.repeatCount=s,this.isPlaying=this.videoElement.autoplay,this.startTime=n,this.debouncedVideoWaiting=r.debounce(this.onVideoWaiting.bind(this),this.debouncedVideoWaitingMilliseconds),this.render(),this.update(),this.addEventListeners()}return Object.defineProperty(e.prototype,"currentTime",{get:function(){return h.mapRange(this.videoCurrentTime,this.startTime,this.endTime,0,this.duration)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeFormatted",{get:function(){return this.secondsToMinutesSeconds(this.currentTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainingTime",{get:function(){return h.mapRange(this.videoCurrentTime,this.startTime,this.endTime,this.duration,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainingTimeFormatted",{get:function(){return"-"+this.secondsToMinutesSeconds(this.remainingTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoCurrentTime",{get:function(){return h.clamp(this.videoElement.currentTime,this.startTime,this.endTime)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){var e=[this.className];return this.isLoadingMetaData&&e.push("is-loading-metadata"),this.isBuffering&&this.isPlaying&&e.push("is-buffering"),this.width<=this.TINY_BREAKPOINT?e.push("tiny"):this.width<=this.MINI_BREAKPOINT&&e.push("mini"),c.browser.touch&&e.push("is-touch"),e.join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.htmlElement.clientWidth},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.htmlElement=document.createElement("div"),this.htmlElement.className=this.classNames,this.htmlElement.innerHTML='\n    <div class="click-area" data-action=\'play\'></div>\n    <div class="click-area" data-action=\'pause\'></div>\n    <button class="play" data-action=\'play\'>\n        <svg viewBox="0 0 102 102" xmlns="http://www.w3.org/2000/svg"><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><circle fill="#FFF" cx="50" cy="50" r="50"/><path fill="#000" d="M63.78 50L41.732 64.567V35.433z"/></g></svg>\n    </button>\n    <div class="buffering" data-action=\'buffering\'>\n        <svg class="circular" viewBox="25 25 50 50">\n            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>\n        </svg>\n    </div>\n    <div class="toolbar">\n        <button data-action=\'play\'>\n            <svg fill="currentColor" viewBox="0 0 18 18">\n                <path d="M15.562 8.1L3.87.225C3.052-.337 2 .225 2 1.125v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"></path>\n            </svg>\n        </button>\n        <button data-action=\'pause\'>\n            <svg fill="currentColor" viewBox="0 0 18 18">\n                <path d="M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zM12 1c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"></path>\n            </svg>\n        </button>\n        <div data-id="currentTime" class="time"></div>\n        <input data-id="progress" type="range" min="0" max="1" step="0.01" value="0" autocomplete="off" role="slider">\n        <div data-id="remainingTime" class="time"></div>\n        '+(0===this.maxVolume?"":'\n            <button data-action=\'mute\'>\n                <svg fill="currentColor" viewBox="0 0 18 18">\n                    <path d="M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"></path><path d="M11.282 5.282a.909.909 0 0 0 0 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 0 0 0 1.316c.145.145.636.262 1.018.156a.725.725 0 0 0 .298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 0 0-1.316 0zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path>\n                </svg>\n            </button>\n            <button data-action=\'unmute\'>\n                <svg fill="currentColor" viewBox="0 0 18 18">\n                    <path d="M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path>\n                </svg>\n            </button>')+'\n        <button data-action="enterFullscreen">\n            <svg fill="currentColor" viewBox="0 0 18 18"><path d="M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"></path></svg>\n        </button>\n        <button data-action="exitFullscreen">\n            <svg fill="currentColor" viewBox="0 0 18 18"><path fill="currentColor" d="M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"></path></svg>\n        </button>\n    </div>',this.progressElement=this.htmlElement.querySelector("[data-id='progress']"),this.currentTimeElement=this.htmlElement.querySelector("[data-id='currentTime']"),this.remainingTimeElement=this.htmlElement.querySelector("[data-id='remainingTime']"),this.container.appendChild(this.htmlElement)},e.prototype.update=function(){var e=this;this.htmlElement.className=this.classNames;var t=[this.isPlaying?"pause":"play",this.isMuted?"unmute":"mute"];["play","pause","mute","unmute","enterFullscreen","exitFullscreen"].forEach((function(n){for(var i=e.htmlElement.querySelectorAll("[data-action='"+n+"']"),r=0;r<i.length;r++){var o=i[r];-1===t.indexOf(n)?o.classList.add("off"):o.classList.remove("off")}}))},e.prototype.updateVideoDuration=function(e){this.videoDuration=e,this.endTime=this.videoDuration-this.trimEnd,this.duration=this.endTime-this.startTime,this.progressElement.setAttribute("min",String(this.startTime)),this.progressElement.setAttribute("max",String(this.endTime))},e.prototype.addEventListeners=function(){this.onClick=this.onClick.bind(this),this.onVideoPlay=this.onVideoPlay.bind(this),this.onVideoPause=this.onVideoPause.bind(this),this.onVideoWaiting=this.onVideoWaiting.bind(this),this.onVideoPlaying=this.onVideoPlaying.bind(this),this.onVideoTimeUpdate=this.onVideoTimeUpdate.bind(this),this.onVideoLoadedMetaData=this.onVideoLoadedMetaData.bind(this),this.htmlElement.addEventListener("click",this.onClick),this.onProgressInput=this.onProgressInput.bind(this),this.onProgressChange=this.onProgressChange.bind(this),this.videoElement.addEventListener("play",this.onVideoPlay),this.videoElement.addEventListener("pause",this.onVideoPause),this.videoElement.addEventListener("waiting",this.debouncedVideoWaiting),this.videoElement.addEventListener("playing",this.onVideoPlaying),this.videoElement.addEventListener("timeupdate",this.onVideoTimeUpdate),this.videoElement.addEventListener("loadedmetadata",this.onVideoLoadedMetaData),this.progressElement.addEventListener("input",this.onProgressInput),this.progressElement.addEventListener("change",this.onProgressChange)},e.prototype.removeEventListeners=function(){this.htmlElement.removeEventListener("click",this.onClick),this.videoElement.removeEventListener("play",this.onVideoPlay),this.videoElement.removeEventListener("pause",this.onVideoPause),this.videoElement.removeEventListener("waiting",this.onVideoWaiting),this.videoElement.removeEventListener("playing",this.onVideoPlaying),this.videoElement.removeEventListener("timeupdate",this.onVideoTimeUpdate),this.videoElement.removeEventListener("loadedmetadata",this.onVideoLoadedMetaData),this.progressElement.removeEventListener("input",this.onProgressInput),this.progressElement.removeEventListener("change",this.onProgressChange)},e.prototype.onClick=function(e){switch(e.target.getAttribute("data-action")){case"play":this.videoElement.play();break;case"pause":this.videoElement.pause();break;case"mute":this.isMuted=!0,this.videoElement.volume=0;break;case"unmute":this.isMuted=!1,this.videoElement.volume=this.maxVolume}this.update()},e.prototype.onVideoLoadedMetaData=function(){this.isLoadingMetaData=!1,this.videoElement.currentTime=this.startTime,this.updateVideoDuration(this.videoElement.duration),this.update()},e.prototype.onVideoTimeUpdate=function(){this.debouncedVideoWaiting.cancel(),this.isBuffering=!1,this.progressElement.value=String(this.videoCurrentTime),this.currentTimeElement.innerHTML=this.currentTimeFormatted,this.remainingTimeElement.innerHTML=this.remainingTimeFormatted,this.videoDuration!==this.videoElement.duration&&this.updateVideoDuration(this.videoElement.duration),null!==this.repeatCount&&!1===this.isScrubbing&&this.isPlaying&&this.videoElement.currentTime<this.previousCurrentTime&&(this.playedCount++,this.playedCount===this.repeatCount&&(this.videoElement.pause(),this.playedCount=0)),!1===this.isScrubbing&&this.isPlaying&&(this.trimStart>0||this.trimEnd>0)&&(this.videoElement.loop&&Math.floor(this.videoElement.currentTime)>=Math.floor(this.endTime)?this.videoElement.currentTime=this.startTime:this.videoElement.currentTime>=this.endTime&&(this.videoElement.pause(),this.videoElement.currentTime=this.endTime)),this.previousCurrentTime=this.videoElement.currentTime,this.update()},e.prototype.onVideoPlay=function(e){this.isPlaying=!0,Math.floor(this.videoElement.currentTime)>=Math.floor(this.endTime)&&(this.videoElement.currentTime=this.startTime),this.update()},e.prototype.onVideoPause=function(e){this.isPlaying=!1,this.update()},e.prototype.onVideoWaiting=function(e){this.isBuffering=!0,this.update()},e.prototype.onVideoPlaying=function(e){this.debouncedVideoWaiting.cancel(),this.isBuffering=!1,this.update()},e.prototype.onProgressInput=function(e){!1===this.isScrubbing&&(this.isScrubbing=!0,this.videoElement.pause(),this.wasPlaying=this.isPlaying);var t=e.target;this.videoElement.currentTime=parseFloat(t.value)},e.prototype.onProgressChange=function(e){this.isScrubbing=!1,this.wasPlaying&&this.videoElement.play(),this.wasPlaying=null},e.prototype.secondsToMinutesSeconds=function(e){return Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},e.prototype.resize=function(e){var t=this.fromClientRect(e),n=this.fromClientRect(this.container.getBoundingClientRect()),i=this.intersection(n,t);i.x1-=n.x1,i.y1-=n.y1,i.x2-=n.x1,i.y2-=n.y1,this.htmlElement.style.cssText="position: absolute; top: "+i.y1+"px; left: "+i.x1+"px; width: "+(i.x2-i.x1)+"px; height: "+(i.y2-i.y1)+"px;",this.update()},e.prototype.intersection=function(e,t){return{x1:Math.max(e.x1,t.x1),y1:Math.max(e.y1,t.y1),x2:Math.min(e.x2,t.x2),y2:Math.min(e.y2,t.y2)}},e.prototype.fromClientRect=function(e){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom}},e.prototype.destroy=function(){this.removeEventListeners(),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement.innerHTML=""},e}();t.PfdJsPresentationRendererEmbeddedMediaLayerVideoRendererControls=b;var P=function(){function e(e,t,n,i){void 0===i&&(i=5),this.htmlElement=null,this.className="sv-pdfjs-presentation-renderer__embedded-media-svg-renderer-image-extractor",this.pdfDoc=e,this.pdfPageNumber=t,this.media=n,this.BEST_MATCH_BOUNDS_PRECISION=i,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.htmlElement.style.cssText="position: absolute; top: 0; left: 0; pointer-events: none; opacity: 0;"}return e.prototype.render=function(){var e=this,t=u.PromiseHelper.defer();return this.htmlElement.innerHTML="",this.renderPromise=i.cancelable(this.pdfDoc.getPage(this.pdfPageNumber).then((function(n){e.pdfPage=n,n.getOperatorList().then((function(n){e.pdfPageOperatorList=n,document.body.appendChild(e.htmlElement);var i=e.htmlElement.getBoundingClientRect();return new window.PDFJS.SVGGraphics(e.pdfPage.commonObjs,e.pdfPage.objs).getSVG(e.pdfPageOperatorList,e.pdfPage.getViewport(1)).then((function(n){e.htmlElement.appendChild(n);var r=[].slice.call(n.querySelectorAll("image")),o=function(e){return e.reduce((function(e,t){return e.then((function(e){return t().then(Array.prototype.concat.bind(e))}))}),Promise.resolve([]))},s=e.media.map((function(t){return function(){return new Promise((function(n,s){var a=document.createElement("div"),c=document.createElement("div"),l=document.createElement("div"),u=t.arrangement,d=u.size,h=u.offset,p=t.size,f=u.crop;a.style.cssText="position: absolute; top: 0; left: 0; width:"+d.width+"px; height:"+d.height+"px; transform: translate("+h.x+"px, "+h.y+"px) rotate(0deg);";var v=0,m=0,g=100,w=100;f&&(w=p.width/(p.width-p.width*(f.left/100)-p.width*(f.right/100))*100,v=-(g=p.height/(p.height-p.height*(f.top/100)-p.height*(f.bottom/100))*100)*f.top/100,m=-w*f.left/100),c.style.cssText="position: absolute; top:"+v+"%; left:"+m+"%; width:"+w+"%; height:"+g+"%;",a.appendChild(c),e.htmlElement.appendChild(a);var y=a.getBoundingClientRect(),E=c.getBoundingClientRect(),b=e.intersection(y,E);b.top-=h.y,b.left-=h.x,b.top-=i.top,b.left-=i.left,l.style.cssText="position: absolute; top:"+b.top+"px; left:"+b.left+"px; width:"+b.width+"px; height:"+b.height+"px; background:#0FF;",a.appendChild(l),a.style.cssText="position: absolute; top: 0; left: 0; width:"+d.width+"px; height:"+d.height+"px; transform: translate("+h.x+"px, "+h.y+"px) rotate("+u.rotation+"deg);";var P=l.getBoundingClientRect(),_=r.map((function(e,t){var n=e.getBoundingClientRect(),i=Math.abs(P.left-n.left),r=Math.abs(P.top-n.top),o=Math.abs(P.width-n.width),s=Math.abs(P.height-n.height);return{index:t,element:e,boundsDiff:parseFloat((i+r+o+s).toFixed(1))}})).sort((function(e,t){return e.boundsDiff<t.boundsDiff?-1:e.boundsDiff>t.boundsDiff||e.index<t.index?1:e.index>t.index?-1:0})).filter((function(t){return t.boundsDiff<=e.BEST_MATCH_BOUNDS_PRECISION}));if(_.length>1&&_[0].boundsDiff===_[1].boundsDiff){var T=_.map((function(t){return function(){return new Promise((function(n,i){var r=new Image,o=document.createElement("canvas"),s=o.getContext("2d");r.src=t.element.getAttribute("xlink:href"),r.onload=function(){o.width=50,o.height=50,s.drawImage(r,0,0,o.width,o.height);for(var i=s.getImageData(0,0,o.width,o.height).data,a=!1,c=0;c<i.length;c+=4)if(i[c+3]<255){a=!0;break}t.transparency=a,e.htmlElement.appendChild(o),n(t)}}))}}));o(T).then((function(e){_=_.filter((function(e){return!1===e.transparency})),n(_[0]||null)}))}else n(_[0]||null)}))}}));return o(s).then((function(n){e.htmlElement.innerHTML="",document.body.removeChild(e.htmlElement),t.resolve(n)}))}))}))}))),i.cancelable(t.promise)},e.prototype.intersection=function(e,t){var n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom);return{left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},e.prototype.destroy=function(){this.renderPromise&&(this.renderPromise.cancel(),this.renderPromise=null),this.htmlElement.parentNode&&this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement.innerHTML=""},e}();t.PfdJsPresentationRendererEmbeddedMediaSVGRendererImageExtractor=P},4429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2299),r=n(3885),o=function(){function e(e,t,n){this.assetViewerView=e,this.pdfJsPagePreviewService=t,this.presentation=n,this.container=null,this.image=null,this.loadPromise=null,this.isLoading=!1,this.isActive=!1}return Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.width&&this.height?{width:this.width,height:this.height}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){if(this._width)return this._width;if(this.presentation&&this.presentation.details&&this.presentation.details.dimensions){var e=this.presentation.details.dimensions.exceptions;return e&&e[this.assetViewerView.page]?e[this.assetViewerView.page].width:this.presentation.details.dimensions.width}},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(this._height)return this._height;if(this.presentation&&this.presentation.details&&this.presentation.details.dimensions){var e=this.presentation.details.dimensions.exceptions;return e&&e[this.assetViewerView.page]?e[this.assetViewerView.page].height:this.presentation.details.dimensions.height}},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this.presentation.details&&1===this.presentation.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){if(this.presentation&&this.presentation.details){var e=this.presentation.urls[this.pageIndex];if(e)return e}return 1!==this.assetViewerView.page&&this.assetViewerView.page?null:this.assetViewerView.assetViewerItem.previewUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetViewerItem",{get:function(){return this.assetViewerView.assetViewerItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pdfJsPagePreviewProcessedPresentationUrl",{get:function(){var e=this.assetViewerItem.presentations.find((function(e){return e.type===i.PRESENTATION_TYPE.PROCESSED}));return this.pdfJsPagePreviewService&&this.assetViewerItem.type===i.ASSET_TYPE.DOCUMENT&&e?e.urls[0]:null},enumerable:!0,configurable:!0}),e.prototype.load=function(){var e=this;return this.isLoading=!0,this.loadPromise=r.cancelable(new Promise((function(t,n){var i=e.image=new Image;if(!1===e.assetViewerView.assetViewerItem.isDownloadable&&e.image.addEventListener("contextmenu",(function(e){return e.preventDefault()})),i.onload=function(){e.isLoading=!1,i.width&&i.height?(e.width=i.naturalWidth,e.height=i.naturalHeight,t({width:e.width,height:e.height})):(e.isLoading=!1,n()),i.onload=null,i.onerror=null},i.onerror=function(t){e.isLoading=!1,i.onload=null,i.onerror=null,e.image=null,n(t)},e.pdfJsPagePreviewProcessedPresentationUrl)return e.pdfJsPagePreviewService.getThumbnailByProcessedPresentation(e.pdfJsPagePreviewProcessedPresentationUrl,e.pageIndex).then((function(e){i.src=e.url})).catch((function(){i.src=e.url}));i.src=e.url}))),this.loadPromise},e.prototype.render=function(e){var t=this;return this.url?(this.container=e,this.renderPromise=r.cancelable(Promise.resolve().then((function(){return new Promise((function(n,i){var r=t.image=new Image;if(r.style.width="100%",r.style.height="100%",e.appendChild(t.image),r.onload=function(){t.container.style.background="none",t.container.style.backgroundImage="none",n(r)},r.onerror=function(e){return i(e)},t.pdfJsPagePreviewProcessedPresentationUrl)return t.pdfJsPagePreviewService.getThumbnailByProcessedPresentation(t.pdfJsPagePreviewProcessedPresentationUrl,t.pageIndex).then((function(e){r.src=e.url})).catch((function(){r.src=t.url}));r.src=t.url}))}))),this.renderPromise):r.cancelable(Promise.reject("no preview url"))},e.prototype.cancel=function(){this.loadPromise&&this.loadPromise.cancel(),this.renderPromise&&this.renderPromise.cancel(),this.image&&(this.image.src="",this.image.parentNode&&this.container.removeChild(this.image),this.image.width=0,this.image.height=0,this.image=null)},e.prototype.destroy=function(){this.container&&(this.container.innerHTML="",this.container=null),this.image=null},e.prototype.destroyFinal=function(){this.destroy()},e}();t.PdfJsPreviewPresentationRender=o},5537:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(7563),o=n(2299),s=n(9738),a=n(8727),c=n(4771),l=function(){function e(e){var t=this;this.assetViewerView=e,this.isActive=!0,this.isLoading=!1,this.pdfViewer=null,this.selectViewsEnabled=!1,this.thumbnailsVisible=!1,this.onSwitchLayout=function(e){var n=e.payload.layout;t.pdfViewerConfig.layout=n,t.pdfViewer&&t.pdfViewer.eventBus.dispatch(new c.PdfViewerSwitchLayoutEvent({layout:n}))},this.onZoomIn=function(){t.pdfViewer&&t.pdfViewer.eventBus.dispatch(new c.PdfViewerZoomInEvent)},this.onZoomOut=function(){t.pdfViewer&&t.pdfViewer.eventBus.dispatch(new c.PdfViewerZoomOutEvent)},this.onDownloadAsset=function(e){t.assetViewerView.eventBus.dispatch(new a.ViewerDownloadAssetEvent({assetViewerItem:t.assetViewerView.assetViewerItem}))},this.resize=function(){t.pdfViewer&&t.pdfViewer.resize()},this.onPdfViewerFocusChange=function(e){t.assetViewerView.eventBus.dispatch(new a.ViewerPublicFocusChangeEvent({assetViewerView:t.mapPdfViewerPageToPublicAssetViewerView(e.payload.pdfViewerPage)}))},this.onPdfViewerRenderedPreviewFocus=function(e){t.assetViewerView.eventBus.dispatch(new a.ViewerPublicRenderedPreviewFocusEvent({assetViewerView:t.mapPdfViewerPageToPublicAssetViewerView(e.payload.pdfViewerPage)}))},this.onPdfViewerRenderedPageFocus=function(e){t.assetViewerView.eventBus.dispatch(new a.ViewerPublicRenderedViewFocusEvent({assetViewerView:t.mapPdfViewerPageToPublicAssetViewerView(e.payload.pdfViewerPage)}))},this.onSelectPage=function(e){var n=t.getAssetViewerViews().find((function(t){return t.id===e.payload.pageId}));n&&t.assetViewerView.eventBus.dispatch(new a.ViewerSelectViewEvent({assetViewerView:n}))},this.onDeselectPage=function(e){var n=t.getAssetViewerViews().find((function(t){return t.id===e.payload.pageId}));n&&t.assetViewerView.eventBus.dispatch(new a.ViewerDeselectViewEvent({assetViewerView:n}))},this.onViewerFocusChange=function(e){-1!==e.payload.assetViewerView.id.indexOf(t.pdfViewerConfig.id)?t.createPdfViewer():t.destroyPdfViewer()},this.onViewerThumbnailsOpenedChange=function(e){var n=e.payload.opened;t.thumbnailsVisible=n,t.pdfViewer&&t.pdfViewer.eventBus.dispatch(new c.PdfViewerThumbnailsOpenedChangeEvent({opened:n}))},this.createPdfViewer=function(){t.pdfViewer||(t.container&&t.container.parentElement?(t.container.classList.add("sp-pdf-viewer"),t.pdfViewer=new c.PdfViewer(t.pdfViewerConfig),t.pdfViewer.eventBus.on(c.PdfViewerEventType.FocusChange,t.onPdfViewerFocusChange),t.pdfViewer.eventBus.on(c.PdfViewerEventType.RenderedPreviewFocus,t.onPdfViewerRenderedPreviewFocus),t.pdfViewer.eventBus.on(c.PdfViewerEventType.RenderedPageFocus,t.onPdfViewerRenderedPageFocus),t.pdfViewer.eventBus.on(c.PdfViewerEventType.SelectPage,t.onSelectPage),t.pdfViewer.eventBus.on(c.PdfViewerEventType.DeselectPage,t.onDeselectPage),t.pdfViewer.eventBus.on(c.PdfViewerEventType.DownloadAsset,t.onDownloadAsset),t.pdfViewer.init(t.container,t.initialPageId,t.thumbnailsVisible),t.selectViewsEnabled&&t.pdfViewer.thumbnailViewer&&t.pdfViewer.thumbnailViewer.enablePageSelection()):t.createPdfViewerRequestAnimationFrameId=requestAnimationFrame(t.createPdfViewer))},this.pdfViewerConfig=this.mapAssetViewerItemAndAssetViewerConfigToPdfViewerConfig(this.assetViewerView.assetViewerItem,this.assetViewerView.config),this.addEventListeners()}return Object.defineProperty(e.prototype,"url",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:400,height:400}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!!this.dimensions},enumerable:!0,configurable:!0}),e.prototype.load=function(){},e.prototype.render=function(e){return this.container=e,Promise.resolve()},e.prototype.destroy=function(){},e.prototype.destroyFinal=function(){this.pdfViewer&&(this.removeEventListeners(),this.destroyPdfViewer())},e.prototype.addEventListeners=function(){this.assetViewerView.eventBus.on(a.ViewerEventType.FocusChange,this.onViewerFocusChange),this.assetViewerView.eventBus.on(a.ViewerEventType.ThumbnailsOpenedChange,this.onViewerThumbnailsOpenedChange),this.assetViewerView.eventBus.on(a.ViewerEventType.SwitchLayout,this.onSwitchLayout),this.assetViewerView.eventBus.on(a.ViewerEventType.ZoomIn,this.onZoomIn),this.assetViewerView.eventBus.on(a.ViewerEventType.ZoomOut,this.onZoomOut)},e.prototype.removeEventListeners=function(){this.assetViewerView.eventBus.off(a.ViewerEventType.FocusChange,this.onViewerFocusChange),this.assetViewerView.eventBus.off(a.ViewerEventType.ThumbnailsOpenedChange,this.onViewerThumbnailsOpenedChange),this.assetViewerView.eventBus.off(a.ViewerEventType.SwitchLayout,this.onSwitchLayout),this.assetViewerView.eventBus.off(a.ViewerEventType.ZoomIn,this.onZoomIn),this.assetViewerView.eventBus.off(a.ViewerEventType.ZoomOut,this.onZoomOut)},e.prototype.destroyPdfViewer=function(){var e=this;cancelAnimationFrame(this.createPdfViewerRequestAnimationFrameId),this.pdfViewer&&(this.pdfViewer.eventBus.off(c.PdfViewerEventType.FocusChange,this.onPdfViewerFocusChange),this.pdfViewer.eventBus.off(c.PdfViewerEventType.RenderedPreviewFocus,this.onPdfViewerRenderedPreviewFocus),this.pdfViewer.eventBus.off(c.PdfViewerEventType.RenderedPageFocus,this.onPdfViewerRenderedPageFocus),this.pdfViewer.eventBus.off(c.PdfViewerEventType.SelectPage,this.onSelectPage),this.pdfViewer.eventBus.off(c.PdfViewerEventType.DeselectPage,this.onDeselectPage),this.pdfViewer.eventBus.off(c.PdfViewerEventType.DownloadAsset,this.onDownloadAsset),this.pdfViewer.getPages().forEach((function(t){e.pdfViewerConfig.pages.get(t.pageNumber).annotations=t.getAnnotations()})),this.pdfViewer.destroy(),this.pdfViewer=null)},e.prototype.mapAssetViewerItemAndAssetViewerConfigToPdfViewerConfig=function(e,t){var n=this,i=e.id,r=e.presentations;if(!r)throw"PdfViewerPresentationRenderer :: AssetViewerItem does not have any presentations";var s=e.isPdf&&r.find((function(e){return e.type===o.PRESENTATION_TYPE.ORIGINAL})),a=r.find((function(e){return e.type===o.PRESENTATION_TYPE.PROCESSED})),c=r.find((function(e){return e.type===o.PRESENTATION_TYPE.PREVIEW_PAGE_PROGRESSIVE_LOCAL})),l=a||s;if(!l)throw"PdfViewerPresentationRenderer :: AssetViewerItem does not have a valid processed or original presentation";if(!l.details)throw"PdfViewerPresentationRenderer :: AssetViewerItem presentation details are missing";var u=l.urls?l.urls[0]:void 0;if(!u)throw"PdfViewerPresentationRenderer :: AssetViewerItem does not have a processed or original presentation url";var d=l.details.numpages,h=l.details.fileSize,p=[];if(e.pageRanges)e.pageRanges.forEach((function(e){for(var t=e.start;t<=e.end;t++)p.push(t)}));else if(e.page)p=[e.page];else{if(!d)throw"PdfViewerPresentationRenderer :: AssetViewerItem presentation.details.numpages is missing";for(var f=1;f<=d;f++)p.push(f)}var v=new Map;if(!p.length)throw"PdfViewerPresentationRenderer :: no pageNumbers could be calculated";return p.forEach((function(i){var r={id:e.id+"-"+i,pageNumber:i,previewUrl:c?c.urls[i]:null,dimensions:n.getDimensions(c,i),annotations:e.annotations&&e.annotations[i]||null,embeddedData:e.embeddedData&&e.embeddedData.find((function(e){return e.page===i}))||null,canCreateAnnotations:t.CAN_CREATE_ANNOTATIONS,debug:t.DEBUG};v.set(i,r)})),{id:i,url:u,name:e.displayName,fileSize:h,defaultRangeChunkSize:t.PDFJS_RANGE_CHUNK_SIZE,minRangeChunkSize:t.PDFJS_MIN_RANGE_CHUNK_SIZE,maxRangeChunkSize:t.PDFJS_MAX_RANGE_CHUNK_SIZE,translations:t.TRANSLATIONS,tintColor:t.TINT_COLOR,thumbnailContainer:t.thumbnailContainer,pages:v,getPdfJs:function(){return t.getPdfJs()},getPdfJsWorker:function(){return t.getPdfJsWorker()},refreshToken:function(){return t.refreshToken()},pageRanges:e.pageRanges,lockedPages:e.nodeItem&&e.nodeItem.asset&&e.nodeItem.asset.lockedPages||null,canZoom:t.canZoom,maxZoomScale:t.MAX_ZOOM_SCALE,minZoomScale:t.MIN_ZOOM_SCALE,disableDownload:t.IS_WINDOWS_DESKTOP_APP,debug:t.DEBUG,downloadUrl:this.createDownloadUrl(e.downloadUrl,e.displayName),layout:t.PDF_VIEWER_LAYOUT}},e.prototype.createDownloadUrl=function(e,t){if(e){var n=i(i({},r.parse(r.extract(e))),{filename:t});return e.split("?")[0]+"?"+r.stringify(n)}},e.prototype.getDimensions=function(e,t){return e?e.details&&e.details.dimensions&&e.details.dimensions.exceptions&&e.details.dimensions.exceptions[t]?{width:e.details.dimensions.exceptions[t].width,height:e.details.dimensions.exceptions[t].height}:e.details&&e.details.dimensions?{width:e.details.dimensions.width,height:e.details.dimensions.height}:null:null},e.prototype.mapPdfViewerPageToPublicAssetViewerView=function(e){return{id:e.id,page:e.pageNumber,previewRenderState:e.previewRenderState,renderState:e.renderState,getAnnotationHelper:e.getAnnotationHelper,getAnnotations:e.getAnnotations,didAnnotationsChange:e.didAnnotationsChange,enableAnnotations:e.enableAnnotations,disableAnnotations:e.disableAnnotations,assetViewerItem:this.assetViewerView.assetViewerItem}},e.prototype.mapPdfViewerPageConfigToPublicAssetViewerView=function(e){return{id:e.id,page:e.pageNumber,previewRenderState:s.RenderState.None,renderState:s.RenderState.None,getAnnotationHelper:function(){},getAnnotations:function(){},didAnnotationsChange:function(){},enableAnnotations:function(){},disableAnnotations:function(){},assetViewerItem:this.assetViewerView.assetViewerItem}},e.prototype.getAssetViewerViews=function(){var e=this;return this.pdfViewer?this.pdfViewer.getPages().map((function(t){return e.mapPdfViewerPageToPublicAssetViewerView(t)})):Array.from(this.pdfViewerConfig.pages.values()).map((function(t){return e.mapPdfViewerPageConfigToPublicAssetViewerView(t)}))},e.prototype.enableViewSelection=function(){this.selectViewsEnabled=!0,this.pdfViewer&&this.pdfViewer.thumbnailViewer&&this.pdfViewer.thumbnailViewer.enablePageSelection()},e.prototype.disableViewSelection=function(){this.selectViewsEnabled=!1,this.pdfViewer&&this.pdfViewer.thumbnailViewer&&this.pdfViewer.thumbnailViewer.disablePageSelection()},e.prototype.selectAllViews=function(){this.pdfViewer&&this.pdfViewer.thumbnailViewer&&this.pdfViewer.thumbnailViewer.selectAllPages()},e.prototype.deselectAllViews=function(){this.pdfViewer&&this.pdfViewer.thumbnailViewer&&this.pdfViewer.thumbnailViewer.deselectAllPages()},e.prototype.setViewsToSelect=function(e){var t=this,n=[];e.forEach((function(e){t.pdfViewerConfig.id===e.assetViewerItemId&&n.push(e.assetViewerItemId+"-"+e.page)})),this.pdfViewerConfig.selectedPageIds=n},e}();t.PdfViewerPresentationRenderer=l},6253:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(3996),s=n(3885),a=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.assetViewerView=t,i.presentation=n,i}return r(t,e),Object.defineProperty(t.prototype,"width",{get:function(){if(this._width)return this._width;if(this.presentation&&this.presentation.details&&this.presentation.details.dimensions){var e=this.presentation.details.dimensions.exceptions;return e&&e[this.assetViewerView.page]?e[this.assetViewerView.page].width:this.presentation.details.dimensions.width}},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){if(this._height)return this._height;if(this.presentation&&this.presentation.details&&this.presentation.details.dimensions){var e=this.presentation.details.dimensions.exceptions;return e&&e[this.assetViewerView.page]?e[this.assetViewerView.page].height:this.presentation.details.dimensions.height}},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){if(this.presentation&&this.presentation.details){var e=this.presentation.details&&1===this.presentation.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1,t=this.presentation.urls[e];if(t)return t}return 1!==this.assetViewerView.page&&this.assetViewerView.page?null:this.assetViewerView.assetViewerItem.previewUrl},enumerable:!0,configurable:!0}),t.prototype.render=function(e){var t=this;return this.url?(this.container=e,this.renderPromise=s.cancelable(Promise.resolve().then((function(){return t.image=new Image,t.image.src=t.url,t.image.style.width="100%",t.image.style.height="100%",!1===t.assetViewerView.assetViewerItem.isDownloadable&&t.image.addEventListener("contextmenu",(function(e){return e.preventDefault()})),e.appendChild(t.image),new Promise((function(e,n){t.image.onload=function(){t.container.style.background="none",t.container.style.backgroundImage="none",e(t.image)},t.image.onerror=function(e){return n(e)}}))}))),this.renderPromise):s.cancelable(Promise.reject("no preview url"))},t.prototype.cancel=function(){this.renderPromise&&this.renderPromise.cancel(),this.image&&(this.image.src="",this.image.parentNode&&this.container.removeChild(this.image),this.image.width=0,this.image.height=0,this.image=null)},t.prototype.destroy=function(){this.cancel(),this.container&&(this.container.innerHTML="",this.container=null),this.image=null},t}(o.ImagePresentationRenderer);t.PreviewPresentationRender=a},5786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8727),r=n(2299),o=n(3149),s=n(1176),a=/<xhtml:link[^>]*>(\s*<\/xhtml:link>)?/i,c=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.embedStrategy=this.assetViewerView.config.SVG_EMBED_STRATEGY,this.loadSVGPromise=null,this.loadStylesheetPromise=null,this.destroyed=!1,this.unloaded=!1,this.svgLoaded=!1,this.isLoading=!1,this.isActive=!1,this.stylesheet=null}return Object.defineProperty(e.prototype,"url",{get:function(){var e=1===this.presentation.details.firstPageIndex?this.assetViewerView.page:this.assetViewerView.page-1;return this.presentation.urls[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){var e=this;return this.presentation.details&&this.presentation.details.links?this.presentation.details.links.filter((function(t){return t.pagenum===e.assetViewerView.page})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var e=this.presentation.details.dimensions||{width:500,height:500,exceptions:null};return e.exceptions&&e.exceptions[this.assetViewerView.page]?e.exceptions[this.assetViewerView.page].width:e.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var e=this.presentation.details.dimensions||{width:500,height:500,exceptions:null};return e.exceptions&&e.exceptions[this.assetViewerView.page]?e.exceptions[this.assetViewerView.page].height:e.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.width&&this.height?{width:this.width,height:this.height}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.prepare=function(){this.svgElement&&0!==this.svgElement.length||(this.svgLoaded=!1,this.svgElement=this.createSVGEl(this.embedStrategy)),!this.svgElement.parentNode&&this.container&&this.container.appendChild(this.svgElement)},e.prototype.preload=function(){this.prepare(),this.loadSVGPromise||(this.loadSVGPromise=this.loadSVGText()),this.loadStylesheetPromise||(this.loadStylesheetPromise=this.loadStylesheet())},e.prototype.loadStylesheet=function(){return this.assetViewerView.assetViewerItem.loadStylesheet()},e.prototype.load=function(e,t){return this.unloaded=!1,this.isLoading=!0,this.preload(),Promise.all([this.loadSVGPromise,this.loadStylesheetPromise]).then(function(n){var i=this,r=n[0],o=n[1];requestAnimationFrame((function(){var n=function(e,t){var n="<style>"+t+"</style>";return e.replace(a,n)}(r,o);!function(e,t){for(var n;n=e.indexOf('xlink:href="data:image',n)+1;)0}(r),i.destroyed||i.unloaded||n&&(i.embedSVG(n,e,t),i.svgLoaded=!0,i.isLoading=!1)}))}.bind(this),function(e){return this.svgLoaded=!1,this.isLoading=!1,this.assetViewerView.config.DEBUG&&console.error("loadSvgFail"),e&&401===e.status&&(this.loadSVGPromise=null,this.loadStylesheetPromise=null),Promise.reject(e)}.bind(this))},e.prototype.destroy=function(){this.container&&(this.container.innerHTML="",this.container=null),this.unload()},e.prototype.destroyFinal=function(){this.destroy()},e.prototype.unload=function(){this.unloaded=!0,this.loadSVGPromise&&(this.loadSVGPromise=null),this.svgElement&&(this.svgElement=null),this.svgLoaded=!1,this.isLoading=!1},e.prototype.render=function(e,t,n){var i=this;if(!e)throw"no container";return this.container=e,this.container.innerHTML="",this.load(t,n).then((function(){return i.renderLinks()}))},e.prototype.renderLinks=function(){var e=this.links&&this.links.length?this.links:null;if(this.assetViewerView.config.ENABLE_LINKS&&e&&this.container){var t=document.createElement("div");t.classList.add("link-layer"),t.style.zIndex="20",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.left="0",t.style.top="0",t.appendChild(this.createLinks(e,this.width,this.height)),this.container.appendChild(t)}},e.prototype.loadSVGText=function(){return this.svgLoaded?Promise.resolve():this.assetViewerView.config.getText(this.url)},e.prototype.createSVGEl=function(e){var t=this;switch(e){case r.SVG_EMBED_STRATEGY.IFRAME_INNERHTML:var n=document.createElement("iframe");return n.src="about:blank",n.onload=function(){t.assetViewerView.config.DEBUG&&console.log("iframe loaded")},n;case r.SVG_EMBED_STRATEGY.INLINE_SVG:var i=document.createElement("div");return i.classList.add("inline-svg"),i.style.width="100%",i;case r.SVG_EMBED_STRATEGY.DATA_URL_IMG:case r.SVG_EMBED_STRATEGY.DATA_URL_IMG_PROCESSED:case r.SVG_EMBED_STRATEGY.DATA_URL_SVG:case r.SVG_EMBED_STRATEGY.CANVAS_IMG:var o=document.createElement("img");return o.classList.add("user-select--none"),!1===this.assetViewerView.assetViewerItem.isDownloadable&&o.addEventListener("contextmenu",(function(e){return e.preventDefault()})),o;case r.SVG_EMBED_STRATEGY.CANVAS:return document.createElement("div")}},e.prototype.embedSVG=function(e,t,n){var i,s,a,c,u=window.DOMParser,d=this.svgElement.contentDocument;switch(window.devicePixelRatio,this.embedStrategy){case r.SVG_EMBED_STRATEGY.IFRAME_INNERHTML:o.browser.ielt10&&(e=e.replace(/<xhtml:link.*/,"")),a="<style>html,body{width:100%;height:100%;margin:0;overflow:hidden;}</style>"+e,o.browser.ielt10?d.body.innerHTML=a:(d.documentElement.innerHTML=a,(o.browser.ios||o.browser.safari)&&o.browser.version<7&&function(e){e.querySelectorAll("use").forEach((function(t){var n=t.getAttribute("xlink:href"),i=e.querySelector(n).cloneNode(),r=t.parentNode;i.removeAttribute("id"),i.setAttribute("transform",t.getAttribute("transform")),r.replaceChild(i,t)}))}(d)),s=d.getElementsByTagName("svg")[0];break;case r.SVG_EMBED_STRATEGY.INLINE_SVG:e=e.replace(/<xhtml:link.*/,""),i=(new u).parseFromString(e,"image/svg+xml"),s=document.importNode(i.documentElement,!0),this.svgElement.appendChild(s);break;case r.SVG_EMBED_STRATEGY.DATA_URL_IMG:s=this.svgElement,c="data:image/svg+xml",!o.browser.ie&&window.btoa?s.src=c+";base64,"+window.btoa(e):s.src=c+","+encodeURIComponent(e);break;case r.SVG_EMBED_STRATEGY.DATA_URL_IMG_PROCESSED:var h=document.createElement("canvas");h.width=t,h.height=n,s=this.svgElement,c="data:image/svg+xml";var p;p=!o.browser.ie&&window.btoa?c+";base64,"+window.btoa(e):c+","+encodeURIComponent(e);var f=new Image;f.onload=function(){l({canvas:h,image:f,desw:t,desh:n}),s.src=h.toDataURL("image/png"),h.width=0,h.height=0,h=null},f.classList.add("user-select--none"),f.src=p;break;case r.SVG_EMBED_STRATEGY.DATA_URL_SVG:s=this.svgElement,c="data:image/svg+xml",o.browser.ie?s.src=c+","+encodeURIComponent(e):s.src=c+";utf8,"+e;break;case r.SVG_EMBED_STRATEGY.CANVAS:var v=document.createElement("canvas");v.width=t,v.height=n,c="data:image/svg+xml";var m;m=!o.browser.ie&&window.btoa?c+";base64,"+window.btoa(e):c+","+encodeURIComponent(e);var g=new Image;g.onload=function(){l({canvas:v,image:g,desw:t,desh:n}),g=null},g.src=m,(s=this.svgElement).appendChild(v);break;case r.SVG_EMBED_STRATEGY.CANVAS_IMG:s=this.svgElement;var w=document.createElement("canvas");w.width=120,w.height=80,w.getContext("2d")}s.setAttribute("width","100%"),s.setAttribute("height","100%")},e.prototype.createLinks=function(e,t,n){for(var i=document.createDocumentFragment(),r=0;r<e.length;r++){var o=this.createLink(e[r],t,n);o&&i.appendChild(o)}return i},e.prototype.createLink=function(e,t,n){var i=document.createElement("a"),r=e.bbox[0]/t*100,s=e.bbox[1]/n*100,a=e.bbox[2]/t*100,c=e.bbox[3]/n*100;if(i.classList.add("svg-page-link"),i.style.left=r+"%",i.style.top=s+"%",i.style.width=a-r+"%",i.style.height=c-s+"%",i.style.position="absolute",o.browser.ie){var l=document.createElement("span");l.style.display="block",l.style.width="100%",l.style.height="100%",l.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==)",l.style.backgroundRepeat="no-repeat",i.appendChild(l),l.onclick=this.handleClick.bind(this)}else i.onclick=this.handleClick.bind(this);if(e.uri){if(!/^http|^mailto|^showpad/.test(e.uri))return;i.setAttribute("href",encodeURI(e.uri)),i.setAttribute("target","_blank")}else e.destination&&i.setAttribute("href","#page-"+e.destination.pagenum);return i.setAttribute("data",JSON.stringify(e)),i},e.prototype.handleClick=function(e){var t=(o.browser.ie?e.target.parentNode:e.target).getAttribute("data"),n=null;try{n=JSON.parse(t)}catch(e){}n&&(e.preventDefault(),this.handleLinkClick(n))},e.prototype.handleLinkClick=function(e){e.uri?s.ShowpadLinkHelper.isShowpadLink(e.uri)?s.ShowpadLinkHelper.handleShowpadAssetLink(e):window.open(e.uri):e.destination&&this.assetViewerView.eventBus.dispatch(new i.ViewerNavigateToPageEvent({page:e.destination.pagenum}))},e}();function l(e){if(!e.canvas)throw"A canvas is required";if(!e.image)throw"Image is required";var t=e.canvas,n=t.getContext("2d"),i=e.image,r=e.srcx||0,o=e.srcy||0,s=e.srcw||i.naturalWidth,a=e.srch||i.naturalHeight,c=e.desx||r,l=e.desy||o,u=e.desw||s,d=e.desh||a,h=e.auto,p=window.devicePixelRatio||1,f=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,v=p/f;if(void 0===h&&(h=!0),h&&p!==f){var m=t.width,g=t.height;t.width=m*v,t.height=g*v,t.style.width=m+"px",t.style.height=g+"px",n.scale(v,v)}n.drawImage(i,r,o,s,a,c,l,u,d)}t.SvgPresentationRenderer=c},3567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1057),r=function(){function e(e){this.model=null,this.onProgress=null,this.onLoaded=null,this.onError=null,this.crossOrigin=e,this.loadingManagerOnLoad=this.loadingManagerOnLoad.bind(this),this.loadingManagerOnProgress=this.loadingManagerOnProgress.bind(this),this.loadingManagerOnError=this.loadingManagerOnError.bind(this),this.colladaLoaderOnLoad=this.colladaLoaderOnLoad.bind(this),this.colladaLoaderOnProgress=this.colladaLoaderOnProgress.bind(this),this.colladaLoaderOnError=this.colladaLoaderOnError.bind(this)}return e.prototype.load=function(e){this.colladaUrl=e,this.loadingManager=new window.THREE.LoadingManager,this.loadingManager.onLoad=this.loadingManagerOnLoad,this.loadingManager.onProgress=this.loadingManagerOnProgress,this.loadingManager.onError=this.loadingManagerOnError,this.colladaLoader=new window.THREE.ColladaLoader(this.loadingManager),this.colladaLoader.setCrossOrigin(this.crossOrigin),this.colladaLoader.load(this.colladaUrl,this.colladaLoaderOnLoad,this.colladaLoaderOnProgress,this.colladaLoaderOnError)},e.prototype.loadingManagerOnLoad=function(){this.collada&&this.onLoaded(this.collada.scene)},e.prototype.loadingManagerOnProgress=function(e,t,n){var r=1===t&&1===n?100:(t-1)/(n-1)*100;this.onProgress(i.mapRange(r,0,100,50,100))},e.prototype.loadingManagerOnError=function(e){},e.prototype.colladaLoaderOnLoad=function(e){this.collada=e},e.prototype.colladaLoaderOnProgress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;this.onProgress(i.mapRange(t,0,100,0,50))}},e.prototype.colladaLoaderOnError=function(e){this.onError("ThreeJsDAELoader: Failed loading "+this.colladaUrl)},e.prototype.destroy=function(){this.loadingManager&&(this.loadingManager.onLoad=function(){},this.loadingManager.onProgress=function(){},this.loadingManager.onError=function(){},this.loadingManager.cancelLoading())},e}();t.ThreeJsDAELoader=r;var o=function(){function e(){this.model=null,this.onProgress=null,this.onLoaded=null,this.onError=null}return e.prototype.load=function(e){},e.prototype.destroy=function(){},e}();t.ThreeJsOBJLoader=o;var s=function(){function e(){this.model=null,this.onProgress=null,this.onLoaded=null,this.onError=null}return e.prototype.load=function(e){},e.prototype.destroy=function(){},e}();t.ThreeJsFBXLoader=s},6895:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1057),r=n(4695),o=function(){function e(e){this.translations=e,this.container=null,this.htmlElement=null,this.className="sv-threejs-model-renderer",this.animate=this.animate.bind(this),this.render=this.render.bind(this),this.onControlsChange=this.onControlsChange.bind(this)}return Object.defineProperty(e.prototype,"containerWidth",{get:function(){return this.container.clientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerHeight",{get:function(){return this.container.clientHeight},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t,n){this.container=e,this.model=t,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.htmlElement.style.backgroundColor=n,this.scene=new window.THREE.Scene,this.scene.background=new window.THREE.Color(n),this.scene.add(this.model);var r=new window.THREE.Box3;r.setFromObject(this.model);var o=new window.THREE.Vector3;r.getCenter(o);var a=new window.THREE.Vector3;r.getSize(a);var c=this.containerWidth/this.containerHeight,l=a.x,u=a.y,d=a.z,h=u/2/Math.tan(Math.PI/180*22.5),p=l/c/2/Math.tan(Math.PI/180*22.5),f=i.clamp(l*u*d,1e-4,.1);this.camera=new window.THREE.PerspectiveCamera(45,c,f,1e4),this.camera.up.set(0,1,0);var v=Math.max(h,p),m=new window.THREE.Vector3(o.x+a.z/1.5,o.y+1*a.y,1*(o.z+v+d/2));this.camera.position.copy(m),this.ambientLight=new window.THREE.AmbientLight(16777215,.7),this.scene.add(this.ambientLight),this.directionalLight=new window.THREE.DirectionalLight(16777215,.25),this.directionalLight.position.copy(this.camera.position),this.scene.add(this.directionalLight),this.renderer=new window.THREE.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.containerWidth,this.containerHeight),this.controls=new window.THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.screenSpacePanning=!0,this.controls.enableZoom=!0,this.controls.enableKeys=!1,this.controls.target=o,this.controls.update(),this.htmlElement.appendChild(this.renderer.domElement),this.container.appendChild(this.htmlElement),this.ftue=new s(this.container,this.translations),this.addEventListeners(),this.animate()},e.prototype.addEventListeners=function(){this.controls.addEventListener("change",this.onControlsChange)},e.prototype.removeEventListeners=function(){this.controls.removeEventListener("change",this.onControlsChange)},e.prototype.animate=function(){this.requestAnimationFrameId=requestAnimationFrame(this.animate),this.update()},e.prototype.update=function(){this.renderer.render(this.scene,this.camera)},e.prototype.onControlsChange=function(){this.ftue&&(this.ftue.destroy(),this.ftue=null),this.directionalLight.position.copy(this.camera.position)},e.prototype.resize=function(){this.camera.aspect=this.containerWidth/this.containerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.containerWidth,this.containerHeight)},e.prototype.destroy=function(){this.removeEventListeners(),cancelAnimationFrame(this.requestAnimationFrameId),this.ftue&&(this.ftue.destroy(),this.ftue=null),this.htmlElement&&(this.htmlElement.parentNode.removeChild(this.htmlElement),this.htmlElement=null)},e}();t.ThreeJsModelRenderer=o;var s=function(){function e(e,t){this.translations=t,this.htmlElement=null,this.className="sv-threejs-model-renderer__ftue",this.activeIndex=0,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,e.appendChild(this.htmlElement),this.onAnimationEnd=this.onAnimationEnd.bind(this),this.addEventListeners(),this.initializeItems(),this.renderActiveItem()}return e.prototype.initializeItems=function(){var e=[{title:this.translations[r.TranslationKeys.ThreeJsFtueOrbitTitle],description:this.translations[r.TranslationKeys.ThreeJsFtueOrbitDescriptionMouse],svg:'<svg xmlns="http://www.w3.org/2000/svg" width="31" height="43"><g fill="#4D4D4D"><path d="M8 20.333v11.334C8 37.9 13.175 43 19.5 43S31 37.9 31 31.667V20.333C31 14.1 25.825 9 19.5 9S8 14.1 8 20.333zm11.5-8.814c4.92 0 8.944 3.966 8.944 8.814v11.334c0 4.848-4.025 8.814-8.944 8.814-4.92 0-8.944-3.966-8.944-8.814V20.333c0-4.848 4.025-8.814 8.944-8.814z"/><path d="M19.5 22.222c.703 0 1.278-.566 1.278-1.259v-3.778c0-.692-.575-1.26-1.278-1.26-.703 0-1.278.568-1.278 1.26v3.778c0 .693.575 1.26 1.278 1.26zM13.722 6.296a1.272 1.272 0 0 1-1.278-1.259V1.259C12.444.567 13.02 0 13.722 0 14.425 0 15 .567 15 1.26v3.777c0 .693-.575 1.26-1.278 1.26zM8.948 8.374a1.272 1.272 0 0 1-1.794.013l-2.67-2.671a1.272 1.272 0 0 1 .012-1.794A1.272 1.272 0 0 1 6.29 3.91l2.671 2.67c.49.49.484 1.297-.013 1.794zM6.87 13.148c0 .703-.566 1.278-1.259 1.278H1.833a1.273 1.273 0 0 1-1.259-1.278c0-.703.567-1.278 1.26-1.278H5.61c.693 0 1.26.575 1.26 1.278z"/></g></svg>'},{title:this.translations[r.TranslationKeys.ThreeJsFtueZoomTitle],description:this.translations[r.TranslationKeys.ThreeJsFtueZoomDescriptionMouse],svg:'<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34"><g fill="#4D4D4D"><path d="M0 11.333v11.334C0 28.9 5.175 34 11.5 34S23 28.9 23 22.667V11.333C23 5.1 17.825 0 11.5 0S0 5.1 0 11.333zM11.5 2.52c4.92 0 8.944 3.966 8.944 8.814v11.334c0 4.848-4.025 8.814-8.944 8.814-4.92 0-8.944-3.966-8.944-8.814V11.333c0-4.848 4.025-8.814 8.944-8.814z"/><path d="M11.5 13.222c.703 0 1.278-.566 1.278-1.259V8.185c0-.692-.575-1.26-1.278-1.26-.703 0-1.278.568-1.278 1.26v3.778c0 .693.575 1.26 1.278 1.26zm18.727 6.821c.105-.052.21-.105.262-.158l2.354-2.377a.835.835 0 0 0 0-1.163.815.815 0 0 0-1.151 0l-.942.951v-4.173a.83.83 0 0 0-.837-.846.83.83 0 0 0-.836.846v4.12l-.942-.95a.815.815 0 0 0-1.15 0 .852.852 0 0 0-.262.58c0 .212.104.423.261.582l2.354 2.377c.105.106.157.159.262.159a.867.867 0 0 0 .627.052z"/><path d="M30.227 5.312c.105.053.21.106.262.159l2.354 2.377a.835.835 0 0 1 0 1.162.815.815 0 0 1-1.151 0l-.942-.95v4.173a.83.83 0 0 1-.837.845.83.83 0 0 1-.836-.845V8.112l-.942.951a.815.815 0 0 1-1.15 0 .852.852 0 0 1-.262-.581.85.85 0 0 1 .261-.581l2.354-2.378c.105-.105.157-.158.262-.158a.867.867 0 0 1 .627-.053z"/></g></svg>'},{title:this.translations[r.TranslationKeys.ThreeJsFtuePanTitle],description:this.translations[r.TranslationKeys.ThreeJsFtuePanDescriptionMouse],svg:'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="42"><g fill="#4D4D4D"><path d="M0 19.333v11.334C0 36.9 5.175 42 11.5 42S23 36.9 23 30.667V19.333C23 13.1 17.825 8 11.5 8S0 13.1 0 19.333zm11.5-8.814c4.92 0 8.944 3.966 8.944 8.814v11.334c0 4.848-4.025 8.814-8.944 8.814-4.92 0-8.944-3.966-8.944-8.814V19.333c0-4.848 4.025-8.814 8.944-8.814zm6.778-4.223c.703 0 1.278-.566 1.278-1.259V1.259C19.556.567 18.98 0 18.278 0 17.575 0 17 .567 17 1.26v3.777c0 .693.575 1.26 1.278 1.26zm4.774 2.078a1.272 1.272 0 0 0 1.794.013l2.67-2.671c.49-.49.485-1.297-.012-1.794a1.272 1.272 0 0 0-1.794-.013L23.039 6.58c-.49.49-.484 1.297.013 1.794zm2.078 4.774c0 .703.566 1.278 1.259 1.278h3.778c.692 0 1.259-.575 1.259-1.278 0-.703-.567-1.278-1.26-1.278H26.39c-.693 0-1.26.575-1.26 1.278z"/><path d="M11.5 21.222c.703 0 1.278-.566 1.278-1.259v-3.778c0-.692-.575-1.26-1.278-1.26-.703 0-1.278.568-1.278 1.26v3.778c0 .693.575 1.26 1.278 1.26z"/></g></svg>'}];"ontouchstart"in document.documentElement&&(e=[{title:this.translations[r.TranslationKeys.ThreeJsFtueOrbitTitle],description:this.translations[r.TranslationKeys.ThreeJsFtueOrbitDescriptionTouch],svg:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="35"><g fill="#4D4D4D" fill-rule="evenodd"><g fill-rule="nonzero"><path d="M26.838 13.763v-.261.209c0 .157 0 .366.053.523-.053-.157-.053-.314-.053-.47zm-19.6-9.415H3.064l.951-.942a.815.815 0 0 0 0-1.15.835.835 0 0 0-1.162 0L.475 4.608c-.105.105-.158.157-.158.262a.661.661 0 0 0 0 .627c.053.105.106.21.158.262l2.378 2.354a.85.85 0 0 0 .581.261.852.852 0 0 0 .581-.261.815.815 0 0 0 0-1.15l-.95-.942h4.173a.83.83 0 0 0 .845-.837.83.83 0 0 0-.845-.837zm16.694.522c-.053-.104-.106-.208-.158-.26.052.052.105.156.158.26zm-.212.89c.054-.052.16-.157.16-.262 0 .105-.054.157-.16.262z"/><path d="M24.932 4.87c-.053-.104-.106-.208-.158-.26l-2.378-2.355a.835.835 0 0 0-1.162 0 .815.815 0 0 0 0 1.151l.95.942h-4.173a.83.83 0 0 0-.845.837c0 .47.37.837.845.837h4.121l-.95.941a.815.815 0 0 0 0 1.15.845.845 0 0 0 .58.262.852.852 0 0 0 .581-.261l2.378-2.354c.105-.105.158-.157.158-.262a.867.867 0 0 0 .053-.627z"/></g><path d="M25.127 16.327c1.557 0 2.824 1.318 2.824 2.938a.72.72 0 0 1-.003.072l-.676 6.908c-.204 2.083-1.039 4.051-2.351 5.542-1.792 2.035-4.34 3.11-7.367 3.11-5.461 0-8.616-4.252-8.89-4.635C8.424 29.957 6 26.795 6 23.152c0-2.306.589-4.01 1.75-5.065a4.11 4.11 0 0 1 2.098-1.01V3.436c0-.814.33-1.6.903-2.154A2.744 2.744 0 0 1 12.752.5c1.514.043 2.745 1.381 2.745 2.982v7.878a2.74 2.74 0 0 1 1.326-.34c1.557 0 2.824 1.318 2.824 2.938v.063c.396-.22.848-.345 1.328-.345 1.557 0 2.824 1.318 2.824 2.938v.06a2.73 2.73 0 0 1 1.328-.346zm.655 9.774l.672-6.869c-.015-.785-.605-1.418-1.327-1.418-.63 0-1.178.49-1.302 1.166a.746.746 0 0 1-.664.607.748.748 0 0 1-.769-.47l-.038-.096a.738.738 0 0 1-.051-.271v-2.137c0-.8-.596-1.45-1.328-1.45-.732 0-1.328.65-1.328 1.45 0 .41-.335.744-.748.744a.746.746 0 0 1-.749-.744v-2.656c0-.8-.595-1.451-1.327-1.451-.715 0-1.296.61-1.326 1.388v1.972c0 .41-.335.744-.749.744a.746.746 0 0 1-.748-.744V3.481c0-.804-.58-1.475-1.291-1.496-.341-.01-.663.12-.915.363-.286.276-.45.672-.45 1.087v19.79a.746.746 0 0 1-.748.744.746.746 0 0 1-.748-.743v-4.632a2.603 2.603 0 0 0-1.108.609c-.825.764-1.243 2.093-1.243 3.948 0 3.238 2.329 6.173 2.352 6.202a.74.74 0 0 1 .031.041c.028.04 2.876 4.016 7.674 4.016 2.62 0 4.72-.876 6.24-2.602 1.109-1.26 1.815-2.93 1.988-4.707z"/></g></svg>'},{title:this.translations[r.TranslationKeys.ThreeJsFtueZoomTitle],description:this.translations[r.TranslationKeys.ThreeJsFtueZoomDescriptionTouch],svg:'<svg xmlns="http://www.w3.org/2000/svg" width="34" height="39"><g fill="#4D4D4D"><path d="M32.838 17.763v-.261.209c0 .157 0 .366.053.523-.053-.157-.053-.314-.053-.47zm-2.219.314a2.91 2.91 0 0 0-1.532.418 2.927 2.927 0 0 0-2.642-1.673 2.91 2.91 0 0 0-1.532.418 2.927 2.927 0 0 0-2.641-1.674 3.43 3.43 0 0 0-1.268.262V7.982c0-1.622-1.321-2.877-2.906-2.877-1.585 0-2.906 1.307-2.906 2.877v13.076l-.898-1.83a2.985 2.985 0 0 0-2.747-1.883c-.317 0-.687.052-1.004.157a2.74 2.74 0 0 0-1.637 1.516 2.875 2.875 0 0 0-.106 2.197s0 .053.053.053l6.075 12.763c0 .052.053.052.053.104a11.428 11.428 0 0 0 2.272 2.511c.053.052.105.052.158.105l.106.104a10.16 10.16 0 0 0 5.97 1.936c5.388 0 9.826-4.185 10.038-9.468v-8.369c.052-1.57-1.268-2.877-2.906-2.877zm-7.132 19.092c-1.796 0-3.487-.523-4.913-1.569l-.106-.105a1.106 1.106 0 0 0-.317-.209 8.68 8.68 0 0 1-1.743-1.935l-6.023-12.659a1.173 1.173 0 0 1 .053-.941c.158-.314.37-.523.687-.628.633-.21 1.373.105 1.584.732 0 0 0 .053.053.053l2.483 5.23c.159.367.581.524.951.471.37-.104.634-.418.634-.784V7.982c0-.68.581-1.256 1.268-1.256s1.268.576 1.268 1.256v10.461c0 .47.37.837.845.837a.83.83 0 0 0 .846-.837c0-.68.58-1.255 1.268-1.255.686 0 1.267.575 1.267 1.255v1.255c0 .471.37.837.846.837a.83.83 0 0 0 .845-.837c0-.68.581-1.255 1.268-1.255s1.268.575 1.268 1.255v1.256c0 .47.37.837.845.837a.83.83 0 0 0 .845-.837c0-.68.582-1.256 1.268-1.256.687 0 1.268.576 1.268 1.256v8.37c-.422 4.393-4.068 7.845-8.558 7.845zM29.932 8.87c-.053-.104-.106-.208-.158-.26.052.052.105.156.158.26zm-.212.89c.054-.052.16-.157.16-.262 0 .105-.054.157-.16.262zM4.903 8.439l-2.95 2.951.006-1.338a.815.815 0 0 0-.814-.814.835.835 0 0 0-.822.822l-.016 3.345c-.001.15-.002.223.072.297a.663.663 0 0 0 .444.444c.112.037.223.073.297.073l3.346-.017a.852.852 0 0 0 .596-.225.852.852 0 0 0 .226-.596.815.815 0 0 0-.814-.814l-1.338.007 2.95-2.952a.83.83 0 0 0 .007-1.19.83.83 0 0 0-1.19.007zM13.542.54c-.111-.037-.222-.074-.297-.073L9.9.483a.835.835 0 0 0-.822.822.815.815 0 0 0 .814.814l1.338-.007-2.951 2.951a.83.83 0 0 0-.006 1.19.83.83 0 0 0 1.19-.006l2.913-2.914-.007 1.338a.815.815 0 0 0 .814.814.852.852 0 0 0 .596-.226.852.852 0 0 0 .226-.596l.017-3.345c0-.149 0-.223-.073-.297a.867.867 0 0 0-.407-.481z"/></g></svg>'},{title:this.translations[r.TranslationKeys.ThreeJsFtuePanTitle],description:this.translations[r.TranslationKeys.ThreeJsFtuePanDescriptionTouch],svg:'<svg xmlns="http://www.w3.org/2000/svg" width="23" height="38"><path fill="#4D4D4D" d="M3.08 12.38a.76.76 0 0 0 .487-.175.716.716 0 0 0 .083-1.029 3.906 3.906 0 0 1-.976-2.575c0-1 .382-1.954 1.078-2.688a4.11 4.11 0 0 1 2.64-1.266.75.75 0 0 0 .614-.417c.812-1.683 2.57-2.77 4.478-2.77 2.726 0 4.945 2.158 4.945 4.811a4.73 4.73 0 0 1-1.184 3.122.716.716 0 0 0 .084 1.03.764.764 0 0 0 1.057-.082 6.172 6.172 0 0 0 1.543-4.07C17.929 2.813 15.037 0 11.484 0 9.138 0 6.966 1.26 5.84 3.244a5.612 5.612 0 0 0-3.192 1.68A5.332 5.332 0 0 0 1.174 8.6c0 1.29.474 2.542 1.335 3.523.149.17.359.256.57.256zm17.468 16.253c-.174 1.743-.882 3.383-1.993 4.619-1.524 1.695-3.628 2.554-6.254 2.554-4.809 0-7.664-3.903-7.692-3.941a.768.768 0 0 0-.03-.04c-.023-.029-2.359-2.924-2.359-6.088 0-1.82.42-3.124 1.247-3.874.376-.341.78-.513 1.11-.598v4.546c0 .403.336.73.75.73a.74.74 0 0 0 .75-.73V9.486c0-.407.164-.796.45-1.067.254-.24.58-.365.917-.356.714.02 1.295.679 1.295 1.468v9.057c0 .403.335.73.75.73a.74.74 0 0 0 .75-.73V6.26c0-.714.597-1.295 1.33-1.295.734 0 1.331.581 1.331 1.295v12.981l-.002.08.002.038v.083c0 .404.336.73.75.73a.74.74 0 0 0 .75-.73v-.163c.021-.766.609-1.382 1.33-1.382.733 0 1.33.639 1.33 1.424v2.097c0 .09.018.18.051.265l.039.096a.752.752 0 0 0 .77.46.742.742 0 0 0 .666-.595c.124-.663.673-1.144 1.305-1.144.724 0 1.315.621 1.33 1.392l-.673 6.74zm-.657-9.593a2.78 2.78 0 0 0-1.33.339v-.058c0-1.59-1.27-2.884-2.832-2.884-.48 0-.932.123-1.329.339V6.26c0-1.519-1.27-2.755-2.83-2.755-1.561 0-2.831 1.236-2.831 2.755v.692c-.376-.21-.8-.335-1.251-.348a2.784 2.784 0 0 0-2.006.768 2.918 2.918 0 0 0-.905 2.114v10.291a4.154 4.154 0 0 0-2.103.99C1.31 21.804.72 23.476.72 25.738c0 3.577 2.43 6.68 2.67 6.98.275.375 3.437 4.549 8.91 4.549 3.035 0 5.588-1.056 7.384-3.053 1.315-1.463 2.153-3.395 2.357-5.44l.677-6.779a.695.695 0 0 0 .004-.07c0-1.59-1.27-2.884-2.831-2.884z"/></svg>'}]),this.items=e},e.prototype.renderActiveItem=function(){var e=this;this.htmlElement.innerHTML=this.items.filter((function(t,n){return n===e.activeIndex})).map((function(t){return'<div class="'+e.className+'-item animate">\n                      '+t.svg+'\n                      <div class="title">'+t.title+'</div>\n                      <div class="description">'+t.description+"</div>\n                    </div>"})).join("")},e.prototype.addEventListeners=function(){this.htmlElement.addEventListener("animationend",this.onAnimationEnd)},e.prototype.removeEventListeners=function(){this.htmlElement.removeEventListener("animationend",this.onAnimationEnd)},e.prototype.onAnimationEnd=function(){this.activeIndex=this.activeIndex+1<this.items.length?this.activeIndex+1:0,this.renderActiveItem()},e.prototype.destroy=function(){this.removeEventListeners(),this.htmlElement.parentNode.removeChild(this.htmlElement)},e}();t.ThreeJsModelRendererFtue=s},9290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4695),r=n(2299),o=n(3567),s=n(6895),a=n(1057),c=n(2187),l=n(2062),u=n(3885),d=n(7563),h=n(8727),p=n(7679),f=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.content=null,this.modelContainer=null,this.manifestXhr=null,this.manifest=null,this.unsupportedMessage=null,this.preview=null,this.buttonView=null,this.buttonExitFullscreen=null,this.loadingIndicator=null,this.errorMessage=null,this.loadDependenciesPromise=null,this.previewImage=null,this.previewImageError=!1,this.isLoading=!1,this.isFullscreen=!1,this.isActive=!1,this.renderModel=this.renderModel.bind(this),this.onPreviewClick=this.onPreviewClick.bind(this),this.onButtonViewClick=this.onButtonViewClick.bind(this),this.onButtonExitFullscreenClick=this.onButtonExitFullscreenClick.bind(this),this.onAssetViewerViewFocusChange=this.onAssetViewerViewFocusChange.bind(this),this.onAssetViewerViewFullscreenChange=this.onAssetViewerViewFullscreenChange.bind(this),this.onModelLoaderProgess=this.onModelLoaderProgess.bind(this),this.onModelLoaderLoaded=this.onModelLoaderLoaded.bind(this),this.onModelLoaderError=this.onModelLoaderError.bind(this)}return Object.defineProperty(e.prototype,"dimensions",{get:function(){return!1===this.config.THREEJS_USE_PREVIEW_DIMENSIONS?null:this.width&&this.height?{width:this.width,height:this.height}:{width:600,height:400}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){if(this._width)return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){if(this._height)return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!(this.url&&!this.manifest||this.previewUrl&&!this.previewImageError&&(!this.previewUrl||!this.previewImage))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){var e=this.assetViewerView.assetViewerItem.previewUrl;if(!e||this.previewImageError)return null;var t=d.parse(d.extract(e));return t.size="1600x1600",e.split("?")[0]+"?"+d.stringify(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return!1===this.presentation.hasOwnProperty("urls")?null:this.presentation.urls[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.config.TRANSLATIONS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modelUrl",{get:function(){return this.url.replace("manifest.json",this.manifest.model)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modelExtension",{get:function(){return this.manifest.model.split(".").pop().toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readMoreLinkHtml",{get:function(){return'<a href="'+this.config.THREEJS_HELP_CENTRE_LEARNMORE_URL+'" target="_blank">'+this.translations[i.TranslationKeys.ThreeJsReadMore]+"</a>"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is3dModelSupported",{get:function(){var e=this;return r.SUPPORTED_3D_MODELS.some((function(t){return t.extension===e.modelExtension}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWebglSupported",{get:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},enumerable:!0,configurable:!0}),e.prototype.load=function(){var e=this;return this.isLoading=!0,Promise.all([this.loadManifest(),this.loadPreviewImage()]).then((function(){e.isLoading=!1}))},e.prototype.loadManifest=function(){var e=this;return this.url?new Promise((function(t,n){var i=e.manifestXhr=new XMLHttpRequest;i.open("GET",e.url,!0),i.onload=function(){var r=i.status;if(200===r){try{e.manifest=JSON.parse(i.response)}catch(e){n(e)}t()}else n(r)},i.send()})):Promise.resolve()},e.prototype.loadPreviewImage=function(){var e=this;return this.previewUrl?new Promise((function(t){var n=e.previewImage=new Image;n.onload=function(){n.width&&n.height?(e.width=n.naturalWidth,e.height=n.naturalHeight,t()):t(),n.onload=null,n.onerror=null},n.onerror=function(i){e.previewImageError=!0,n.onload=null,n.onerror=null,t()},n.src=e.previewUrl})):Promise.resolve()},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){if(t.content=document.createElement("div"),t.content.className="sv-threejs-presentation-renderer",t.preview=new E(t.content,t.previewUrl),t.modelContainer=document.createElement("div"),t.modelContainer.className="sv-threejs-presentation-renderer__model-container",new E(t.modelContainer,t.previewUrl),t.buttonView=new m(t.content,t.translations),t.errorMessage=new y(t.content,t.translations),t.loadingIndicator=new w(t.modelContainer,t.translations),t.buttonExitFullscreen=new g(t.modelContainer),e.appendChild(t.content),t.url){if(!1===t.isWebglSupported)return new v(t.content,t.translations[i.TranslationKeys.ThreeJsWebglNotSupported].replace("{{webGl}}","<b>WebGL</b>").replace("{{readMoreLink}}",t.readMoreLinkHtml));if(!1===t.is3dModelSupported)return new v(t.content,t.translations[i.TranslationKeys.ThreeJsUnsupportedFile].replace("{{modelExtension}}","<b>."+t.modelExtension+"</b>").replace("{{readMoreLink}}",t.readMoreLinkHtml));t.addEventListeners(),t.buttonView.on()}}))},e.prototype.addEventListeners=function(){this.preview.onclick=this.onPreviewClick,this.buttonView.onclick=this.onButtonViewClick,this.loadingIndicator.onComplete=this.renderModel,this.buttonExitFullscreen.onclick=this.onButtonExitFullscreenClick,this.assetViewerView.eventBus.on(h.ViewerEventType.FocusChange,this.onAssetViewerViewFocusChange),this.assetViewerView.eventBus.on(h.ViewerEventType.FullscreenChange,this.onAssetViewerViewFullscreenChange)},e.prototype.removeEventListeners=function(){this.preview&&(this.preview.onclick=null),this.buttonView&&(this.buttonView.onclick=null),this.loadingIndicator&&(this.loadingIndicator.onComplete=null),this.buttonExitFullscreen&&(this.buttonExitFullscreen.onclick=null),this.assetViewerView.eventBus.off(h.ViewerEventType.FocusChange,this.onAssetViewerViewFocusChange),this.assetViewerView.eventBus.off(h.ViewerEventType.FullscreenChange,this.onAssetViewerViewFullscreenChange)},e.prototype.onPreviewClick=function(){this.viewModel()},e.prototype.onButtonViewClick=function(){this.viewModel()},e.prototype.onButtonExitFullscreenClick=function(){this.assetViewerView.eventBus.dispatch(new h.ViewerToggleFullscreenEvent)},e.prototype.onModelLoaderProgess=function(e){this.loadingIndicator.update(a.mapRange(e,0,100,25,100))},e.prototype.onModelLoaderLoaded=function(e){this.model=e},e.prototype.onModelLoaderError=function(e){this.loadingIndicator.off(),this.buttonView.on(),this.errorMessage.on(),this.destroyModel()},e.prototype.onAssetViewerViewFocusChange=function(e){this.loadingIndicator.off(),this.errorMessage.off(),this.buttonView.on(),this.destroyModel()},e.prototype.onAssetViewerViewFullscreenChange=function(e){!0!==this.isFullscreen||l.FullscreenHelper.isFullscreen()||(this.isFullscreen=null,this.loadingIndicator.off(),this.destroyModel(),this.buttonView.on(),this.assetViewerView.eventBus.dispatch(new h.ViewerStopViewing3dModelEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)})))},e.prototype.viewModel=function(){this.buttonView.off(),this.errorMessage.off(),this.loadingIndicator.on(25),!0===this.config.THREEJS_VIEW_FULLSCREEN?(this.config.container.parentNode.appendChild(this.modelContainer),l.FullscreenHelper.enterFullscreen(this.modelContainer),this.isFullscreen=!0,this.buttonExitFullscreen.on()):this.content.appendChild(this.modelContainer),this.loadDependencies(),this.assetViewerView.eventBus.dispatch(new h.ViewerStartLoading3dModelEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))},e.prototype.loadDependencies=function(){var e=this;this.loadDependenciesPromise=u.cancelable(c.DomHelper.loadScriptsInOrder([this.config.THREE_JS_DEPS[r.THREE_JS_DEPS_KEYS.THREE].src,this.config.THREE_JS_DEPS[r.THREE_JS_DEPS_KEYS.ORBIT_CONTROLS].src,this.config.THREE_JS_DEPS[r.THREE_JS_DEPS_KEYS.COLLADA_LOADER].src,this.config.THREE_JS_DEPS[r.THREE_JS_DEPS_KEYS.TGA_LOADER].src])),this.loadDependenciesPromise.then((function(){e.loadModel()}))},e.prototype.loadModel=function(){this.modelLoader=new o.ThreeJsDAELoader(this.config.THREEJS_CROSS_ORIGIN),this.modelLoader.onProgress=this.onModelLoaderProgess,this.modelLoader.onLoaded=this.onModelLoaderLoaded,this.modelLoader.onError=this.onModelLoaderError,this.modelLoader.load(this.modelUrl)},e.prototype.renderModel=function(){this.loadingIndicator.off(),this.modelRenderer=new s.ThreeJsModelRenderer(this.translations),this.modelRenderer.render(this.modelContainer,this.model,this.config.THREEJS_SCENE_BACKGROUND_COLOR),this.assetViewerView.eventBus.dispatch(new h.ViewerStartViewing3dModelEvent({assetViewerView:p.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))},e.prototype.destroyModel=function(){this.buttonExitFullscreen&&this.buttonExitFullscreen.off(),this.loadDependenciesPromise&&this.loadDependenciesPromise.cancel(),this.modelLoader&&(this.modelLoader.destroy(),this.modelLoader=null),this.modelRenderer&&(this.modelRenderer.destroy(),this.modelRenderer=null),this.modelContainer&&this.modelContainer.parentNode&&this.modelContainer.parentNode.removeChild(this.modelContainer)},e.prototype.resize=function(){this.modelRenderer&&this.modelRenderer.resize()},e.prototype.destroy=function(){this.removeEventListeners(),this.destroyModel(),this.manifestXhr&&(this.manifestXhr.abort(),this.manifestXhr=null),this.previewImage&&(this.previewImage.onload=null,this.previewImage.onerror=null,this.previewImage.src=r.TRANSPARENT_IMAGE_SRC,this.previewImage=null),this.buttonView&&this.buttonView.destroy(),this.errorMessage&&this.errorMessage.destroy(),this.buttonExitFullscreen&&this.buttonExitFullscreen.destroy(),this.loadingIndicator&&this.loadingIndicator.destroy(),this.loadDependenciesPromise&&this.loadDependenciesPromise.cancel(),this.container&&(this.container.innerHTML="",this.container=null)},e.prototype.destroyFinal=function(){this.destroy()},e}();t.ThreeJsPresentationRenderer=f;var v=function(e,t){this.htmlElement=null,this.className="sv-threejs-presentation-renderer__unsupported-message",this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.htmlElement.innerHTML='<div class="'+this.className+'__container">\n            <div class="'+this.className+'__content">\n                <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 0C229.2 0 0 229.2 0 512s229.2 512 512 512 512-229.2 512-512S794.8 0 512 0zm-3 184.5c19.9 0 36 16.1 36 36s-16.1 36-36 36-36-16.1-36-36 16.1-36 36-36zm157.2 557.1c0 19.9-16.1 36-36 36H387.8c-19.9 0-36-16.1-36-36s16.1-36 36-36H473V391.5h-60c-19.9 0-36-16.1-36-36s16.1-36 36-36h96c19.9 0 36 16.1 36 36v350.1h85.2c19.9 0 36 16.1 36 36z"/></svg>'+t+"\n            </div>\n        </div>",e.appendChild(this.htmlElement)};t.ThreeJsPresentationRendererUnsupportedMessage=v;var m=function(){function e(e,t){this.translations=t,this.container=null,this.htmlElement=null,this.className="sv-threejs-presentation-renderer__button-view",this.isOn=!1,this.container=e,this.translations=t}return e.prototype.on=function(){var e=this;this.isOn||(this.isOn=!0,this.htmlElement=document.createElement("button"),this.htmlElement.className=this.className,this.htmlElement.onclick=function(){e.onclick()},this.htmlElement.innerHTML='<div class="'+this.className+'__container"><svg width="20" height="12" xmlns="http://www.w3.org/2000/svg"><path d="M12 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm8 0c0 .79-.43.97-1.903 2.38C15.36 11 13.014 11.994 10 12c-3.014-.006-5.361-1-8.097-3.62C.43 6.97 0 6.79 0 6c0-.79.43-.97 1.903-2.38C4.64 1 6.986.006 10 0c3.014.006 5.361 1 8.097 3.62C19.57 5.03 20 5.21 20 6zm-6 .5C14 4.015 12.21 2 10 2S6 4.015 6 6.5 7.79 11 10 11s4-2.015 4-4.5z" fill="#4D4D4D" fill-rule="evenodd"/></svg><span>'+this.translations[i.TranslationKeys.ThreeJsViewIn3d]+"</span></div>",this.container.appendChild(this.htmlElement))},e.prototype.off=function(){this.isOn&&(this.isOn=!1,this.htmlElement.parentNode.removeChild(this.htmlElement))},e.prototype.destroy=function(){this.off()},e}();t.ThreeJsPresentationRendererButtonView=m;var g=function(){function e(e){this.container=null,this.htmlElement=null,this.className="sv-threejs-presentation-renderer__button-exit-fullscreen",this.isOn=!1,this.container=e}return e.prototype.on=function(){var e=this;this.isOn||(this.isOn=!0,this.htmlElement=document.createElement("button"),this.htmlElement.className=this.className,this.htmlElement.onclick=function(){e.onclick()},this.htmlElement.innerHTML='<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill="#BFBFBF" d="M10.361 7.985l5.173 5.355-2.639 2.629-5.128-5.302L2.64 15.97 0 13.34l5.173-5.355L0 2.637 2.648 0l5.12 5.3L12.885 0l2.648 2.637z"/></g></svg>',this.container.appendChild(this.htmlElement))},e.prototype.off=function(){this.isOn&&(this.isOn=!1,this.htmlElement.parentNode.removeChild(this.htmlElement))},e.prototype.destroy=function(){this.off()},e}();t.ThreeJsPresentationRendererButtonExitFullscreen=g;var w=function(){function e(e,t,n,i){void 0===n&&(n=26),void 0===i&&(i=4),this.translations=t,this.container=null,this.htmlElement=null,this.className="sv-threejs-presentation-renderer__loading-indicator",this.size=null,this.strokeWidth=null,this.radius=null,this.dashArray=null,this.percent=null,this.percentLinear=null,this.isOn=!1,this.requestAnimationFrameId=null,this.onComplete=null,this.container=e,this.translations=t,this.size=n,this.strokeWidth=i,this.radius=this.size/2-this.strokeWidth/2,this.dashArray=2*Math.PI*this.radius,this.render=this.render.bind(this)}return e.prototype.on=function(e){void 0===e&&(e=0),this.isOn||(this.isOn=!0,this.percent=this.percentLinear=e,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.htmlElement.innerHTML='<div class="'+this.className+'__content">\n            <svg data-scope="progress"\n              width="'+this.size+'"\n              height="'+this.size+'"\n              viewBox="0 0 '+this.size+" "+this.size+'">\n              <circle\n                cx="'+this.size/2+'"\n                cy="'+this.size/2+'"\n                r="'+this.radius+'"\n                fill="none"\n                stroke="#5f6061"\n                stroke-width="'+this.strokeWidth+'"\n              />\n              <circle\n                data-scope="progressValue"\n                cx="'+this.size/2+'"\n                cy="'+this.size/2+'"\n                r="'+this.radius+'"\n                fill="none"\n                stroke="#00bb8b"\n                stroke-width="'+this.strokeWidth+'"\n                stroke-dasharray="'+this.dashArray+'"\n                stroke-dashoffset="'+this.dashArray+'"\n              />\n            </svg>\n            <span>'+this.translations[i.TranslationKeys.ThreeJsLoadingModel]+"</span>\n          </div>",this.container.appendChild(this.htmlElement),this.render())},e.prototype.update=function(e){void 0===e&&(e=null),this.percent=e},e.prototype.render=function(){this.requestAnimationFrameId=requestAnimationFrame(this.render),this.percentLinear<this.percent&&(this.percentLinear=Math.min(this.percentLinear+1,this.percent));var e=a.mapRange(this.percentLinear,0,100,this.dashArray,0);this.htmlElement.querySelector("[data-scope='progressValue']").style.strokeDashoffset=String(e),100===this.percentLinear&&(cancelAnimationFrame(this.requestAnimationFrameId),this.onComplete())},e.prototype.off=function(){this.isOn&&(this.isOn=!1,cancelAnimationFrame(this.requestAnimationFrameId),this.htmlElement.parentNode.removeChild(this.htmlElement))},e.prototype.destroy=function(){this.off()},e}();t.ThreeJsPresentationRendererLoadingIndicator=w;var y=function(){function e(e,t){this.translations=t,this.container=null,this.htmlElement=null,this.className="sv-threejs-presentation-renderer__error-message",this.isOn=!1,this.container=e,this.translations=t}return e.prototype.on=function(){var e=this;this.isOn||(this.isOn=!0,this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,this.container.appendChild(this.htmlElement),this.htmlElement.innerHTML='<div class="'+this.className+'__anchor" data-scope="anchor">\n        </div><div class="'+this.className+'__container">\n          <div class="'+this.className+'__content">\n          <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 0C229.2 0 0 229.2 0 512s229.2 512 512 512 512-229.2 512-512S794.8 0 512 0zm-40 231c0-22.1 17.9-40 40-40s40 17.9 40 40v369c0 22.1-17.9 40-40 40s-40-17.9-40-40V231zm40 563c-24.9 0-45-20.1-45-45s20.1-45 45-45 45 20.1 45 45c0 24.8-20.1 45-45 45z"></path></svg>\n  <button class="close" data-scope="buttonClose"><svg class="close" width="8" height="8" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path fill="none" d="M0 0h8v8H0z"/><path fill="#000" d="M5.306 3.993L7.893 6.67l-1.32 1.314-2.564-2.65-2.564 2.65L.125 6.67l2.587-2.677L.125 1.319 1.449 0l2.56 2.65L6.569 0l1.324 1.319z"/></g></svg></button>\n          <span>'+this.translations[i.TranslationKeys.ThreeJsRenderErrorTitle]+"</span>\n          <p>"+this.translations[i.TranslationKeys.ThreeJsRenderErrorBody]+"</p>\n          </div>\n        </div>",this.container.appendChild(this.htmlElement),this.htmlElement.querySelector("[data-scope='buttonClose']").onclick=function(){e.off()},this.htmlElement.querySelector("[data-scope='anchor']").scrollIntoView())},e.prototype.off=function(){this.isOn&&(this.isOn=!1,this.htmlElement.parentNode.removeChild(this.htmlElement))},e.prototype.destroy=function(){this.off()},e}();t.ThreeJsPresentationRendererErrorMessage=y;var E=function(e,t){var n=this;void 0===t&&(t=null),this.htmlElement=null,this.className="sv-threejs-presentation-renderer__preview",this.htmlElement=document.createElement("div"),this.htmlElement.className=this.className,t&&(this.htmlElement.style.backgroundImage="url('"+t+"')",this.htmlElement.style.backgroundSize="contain"),e.appendChild(this.htmlElement),this.htmlElement.onclick=function(){n.onclick&&n.onclick()}};t.ThreeJsPresentationRendererPreview=E},3293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4970),r=function(){function e(e){this.assetViewerView=e,this.image=null,this.isLoading=!1,this.isActive=!1,this.defaultThumb=this.assetViewerView.defaultThumb}return Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return{width:400,height:300}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.assetViewerView.assetViewerItem.downloadUrl},enumerable:!0,configurable:!0}),e.prototype.load=function(){return Promise.resolve()},e.prototype.render=function(e){var t=this;return Promise.resolve().then((function(){e.innerHTML="";var n=document.createElement("div"),r=t.defaultThumb;-1!==r.indexOf("raw.svg")&&(r=t.assetViewerView.config.DEFAULT_THUMB_BASE_PATH+i.getDefaultThumb("document",null)),n.style.width="100%",n.style.height="100%",n.style.backgroundImage="url("+r+")",n.style.backgroundSize="40%",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",e.appendChild(n)}))},e.prototype.destroy=function(){},e.prototype.destroyFinal=function(){},e}();t.ThumbnailErrorPresentationRenderer=r},5325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4695),r=n(2299),o=n(1176),s=n(7488),a=n(2255),c=n(3149),l=n(6949),u=n(8727),d=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.hasMetaData=!0,this.isLoading=!1,this.isActive=!1,this.height=null,this.container=null,this.containerContent=null,this.isFullscreen=!1}return Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.config.TRANSLATIONS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){var e=this.checkUrl(this.presentation);return!e||e&&0===e.toLowerCase().indexOf("javascript")?r.NO_URL:/^(.*:\/\/)/.test(e)||0===e.toLowerCase().indexOf("mailto:")?s.interpolateUrlVariables(e,this.config):"http://"+s.interpolateUrlVariables(e,this.config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){return this.assetViewerView.assetViewerItem.previewUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){var e=this.assetViewerView.assetViewerItem.displayName.split(".url");return 2===e.length&&""===e[1]?e[0]:this.assetViewerView.assetViewerItem.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){if(!this.height)return null;var e=this.assetViewerView.config,t=e.VIEW_PADDING_TOP+e.VIEW_PADDING_BOTTOM+2*e.VIEW_BORDER;return{width:Math.min(e.MAX_CONTENT_WIDTH,this.assetViewerView.viewerLayout.viewportWidth-t),height:this.height}},enumerable:!0,configurable:!0}),e.prototype.checkUrl=function(e){return e.url?e.url:e.urls?e.urls[0]:null},e.prototype.load=function(){return Promise.resolve()},e.prototype.renderActionBar=function(e,t){this.actionBar=new l.FullscreenActionBar(this.assetViewerView.config,this.assetViewerView.eventBus,this.assetViewerView),this.actionBar.render(e,t)},e.prototype.renderIframe=function(){var e=this;this.isLoading=!0;var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.webkitOverflowScrolling="touch",t.style.background="black",(c.browser.ios||c.browser.safari&&"ontouchstart"in window)&&(t.style.overflow="auto"),t.classList.add("iframe-wrapper");var n=this.iframe=document.createElement("iframe");n.classList.add("av-webapp-iframe"),t.appendChild(n),n.scrolling="yes",n.onload=function(){this.isLoading=!1,this.width=400,this.height=300,n.onload=null,n.onerror=null}.bind(this),n.onerror=function(e){this.isLoading=!1,n.onload=null,n.onerror=null,this.iframe=null}.bind(this),n.src=this.url,this.assetViewerView.config.container.parentNode.appendChild(t),this.newWindow=t,this.iframe.src=this.url,this.renderActionBar(t,n),a.FullscreenHelper.isFullscreen()||a.FullscreenHelper.enterFullscreen(t),this.isFullscreen=!0,this.assetViewerView.eventBus.on(u.ViewerEventType.FullscreenChange,(function(){!0!==e.isFullscreen||a.FullscreenHelper.isFullscreen()||(t.style.display="none",e.isFullscreen=null,e.assetViewerView.eventBus.dispatch(new u.ViewerWebappCloseEvent({assetViewerItem:e.assetViewerView.assetViewerItem})))}))},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){var n=document.createElement("div");t.containerContent=n,n.classList.add("renderer-url");var s=document.createElement("a");s.classList.add("link"),t.url!==r.NO_URL&&(s.href=t.url,o.ShowpadLinkHelper.isShowpadLink(t.url)?s.onclick=function(){"undefined"!=typeof window&&window.ShowpadLib||o.ShowpadLinkHelper.handleShowpadAssetLink({target:s.target,uri:s.href})}:s.onclick=function(e){e.preventDefault(),t.newWindow?(t.newWindow.style.display="block",a.FullscreenHelper.enterFullscreen(t.newWindow),t.isFullscreen=!0):t.renderIframe(),t.assetViewerView.eventBus.dispatch(new u.ViewerWebappOpenEvent({assetViewerItem:t.assetViewerView.assetViewerItem}))});var c=document.createElement("div");c.classList.add("info-wrapper");var l=document.createElement("div");l.classList.add("info");var d=document.createElement("div");d.classList.add("name"),d.innerText=t.name,l.appendChild(d);var h=document.createElement("div");h.classList.add("link-preview-wrapper");var p=document.createElement("div");if(p.classList.add("link-preview"),p.innerHTML='<img src="'+t.previewUrl+'" alt="'+t.translations[i.TranslationKeys.PreviewImage]+'"/>',t.assetViewerView.assetViewerItem.assetDescription){var f=document.createElement("div");f.classList.add("link-description"),f.innerText=t.assetViewerView.assetViewerItem.assetDescription,l.appendChild(f)}s.innerHTML=" "+t.translations[i.TranslationKeys.VisitUrl],l.appendChild(s),e.appendChild(n),h.appendChild(p),c.appendChild(h),c.appendChild(l),n.appendChild(c),t.container.appendChild(n),t.height=t.containerContent.offsetHeight}))},e.prototype.resize=function(){this.height&&this.containerContent&&(this.height=this.containerContent.offsetHeight)},e.prototype.destroy=function(){this.iframe=null,this.container&&(this.container.innerHTML="",this.container=null)},e.prototype.destroyFinal=function(){this.destroy()},e}();t.UrlIframePresentationRenderer=d},3942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2299),r=n(4695),o=n(1176),s=n(7488),a=n(8727),c=n(7679),l=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.hasMetaData=!0,this.isLoading=!1,this.isActive=!1,this.height=null,this.container=null,this.containerContent=null}return Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.config.TRANSLATIONS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){var e=this.checkUrl(this.presentation);return!e||e&&0===e.toLowerCase().indexOf("javascript")?i.NO_URL:/^(.*:\/\/)/.test(e)||0===e.toLowerCase().indexOf("mailto:")?s.interpolateUrlVariables(e,this.config):"http://"+s.interpolateUrlVariables(e,this.config)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){return this.assetViewerView.assetViewerItem.previewUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){var e=this.assetViewerView.assetViewerItem.displayName.split(".url");return 2===e.length&&""===e[1]?e[0]:this.assetViewerView.assetViewerItem.displayName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){if(!this.height)return null;var e=this.assetViewerView.config,t=e.VIEW_PADDING_TOP+e.VIEW_PADDING_BOTTOM+2*e.VIEW_BORDER;return{width:Math.min(e.MAX_CONTENT_WIDTH,this.assetViewerView.viewerLayout.viewportWidth-t),height:this.height}},enumerable:!0,configurable:!0}),e.prototype.checkUrl=function(e){return e.url?e.url:e.urls?e.urls[0]:null},e.prototype.load=function(){return Promise.resolve()},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){var n=document.createElement("div");t.containerContent=n,n.classList.add("renderer-url");var s=document.createElement("a");s.classList.add("link"),t.url!==i.NO_URL&&(s.href=t.url,o.ShowpadLinkHelper.isShowpadLink(t.url)?s.onclick=function(){"undefined"!=typeof window&&window.ShowpadLib||o.ShowpadLinkHelper.handleShowpadAssetLink({target:s.target,uri:s.href})}:(s.target="_blank",s.rel="noopener noreferrer",s.onclick=function(){t.assetViewerView.eventBus.dispatch(new a.ViewerUrlAssetClickedEvent({assetViewerView:c.AssetViewerViewMapper.mapToPublicAssetViewerView(t.assetViewerView)}))}));var l=document.createElement("div");l.classList.add("info-wrapper");var u=document.createElement("div");u.classList.add("info");var d=document.createElement("div");d.classList.add("name"),d.innerText=t.name,u.appendChild(d);var h=document.createElement("div");h.classList.add("link-preview-wrapper");var p=document.createElement("div");if(p.classList.add("link-preview"),p.innerHTML='<img src="'+t.previewUrl+'" alt="'+t.translations[r.TranslationKeys.PreviewImage]+'"/>',t.assetViewerView.assetViewerItem.assetDescription){var f=document.createElement("div");f.classList.add("link-description"),f.innerText=t.assetViewerView.assetViewerItem.assetDescription,u.appendChild(f)}s.innerHTML=" "+t.translations[r.TranslationKeys.VisitUrl],u.appendChild(s),e.appendChild(n),h.appendChild(p),l.appendChild(h),l.appendChild(u),n.appendChild(l),t.container.appendChild(n),t.height=t.containerContent.offsetHeight}))},e.prototype.resize=function(){this.height&&this.containerContent&&(this.height=this.containerContent.offsetHeight)},e.prototype.destroy=function(){this.container&&(this.container.innerHTML="",this.container=null)},e.prototype.destroyFinal=function(){this.destroy()},e}();t.UrlPresentationRenderer=l},2466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(156),r=n(2062),o=n(2299),s=n(2299),a=n(2187),c=n(64),l=n(3885),u=n(8727),d=n(7679),h=n(7570),p=function(){function e(e,t){this.assetViewerView=e,this.presentation=t,this.container=null,this.image=null,this.video=null,this.isActive=!1,this.isLoading=!1,this.hasError=!1,this.loadDependenciesPromise=null}return Object.defineProperty(e.prototype,"url",{get:function(){var e=this.presentation.details&&this.presentation.details.firstPageIndex||0;return this.presentation.urls[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.width&&this.height?{width:this.width,height:this.height}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMetaData",{get:function(){return!(!this.video&&!0!==this.hasError)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.assetViewerView.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoplay",{get:function(){return this.assetViewerView.viewerLayout.currentView===this.assetViewerView&&this.assetViewerView.config.VIEWER_LAYOUT===o.LAYOUT.HORIZONTAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPosterImage",{get:function(){return!0===this.config.VIDEO_POSTER_IMAGE_ENABLED&&this.assetViewerView.assetViewerItem.previewUrl&&!this.autoplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width?this._width:this.presentation.details&&this.presentation.details.dimensions&&this.presentation.details.dimensions.width?this.presentation.details.dimensions.width:this.video&&this.video.videoWidth?this.video.videoWidth:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height?this._height:this.presentation.details&&this.presentation.details.dimensions&&this.presentation.details.dimensions.height?this.presentation.details.dimensions.height:this.video&&this.video.videoHeight?this.video.videoHeight:null},enumerable:!0,configurable:!0}),e.prototype.load=function(){var e=this;return this.isLoading=!0,this.video=document.createElement("video"),this.addEventListeners(),this.showPosterImage?this.loadPoster().then((function(){return e.loadVideo()})):this.loadVideo()},e.prototype.loadPoster=function(){var e=this,t=i.PromiseHelper.defer(),n=h.replaceParam("size","1600x1600",this.assetViewerView.assetViewerItem.previewUrl);return this.image=new Image,this.image.onload=function(){t.resolve()},this.video.onerror=function(){e.video.poster="",t.resolve()},this.image.src=this.video.poster=n,t.promise},e.prototype.loadVideo=function(){var e=this,t=i.PromiseHelper.defer();return this.presentation.type===s.PRESENTATION_TYPE.MANIFEST?(this.loadDependenciesPromise=l.cancelable(a.DomHelper.loadScriptsInOrder([this.config.HLS_JS_PATH])),this.loadDependenciesPromise.then((function(){var t=window.Hls,n=e.hls=new t(o.HLS_JS_CONFIG),i=function(t){var n=t.levels.filter((function(e){return e.width&&e.height})).sort((function(e,t){return e.width-t.width||e.height-t.height})).slice(-1)[0];e._width=n.width,e._height=n.height};c.HlsHelper.canPlayHlsNatively()?(n.on(t.Events.MANIFEST_LOADED,(function(t,r){i(r),n.destroy(),e.video.src=e.url})),n.loadSource(e.url)):(n.on(t.Events.MEDIA_ATTACHED,(function(){n.loadSource(e.url)})),n.on(t.Events.MANIFEST_PARSED,(function(e,t){i(t)})),n.attachMedia(e.video))}))):this.presentation.type===s.PRESENTATION_TYPE.PROCESSED?(this.video.src=this.url,this.video.type="video/mp4"):this.video.src=this.url,this.video.onloadedmetadata=function(){this.isLoading=!1,this.video.onloadedmetadata=null,t.resolve({width:this.width,height:this.height})}.bind(this),this.video.oncanplay=function(){this.video&&(this.autoplay&&this.video.play(),this.video.onerror=null,this.video.oncanplay=null)}.bind(this),this.video.onerror=function(e){this.isLoading=!1,this.hasError=!0,this.video.onerror=null,this.video.oncanplay=null,this.video=null,t.reject(e),this.isActive&&(this.assetViewerView.eventBus.dispatch(new u.ViewerPlaybackEndEvent({assetViewerView:d.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)})),this.isActive=!1)}.bind(this),this.video.onplay=function(){this.isActive=!0,this.assetViewerView.eventBus.dispatch(new u.ViewerPlaybackStartEvent({assetViewerView:d.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))}.bind(this),this.video.onended=function(){this.isActive=!1,this.assetViewerView.eventBus.dispatch(new u.ViewerPlaybackEndEvent({assetViewerView:d.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))}.bind(this),this.video.onpause=function(){this.assetViewerView.eventBus.dispatch(new u.ViewerPlaybackPauseEvent({assetViewerView:d.AssetViewerViewMapper.mapToPublicAssetViewerView(this.assetViewerView)}))}.bind(this),this.video.controls=!0,this.video.playsinline=!0,this.video.setAttribute("controlsList","nodownload"),this.video.title=this.assetViewerView.assetViewerItem.displayName,this.video.style.width="100%",this.video.style.height="100%",t.promise},e.prototype.render=function(e){var t=this;return this.container=e,Promise.resolve().then((function(){return e.appendChild(t.video)}))},e.prototype.destroy=function(){this.container&&(this.container.innerHTML="",this.container=null),this.loadDependenciesPromise&&this.loadDependenciesPromise.cancel(),this.hls&&this.hls.destroy(),this.image&&(this.image.onload=null,this.image.src="",this.image=null),this.video&&(this.video.pause(),this.video.onloadedmetadata=null,this.video.oncanplay=null,this.video.onerror=null,this.video.onplay=null,this.video.onended=null,this.video.onpause=null,this.video.src="",this.video.poster="",this.video=null)},e.prototype.destroyFinal=function(){this.destroy()},e.prototype.addEventListeners=function(){this.video.addEventListener("webkitbeginfullscreen",this.onWebkitBeginFullscreen.bind(this)),this.video.addEventListener("webkitendfullscreen",this.onWebkitEndFullscreen.bind(this)),!1===this.assetViewerView.assetViewerItem.isDownloadable&&this.video.addEventListener("contextmenu",(function(e){return e.preventDefault()}))},e.prototype.onWebkitBeginFullscreen=function(e){r.FullscreenHelper.setWebkitBeginFullscreen(this.video),document.body.classList.add("webkit-full-screen")},e.prototype.onWebkitEndFullscreen=function(e){r.FullscreenHelper.setWebkitEndFullscreen(),document.body.classList.remove("webkit-full-screen")},e}();t.VideoPresentationRenderer=p},9717:function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2299),o=n(8219),s=n(4970),a=n(3650),c=n(3284),l=n(7917),u=n(3293),d=n(3729),h=n(5786),p=n(261),f=n(1232),v=n(9290),m=n(3942),g=n(5325),w=n(8671),y=n(9738),E=n(8727),b=n(7679),P=n(5537),_=n(4496).Z,T="loading-long",S=function(){function e(e,t,n,i,r,o,s,c,l,u){this.config=e,this.eventBus=t,this.viewerLayout=n,this.assetViewerItem=i,this.tokenService=r,this.pdfJsLinkService=o,this.id=s,this.page=c,this.annotations=l,this.pdfJsPagePreviewService=u,this._renderState=y.RenderState.Initial,this.previewRenderState=y.RenderState.Initial,this.annotationHelper=null,this.groupId=null,this.showLoaderTimeout=null,this.isExpanded=!1,this.hasBeenDestroyed=!1,this.viewState={percent:0,pixels:0},this.isSelected=!1,this._contentElement=null,this._contentWrapper=null,this._container=null,this._checkbox=null,this._styledCheckbox=null,this._checkboxInput=null,this._presentInOfficeOnlineBar=null,this.presentationRenderers=a.PresentationHelper.createPresentationRenderers(e.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP,this,this.pdfJsLinkService,this.pdfJsPagePreviewService),this.presentationRenderer=this.presentationRenderers&&this.presentationRenderers.length?this.presentationRenderers[0]:this.errorPresentation,this.render=this.render.bind(this),this.renderPreview=this.renderPreview.bind(this),this.isWindowsDesktopApp=e.IS_WINDOWS_DESKTOP_APP}return Object.defineProperty(e.prototype,"renderState",{get:function(){return this._renderState},set:function(e){this._renderState=e,this.eventBus.dispatch(new E.ViewerUpdateEvent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorPresentation",{get:function(){var e=this.presentationRenderers.find((function(e){return!!e.lowQualityPreviewUrl})),t=e&&e.lowQualityPreviewUrl,n=e&&e.dimensions;return new c.ErrorPresentationRenderer(this,t,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.presentationRenderer.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this.presentationRenderer.isLoading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLoad",{get:function(){return!this.presentationRenderer.hasMetaData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.presentationRenderer.hasMetaData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dimensions",{get:function(){return this.presentationRenderer.dimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this.presentationRenderer.isActive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canBeDestroyed",{get:function(){return this.presentationRenderer.assetViewer instanceof w.AssetViewer?this.presentationRenderer.assetViewer.viewer.views.every((function(e){return e.canBeDestroyed})):!this.isActive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultThumb",{get:function(){return this.config.DEFAULT_THUMB_BASE_PATH+s.getDefaultThumb(this.assetViewerItem.type,this.assetViewerItem.extension)},enumerable:!0,configurable:!0}),e.prototype.removeOnRenderEventListeners=function(){},e.prototype.load=function(){var e=this;return this.setLoaderTimeout(),this.presentationRenderer.load().then((function(e){return e}),(function(t){return e.onPresentationError(t)}))},Object.defineProperty(e.prototype,"contentElement",{get:function(){return this._contentElement=this._contentElement||this.viewerLayout.createContentContainer(this),!this.presentationRenderer||this.presentationRenderer.assetViewer||this.presentationRenderer instanceof P.PdfViewerPresentationRenderer||this.assetViewerItem.type!==r.ASSET_TYPE.DOCUMENT||(this._contentElement.style.background="white"),this._contentElement},set:function(e){this._contentElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWrapper",{get:function(){return this._contentWrapper=this._contentWrapper||this.viewerLayout.createContentWrapper(),this._contentWrapper},set:function(e){this._contentWrapper=e},enumerable:!0,configurable:!0}),e.prototype.createPresentInOfficeOnlineBar=function(){var e=this,t=o.createPresentInOfficeOnlineBar(this.assetViewerItem.extension,this.config),n=t.querySelector("a");return n&&(n.onclick=function(t){t.preventDefault(),e.eventBus.dispatch(new E.ViewerOpenInOfficeOnlineEvent({assetViewerItem:e.assetViewerItem}))}),t},Object.defineProperty(e.prototype,"presentInOfficeOnlineBar",{get:function(){return this._presentInOfficeOnlineBar=this._presentInOfficeOnlineBar||this.createPresentInOfficeOnlineBar(),this._presentInOfficeOnlineBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkbox",{get:function(){return this._checkbox=this._checkbox||this.viewerLayout.createCheckbox(),this._checkbox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styledCheckbox",{get:function(){return this._styledCheckbox=this._styledCheckbox||this.viewerLayout.createStyledCheckbox(),this._styledCheckbox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkboxInput",{get:function(){return this._checkboxInput=this._checkboxInput||this.viewerLayout.createCheckboxInput(),this._checkboxInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container=this._container||this.viewerLayout.createContainer(),this._container},set:function(e){this._container=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canLazilyAppendView",{get:function(){return!(this.presentationRenderer instanceof h.SvgPresentationRenderer&&this.config.SVG_EMBED_STRATEGY===r.SVG_EMBED_STRATEGY.IFRAME_INNERHTML)&&!(this.presentationRenderer instanceof h.SvgPresentationRenderer&&this.config.SVG_EMBED_STRATEGY===r.SVG_EMBED_STRATEGY.IFRAME_INNERHTML||this.presentationRenderer instanceof p.AssetViewerPresentationRenderer||this.presentationRenderer instanceof f.PdfJsPresentationRenderer||this.presentationRenderer instanceof m.UrlPresentationRenderer||this.presentationRenderer instanceof g.UrlIframePresentationRenderer)&&this.viewerLayout instanceof d.LayoutHorizontal},enumerable:!0,configurable:!0}),e.prototype.renderPreview=function(){var e=this;return this.previewRenderState=y.RenderState.Running,this.hideLoader(),"function"==typeof this.presentationRenderer.renderPreview?this.tokenService.ensureToken().then((function(){return e.presentationRenderer.renderPreview(e.contentElement)})).then((function(){e.previewRenderState=y.RenderState.Finished}),(function(t){if(t&&401===t.status&&"function"==typeof e.config.refreshToken)return e.tokenService.refreshToken().then((function(){return e.renderPreview()}));throw t})):(this.previewRenderState=y.RenderState.Finished,Promise.resolve())},e.prototype.render=function(){var e=this;return this.renderState=y.RenderState.Running,this.setLoaderTimeout(),this.canLazilyAppendView||(this.contentWrapper.appendChild(this.contentElement),this.container.appendChild(this.contentWrapper),this.viewerLayout.renderViewContainer(this)),this.tokenService.ensureToken().then((function(){return e.presentationRenderer.render(e.contentElement,e.slideWidth,e.slideHeight)})).then((function(){return e.onRender()}),(function(t){return e.onPresentationError(t)}))},e.prototype.onRender=function(){this.renderState=y.RenderState.Finished,this.contentElement.classList.remove("loading",T),this.contentElement.style.backgroundImage="none",this.canLazilyAppendView&&(this.contentWrapper.appendChild(this.contentElement),this.container.appendChild(this.contentWrapper),this.viewerLayout.renderViewContainer(this)),this.hideLoader(),this.shouldRenderAnnotations&&this.renderAnnotations(),this.eventBus.dispatch(new E.ViewerViewRenderedEvent({assetViewerView:b.AssetViewerViewMapper.mapToPublicAssetViewerView(this)}))},e.prototype.onPreviewError=function(e){console.error("PREVIEW ERROR",e),this.previewRenderState=y.RenderState.Failed},e.prototype.onPresentationError=function(e){if(e&&401===e.status&&"function"==typeof this.config.refreshToken)throw this.tokenService.refreshToken(),this.renderState=y.RenderState.Initial,"function"==typeof this.presentationRenderer.resetPdf&&this.presentationRenderer.resetPdf(),this.previewRenderState===y.RenderState.Failed&&("function"==typeof this.presentationRenderer.resetPreview&&this.presentationRenderer.resetPreview(),this.previewRenderState=y.RenderState.Initial),e;this.setFallbackPresentation(e)},e.prototype.cancel=function(){"function"==typeof this.presentationRenderer.cancel&&(this.renderState=y.RenderState.Initial,this.presentationRenderer.cancel())},e.prototype.destroy=function(){this.config.DEBUG&&console.log("destroy",this.viewerLayout.views.indexOf(this)),this.removeOnRenderEventListeners(),this.annotationsLayer=null,this.presentationRenderer.destroy(),this.reset(),this.hasBeenDestroyed=!0},e.prototype.destroyFinal=function(){this.removeOnRenderEventListeners(),this.container=null,this.contentWrapper=null,this.contentElement=null,this.annotationsLayer=null,this.presentationRenderer.destroyFinal()},e.prototype.reset=function(){this.renderState=y.RenderState.Initial,"function"==typeof this.presentationRenderer.reset&&this.presentationRenderer.reset()},e.prototype.resize=function(){this.presentationRenderer&&this.presentationRenderer.assetViewer&&this.presentationRenderer.assetViewer.resize(),this.resizeAnnotations(),(this.presentationRenderer instanceof v.ThreeJsPresentationRenderer||this.presentationRenderer instanceof f.PdfJsPresentationRenderer||this.presentationRenderer instanceof P.PdfViewerPresentationRenderer)&&this.presentationRenderer.resize(),(this.presentationRenderer instanceof m.UrlPresentationRenderer||this.presentationRenderer instanceof g.UrlIframePresentationRenderer||this.presentationRenderer instanceof l.ObservableDimensionsIframePresentationRenderer)&&(this.presentationRenderer.resize(),this.viewerLayout.update())},Object.defineProperty(e.prototype,"shouldRenderAnnotations",{get:function(){var e=this.annotations&&this.annotations.length,t=this.renderState===y.RenderState.Finished||this.previewRenderState===y.RenderState.Finished,n=this.presentationRenderer instanceof c.ErrorPresentationRenderer||this.presentationRenderer instanceof u.ThumbnailErrorPresentationRenderer,i=this.assetViewerItem.type===r.ASSET_TYPE.DOCUMENT,o=this.presentationRenderer instanceof p.AssetViewerPresentationRenderer||this.presentationRenderer instanceof P.PdfViewerPresentationRenderer,s=this.annotationsLayer&&this.annotationsLayer.children;return!n&&i&&t&&e&&!o&&!s},enumerable:!0,configurable:!0}),e.prototype.getAnnotationHelper=function(){return this.annotationHelper||this.renderAnnotations(),this.annotationHelper},e.prototype.didAnnotationsChange=function(){return!!this.annotationHelper&&this.annotationHelper.didAnnotationsChange()},e.prototype.getAnnotations=function(){var e=this.annotations||[];return this.annotationHelper&&(e=this.annotationHelper.getData()),0===e.length&&(e=null),e},e.prototype.renderAnnotations=function(){var t=this.slideWidth/this.dimensions.width;this.annotationsLayer||(this.annotationsLayer=e.createAnnotationsLayer(),this.contentElement.appendChild(this.annotationsLayer)),this.annotationsLayer.innerHTML="";try{var n=this.annotations||[];this.annotationHelper=new _(this.annotationsLayer,{meta:{},data:i(n)},{create:this.config.CAN_CREATE_ANNOTATIONS,creatorZoom:t,append:!0}),this.annotationHelper.creator&&this.annotationHelper.creator.setIsEnabled(!1)}catch(e){console.error(e)}},e.prototype.enableAnnotations=function(){this.annotationsLayer&&this.annotationsLayer.classList.add("annotations-layer--enabled")},e.prototype.disableAnnotations=function(){this.annotationsLayer&&this.annotationsLayer.classList.remove("annotations-layer--enabled")},e.prototype.resizeAnnotations=function(){this.annotationHelper&&this.annotationHelper.resize(this.currentScale)},e.prototype.resetAnnotations=function(){this.presentationRenderer.assetViewer&&this.presentationRenderer.assetViewer.resetAnnotations(),this.presentationRenderer.pdfViewer&&this.presentationRenderer.pdfViewer.resetAnnotations(),this.annotationHelper&&this.annotationHelper.reset()},e.prototype.setLoaderTimeout=function(){var e=this;this.config.SHOW_VIEW_LOADER&&!this.showLoaderTimeout&&(this.showLoaderTimeout=setTimeout((function(){return e.showLoader()}),this.config.SHOW_VIEW_LOADER_TIMEOUT))},e.prototype.clearLoaderTimeout=function(){clearTimeout(this.showLoaderTimeout),this.showLoaderTimeout=null},e.prototype.showLoader=function(){var t=this;this.showLoaderTimeout&&requestAnimationFrame((function(){t.contentElement.classList.add(T),t.loader=e.renderLoader(),t.contentElement.appendChild(t.loader)}))},e.prototype.hideLoader=function(){var e=this;this.clearLoaderTimeout(),requestAnimationFrame((function(){e.loader&&e.contentElement.contains(e.loader)&&e.contentElement.removeChild(e.loader)}))},e.prototype.setFallbackPresentation=function(e){console.warn("Setting fallback presentation",e,this),this.renderState=y.RenderState.Initial;var t=this.presentationRenderers.indexOf(this.presentationRenderer),n=this.presentationRenderers&&this.presentationRenderers[t+1];this.presentationRenderer=n||this.errorPresentation},e.prototype.download=function(){this.assetViewerItem.download(),this.eventBus.dispatch(new E.ViewerDownloadAssetEvent({assetViewerItem:this.assetViewerItem}))},e.prototype.selectView=function(){!1===this.isSelected&&(this.isSelected=!0,this.eventBus.dispatch(new E.ViewerSelectViewEvent({assetViewerView:b.AssetViewerViewMapper.mapToPublicAssetViewerView(this)})))},e.prototype.deselectView=function(){!0===this.isSelected&&(this.isSelected=!1,this.eventBus.dispatch(new E.ViewerDeselectViewEvent({assetViewerView:b.AssetViewerViewMapper.mapToPublicAssetViewerView(this)})))},e.renderLoader=function(){var e=document.createElement("div"),t=document.createElement("div");return e.classList.add("av-loader"),e.appendChild(t),e},e.createAnnotationsLayer=function(){var e=document.createElement("div");return e.style.top="0",e.style.left="0",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.overflow="hidden",e.style.zIndex="1",e.classList.add("annotations-layer"),e},e}();t.AssetViewerView=S},9142:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(9717),s=n(3293),a=function(e){function t(t,n,i,r,o,a,c,l,u){var d=e.call(this,t,n,i,r,o,void 0,a,c,l,u)||this;return d.config=t,d.eventBus=n,d.viewerLayout=i,d.assetViewerItem=r,d.tokenService=o,d.id=a,d.page=c,d.annotations=l,d.pdfJsPagePreviewService=u,d.isCover=!1,d.isExpanded=!1,d.isFirstPageOfRange=!1,d.isPartOfRange=!1,d.presentationRenderer instanceof s.ThumbnailErrorPresentationRenderer&&(d.presentationRenderer=d.errorPresentation),d.addEventListeners(),d}return r(t,e),Object.defineProperty(t.prototype,"errorPresentation",{get:function(){return new s.ThumbnailErrorPresentationRenderer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelText",{get:function(){return this.assetViewerItem.numViews>1&&!this.isCover?this.page.toString():this.assetViewerItem.displayName},enumerable:!0,configurable:!0}),t.prototype.onRender=function(){e.prototype.onRender.call(this),this.contentElement.classList.remove("loading"),this.contentElement.style.backgroundImage="none"},t.prototype.addEventListeners=function(){var e=this;this.contentElement.onclick=function(){return e.onViewClick()}},t.prototype.removeEventListeners=function(){},t.prototype.onViewClick=function(){this.linkService.view=this.linkedView,this.viewerLayout.setCurrentView(this.linkedView)},t}(o.AssetViewerView);t.ThumbnailAssetViewerView=a},2299:function(e,t,n){"use strict";var i,r,o,s;Object.defineProperty(t,"__esModule",{value:!0});var a=n(4695);t.VIEW_PADDING=18,t.PAGE_PADDING=10,t.ASSET_TYPE={PHOTO:"photo",VIDEO:"video",AUDIO:"audio",WEBAPP:"webapp",DOCUMENT:"document",RAW:"raw","3D-MODEL":"3d-model",MEETING_VIDEO:"meeting-video",PERSONAL_VIDEO_RECORDING:"personal-video-recording",URL:"url",PAGE:"page",SCORM:"scorm"},t.PRESENTATION_TYPE={PDF_LOCAL:"pdf_local",PDF_PAGE_LOCAL:"pdf_page_local",SVG_LOCAL:"svg_local",UNPROCESSED:"unprocessed",ORIGINAL:"original",PROCESSED:"processed",WEBAPP:"webapp",PREVIEW:"preview",ERROR:"error",PREVIEW_PAGE_LOCAL:"preview_page_local",PREVIEW_PAGE_PROGRESSIVE_LOCAL:"preview_page_progressive_local",PREVIEW_PAGE_LOSSLESS_PROGRESSIVE_LOCAL:"preview_page_lossless_progressive_local",URL:"url",PAGE:"page",MANIFEST:"manifest"},t.SUPPORTED_PRESENTATION_TYPES=[t.PRESENTATION_TYPE.ERROR,t.PRESENTATION_TYPE.SVG_LOCAL,t.PRESENTATION_TYPE.PDF_LOCAL,t.PRESENTATION_TYPE.PDF_PAGE_LOCAL,t.PRESENTATION_TYPE.ORIGINAL,t.PRESENTATION_TYPE.PROCESSED,t.PRESENTATION_TYPE.WEBAPP,t.PRESENTATION_TYPE.PREVIEW_PAGE_LOCAL,t.PRESENTATION_TYPE.PREVIEW_PAGE_PROGRESSIVE_LOCAL,t.PRESENTATION_TYPE.PREVIEW_PAGE_LOSSLESS_PROGRESSIVE_LOCAL,t.PRESENTATION_TYPE.URL,t.PRESENTATION_TYPE.PAGE,t.PRESENTATION_TYPE.MANIFEST],t.PRESENTATION_RENDERERS={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",NEW_WINDOW:"NEW_WINDOW",IFRAME:"IFRAME",OBSERVABLE_DIMENSIONS_IFRAME:"OBSERVABLE_DIMENSIONS_IFRAME",PDFJS:"PDFJS",PDFJS_PREVIEW:"PDFJS_PREVIEW",SVG:"SVG",ASSET_VIEWER:"ASSET_VIEWER",PDF_VIEWER:"PDF_VIEWER",PREVIEW:"PREVIEW",THUMBNAIL_ERROR:"THUMBAIL_ERROR",ERROR:"ERROR",URL:"URL",URL_IFRAME:"URL_IFRAME",THREEJS:"THREEJS"},t.PRESENTATION_ACTIONS={},t.PRESENTATION_ACTIONS[t.PRESENTATION_TYPE.PAGE]="PAGE_FETCH_DATA",t.VIEWER_EVENTS={VIEWPORT_CHANGE:"VIEWPORT_CHANGE",FOCUS_CHANGE:"FOCUS_CHANGE",PREVIEW_RENDERED:"PREVIEW_RENDERED",VIEW_RENDERED:"VIEW_RENDERED",RENDERED_VIEW_FOCUS:"RENDERED_VIEW_FOCUS",RENDERED_PREVIEW_FOCUS:"RENDERED_PREVIEW_FOCUS",ADD_VIEWS:"ADD_VIEWS",RESIZE:"RESIZE",ZOOM:"ZOOM",SWIPE:"SWIPE",DOWNLOAD_ASSET:"DOWNLOAD_ASSET",PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE",PLAYBACK_END:"PLAYBACK_END",WEBAPP_OPEN:"WEBAPP_OPEN",WEBAPP_CLOSE:"WEBAPP_CLOSE",SET_VIEW:"SET_VIEW",FULLSCREEN_CHANGE:"FULLSCREEN_CHANGE",TOGGLE_FULLSCREEN:"TOGGLE_FULLSCREEN",TOGGLE_VIEW_MODE:"TOGGLE_VIEW_MODE",UPDATE:"UPDATE",NAVIGATE_TO_PAGE:"NAVIGATE_TO_PAGE",PUBLIC_FOCUS_CHANGE:"PUBLIC_FOCUS_CHANGE",PUBLIC_RENDERED_VIEW_FOCUS:"PUBLIC_RENDERED_VIEW_FOCUS",PUBLIC_RENDERED_PREVIEW_FOCUS:"PUBLIC_RENDERED_PREVIEW_FOCUS",SELECT_VIEW:"SELECT_VIEW",DESELECT_VIEW:"DESELECT_VIEW",URL_ASSET_CLICKED:"URL_ASSET_CLICKED",START_LOADING_3D_MODEL:"START_LOADING_3D_MODEL",START_VIEWING_3D_MODEL:"START_VIEWING_3D_MODEL",STOP_VIEWING_3D_MODEL:"STOP_VIEWING_3D_MODEL",OPEN_IN_OFFICE_ONLINE:"OPEN_IN_OFFICE_ONLINE"},t.RENDER_STATES={NONE:"NONE",INITIAL:"INITIAL",RUNNING:"RUNNING",FINISHED:"FINISHED",FAILED:"FAILED"},t.SVG_EMBED_STRATEGY={IFRAME_INNERHTML:"IFRAME_INNERHTML",INLINE_SVG:"INLINE_SVG",DATA_URL_IMG:"DATA_URL_IMG",DATA_URL_IMG_PROCESSED:"DATA_URL_IMG_PROCESSED",DATA_URL_SVG:"DATA_URL_SVG",CANVAS:"CANVAS",CANVAS_IMG:"CANVAS_IMG"},t.PDF_RENDERER={CANVAS:"RAW_CANVAS"},t.PDF_RENDER_STRATEGY={HIGH_PREVIEW:"HIGH_PREVIEW",LOW_PREVIEW:"LOW_PREVIEW",LOW_PREVIEW_HIGH_PREVIEW:"LOW_PREVIEW_HIGH_PREVIEW",HIGH_PREVIEW_PDFJS:"HIGH_PREVIEW_PDFJS",LOW_PREVIEW_PDFJS:"LOW_PREVIEW_PDFJS",LOW_PREVIEW_HIGH_PREVIEW_PDFJS:"LOW_PREVIEW_HIGHT_PREVIEW_PDFJS",HIGH_PREVIEW_NO_ANNOTATIONS:"HIGH_PREVIEW_NO_ANNOTATIONS",LOW_PREVIEW_NO_ANNOTATIONS:"LOW_PREVIEW_NO_ANNOTATIONS",LOW_PREVIEW_HIGH_PREVIEW_NO_ANNOTATIONS:"LOW_PREVIEW_HIGH_PREVIEW_NO_ANNOTATIONS",PDFJS:"PDFJS"},t.PDF_PRELOAD_STRATEGY={FULL:"FULL",LOW_PREVIEW:"LOW_PREVIEW",HIGH_PREVIEW:"HIGH_PREVIEW"},t.CANVAS_EMBED_STRATEGY={CANVAS:"CANVAS",DATA_URL_IMG:"DATA_URL_IMG"},t.DEFAULT_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP=((i={})[t.ASSET_TYPE.PHOTO]=[t.PRESENTATION_RENDERERS.IMAGE],i[t.ASSET_TYPE.AUDIO]=[t.PRESENTATION_RENDERERS.AUDIO],i[t.ASSET_TYPE.VIDEO]=[t.PRESENTATION_RENDERERS.VIDEO],i[t.ASSET_TYPE.WEBAPP]=[t.PRESENTATION_RENDERERS.NEW_WINDOW],i[t.ASSET_TYPE.PAGE]=[t.PRESENTATION_RENDERERS.IFRAME],i[t.ASSET_TYPE.DOCUMENT]=[t.PRESENTATION_RENDERERS.SVG,t.PRESENTATION_RENDERERS.PDFJS],i[t.ASSET_TYPE["3D-MODEL"]]=[t.PRESENTATION_RENDERERS.ERROR],i[t.ASSET_TYPE.MEETING_VIDEO]=[t.PRESENTATION_RENDERERS.VIDEO],i[t.ASSET_TYPE.PERSONAL_VIDEO_RECORDING]=[t.PRESENTATION_RENDERERS.VIDEO],i[t.ASSET_TYPE.RAW]=[t.PRESENTATION_RENDERERS.ERROR],i[t.ASSET_TYPE.URL]=[t.PRESENTATION_RENDERERS.URL],i),t.DEFAULT_THUMBNAIL_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP=((r={})[t.ASSET_TYPE.PHOTO]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.AUDIO]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.VIDEO]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.WEBAPP]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.SCORM]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.PAGE]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.DOCUMENT]=[t.PRESENTATION_RENDERERS.PREVIEW,t.PRESENTATION_RENDERERS.SVG],r[t.ASSET_TYPE["3D-MODEL"]]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.MEETING_VIDEO]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.PERSONAL_VIDEO_RECORDING]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.RAW]=[t.PRESENTATION_RENDERERS.PREVIEW],r[t.ASSET_TYPE.URL]=[t.PRESENTATION_RENDERERS.PREVIEW],r),t.LAYOUT={VERTICAL:"VERTICAL",VERTICAL_THUMBNAILS:"VERTICAL_THUMBNAILS",HORIZONTAL:"HORIZONTAL",HORIZONTAL_THUMBNAILS:"HORIZONTAL_THUMBNAILS"},t.THUMB_PREFIX="/ICON_thumbnail_",t.THUMB_SUFFIX_SVG=".svg",t.BADGE_PREFIX="/BADGE-",t.BADGE_SUFFIX=".svg",t.ASSETS={AUDIO:{NAME:"audio"},VIDEO:{NAME:"video"},IMAGE:{NAME:"photo"},PHOTO:{NAME:"photo"},URL:{NAME:"url"},DOCUMENT:{NAME:"document",EXCEL:{NAME:"excel",EXT:{XLS:"xls",XLSX:"xlsx"}},DOCUMENT:{NAME:"document",WORD:"word",EXT:{DOC:"doc",DOCX:"docx"}},PRESENTATION:{NAME:"presentation",POWERPOINT:"powerpoint",EXT:{PPT:"ppt",PPTX:"pptx",KEY:"key",KEYNOTE:"keynote"}},PDF:{NAME:"pdf",EXT:{PDF:"pdf"}},AUTOCAD:{NAME:"autocad",EXT:{CAD:"cad",DWG:"dwg"}},DEFAULT:{NAME:"document",EXT:{EPUB:"epub",IBOOKS:"ibooks",PAGES:"pages"}}},WEBAPP:{NAME:"webapp"},"3D-MODEL":{NAME:"3d-model"},"MEETING-VIDEO":{NAME:"meeting-video"},"PERSONAL-VIDEO-RECORDING":{NAME:"personal-video-recording"},RAW:{NAME:"raw"},PAGE:{NAME:"page"},SCORM:{NAME:"webapp"}},t.VIEWER_TRACKING_EVENTS={FOCUSED_ASSET_READY:"FOCUSED_ASSET_READY"},t.NO_URL="No url provided",t.THREE_JS_DEPS_KEYS={THREE:"THREE",COLLADA_LOADER:"COLLADA_LOADER",TGA_LOADER:"TGA_LOADER",MTL_LOADER:"MTL_LOADER",OBJ_LOADER:"OBJ_LOADER",DDS_LOADER:"DDS_LOADER",ORBIT_CONTROLS:"ORBIT_CONTROLS"},t.FILE_TYPE_JS="JS",t.DEFAULT_THREE_JS_DEPS=((o={})[t.THREE_JS_DEPS_KEYS.THREE]={type:t.FILE_TYPE_JS,src:"three/build/three.min.js"},o[t.THREE_JS_DEPS_KEYS.COLLADA_LOADER]={type:t.FILE_TYPE_JS,src:"three/examples/js/loaders/ColladaLoader.js"},o[t.THREE_JS_DEPS_KEYS.TGA_LOADER]={type:t.FILE_TYPE_JS,src:"three/examples/js/loaders/TGALoader.js"},o[t.THREE_JS_DEPS_KEYS.MTL_LOADER]={type:t.FILE_TYPE_JS,src:"three/examples/js/loaders/MTLLoader"},o[t.THREE_JS_DEPS_KEYS.OBJ_LOADER]={type:t.FILE_TYPE_JS,src:"three/examples/js/loaders/OBJLoader"},o[t.THREE_JS_DEPS_KEYS.DDS_LOADER]={type:t.FILE_TYPE_JS,src:"three/examples/js/loaders/DDSLoader"},o[t.THREE_JS_DEPS_KEYS.ORBIT_CONTROLS]={type:t.FILE_TYPE_JS,src:"three/examples/js/controls/OrbitControls.js"},o),t.SUPPORTED_3D_MODELS=[{type:"DAE",extension:"dae"}],t.HLS_JS_CONFIG={autoStartLoad:!0,startPosition:-1,capLevelToPlayerSize:!1,debug:!1,defaultAudioCodec:void 0,initialLiveManifestSize:1,maxBufferLength:10,maxMaxBufferLength:10,maxBufferSize:5e6,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:10,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:500,manifestLoadingMaxRetryTimeout:64e3,startLevel:9999,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:500,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,appendErrorMaxRetry:3,enableWebVTT:!0,enableCEA708Captions:!0,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:5,abrEwmaSlowLive:9,abrEwmaFastVoD:4,abrEwmaSlowVoD:15,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,minAutoBitrate:0,xhrSetup:function(e,t){e.withCredentials=!0}},t.DEFAULT_TRANSLATIONS=((s={})[a.TranslationKeys.Open]="Open",s[a.TranslationKeys.Close]="Close",s[a.TranslationKeys.Download]="Download",s[a.TranslationKeys.VisitUrl]="Visit URL",s[a.TranslationKeys.PreviewImage]="Preview Image",s[a.TranslationKeys.RenderErrorWhenOffline]="Sorry, we’re unable to complete your request. Looks like you’re offline.",s[a.TranslationKeys.RenderErrorNoLowQualityPreview]="This file could not be viewed with your browser",s[a.TranslationKeys.RenderError]="Something went wrong while loading this document.",s[a.TranslationKeys.ThreeJsViewIn3d]="View in 3D",s[a.TranslationKeys.ThreeJsWebglNotSupported]="{{webGl}} not supported {{readMoreLink}}",s[a.TranslationKeys.ThreeJsUnsupportedFile]="{{modelExtension}} files cannot be viewed {{readMoreLink}}",s[a.TranslationKeys.ThreeJsReadMore]="Read More",s[a.TranslationKeys.ThreeJsLoadingModel]="Loading 3D Model",s[a.TranslationKeys.ThreeJsFtueOrbitTitle]="Orbit",s[a.TranslationKeys.ThreeJsFtueOrbitDescriptionMouse]="Left mouse button",s[a.TranslationKeys.ThreeJsFtueOrbitDescriptionTouch]="One finger move",s[a.TranslationKeys.ThreeJsFtueZoomTitle]="Zoom",s[a.TranslationKeys.ThreeJsFtueZoomDescriptionMouse]="Scroll up or down",s[a.TranslationKeys.ThreeJsFtueZoomDescriptionTouch]="Pinch",s[a.TranslationKeys.ThreeJsFtuePanTitle]="Pan",s[a.TranslationKeys.ThreeJsFtuePanDescriptionMouse]="Right mouse button",s[a.TranslationKeys.ThreeJsFtuePanDescriptionTouch]="Two finger move",s[a.TranslationKeys.ThreeJsRenderErrorTitle]="Failed to load model",s[a.TranslationKeys.ThreeJsRenderErrorBody]="Something went wrong while trying to load your 3D model. Please try again.",s[a.TranslationKeys.OpenInPowerpoint]="Open in PowerPoint",s[a.TranslationKeys.OpenInExcel]="Open in Excel",s[a.TranslationKeys.OpenInWord]="Open in Word",s[a.TranslationKeys.OfficeOnlineBarPowerpointMessage]="Animations, transition, speaker-notes and other native capabilities can be viewed in PowerPoint Online.",s[a.TranslationKeys.OfficeOnlineBarExcelMessage]="Native and advanced spreadsheet capabilities can be used in Excel Online.",s[a.TranslationKeys.OfficeOnlineBarWordMessage]="Native and advanced document capabilities can be used in Word Online.",s),t.TRANSPARENT_IMAGE_SRC="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},6459:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.annotationsArrayToAnnotationsPageMap=function(e){var t={};return function(e){return e&&"object"==typeof e&&"number"==typeof e.length}(e)&&e.forEach((function(e){return t[e.page+1]=e.data})),t},e}();t.AnnotationsMapper=n},7679:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.mapToPublicAssetViewerView=function(e){return{id:e.id,page:e.page,renderState:e.renderState,previewRenderState:e.previewRenderState,getAnnotationHelper:function(){return e.getAnnotationHelper()},getAnnotations:function(){return e.getAnnotations()},didAnnotationsChange:function(){return e.didAnnotationsChange()},enableAnnotations:function(){return e.enableAnnotations()},disableAnnotations:function(){return e.disableAnnotations()},assetViewerItem:e.assetViewerItem}},e}();t.AssetViewerViewMapper=n},3149:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i="undefined"==typeof window?"node.js":window.navigator.userAgent;t.browser={};var r=/ip(hone|od|ad)/i.test(i),o=/android/i.test(i),s=/blackberry/i.test(i),a=/webos/i.test(i),c=/silk|kindle/i.test(i);/MSIE|Trident|Edge/i.test(i)&&(t.browser.ie=!0,n=/MSIE/i.test(i)?/MSIE\s+(\d+\.\d+)/i.exec(i):/Trident.*rv[ :](\d+\.\d+)/.exec(i),t.browser.version=n&&parseFloat(n[1]),t.browser.ielt9=t.browser.version<9,t.browser.ielt10=t.browser.version<10,t.browser.ielt11=t.browser.version<11),"undefined"!=typeof window&&r&&(t.browser.ios=!0,n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t.browser.version=n&&parseFloat(n[1]+"."+n[2])),t.browser.mobile=/mobile/i.test(i)||r||o||s||a||c,t.browser.firefox=/firefox/i.test(i),/safari/i.test(i)&&(t.browser.chrome=/chrome/i.test(i),t.browser.safari=!t.browser.chrome),"undefined"==typeof window&&t.browser.safari&&(n=navigator.appVersion.match(/Version\/(\d+(\.\d+)?)/),t.browser.version=n&&parseFloat(n[1])),t.browser.phone=t.browser.mobile&&("undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 520px)").matches||"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(max-width: 736px) and (orientation:landscape)").matches),t.browser.touch="ontouchstart"in window},2187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORIENTATION_LANDSCAPE="landscape",t.ORIENTATION_PORTRAIT="portrait";var i=n(156),r=function(){function e(){}return e.isSvgSupported=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},e.isCanvasSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},e.isUint8ArraySupported=function(){return!!window.Uint8Array},e.isPdfJsLoaded=function(){return!!window.PDFJS},e.detectOrientation=function(e){return e.height>e.width?t.ORIENTATION_PORTRAIT:t.ORIENTATION_LANDSCAPE},e.loadScript=function(e){var t=i.PromiseHelper.defer(),n=document.createElement("script");return n.onload=t.resolve,n.onerror=t.reject,n.src=e,document.body.appendChild(n),t.promise},e.loadLink=function(e){var t=i.PromiseHelper.defer(),n=document.createElement("link");return n.onload=t.resolve,n.onerror=t.reject,n.rel="stylesheet",n.href=e,document.head.appendChild(n),t.promise},e.loadScriptsInOrder=function(e){for(var t,n=[],r=document.scripts[0],o=[];t=e.shift();)o.push(s(t));return Promise.all(o);function s(e){var t=i.PromiseHelper.defer(),o=document.createElement("script");return"async"in r?(o.type="text/javascript",o.async=!1,o.src=e,o.addEventListener("load",(function(){a(e),t.resolve()})),o.addEventListener("error",(function(){a(e),t.reject()})),document.head.appendChild(o),t.promise):r.readyState?(n.push(o),o.onreadystatechange=function(){var e;for("loaded"===o.readyState&&t.resolve();n[0]&&"loaded"===n[0].readyState;)(e=n.shift()).onreadystatechange=null,r.parentNode.insertBefore(e,r)},o.src=e,o.type="text/javascript",t.promise):(o.type="text/javascript",o.defer=!0,void document.head.appendChild(o))}function a(e){for(var t=document.querySelectorAll('script[src="'+e+'"]'),n=t.length-1;n>0;n--){var i=t[n];i.parentNode.removeChild(i)}}},e.isSafari=function(){return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},e.isUIWebView=function(){return-1!==navigator.userAgent.indexOf("Mobile")&&-1!==navigator.userAgent.indexOf("AppleWebKit")},e.isIe=function(e){var t=window.navigator.userAgent.toLowerCase();return-1!==t.indexOf("msie")&&(!e||parseInt(t.split("msie")[1])===e)},e.insertCss=function(e){var t=document.createElement("style"),n=document.createTextNode(e);try{t.setAttribute("type","text/css"),t.appendChild(n)}catch(e){}return document.getElementsByTagName("head")[0].appendChild(t),t},e.getQueryParams=function(){for(var e,t=/[?&]([^=#]+)=([^&#]*)/g,n=window.location.href,i={};e=t.exec(n);){var r=parseInt(e[2]),o=isNaN(r)?e[2]:r;i[e[1]]=o}return i},e}();t.DomHelper=r},2062:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i="fake-fullscreen",r=[],o=!1,s=!1,a=null,c=null,l=!1;function u(){o||(n.forEach((function(e){document.addEventListener(e,(function(){return d()}))})),o=!0)}function d(){r.forEach((function(e){return e()}))}function h(e){document.body.addEventListener("keydown",f),e.classList.add(i),document.body.classList.add(i),s=!0,a=e,d()}function p(){a&&(document.body.removeEventListener("keydown",f),a.classList.remove(i),document.body.classList.remove(i),s=!1,a=null,c=null,d())}function f(e){27===e.keyCode&&p()}var v=function(){function e(){}return e.enterFullscreen=function(e){u(),c=e,function(e){var t=h;return"function"==typeof e.requestFullScreen?t=e.requestFullscreen.bind(e):"function"==typeof e.mozRequestFullScreen?t=e.mozRequestFullScreen.bind(e):"function"==typeof e.webkitRequestFullScreen?t=e.webkitRequestFullScreen.bind(e):"function"==typeof e.msRequestFullscreen&&(t=e.msRequestFullscreen.bind(e)),t}(e)(e)},e.exitFullscreen=function(){var e;u(),(e=p,"function"==typeof document.cancelFullScreen?e=document.cancelFullScreen.bind(document):"function"==typeof document.exitFullscreen?e=document.exitFullscreen.bind(document):"function"==typeof document.mozCancelFullScreen?e=document.mozCancelFullScreen.bind(document):"function"==typeof document.webkitCancelFullScreen?e=document.webkitCancelFullScreen.bind(document):"function"==typeof document.msExitFullscreen&&(e=document.msExitFullscreen.bind(document)),e)()},e.addFullscreenChangeListener=function(e){r.push(e)},e.removeFullscreenChangeListener=function(e){r=r.filter((function(t){return t!==e}))},e.setWebkitBeginFullscreen=function(e){c=e,l=!0},e.setWebkitEndFullscreen=function(){c=null,l=!1},e.triggerFullscreenChange=function(){d()},e.isFullscreenSupported=function(){return"function"==typeof document.body.requestFullScreen||"function"==typeof document.body.mozRequestFullScreen||"function"==typeof document.body.webkitRequestFullScreen||"function"==typeof document.body.msRequestFullscreen},e.isFullscreen=function(){return 0!=!!(document.fullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||s||l)},e.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||s&&c},e}();t.FullscreenHelper=v},64:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.canPlayHlsNatively=function(){return""!==document.createElement("video").canPlayType("application/vnd.apple.mpegURL")},e.hlsjsIsSupported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i},e}();t.HlsHelper=n},5067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8514),r=function(){function e(){}return e.injectShowpadScripts=function(e,t){var n=null,r=null,o=null,s=null;if(e.src&&"string"==typeof t.showpadJsPath)try{n=e.contentDocument,r=n.body,(o=n.createElement("script")).setAttribute("id","showpad-js-script"),s=n.createElement("script"),t.user&&(s.text="window.ShowpadUser = JSON.parse("+i.JsonHelper.escapeJSON(JSON.stringify(t.user))+");",r.appendChild(s)),o.src=t.showpadJsPath,r.appendChild(o)}catch(e){window.console&&console.error&&console.error("could not add asset link helper",e)}if(t.trackHtmlPageLocation){var a=n.createElement("script"),c=t.iframeUrl,l=c.substr(0,c.lastIndexOf("/"));a.text='\n                    (function() {\n                        var prevUrl = "";\n                        var urlPrefix = "'+l+'";\n\n                        function trackUrlChange() {\n                            var currentUrl = window.location.href.replace(urlPrefix, "");\n                            if (currentUrl !== prevUrl && window.ShowpadLib && typeof window.ShowpadLib.trackEvent === "function") {\n                                window.ShowpadLib.trackEvent([{ type: "navigation", pageLocation: currentUrl }])\n                                prevUrl = currentUrl;\n                            }\n                        }\n\n                        window.setInterval(trackUrlChange, 500);\n                    })();\n                ',o.onload=function(){r.appendChild(a)}}},e}();t.IframeHelper=r},8514:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.escapeJSON=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'},e}();t.JsonHelper=n},8219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4695),r=n(2299);t.POWERPOINT_SVG='<svg id="powerpoint" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><defs><circle id="ppta" cx="8.571" cy="8.571" r="8.571"/><rect id="pptd" width="9.778" height="9.778" rx=".762"/><filter id="pptc" width="140.9%" height="140.9%" x="-10.2%" y="-20.5%" filterUnits="objectBoundingBox"><feOffset dx="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation=".5"/><feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0.0588235294 0 0 0 0 0.0862745098 0 0 0 0 0.129411765 0 0 0 0.25 0"/></filter><path id="pptf" d="M3.393 7.492V2.51h1.676c1.09 0 1.89.381 1.89 1.54 0 1.104-.823 1.614-1.89 1.614h-.792v1.83h-.884zm.884-2.537h.716c.746 0 1.097-.297 1.097-.907 0-.625-.373-.83-1.097-.83h-.716v1.737z"/><filter id="ppte" width="184.1%" height="160.2%" x="-42.1%" y="-30.1%" filterUnits="objectBoundingBox"><feOffset in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation=".5"/><feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0.0588235294 0 0 0 0 0.0862745098 0 0 0 0 0.129411765 0 0 0 0.4 0"/></filter></defs><g fill="none" fill-rule="evenodd"><g transform="translate(2.857 1)"><mask id="pptb" fill="#fff"><use xlink:href="#ppta"/></mask><use fill="#C84F34" fill-rule="nonzero" xlink:href="#ppta"/><path fill="#D87351" fill-rule="nonzero" d="M0 0h8.571v8.571H0z" mask="url(#pptb)"/><path fill="#FFBD92" fill-rule="nonzero" d="M8.571 0h8.571v8.571H8.571z" mask="url(#pptb)"/></g><g fill-rule="nonzero"><g transform="translate(0 4.683)"><use fill="#000" filter="url(#pptc)" xlink:href="#pptd"/><use fill="#C6513A" xlink:href="#pptd"/></g><g transform="translate(0 4.683)"><use fill="#000" filter="url(#ppte)" xlink:href="#pptf"/><use fill="#FFF" xlink:href="#pptf"/></g></g></g></svg>',t.EXCEL_SVG='<svg id="excel" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><defs><rect id="excelb" width="9.904" height="9.904" rx=".772"/><filter id="excela" width="140.4%" height="140.4%" x="-10.1%" y="-20.2%" filterUnits="objectBoundingBox"><feOffset dx="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation=".5"/><feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0.0588235294 0 0 0 0 0.0862745098 0 0 0 0 0.129411765 0 0 0 0.3 0"/></filter><path id="exceld" d="M3.09 7.653l1.427-2.6-1.343-2.447h.995l.564 1.119c.116.231.224.47.378.771h.03c.124-.3.232-.54.34-.771l.533-1.12h.949L5.62 5.092l1.436 2.562H6.06l-.617-1.189a44.127 44.127 0 0 1-.402-.825h-.03c-.132.308-.255.563-.379.825l-.594 1.189H3.09z"/><filter id="excelc" width="175.6%" height="159.4%" x="-37.8%" y="-29.7%" filterUnits="objectBoundingBox"><feOffset in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation=".5"/><feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0.0588235294 0 0 0 0 0.0862745098 0 0 0 0 0.129411765 0 0 0 0.4 0"/></filter></defs><g fill="none" fill-rule="nonzero"><path fill="#23925A" d="M0 0h7.46v4.341H0z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#33E492" d="M7.46 0h7.46v4.341H7.46z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#16814C" d="M0 4.341h7.46v4.341H0z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#2CC379" d="M7.46 4.341h7.46v4.341H7.46z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#224B31" d="M0 8.682h7.46v4.341H0z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#29925A" d="M7.46 8.682h7.46v4.341H7.46z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#21412D" d="M0 12.99h7.46v4.373H0z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><path fill="#294A35" d="M7.46 12.99h7.46v4.373H7.46z" mask="url(#excelb)" transform="translate(5.08 1.341)"/><g><g transform="translate(0 5.071)"><use fill="#000" filter="url(#excela)" xlink:href="#excelb"/><use fill="#1D7E44" xlink:href="#excelb"/></g><g transform="translate(0 5.071)"><use fill="#000" filter="url(#excelc)" xlink:href="#exceld"/><use fill="#FFF" xlink:href="#exceld"/></g></g></g></svg>',t.WORD_SVG='<svg xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 40 40"> <defs> <filter id="c" width="120.2%" height="120.2%" x="-5%" y="-10.1%" filterUnits="objectBoundingBox"> <feOffset dx="1" in="SourceAlpha" result="shadowOffsetOuter1"/> <feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation=".5"/> <feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0.0588235294 0 0 0 0 0.0862745098 0 0 0 0 0.129411765 0 0 0 0.3 0"/> </filter> <rect id="a" width="29.839" height="34.727" x="0" y="0" rx=".772"/> <path id="d" d="M1.543 0h16.72c.853 0 1.544.691 1.544 1.543v16.72c0 .853-.69 1.544-1.543 1.544H1.544C.69 19.807 0 19.117 0 18.264V1.544C0 .69.691 0 1.543 0z"/> </defs> <g fill="none" fill-rule="evenodd"> <g transform="translate(10.16 2.683)"> <mask id="b" fill="#fff"> <use xlink:href="#a"/> </mask> <path fill="#41A5EE" fill-rule="nonzero" d="M0 0h14.92v8.682H0zm14.92 0h14.92v8.682H14.92z" mask="url(#b)"/> <path fill="#2B7CD3" fill-rule="nonzero" d="M0 8.682h14.92v8.682H0zm14.92 0h14.92v8.682H14.92z" mask="url(#b)"/> <path fill="#185ABD" fill-rule="nonzero" d="M0 17.363h14.92v8.682H0zm14.92 0h14.92v8.682H14.92z" mask="url(#b)"/> <path fill="#103F91" fill-rule="nonzero" d="M0 25.981h14.92v8.746H0zm14.92 0h14.92v8.746H14.92z" mask="url(#b)"/> </g> <g fill-rule="nonzero"> <g transform="translate(0 10.142)"> <use fill="#000" filter="url(#c)" xlink:href="#d"/> <use fill="#124AAF" xlink:href="#d"/> </g> <path fill="#FFF" d="M6.99 22.606c.03.237.05.444.06.62h.034c.014-.167.04-.369.08-.606s.078-.437.114-.6l1.618-6.98h2.091l1.674 6.875c.098.428.168.86.209 1.297h.029c.03-.421.089-.84.174-1.255l1.339-6.917h1.903l-2.344 9.998h-2.223l-1.596-6.622a14.57 14.57 0 01-.157-.746 8.779 8.779 0 01-.108-.67h-.029c-.019.163-.055.405-.108.725a16.77 16.77 0 01-.129.712l-1.5 6.603H5.865L3.5 15.041h1.938l1.458 6.993c.032.144.063.335.094.572z"/> </g> </g></svg>',t.createPresentInOfficeOnlineBar=function(e,n){var o=document.createElement("div"),s=r.ASSETS.DOCUMENT;switch(e){case s.EXCEL.EXT.XLS:case s.EXCEL.EXT.XLSX:o.innerHTML='<span class="office-online-icon">'+t.EXCEL_SVG+"</span>"+n.TRANSLATIONS[i.TranslationKeys.OfficeOnlineBarExcelMessage]+' <a href="javascript:void(0)" target="_blank">'+n.TRANSLATIONS[i.TranslationKeys.OpenInExcel]+"</a>";break;case s.PRESENTATION.EXT.PPT:case s.PRESENTATION.EXT.PPTX:o.innerHTML='<span class="office-online-icon">'+t.POWERPOINT_SVG+"</span>"+n.TRANSLATIONS[i.TranslationKeys.OfficeOnlineBarPowerpointMessage]+' <a href="javascript:void(0)" target="_blank">'+n.TRANSLATIONS[i.TranslationKeys.OpenInPowerpoint]+"</a>";break;case s.DOCUMENT.EXT.DOC:case s.DOCUMENT.EXT.DOCX:o.innerHTML='<span class="office-online-icon">'+t.WORD_SVG+"</span>"+n.TRANSLATIONS[i.TranslationKeys.OfficeOnlineBarWordMessage]+' <a href="javascript:void(0)" target="_blank">'+n.TRANSLATIONS[i.TranslationKeys.OpenInWord]+"</a>"}return o.classList.add("present-in-office-online-bar"),o},t.shouldShowPresentInOfficeOnlineBar=function(e){return!(!e.assetViewerItem.canPresentInOfficeOnline||!e.isFirstOfGroup&&e.groupId)}},3650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7917),r=n(2299),o=n(3996),s=n(5786),a=n(387),c=n(8782),l=n(2466),u=n(644),d=n(6253),h=n(261),p=n(3284),f=n(1232),v=n(4429),m=n(3942),g=n(9290),w=n(64),y=n(5325),E=n(5537),b=function(){function e(){}return e.getStylesheet=function(t){var n=t.filter((function(t){return e.isValidSvgPresentation(t)}))[0];return n?n.details.stylesheet:null},e.parsePresentations=function(t,n,i){var o=this;return void 0===n&&(n=null),t.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL}))||t.push(e.createPresentation("original",i)),t.filter((function(e){return e&&r.SUPPORTED_PRESENTATION_TYPES.indexOf(e.type)>-1})).filter((function(t){return e.isValidSvgPresentation(t)||t.type!==r.PRESENTATION_TYPE.SVG_LOCAL})).map((function(e){return o.updatePresentation(e,n)})).filter((function(e){return null!==e}))},e.createPresentationRenderers=function(t,n,i,o){var s=n.assetViewerItem.type===r.ASSET_TYPE.DOCUMENT,a=s&&e.isDocumentPortrait(n.assetViewerItem)&&s&&t.DOCUMENT_PORTRAIT?"DOCUMENT_PORTRAIT":n.assetViewerItem.type;return t[a]||(t[a]=[r.PRESENTATION_RENDERERS.ERROR]),t[a].map((function(t){return e.getPresentationForPresentationRenderer(t,n.assetViewerItem,n.config)})).filter((function(e){var t=e[0],n=e[1];return t===r.PRESENTATION_RENDERERS.ASSET_VIEWER||!!n})).map((function(t){var r=t[0],s=t[1],a=t[2],c=t[3];return e.presentationRendererFactory(r,n,i,s,a,c,o)})).filter((function(e){return!(null===e)})).filter((function(e){return e.url||e instanceof g.ThreeJsPresentationRenderer||e instanceof h.AssetViewerPresentationRenderer||e instanceof E.PdfViewerPresentationRenderer}))},e.isDocumentPortrait=function(e){var t=e.presentations.find((function(e){return!!(e.details&&e.details.dimensions&&e.details.dimensions.width&&e.details.dimensions.height)}));if(!t)return!0;var n=t.details.dimensions||{width:500,height:500};return n.width/n.height<1},e.updatePresentation=function(e,t){return e.type===r.PRESENTATION_TYPE.PDF_PAGE_LOCAL&&null===t&&(e=null),e},e.isValidSvgPresentation=function(e){return!!(e&&e.type===r.PRESENTATION_TYPE.SVG_LOCAL&&e.urls&&e.details)},e.getPresentationForPresentationRenderer=function(t,n,i){var o,s,a,c,l,u,d=n.presentations;switch(t){case r.PRESENTATION_RENDERERS.AUDIO:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PROCESSED}))||d.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL}));break;case r.PRESENTATION_RENDERERS.SVG:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.SVG_LOCAL}));break;case r.PRESENTATION_RENDERERS.NEW_WINDOW:case r.PRESENTATION_RENDERERS.URL_IFRAME:case r.PRESENTATION_RENDERERS.IFRAME:case r.PRESENTATION_RENDERERS.OBSERVABLE_DIMENSIONS_IFRAME:o=n.type===r.ASSET_TYPE.WEBAPP||n.type===r.ASSET_TYPE.SCORM?d.find((function(e){return e.type===r.PRESENTATION_TYPE.WEBAPP})):n.type===r.ASSET_TYPE.PAGE?d.find((function(e){return e.type===r.PRESENTATION_TYPE.PAGE})):n.type===r.ASSET_TYPE.URL?d.filter((function(e){var t=e.url?e.url:e.urls?e.urls[0]:null;return n.canRenderInIframe&&e.type===r.PRESENTATION_TYPE.URL&&/^(https:\/\/)/.test(t)})).map((function(t){var n=t.url?t.url:t.urls?t.urls[0]:null;return e.createPresentation(t.type,n)}))[0]:d.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL}));break;case r.PRESENTATION_RENDERERS.PREVIEW:case r.PRESENTATION_RENDERERS.PDFJS_PREVIEW:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PREVIEW_PAGE_PROGRESSIVE_LOCAL}))||d.find((function(e){return e.type===r.PRESENTATION_TYPE.PREVIEW_PAGE_LOCAL}))||{};break;case r.PRESENTATION_RENDERERS.PDFJS:s=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PREVIEW_PAGE_PROGRESSIVE_LOCAL})),a=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PREVIEW_PAGE_LOSSLESS_PROGRESSIVE_LOCAL})),l=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PROCESSED})),c=n.isPdf&&d.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL}));var h="number"==typeof n.page&&!n.pageRanges&&d.find((function(e){return e.type===r.PRESENTATION_TYPE.PDF_PAGE_LOCAL})),p=1===(h&&h.details&&h.details.firstPageIndex||0)?n.page:n.page-1,f=h&&h.urls[p];f&&(h.details=h.details||{},h.details.firstPageIndex=0,h.urls=[h.urls[p]]),o=f?h:l||c;break;case r.PRESENTATION_RENDERERS.URL:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.URL}));break;case r.PRESENTATION_RENDERERS.IMAGE:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PROCESSED}))||d.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL}));break;case r.PRESENTATION_RENDERERS.VIDEO:u=d.find((function(e){return e.type===r.PRESENTATION_TYPE.MANIFEST})),l=d.find((function(e){return e.type===r.PRESENTATION_TYPE.PROCESSED})),c=d.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL})),i.VIDEO_HLS_DISABLED&&(u=null),w.HlsHelper.canPlayHlsNatively()||w.HlsHelper.hlsjsIsSupported()||(u=null),!w.HlsHelper.canPlayHlsNatively()&&i&&i.VIDEO_HLS_JS_DISABLED&&(u=null),u&&c&&c.details&&c.details.dimensions&&c.details.dimensions.width&&c.details.dimensions.height&&(u.details||(u.details={dimensions:{width:null,height:null}}),u.details.dimensions.width=c.details.dimensions.width,u.details.dimensions.height=c.details.dimensions.height),o=u||l||c;break;case r.PRESENTATION_RENDERERS.THREEJS:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.MANIFEST}))||{};break;default:o=d.find((function(e){return e.type===r.PRESENTATION_TYPE.ORIGINAL}))}return[t,o,s,a]},e.presentationRendererFactory=function(e,t,n,w,b,P,_){switch(e){case r.PRESENTATION_RENDERERS.SVG:return new s.SvgPresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.PDFJS:return new f.PdfJsPresentationRenderer(t.config,t,n,w,b,P);case r.PRESENTATION_RENDERERS.PDFJS_PREVIEW:return new v.PdfJsPreviewPresentationRender(t,_,w);case r.PRESENTATION_RENDERERS.IFRAME:return new a.IframePresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.OBSERVABLE_DIMENSIONS_IFRAME:return new i.ObservableDimensionsIframePresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.AUDIO:return new c.AudioPresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.VIDEO:return new l.VideoPresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.IMAGE:return new o.ImagePresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.NEW_WINDOW:return new u.NewWindowPresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.PREVIEW:return new d.PreviewPresentationRender(t,w);case r.PRESENTATION_RENDERERS.ASSET_VIEWER:return new h.AssetViewerPresentationRenderer(t);case r.PRESENTATION_RENDERERS.ERROR:return new p.ErrorPresentationRenderer(t);case r.PRESENTATION_RENDERERS.URL:return new m.UrlPresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.URL_IFRAME:return new y.UrlIframePresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.THREEJS:return new g.ThreeJsPresentationRenderer(t,w);case r.PRESENTATION_RENDERERS.PDF_VIEWER:try{return new E.PdfViewerPresentationRenderer(t)}catch(e){return console.log(e,t.assetViewerItem),new p.ErrorPresentationRenderer(t)}}},e.createPresentation=function(e,t){return{type:e,urls:[t],details:{firstPageIndex:0,links:null,stylesheet:null,version:null,dimensions:{width:null,height:null,exceptions:null}},numberOfPages:1}},e}();t.PresentationHelper=b},156:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isPromise=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then},e.all=function(e){return Promise.all(e.map((function(e){return e.then((function(e){return{result:e,status:"resolved"}}),(function(e){return{error:e,status:"rejected"}}))}))).then((function(e){var t=e.filter((function(e){return"resolved"===e.status}));return e.length===t.length?t.map((function(e){return e.result})):Promise.reject(e.filter((function(e){return"rejected"===e.status})).map((function(e){return e.error})))}))},e.defer=function(){var e={},t=new Promise((function(t,n){e.resolve=t,e.reject=n}));return e.promise=t,e},e}();t.PromiseHelper=n},1176:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isShowpadLink=function(e){return e.indexOf("showpad://")>-1},e.handleShowpadAssetLink=function(e){var t={type:"showpad-asset-link"};t.data={link:e.uri,target:e.target},window&&window.postMessage&&window.postMessage(JSON.stringify(t),"*")},e}();t.ShowpadLinkHelper=n},4970:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2299);t.getDefaultThumb=function(e,t){var n=function(e,t){var n="undefined";if(e===i.ASSETS.DOCUMENT.NAME){var r=i.ASSETS.DOCUMENT;switch(t){case r.EXCEL.EXT.XLS:case r.EXCEL.EXT.XLSX:n=r.EXCEL.NAME;break;case r.DOCUMENT.EXT.DOC:case r.DOCUMENT.EXT.DOCX:n=r.DOCUMENT.NAME;break;case r.PRESENTATION.EXT.PPT:case r.PRESENTATION.EXT.PPTX:case r.PRESENTATION.EXT.KEY:case r.PRESENTATION.EXT.KEYNOTE:n=r.PRESENTATION.NAME;break;case r.PDF.EXT.PDF:n=r.PDF.NAME;break;case r.AUTOCAD.EXT.CAD:case r.AUTOCAD.EXT.DWG:n=t;break;case r.DEFAULT.EXT.EPUB:case r.DEFAULT.EXT.IBOOKS:case r.DEFAULT.EXT.PAGES:default:n=r.NAME}}else n=i.ASSETS[e.toUpperCase()].NAME;return n}(e,t),r=i.THUMB_SUFFIX_SVG;return""+i.THUMB_PREFIX+n+r}},7488:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interpolateUrlVariables=function(e,t){void 0===e&&(e="");var n=t.showpadUser&&t.showpadUser.userName?t.showpadUser.userName:"",i=t.showpadUser&&t.showpadUser.userEmail?t.showpadUser.userEmail:"";return e.replace("[username]",n).replace("[email]",i)}},2255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1356);t.buildAssetViewerItem=i.buildAssetViewerItem,t.buildManyAssetViewerItems=i.buildManyAssetViewerItems;var r=n(7756);t.buildAssetViewerView=r.buildPublicAssetViewerView,t.buildManyAssetViewerViews=r.buildManyPublicAssetViewerViews;var o=n(2634);t.buildAnnotation=o.buildAnnotation,t.buildManyAnnotations=o.buildManyAnnotations;var s=n(5758);t.buildAnnotationPage=s.buildAnnotationPage,t.buildAnnotationsCollection=s.buildAnnotationsCollection,t.buildManyAnnotationPages=s.buildManyAnnotationPages;var a=n(8671);t.AssetViewer=a.AssetViewer;var c=n(5901);t.AssetViewerItem=c.AssetViewerItem;var l=n(9717);t.AssetViewerViewComponent=l.AssetViewerView;var u=n(2299);t.ASSETS=u.ASSETS,t.ASSET_TYPE=u.ASSET_TYPE,t.BADGE_PREFIX=u.BADGE_PREFIX,t.BADGE_SUFFIX=u.BADGE_SUFFIX,t.CANVAS_EMBED_STRATEGY=u.CANVAS_EMBED_STRATEGY,t.DEFAULT_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP=u.DEFAULT_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP,t.DEFAULT_THREE_JS_DEPS=u.DEFAULT_THREE_JS_DEPS,t.DEFAULT_THUMBNAIL_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP=u.DEFAULT_THUMBNAIL_PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP,t.DEFAULT_TRANSLATIONS=u.DEFAULT_TRANSLATIONS,t.FILE_TYPE_JS=u.FILE_TYPE_JS,t.HLS_JS_CONFIG=u.HLS_JS_CONFIG,t.LAYOUT=u.LAYOUT,t.NO_URL=u.NO_URL,t.PAGE_PADDING=u.PAGE_PADDING,t.PDF_PRELOAD_STRATEGY=u.PDF_PRELOAD_STRATEGY,t.PDF_RENDERER=u.PDF_RENDERER,t.PDF_RENDER_STRATEGY=u.PDF_RENDER_STRATEGY,t.PRESENTATION_ACTIONS=u.PRESENTATION_ACTIONS,t.PRESENTATION_RENDERERS=u.PRESENTATION_RENDERERS,t.PRESENTATION_TYPE=u.PRESENTATION_TYPE,t.RENDER_STATES=u.RENDER_STATES,t.SUPPORTED_3D_MODELS=u.SUPPORTED_3D_MODELS,t.SUPPORTED_PRESENTATION_TYPES=u.SUPPORTED_PRESENTATION_TYPES,t.SVG_EMBED_STRATEGY=u.SVG_EMBED_STRATEGY,t.THREE_JS_DEPS_KEYS=u.THREE_JS_DEPS_KEYS,t.THUMB_PREFIX=u.THUMB_PREFIX,t.THUMB_SUFFIX_SVG=u.THUMB_SUFFIX_SVG,t.VIEWER_EVENTS=u.VIEWER_EVENTS,t.VIEWER_TRACKING_EVENTS=u.VIEWER_TRACKING_EVENTS,t.VIEW_PADDING=u.VIEW_PADDING;var d=n(6459);t.AnnotationsMapper=d.AnnotationsMapper;var h=n(2187);t.DomHelper=h.DomHelper;var p=n(2062);t.FullscreenHelper=p.FullscreenHelper;var f=n(3650);t.PresentationHelper=f.PresentationHelper;var v=n(156);t.PromiseHelper=v.PromiseHelper;var m=n(7816);t.EmbeddedDataMediaType=m.EmbeddedDataMediaType;var g=n(4695);t.TranslationKeys=g.TranslationKeys;var w=n(8727);t.ViewerEventType=w.ViewerEventType,t.ViewerViewportChangeEvent=w.ViewerViewportChangeEvent,t.ViewerPublicFocusChangeEvent=w.ViewerPublicFocusChangeEvent,t.ViewerPublicRenderedViewFocusEvent=w.ViewerPublicRenderedViewFocusEvent,t.ViewerPublicRenderedPreviewFocusEvent=w.ViewerPublicRenderedPreviewFocusEvent,t.ViewerSelectViewEvent=w.ViewerSelectViewEvent,t.ViewerDeselectViewEvent=w.ViewerDeselectViewEvent,t.ViewerUrlAssetClickedEvent=w.ViewerUrlAssetClickedEvent,t.ViewerStartLoading3dModelEvent=w.ViewerStartLoading3dModelEvent,t.ViewerStartViewing3dModelEvent=w.ViewerStartViewing3dModelEvent,t.ViewerStopViewing3dModelEvent=w.ViewerStopViewing3dModelEvent,t.ViewerSwitchLayoutEvent=w.ViewerSwitchLayoutEvent,t.ViewerZoomInEvent=w.ViewerZoomInEvent,t.ViewerZoomOutEvent=w.ViewerZoomOutEvent,t.ViewerThumbnailsOpenedChangeEvent=w.ViewerThumbnailsOpenedChangeEvent,t.ViewerPlaybackStartEvent=w.ViewerPlaybackStartEvent,t.ViewerPlaybackPauseEvent=w.ViewerPlaybackPauseEvent,t.ViewerPlaybackEndEvent=w.ViewerPlaybackEndEvent,t.ViewerFullscreenChangeEvent=w.ViewerFullscreenChangeEvent,t.ViewerOpenInOfficeOnlineEvent=w.ViewerOpenInOfficeOnlineEvent;var y=n(9738);t.RenderState=y.RenderState;var E=n(447);t.PdfViewerLayoutType=E.PdfViewerLayoutType},8147:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.win=window}return e.prototype.ensureAPI=function(){var e=this.win.API;e&&e.isMock?console.log("SCRORM window.API already defined skipping mock"):this.win.API={isMock:!0,LMSInitialize:function(){return"true"},LMSCommit:function(){return"true"},LMSFinish:function(){return"true"},LMSGetValue:function(e){return""},LMSSetValue:function(e,t){return"true"},LMSGetLastError:function(){return"0"},LMSGetErrorString:function(e){return"No error"},LMSGetDiagnostic:function(e){return"No error"}};var t=this.win.API_1484_11;t&&t.isMock?console.log("SCRORM window.API_1484_11 already defined skipping mock"):this.win.API_1484_11={isMock:!0,Initialize:function(){return"true"},Commit:function(){return"true"},Terminate:function(){return"true"},GetValue:function(e){return""},SetValue:function(e,t){return"true"},GetLastError:function(){return"0"},GetErrorString:function(e){return"No error"},GetDiagnostic:function(e){return"No error"}}},e.prototype.destroy=function(){var e=this.win.API;e&&e.isMock&&delete this.win.API;var t=this.win.API_1484_11;t&&t.isMock&&delete this.win.API_1484_11},e}();t.ScormMock=n},9186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3885),r=function(){function e(e){this.loadPdfJsResourcesPromise=e,this.documents=new Map,HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var i=this;setTimeout((function(){for(var r=atob(i.toDataURL(t,n).split(",")[1]),o=r.length,s=new Uint8Array(o),a=0;a<o;a++)s[a]=r.charCodeAt(a);e(new Blob([s],{type:t||"image/png"}))}))}})}return e.prototype.getThumbnailByProcessedPresentation=function(e,t){return void 0===t&&(t=1),this.documents.has(e)||this.documents.set(e,new o(this.loadPdfJsResourcesPromise,e)),this.documents.get(e).getPagePreview(t,200,150)},e.prototype.destroy=function(){this.documents.forEach((function(e){return e.destroy()})),this.documents=new Map},e}();t.PdfJsPagePreviewService=r;var o=function(){function e(e,t){this.loadPdfJsResourcesPromise=e,this.url=t,this.getPagePromises=new Map,this.pdfPages=new Map,this.pdfPagePreviews=new Map}return e.prototype.getPagePreview=function(e,t,n){var i=this;if(void 0===e&&(e=1),this.pdfPagePreviews.has(e))return Promise.resolve(this.pdfPagePreviews.get(e));var r=[function(){return i.loadPdfJsResourcesPromise},function(){return i.loadPdfData()},function(){return i.getDocument()},function(){return i.getPage(e)}];return new Promise((function(o,s){return(a=r,a.reduce((function(e,t){return e.then((function(e){return t().then(Array.prototype.concat.bind(e))})).catch((function(e){throw e}))}),Promise.resolve([]))).then((function(){var r=i.pdfPages.get(e);if(!r)return s();var a=r.getViewport(1),c=i.scale(a.width,a.height,t,n),l=r.getViewport(c),u=document.createElement("canvas"),d=u.getContext("2d");u.width=l.width,u.height=l.height;var h={canvasContext:d,viewport:l};r.render(h).promise.then((function(){u.toBlob((function(t){var n={url:URL.createObjectURL(t),width:l.width,height:l.height,bytes:t.size};i.pdfPagePreviews.set(e,n),o(n)}))}))})).catch((function(e){s(e)}));var a}))},e.prototype.destroy=function(){this.loadPdfDataPromise&&this.loadPdfDataPromise.cancel(),this.getDocumentPromise&&this.getDocumentPromise.cancel(),this.pdfDocument&&this.pdfDocument.destroy(),this.getPagePromises.forEach((function(e){return e.cancel()})),this.pdfPagePreviews.forEach((function(e){return URL.revokeObjectURL(e.url)}))},e.prototype.loadPdfData=function(){var e=this;return this.loadPdfDataPromise||(this.loadPdfDataPromise=i.cancelable(caches.match(this.url).then((function(t){if(!t)throw new Error("PdfJsPagePreviewService loadPdfData() no match found in cache "+e.url);return t.arrayBuffer()})).then((function(t){e.pdfData=t})))),this.loadPdfDataPromise},e.prototype.getDocument=function(){var e=this;return this.getDocumentPromise||(this.getDocumentPromise=i.cancelable(new Promise((function(t){return window.PDFJS.getDocument({data:e.pdfData}).then((function(n){e.pdfDocument=n,t()}))})))),this.getDocumentPromise},e.prototype.getPage=function(e){var t=this;return void 0===e&&(e=1),this.getPagePromises.has(e)||this.getPagePromises.set(e,i.cancelable(new Promise((function(n){return t.pdfDocument.getPage(e).then((function(i){t.pdfPages.set(e,i),n()}))})))),this.getPagePromises.get(e)},e.prototype.scale=function(e,t,n,i,r){void 0===r&&(r=!1);var o=n/e,s=i/t;return r?o>s?o:s:o<s?o:s},e}()},7816:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.EmbeddedDataMediaType||(t.EmbeddedDataMediaType={})).VIDEO="video",i.GIF="gif",(n=t.EmbeddedDataMediaPlayOptionsRepeat||(t.EmbeddedDataMediaPlayOptionsRepeat={})).NONE="none",n.LOOP="loop"},9738:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.RenderState||(t.RenderState={})).None="NONE",n.Initial="INITIAL",n.Running="RUNNING",n.Finished="FINISHED",n.Failed="FAILED"},4695:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TranslationKeys||(t.TranslationKeys={})).Open="open",n.Close="close",n.Download="download",n.VisitUrl="visit-url",n.PreviewImage="preview-image",n.RenderErrorWhenOffline="render-error-when-offline",n.RenderErrorNoLowQualityPreview="render-error-no-low-quality-preview",n.RenderError="render-error",n.ThreeJsViewIn3d="three-js-view-in-3d",n.ThreeJsWebglNotSupported="three-js-webgl-not-supported",n.ThreeJsUnsupportedFile="three-js-unsupported-file",n.ThreeJsReadMore="three-js-read-more",n.ThreeJsLoadingModel="three-js-loading-model",n.ThreeJsFtueOrbitTitle="three-js-ftue-orbit-title",n.ThreeJsFtueOrbitDescriptionMouse="three-js-ftue-orbit-description-mouse",n.ThreeJsFtueOrbitDescriptionTouch="three-js-ftue-orbit-description-touch",n.ThreeJsFtueZoomTitle="three-js-ftue-zoom-title",n.ThreeJsFtueZoomDescriptionMouse="three-js-ftue-zoom-description-mouse",n.ThreeJsFtueZoomDescriptionTouch="three-js-ftue-zoom-description-touch",n.ThreeJsFtuePanTitle="three-js-ftue-pan-title",n.ThreeJsFtuePanDescriptionMouse="three-js-ftue-pan-description-mouse",n.ThreeJsFtuePanDescriptionTouch="three-js-ftue-pan-description-touch",n.ThreeJsRenderErrorTitle="three-js-render-error-title",n.ThreeJsRenderErrorBody="three-js-render-error-body",n.OpenInPowerpoint="open-in-powerpoint",n.OpenInExcel="open-in-excel",n.OpenInWord="open-in-word",n.OfficeOnlineBarPowerpointMessage="office-online-bar-powerpoint-message",n.OfficeOnlineBarExcelMessage="office-online-bar-excel-message",n.OfficeOnlineBarWordMessage="office-online-bar-word-message"},8727:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ViewportChange="VIEWPORT_CHANGE",e.PreviewRendered="PREVIEW_RENDERED",e.ViewRendered="VIEW_RENDERED",e.FocusChange="FOCUS_CHANGE",e.RenderedViewFocus="RENDERED_VIEW_FOCUS",e.RenderedPreviewFocus="RENDERED_PREVIEW_FOCUS",e.PublicFocusChange="PUBLIC_FOCUS_CHANGE",e.PublicRenderedViewFocus="PUBLIC_RENDERED_VIEW_FOCUS",e.PublicRenderedPreviewFocus="PUBLIC_RENDERED_PREVIEW_FOCUS",e.SelectView="SELECT_VIEW",e.DeselectView="DESELECT_VIEW",e.UrlAssetClicked="URL_ASSET_CLICKED",e.StartLoading3dModel="START_LOADING_3D_MODEL",e.StartViewing3dModel="START_VIEWING_3D_MODEL",e.StopViewing3dModel="STOP_VIEWING_3D_MODEL",e.OpenInOfficeOnline="OPEN_IN_OFFICE_ONLINE",e.PlaybackStart="PLAYBACK_START",e.PlaybackPause="PLAYBACK_PAUSE",e.PlaybackEnd="PLAYBACK_END",e.WebappOpen="WEBAPP_OPEN",e.WebappClose="WEBAPP_CLOSE",e.DownloadAsset="DOWNLOAD_ASSET",e.SetView="SET_VIEW",e.NavigateToPage="NAVIGATE_TO_PAGE",e.Update="UPDATE",e.FullscreenChange="FULLSCREEN_CHANGE",e.ToggleFullscreen="TOGGLE_FULLSCREEN",e.AddViews="ADD_VIEWS",e.Resize="RESIZE",e.ZoomIn="ZOOM_IN",e.ZoomOut="ZOOM_OUT",e.Swipe="SWIPE",e.SwitchLayout="SWITCH_LAYOUT",e.ThumbnailsOpenedChange="THUMBNAILS_OPENED_CHANGE",e.ObservableDimensionsIframeDimensionsChanged="OBSERVABLE_DIMENSIONS_IFRAME_DIMENSIONS_CHANGED",e.LayoutZoomChange="LAYOUT_ZOOM_CHANGE"}(n=t.ViewerEventType||(t.ViewerEventType={}));t.ViewerViewportChangeEvent=function(e){this.payload=e,this.type=n.ViewportChange};t.ViewerPreviewRenderedEvent=function(e){this.payload=e,this.type=n.PreviewRendered};t.ViewerViewRenderedEvent=function(e){this.payload=e,this.type=n.ViewRendered};t.ViewerFocusChangeEvent=function(e){this.payload=e,this.type=n.FocusChange};t.ViewerRenderedViewFocusEvent=function(e){this.payload=e,this.type=n.RenderedViewFocus};t.ViewerRenderedPreviewFocusEvent=function(e){this.payload=e,this.type=n.RenderedPreviewFocus};t.ViewerPublicFocusChangeEvent=function(e){this.payload=e,this.type=n.PublicFocusChange};t.ViewerPublicRenderedViewFocusEvent=function(e){this.payload=e,this.type=n.PublicRenderedViewFocus};t.ViewerPublicRenderedPreviewFocusEvent=function(e){this.payload=e,this.type=n.PublicRenderedPreviewFocus};t.ViewerNavigateToPageEvent=function(e){this.payload=e,this.type=n.NavigateToPage};t.ViewerSelectViewEvent=function(e){this.payload=e,this.type=n.SelectView};t.ViewerDeselectViewEvent=function(e){this.payload=e,this.type=n.DeselectView};t.ViewerSetViewEvent=function(e){this.payload=e,this.type=n.SetView};t.ViewerUrlAssetClickedEvent=function(e){this.payload=e,this.type=n.UrlAssetClicked};t.ViewerStartLoading3dModelEvent=function(e){this.payload=e,this.type=n.StartLoading3dModel};t.ViewerStartViewing3dModelEvent=function(e){this.payload=e,this.type=n.StartViewing3dModel};t.ViewerStopViewing3dModelEvent=function(e){this.payload=e,this.type=n.StopViewing3dModel};t.ViewerPlaybackStartEvent=function(e){this.payload=e,this.type=n.PlaybackStart};t.ViewerPlaybackPauseEvent=function(e){this.payload=e,this.type=n.PlaybackPause};t.ViewerPlaybackEndEvent=function(e){this.payload=e,this.type=n.PlaybackEnd};t.ViewerWebappOpenEvent=function(e){this.payload=e,this.type=n.WebappOpen};t.ViewerWebappCloseEvent=function(e){this.payload=e,this.type=n.WebappClose};t.ViewerDownloadAssetEvent=function(e){this.payload=e,this.type=n.DownloadAsset};t.ViewerOpenInOfficeOnlineEvent=function(e){this.payload=e,this.type=n.OpenInOfficeOnline};t.ViewerUpdateEvent=function(){this.type=n.Update};t.ViewerFullscreenChangeEvent=function(){this.type=n.FullscreenChange};t.ViewerToggleFullscreenEvent=function(){this.type=n.ToggleFullscreen};t.ViewerAddViewsEvent=function(e){this.payload=e,this.type=n.AddViews};t.ViewerResizeEvent=function(){this.type=n.Resize};t.ViewerZoomInEvent=function(){this.type=n.ZoomIn};t.ViewerZoomOutEvent=function(){this.type=n.ZoomOut};t.ViewerSwitchLayoutEvent=function(e){this.payload=e,this.type=n.SwitchLayout};t.ViewerThumbnailsOpenedChangeEvent=function(e){this.payload=e,this.type=n.ThumbnailsOpenedChange};t.ViewerObservableDimensionsIframeDimensionsChangedEvent=function(e){this.payload=e,this.type=n.ObservableDimensionsIframeDimensionsChanged};t.ViewerLayoutZoomChangeEvent=function(){this.type=n.LayoutZoomChange}},1057:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},t.mapRange=function(e,t,n,i,r){return i+(r-i)*(e-t)/(n-t)},t.capDimensions=function(e,t,n){var i=e*t;if(i<=n)return{width:e,height:t};var r=e/t,o=Math.sqrt(i/n);return{width:r*t/o,height:t/o}}},2419:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.millisecondsToSeconds=function(e){return e/1e3}},6829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchScroll=function(e,t){var n={down:!0,lastY:e.scrollTop,lastX:e.scrollLeft,scrollHeight:e.scrollHeight},i=null;return e.addEventListener("scroll",(function(r){i||(i=window.requestAnimationFrame((function(){i=null;var o=e.scrollTop,s=e.scrollHeight,a=n.lastY;o!==a&&(n.down=o>a),n.lastY=o,n.scrollHeight=s,t(r,n)})))}),!0),n},t.getViewState=function(e,t,n,i,r){void 0===r&&(r=!1);for(var o=i.lastY,s=o+t,a=e.findIndex((function(e){return e.bottom>o})),c=[],l=0;l<e.length;l++){var u=e[l],d=u.height,h=u.top,p=u.top>s;if(u.viewState.percent=0,u.viewState.pixels=0,!(l<a)){if(p)break;if(!u.parentView||u.parentView.isExpanded){var f=d-(Math.max(0,o-h)+Math.max(0,h+d-s)),v=100*f/d|0;u.viewState.percent=v,u.viewState.pixels=f,c.push({id:l,y:h,view:u,percent:v,pixels:f})}}}var m=c[0],g=c[c.length-1];r&&c.sort((function(e,t){var n=e.percent-t.percent;return Math.abs(n)>.001?-n:e.id-t.id}));var w=m?c.find((function(e){return e.id===m.id+1})):null,y=0!==i.lastY&&o+t===i.scrollHeight?g:m.percent>80?m:w&&w.percent>m.percent?w:m;return{first:m,last:g,views:c,top:o,bottom:s,focus:y,scroll:i}}},3885:function(e,t){var n,i;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(i="function"==typeof(n=function(e){"use strict";function t(e,t){if(e)return function(n){return t.isCanceled?n:e(n)}}function n(e,i){var r={then:function(r,o){return n(e.then(t(r,i),t(o,i)),i)},catch:function(r){return n(e.catch(t(r,i)),i)},finally:function(t,r){return r&&(i.finallyList||(i.finallyList=[]),i.finallyList.push(t)),n(e.finally((function(){return r&&(i.finallyList=i.finallyList.filter((function(e){return e!==t}))),t()})),i)},cancel:function(){i.isCanceled=!0;for(var e=0,t=[i.onCancelList,i.finallyList];e<t.length;e++){var n=t[e];if(n)for(;n.length;){var r=n.shift();"function"==typeof r&&r()}}},isCanceled:function(){return!0===i.isCanceled}};return{then:r.then.bind(void 0),catch:r.catch.bind(void 0),finally:r.finally.bind(void 0),cancel:r.cancel.bind(void 0),isCanceled:r.isCanceled.bind(void 0)}}function i(e){return n(e,{})}function r(e){var t=[];return n(new Promise((function(n,i){return e(n,i,(function(e){t.push(e)}))})),{onCancelList:t})}Object.defineProperty(e,"__esModule",{value:!0}),e.cancelable=i,e.CancelablePromise=r,e.default=void 0,r.all=function(e){return i(Promise.all(e))},r.allSettled=function(e){return i(Promise.allSettled(e))},r.race=function(e){return i(Promise.race(e))},r.resolve=function(e){return i(Promise.resolve(e))},r.reject=function(e){return i(Promise.reject(e))};var o=r;e.default=o})?n.apply(t,[t]):n)||(e.exports=i)},4020:function(e){"use strict";var t="%[a-f0-9]{2}",n=new RegExp(t,"gi"),i=new RegExp("("+t+")+","gi");function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(n),r(i))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),i=1;i<t.length;i++)t=(e=r(t,i).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=o(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},7856:function(e){e.exports=function(){"use strict";var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,i=Object.getPrototypeOf,r=Object.getOwnPropertyDescriptor,o=Object.freeze,s=Object.seal,a=Object.create,c="undefined"!=typeof Reflect&&Reflect,l=c.apply,u=c.construct;l||(l=function(e,t,n){return e.apply(t,n)}),o||(o=function(e){return e}),s||(s=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var d,h=P(Array.prototype.forEach),p=P(Array.prototype.pop),f=P(Array.prototype.push),v=P(String.prototype.toLowerCase),m=P(String.prototype.match),g=P(String.prototype.replace),w=P(String.prototype.indexOf),y=P(String.prototype.trim),E=P(RegExp.prototype.test),b=(d=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(d,t)});function P(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return l(e,t,i)}}function _(e,i){t&&t(e,null);for(var r=i.length;r--;){var o=i[r];if("string"==typeof o){var s=v(o);s!==o&&(n(i)||(i[r]=s),o=s)}e[o]=!0}return e}function T(t){var n=a(null),i=void 0;for(i in t)l(e,t,[i])&&(n[i]=t[i]);return n}function S(e,t){for(;null!==e;){var n=r(e,t);if(n){if(n.get)return P(n.get);if("function"==typeof n.value)return P(n.value)}e=i(e)}return function(e){return console.warn("fallback value for",e),null}}var V=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),O=o(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),L=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),C=o(["#text"]),x=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),D=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),N=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),k=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),F=s(/<%[\s\S]*|[\s\S]*%>/gm),B=s(/^data-[\-\w.\u00B7-\uFFFF]/),j=s(/^aria-[\-\w]+$/),H=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),W=s(/^(?:\w+script|data):/i),U=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function G(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Y=function(){return"undefined"==typeof window?null:window},J=function(e,t){if("object"!==(void 0===e?"undefined":z(e))||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y(),n=function(t){return e(t)};if(n.version="2.2.7",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var i=t.document,r=t.document,s=t.DocumentFragment,a=t.HTMLTemplateElement,c=t.Node,l=t.Element,u=t.NodeFilter,d=t.NamedNodeMap,P=void 0===d?t.NamedNodeMap||t.MozNamedAttrMap:d,q=t.Text,Z=t.Comment,X=t.DOMParser,Q=t.trustedTypes,K=l.prototype,$=S(K,"cloneNode"),ee=S(K,"nextSibling"),te=S(K,"childNodes"),ne=S(K,"parentNode");if("function"==typeof a){var ie=r.createElement("template");ie.content&&ie.content.ownerDocument&&(r=ie.content.ownerDocument)}var re=J(Q,i),oe=re&&Me?re.createHTML(""):"",se=r,ae=se.implementation,ce=se.createNodeIterator,le=se.getElementsByTagName,ue=se.createDocumentFragment,de=i.importNode,he={};try{he=T(r).documentMode?r.documentMode:{}}catch(e){}var pe={};n.isSupported="function"==typeof ne&&ae&&void 0!==ae.createHTMLDocument&&9!==he;var fe=M,ve=F,me=B,ge=j,we=W,ye=U,Ee=H,be=null,Pe=_({},[].concat(G(V),G(R),G(A),G(I),G(C))),_e=null,Te=_({},[].concat(G(x),G(D),G(N),G(k))),Se=null,Ve=null,Re=!0,Ae=!0,Oe=!1,Ie=!1,Le=!1,Ce=!1,xe=!1,De=!1,Ne=!1,ke=!0,Me=!1,Fe=!0,Be=!0,je=!1,He={},We=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ue=null,ze=_({},["audio","video","img","source","image","track"]),Ge=null,Ye=_({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Je=null,qe=r.createElement("form"),Ze=function(e){Je&&Je===e||(e&&"object"===(void 0===e?"undefined":z(e))||(e={}),e=T(e),be="ALLOWED_TAGS"in e?_({},e.ALLOWED_TAGS):Pe,_e="ALLOWED_ATTR"in e?_({},e.ALLOWED_ATTR):Te,Ge="ADD_URI_SAFE_ATTR"in e?_(T(Ye),e.ADD_URI_SAFE_ATTR):Ye,Ue="ADD_DATA_URI_TAGS"in e?_(T(ze),e.ADD_DATA_URI_TAGS):ze,Se="FORBID_TAGS"in e?_({},e.FORBID_TAGS):{},Ve="FORBID_ATTR"in e?_({},e.FORBID_ATTR):{},He="USE_PROFILES"in e&&e.USE_PROFILES,Re=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,Oe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=e.SAFE_FOR_TEMPLATES||!1,Le=e.WHOLE_DOCUMENT||!1,De=e.RETURN_DOM||!1,Ne=e.RETURN_DOM_FRAGMENT||!1,ke=!1!==e.RETURN_DOM_IMPORT,Me=e.RETURN_TRUSTED_TYPE||!1,xe=e.FORCE_BODY||!1,Fe=!1!==e.SANITIZE_DOM,Be=!1!==e.KEEP_CONTENT,je=e.IN_PLACE||!1,Ee=e.ALLOWED_URI_REGEXP||Ee,Ie&&(Ae=!1),Ne&&(De=!0),He&&(be=_({},[].concat(G(C))),_e=[],!0===He.html&&(_(be,V),_(_e,x)),!0===He.svg&&(_(be,R),_(_e,D),_(_e,k)),!0===He.svgFilters&&(_(be,A),_(_e,D),_(_e,k)),!0===He.mathMl&&(_(be,I),_(_e,N),_(_e,k))),e.ADD_TAGS&&(be===Pe&&(be=T(be)),_(be,e.ADD_TAGS)),e.ADD_ATTR&&(_e===Te&&(_e=T(_e)),_(_e,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&_(Ge,e.ADD_URI_SAFE_ATTR),Be&&(be["#text"]=!0),Le&&_(be,["html","head","body"]),be.table&&(_(be,["tbody"]),delete Se.tbody),o&&o(e),Je=e)},Xe=_({},["mi","mo","mn","ms","mtext"]),Qe=_({},["foreignobject","desc","title","annotation-xml"]),Ke=_({},R);_(Ke,A),_(Ke,O);var $e=_({},I);_($e,L);var et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml",it=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:nt,tagName:"template"});var n=v(e.tagName),i=v(t.tagName);if(e.namespaceURI===tt)return t.namespaceURI===nt?"svg"===n:t.namespaceURI===et?"svg"===n&&("annotation-xml"===i||Xe[i]):Boolean(Ke[n]);if(e.namespaceURI===et)return t.namespaceURI===nt?"math"===n:t.namespaceURI===tt?"math"===n&&Qe[i]:Boolean($e[n]);if(e.namespaceURI===nt){if(t.namespaceURI===tt&&!Qe[i])return!1;if(t.namespaceURI===et&&!Xe[i])return!1;var r=_({},["title","style","font","a","script"]);return!$e[n]&&(r[n]||!Ke[n])}return!1},rt=function(e){f(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=oe}catch(t){e.remove()}}},ot=function(e,t){try{f(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){f(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!_e[e])if(De||Ne)try{rt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},st=function(e){var t=void 0,n=void 0;if(xe)e="<remove></remove>"+e;else{var i=m(e,/^[\r\n\t ]+/);n=i&&i[0]}var o=re?re.createHTML(e):e;try{t=(new X).parseFromString(o,"text/html")}catch(e){}if(!t||!t.documentElement){var s=(t=ae.createHTMLDocument("")).body;s.parentNode.removeChild(s.parentNode.firstElementChild),s.outerHTML=o}return e&&n&&t.body.insertBefore(r.createTextNode(n),t.body.childNodes[0]||null),le.call(t,Le?"html":"body")[0]},at=function(e){return ce.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,(function(){return u.FILTER_ACCEPT}),!1)},ct=function(e){return!(e instanceof q||e instanceof Z||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof P&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},lt=function(e){return"object"===(void 0===c?"undefined":z(c))?e instanceof c:e&&"object"===(void 0===e?"undefined":z(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},ut=function(e,t,i){pe[e]&&h(pe[e],(function(e){e.call(n,t,i,Je)}))},dt=function(e){var t=void 0;if(ut("beforeSanitizeElements",e,null),ct(e))return rt(e),!0;if(m(e.nodeName,/[\u0080-\uFFFF]/))return rt(e),!0;var i=v(e.nodeName);if(ut("uponSanitizeElement",e,{tagName:i,allowedTags:be}),!lt(e.firstElementChild)&&(!lt(e.content)||!lt(e.content.firstElementChild))&&E(/<[/\w]/g,e.innerHTML)&&E(/<[/\w]/g,e.textContent))return rt(e),!0;if(!be[i]||Se[i]){if(Be&&!We[i]){var r=ne(e),o=te(e);if(o&&r)for(var s=o.length-1;s>=0;--s)r.insertBefore($(o[s],!0),ee(e))}return rt(e),!0}return e instanceof l&&!it(e)?(rt(e),!0):"noscript"!==i&&"noembed"!==i||!E(/<\/no(script|embed)/i,e.innerHTML)?(Ie&&3===e.nodeType&&(t=e.textContent,t=g(t,fe," "),t=g(t,ve," "),e.textContent!==t&&(f(n.removed,{element:e.cloneNode()}),e.textContent=t)),ut("afterSanitizeElements",e,null),!1):(rt(e),!0)},ht=function(e,t,n){if(Fe&&("id"===t||"name"===t)&&(n in r||n in qe))return!1;if(Ae&&E(me,t));else if(Re&&E(ge,t));else{if(!_e[t]||Ve[t])return!1;if(Ge[t]);else if(E(Ee,g(n,ye,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(n,"data:")||!Ue[e])if(Oe&&!E(we,g(n,ye,"")));else if(n)return!1}return!0},pt=function(e){var t=void 0,i=void 0,r=void 0,o=void 0;ut("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_e};for(o=s.length;o--;){var c=t=s[o],l=c.name,u=c.namespaceURI;if(i=y(t.value),r=v(l),a.attrName=r,a.attrValue=i,a.keepAttr=!0,a.forceKeepAttr=void 0,ut("uponSanitizeAttribute",e,a),i=a.attrValue,!a.forceKeepAttr&&(ot(l,e),a.keepAttr))if(E(/\/>/i,i))ot(l,e);else{Ie&&(i=g(i,fe," "),i=g(i,ve," "));var d=e.nodeName.toLowerCase();if(ht(d,r,i))try{u?e.setAttributeNS(u,l,i):e.setAttribute(l,i),p(n.removed)}catch(e){}}}ut("afterSanitizeAttributes",e,null)}},ft=function e(t){var n=void 0,i=at(t);for(ut("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)ut("uponSanitizeShadowNode",n,null),dt(n)||(n.content instanceof s&&e(n.content),pt(n));ut("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,r){var o=void 0,a=void 0,l=void 0,u=void 0,d=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!lt(e)){if("function"!=typeof e.toString)throw b("toString is not a function");if("string"!=typeof(e=e.toString()))throw b("dirty is not a string, aborting")}if(!n.isSupported){if("object"===z(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(lt(e))return t.toStaticHTML(e.outerHTML)}return e}if(Ce||Ze(r),n.removed=[],"string"==typeof e&&(je=!1),je);else if(e instanceof c)1===(a=(o=st("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?o=a:o.appendChild(a);else{if(!De&&!Ie&&!Le&&-1===e.indexOf("<"))return re&&Me?re.createHTML(e):e;if(!(o=st(e)))return De?null:oe}o&&xe&&rt(o.firstChild);for(var h=at(je?e:o);l=h.nextNode();)3===l.nodeType&&l===u||dt(l)||(l.content instanceof s&&ft(l.content),pt(l),u=l);if(u=null,je)return e;if(De){if(Ne)for(d=ue.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return ke&&(d=de.call(i,d,!0)),d}var p=Le?o.outerHTML:o.innerHTML;return Ie&&(p=g(p,fe," "),p=g(p,ve," ")),re&&Me?re.createHTML(p):p},n.setConfig=function(e){Ze(e),Ce=!0},n.clearConfig=function(){Je=null,Ce=!1},n.isValidAttribute=function(e,t,n){Je||Ze({});var i=v(e),r=v(t);return ht(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],f(pe[e],t))},n.removeHook=function(e){pe[e]&&p(pe[e])},n.removeHooks=function(e){pe[e]&&(pe[e]=[])},n.removeAllHooks=function(){pe={}},n}()}()},3723:function(e,t,n){var i;!function(){"use strict";function r(e,t){var n;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!r.notNeeded(e)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,a=0,c=i.length;a<c;a++)o[i[a]]=l(o[i[a]],o);s&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var r=Node.prototype.removeEventListener;"click"===t?r.call(e,t,n.hijacked||n,i):r.call(e,t,n,i)},e.addEventListener=function(t,n,i){var r=Node.prototype.addEventListener;"click"===t?r.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(e,t,n,i)}),"function"==typeof e.onclick&&(n=e.onclick,e.addEventListener("click",(function(e){n(e)}),!1),e.onclick=null)}function l(e,t){return function(){return e.apply(t,arguments)}}}var o=navigator.userAgent.indexOf("Windows Phone")>=0,s=navigator.userAgent.indexOf("Android")>0&&!o,a=/iP(ad|hone|od)/.test(navigator.userAgent)&&!o,c=a&&/OS 4_\d(_\d)?/.test(navigator.userAgent),l=a&&/OS [6-7]_\d/.test(navigator.userAgent),u=navigator.userAgent.indexOf("BB10")>0;r.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(a&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},r.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},r.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},r.prototype.determineEventType=function(e){return s&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},r.prototype.focus=function(e){var t;a&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},r.prototype.updateScrollParent=function(e){var t,n;if(!(t=e.fastClickScrollParent)||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},r.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},r.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],a){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},r.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},r.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},r.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},r.prototype.onTouchEnd=function(e){var t,n,i,r,o,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,l&&(o=e.changedTouches[0],(u=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||u).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=u.tagName.toLowerCase())){if(t=this.findControl(u)){if(this.focus(u),s)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-n>100||a&&window.top!==window&&"input"===i?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),a&&"select"===i||(this.targetElement=null,e.preventDefault()),!1);return!(!a||c||!(r=u.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},r.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},r.prototype.onMouse=function(e){return!(this.targetElement&&!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),1))},r.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},r.prototype.destroy=function(){var e=this.layer;s&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},r.notNeeded=function(e){var t,n,i;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(u&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&i[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction},r.attach=function(e,t){return new r(e,t)},void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)}()},8597:function(e,t,n){"use strict";t.Z=n.p+"showpad-js-web-e94be0a3d7.min-bf2328a2b9237715d6fe160dfa94155e.js"},5269:function(e,t,n){"use strict";t.Z=n.p+"pdf-26396f6315.min-748c2fa6adedf4dbb03e2e89ce46c284.js"},5202:function(e,t,n){"use strict";t.Z=n.p+"pdf-ab8f3bf677.worker.min-e26bd625b30b59676eff5ba9996b4b5e.js"},5105:function(e,t,n){"use strict";t.Z=n.p+"pdf_viewer-dd91acc833d09c5ff7942b5abf4cd483-197d9ff2db.js"},5754:function(e,t,n){"use strict";t.Z=n.p+"three-6f1234f8fe.min-2d359c0a4ca92a5786e984acdbf65f3a.js"},2425:function(e,t,n){"use strict";t.Z=n.p+"OrbitControls-859183169460bb6933ed60cc02c50a48-1bc286c967.js"},2451:function(e,t,n){"use strict";t.Z=n.p+"ColladaLoader-28d48dcb5b915e4b2e50c04ab612109c-d6712003ec.js"},9155:function(e,t,n){"use strict";t.Z=n.p+"TGALoader-c2343bc183a8ccaf4d746edec50587c7-630150b67b.js"},539:function(e,t,n){"use strict";t.Z=n.p+"hls-e75caec714.min-14394197c2024881b98b81a5c484c45e.js"},4178:function(e,t,n){"use strict";t.Z=n.p+"typed-array-polyfill-83aa5e7d95.bundle-e856db71d81b579fa119df9d3c6e6987.js"},7750:function(e,t,n){"use strict";n.r(t),n.d(t,{add:function(){return T},after:function(){return M},ary:function(){return ot},assign:function(){return Zt},assignIn:function(){return en},assignInWith:function(){return nn},assignWith:function(){return on},at:function(){return jn},attempt:function(){return Xn},before:function(){return Qn},bind:function(){return $n},bindAll:function(){return ei},bindKey:function(){return ni},camelCase:function(){return Qi},capitalize:function(){return Ei},castArray:function(){return Ki},ceil:function(){return nr},chain:function(){return ir},chunk:function(){return sr},clamp:function(){return cr},clone:function(){return ro},cloneDeep:function(){return oo},cloneDeepWith:function(){return so},cloneWith:function(){return ao},commit:function(){return co},compact:function(){return lo},concat:function(){return uo},cond:function(){return jo},conforms:function(){return Wo},conformsTo:function(){return Uo},constant:function(){return De},countBy:function(){return $o},create:function(){return es},curry:function(){return ns},curryRight:function(){return rs},debounce:function(){return cs},deburr:function(){return Vi},default:function(){return sf},defaultTo:function(){return ls},defaults:function(){return ps},defaultsDeep:function(){return Ps},defer:function(){return Ss},delay:function(){return Rs},difference:function(){return Ls},differenceBy:function(){return Ds},differenceWith:function(){return ks},divide:function(){return Ms},drop:function(){return Fs},dropRight:function(){return Bs},dropRightWhile:function(){return Hs},dropWhile:function(){return Ws},each:function(){return zs},eachRight:function(){return Zs},endsWith:function(){return Xs},entries:function(){return Ks},entriesIn:function(){return $s},eq:function(){return at},escape:function(){return ia},escapeRegExp:function(){return sa},every:function(){return la},extend:function(){return en},extendWith:function(){return nn},fill:function(){return da},filter:function(){return pa},find:function(){return ga},findIndex:function(){return ma},findKey:function(){return ya},findLast:function(){return _a},findLastIndex:function(){return Pa},findLastKey:function(){return Ta},first:function(){return Sa},flatMap:function(){return Aa},flatMapDeep:function(){return Oa},flatMapDepth:function(){return Ia},flatten:function(){return Fn},flattenDeep:function(){return La},flattenDepth:function(){return Ca},flip:function(){return xa},floor:function(){return Da},flow:function(){return ka},flowRight:function(){return Ma},forEach:function(){return zs},forEachRight:function(){return Zs},forIn:function(){return Fa},forInRight:function(){return Ba},forOwn:function(){return ja},forOwnRight:function(){return Ha},fromPairs:function(){return Wa},functions:function(){return za},functionsIn:function(){return Ga},get:function(){return Cn},groupBy:function(){return Ja},gt:function(){return Xa},gte:function(){return Qa},has:function(){return ec},hasIn:function(){return No},head:function(){return Sa},identity:function(){return F},inRange:function(){return ic},includes:function(){return cc},indexOf:function(){return uc},initial:function(){return dc},intersection:function(){return vc},intersectionBy:function(){return mc},intersectionWith:function(){return gc},invert:function(){return Ec},invertBy:function(){return Tc},invoke:function(){return Rc},invokeMap:function(){return Ac},isArguments:function(){return Vt},isArray:function(){return y},isArrayBuffer:function(){return Ic},isArrayLike:function(){return vt},isArrayLikeObject:function(){return vs},isBoolean:function(){return Lc},isBuffer:function(){return Lt},isDate:function(){return xc},isElement:function(){return Dc},isEmpty:function(){return kc},isEqual:function(){return Mc},isEqualWith:function(){return Fc},isError:function(){return qn},isFinite:function(){return jc},isFunction:function(){return B},isInteger:function(){return Hc},isLength:function(){return ft},isMap:function(){return Qr},isMatch:function(){return Wc},isMatchWith:function(){return Uc},isNaN:function(){return Gc},isNative:function(){return Jc},isNil:function(){return qc},isNull:function(){return Zc},isNumber:function(){return zc},isObject:function(){return O},isObjectLike:function(){return v},isPlainObject:function(){return Jn},isRegExp:function(){return Qc},isSafeInteger:function(){return Kc},isSet:function(){return $r},isString:function(){return rc},isSymbol:function(){return m},isTypedArray:function(){return Bt},isUndefined:function(){return $c},isWeakMap:function(){return el},isWeakSet:function(){return tl},iteratee:function(){return nl},join:function(){return rl},kebabCase:function(){return ol},keyBy:function(){return sl},keys:function(){return Yt},keysIn:function(){return Kt},last:function(){return Cs},lastIndexOf:function(){return ll},lodash:function(){return Ve},lowerCase:function(){return ul},lowerFirst:function(){return dl},lt:function(){return pl},lte:function(){return fl},map:function(){return Ra},mapKeys:function(){return vl},mapValues:function(){return ml},matches:function(){return gl},matchesProperty:function(){return wl},max:function(){return El},maxBy:function(){return bl},mean:function(){return Tl},meanBy:function(){return Sl},memoize:function(){return _n},merge:function(){return Rl},mergeWith:function(){return bs},method:function(){return Al},methodOf:function(){return Ol},min:function(){return Il},minBy:function(){return Ll},mixin:function(){return Cl},multiply:function(){return xl},negate:function(){return Dl},next:function(){return Ml},noop:function(){return fe},now:function(){return os},nth:function(){return Bl},nthArg:function(){return jl},omit:function(){return Ul},omitBy:function(){return Jl},once:function(){return ql},orderBy:function(){return Ql},over:function(){return $l},overArgs:function(){return iu},overEvery:function(){return ru},overSome:function(){return ou},pad:function(){return _u},padEnd:function(){return Tu},padStart:function(){return Su},parseInt:function(){return Au},partial:function(){return Iu},partialRight:function(){return Du},partition:function(){return ku},pick:function(){return Mu},pickBy:function(){return Yl},plant:function(){return Fu},property:function(){return Fo},propertyOf:function(){return Bu},pull:function(){return zu},pullAll:function(){return Uu},pullAllBy:function(){return Gu},pullAllWith:function(){return Yu},pullAt:function(){return Zu},random:function(){return nd},range:function(){return sd},rangeRight:function(){return ad},rearg:function(){return ld},reduce:function(){return dd},reduceRight:function(){return pd},reject:function(){return fd},remove:function(){return vd},repeat:function(){return md},replace:function(){return gd},rest:function(){return wd},result:function(){return yd},reverse:function(){return bd},round:function(){return Pd},sample:function(){return Sd},sampleSize:function(){return Od},set:function(){return Id},setWith:function(){return Ld},shuffle:function(){return Dd},size:function(){return Nd},slice:function(){return kd},snakeCase:function(){return Md},some:function(){return Bd},sortBy:function(){return jd},sortedIndex:function(){return Gd},sortedIndexBy:function(){return Yd},sortedIndexOf:function(){return Jd},sortedLastIndex:function(){return qd},sortedLastIndexBy:function(){return Zd},sortedLastIndexOf:function(){return Xd},sortedUniq:function(){return Kd},sortedUniqBy:function(){return $d},split:function(){return eh},spread:function(){return nh},startCase:function(){return ih},startsWith:function(){return rh},stubArray:function(){return wr},stubFalse:function(){return Rt},stubObject:function(){return oh},stubString:function(){return sh},stubTrue:function(){return ah},subtract:function(){return ch},sum:function(){return lh},sumBy:function(){return uh},tail:function(){return dh},take:function(){return hh},takeRight:function(){return ph},takeRightWhile:function(){return fh},takeWhile:function(){return vh},tap:function(){return mh},template:function(){return Ch},templateSettings:function(){return _h},throttle:function(){return xh},thru:function(){return Dh},times:function(){return Mh},toArray:function(){return kl},toFinite:function(){return N},toInteger:function(){return k},toIterator:function(){return Fh},toJSON:function(){return jh},toLength:function(){return ua},toLower:function(){return Hh},toNumber:function(){return D},toPairs:function(){return Ks},toPairsIn:function(){return $s},toPath:function(){return Wh},toPlainObject:function(){return gs},toSafeInteger:function(){return Uh},toString:function(){return An},toUpper:function(){return zh},transform:function(){return Gh},trim:function(){return qh},trimEnd:function(){return Zh},trimStart:function(){return Qh},truncate:function(){return $h},unary:function(){return ep},unescape:function(){return rp},union:function(){return ap},unionBy:function(){return cp},unionWith:function(){return lp},uniq:function(){return up},uniqBy:function(){return dp},uniqWith:function(){return hp},uniqueId:function(){return fp},unset:function(){return vp},unzip:function(){return gp},unzipWith:function(){return wp},update:function(){return Ep},updateWith:function(){return bp},upperCase:function(){return Pp},upperFirst:function(){return yi},value:function(){return jh},valueOf:function(){return jh},values:function(){return sc},valuesIn:function(){return _p},without:function(){return Tp},words:function(){return qi},wrap:function(){return Sp},wrapperAt:function(){return Vp},wrapperChain:function(){return Rp},wrapperCommit:function(){return co},wrapperLodash:function(){return Ve},wrapperNext:function(){return Ml},wrapperPlant:function(){return Fu},wrapperReverse:function(){return Ap},wrapperToIterator:function(){return Fh},wrapperValue:function(){return jh},xor:function(){return Ip},xorBy:function(){return Lp},xorWith:function(){return Cp},zip:function(){return xp},zipObject:function(){return Np},zipObjectDeep:function(){return kp},zipWith:function(){return Mp}});var i,r="object"==typeof global&&global&&global.Object===Object&&global,o="object"==typeof self&&self&&self.Object===Object&&self,s=r||o||Function("return this")(),a=s.Symbol,c=Object.prototype,l=c.hasOwnProperty,u=c.toString,d=a?a.toStringTag:void 0,h=Object.prototype.toString,p=a?a.toStringTag:void 0,f=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?function(e){var t=l.call(e,d),n=e[d];try{e[d]=void 0;var i=!0}catch(e){}var r=u.call(e);return i&&(t?e[d]=n:delete e[d]),r}(e):function(e){return h.call(e)}(e)},v=function(e){return null!=e&&"object"==typeof e},m=function(e){return"symbol"==typeof e||v(e)&&"[object Symbol]"==f(e)},g=function(e){return"number"==typeof e?e:m(e)?NaN:+e},w=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r},y=Array.isArray,E=a?a.prototype:void 0,b=E?E.toString:void 0,P=function e(t){if("string"==typeof t)return t;if(y(t))return w(t,e)+"";if(m(t))return b?b.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},_=function(e,t){return function(n,i){var r;if(void 0===n&&void 0===i)return t;if(void 0!==n&&(r=n),void 0!==i){if(void 0===r)return i;"string"==typeof n||"string"==typeof i?(n=P(n),i=P(i)):(n=g(n),i=g(i)),r=e(n,i)}return r}},T=_((function(e,t){return e+t}),0),S=/\s/,V=function(e){for(var t=e.length;t--&&S.test(e.charAt(t)););return t},R=/^\s+/,A=function(e){return e?e.slice(0,V(e)+1).replace(R,""):e},O=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},I=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,C=/^0o[0-7]+$/i,x=parseInt,D=function(e){if("number"==typeof e)return e;if(m(e))return NaN;if(O(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=O(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=A(e);var n=L.test(e);return n||C.test(e)?x(e.slice(2),n?2:8):I.test(e)?NaN:+e},N=function(e){return e?Infinity===(e=D(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},k=function(e){var t=N(e),n=t%1;return t==t?n?t-n:t:0},M=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=k(e),function(){if(--e<1)return t.apply(this,arguments)}},F=function(e){return e},B=function(e){if(!O(e))return!1;var t=f(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},j=s["__core-js_shared__"],H=(i=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",W=Function.prototype.toString,U=function(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""},z=/^\[object .+?Constructor\]$/,G=Function.prototype,Y=Object.prototype,J=G.toString,q=Y.hasOwnProperty,Z=RegExp("^"+J.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=function(e){return!(!O(e)||function(e){return!!H&&H in e}(e))&&(B(e)?Z:z).test(U(e))},Q=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return X(n)?n:void 0},K=Q(s,"WeakMap"),$=K&&new K,ee=$?function(e,t){return $.set(e,t),e}:F,te=ee,ne=Object.create,ie=function(){function e(){}return function(t){if(!O(t))return{};if(ne)return ne(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),re=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ie(e.prototype),i=e.apply(n,t);return O(i)?i:n}},oe=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},se=Math.max,ae=function(e,t,n,i){for(var r=-1,o=e.length,s=n.length,a=-1,c=t.length,l=se(o-s,0),u=Array(c+l),d=!i;++a<c;)u[a]=t[a];for(;++r<s;)(d||r<o)&&(u[n[r]]=e[r]);for(;l--;)u[a++]=e[r++];return u},ce=Math.max,le=function(e,t,n,i){for(var r=-1,o=e.length,s=-1,a=n.length,c=-1,l=t.length,u=ce(o-a,0),d=Array(u+l),h=!i;++r<u;)d[r]=e[r];for(var p=r;++c<l;)d[p+c]=t[c];for(;++s<a;)(h||r<o)&&(d[p+n[s]]=e[r++]);return d},ue=function(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i},de=function(){};function he(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}he.prototype=ie(de.prototype),he.prototype.constructor=he;var pe=he,fe=function(){},ve=$?function(e){return $.get(e)}:fe,me=ve,ge={},we=Object.prototype.hasOwnProperty,ye=function(e){for(var t=e.name+"",n=ge[t],i=we.call(ge,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t};function Ee(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Ee.prototype=ie(de.prototype),Ee.prototype.constructor=Ee;var be=Ee,Pe=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t},_e=function(e){if(e instanceof pe)return e.clone();var t=new be(e.__wrapped__,e.__chain__);return t.__actions__=Pe(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Te=Object.prototype.hasOwnProperty;function Se(e){if(v(e)&&!y(e)&&!(e instanceof pe)){if(e instanceof be)return e;if(Te.call(e,"__wrapped__"))return _e(e)}return new be(e)}Se.prototype=de.prototype,Se.prototype.constructor=Se;var Ve=Se,Re=function(e){var t=ye(e),n=Ve[t];if("function"!=typeof n||!(t in pe.prototype))return!1;if(e===n)return!0;var i=me(n);return!!i&&e===i[0]},Ae=Date.now,Oe=function(e){var t=0,n=0;return function(){var i=Ae(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Ie=Oe(te),Le=/\{\n\/\* \[wrapped with (.+)\] \*/,Ce=/,? & /,xe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,De=function(e){return function(){return e}},Ne=function(){try{var e=Q(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ke=Ne,Me=ke?function(e,t){return ke(e,"toString",{configurable:!0,enumerable:!1,value:De(t),writable:!0})}:F,Fe=Oe(Me),Be=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e},je=function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1},He=function(e){return e!=e},We=function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):je(e,He,n)},Ue=function(e,t){return!(null==e||!e.length)&&We(e,t,0)>-1},ze=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ge=function(e,t,n){var i=t+"";return Fe(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(xe,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return Be(ze,(function(n){var i="_."+n[0];t&n[1]&&!Ue(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(Le);return t?t[1].split(Ce):[]}(i),n)))},Ye=function(e,t,n,i,r,o,s,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var d=[e,t,r,u?o:void 0,u?s:void 0,u?void 0:o,u?void 0:s,a,c,l],h=n.apply(void 0,d);return Re(e)&&Ie(h,d),h.placeholder=i,Ge(h,e,t)},Je=function(e){return e.placeholder},qe=/^(?:0|[1-9]\d*)$/,Ze=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&qe.test(e))&&e>-1&&e%1==0&&e<t},Xe=Math.min,Qe=function(e,t){for(var n=e.length,i=Xe(t.length,n),r=Pe(e);i--;){var o=t[i];e[i]=Ze(o,n)?r[o]:void 0}return e},Ke="__lodash_placeholder__",$e=function(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==Ke||(e[n]=Ke,o[r++]=n)}return o},et=function e(t,n,i,r,o,a,c,l,u,d){var h=128&n,p=1&n,f=2&n,v=24&n,m=512&n,g=f?void 0:re(t);return function w(){for(var y=arguments.length,E=Array(y),b=y;b--;)E[b]=arguments[b];if(v)var P=Je(w),_=ue(E,P);if(r&&(E=ae(E,r,o,v)),a&&(E=le(E,a,c,v)),y-=_,v&&y<d){var T=$e(E,P);return Ye(t,n,e,w.placeholder,i,E,T,l,u,d-y)}var S=p?i:this,V=f?S[t]:t;return y=E.length,l?E=Qe(E,l):m&&y>1&&E.reverse(),h&&u<y&&(E.length=u),this&&this!==s&&this instanceof w&&(V=g||re(V)),V.apply(S,E)}},tt="__lodash_placeholder__",nt=Math.min,it=Math.max,rt=function(e,t,n,i,r,o,a,c){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var u=i?i.length:0;if(u||(t&=-97,i=r=void 0),a=void 0===a?a:it(k(a),0),c=void 0===c?c:k(c),u-=r?r.length:0,64&t){var d=i,h=r;i=r=void 0}var p=l?void 0:me(e),f=[e,t,n,i,r,d,h,o,a,c];if(p&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<131,s=128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var a=t[3];if(a){var c=e[3];e[3]=c?ae(c,a,t[4]):a,e[4]=c?$e(e[3],tt):t[4]}(a=t[5])&&(c=e[5],e[5]=c?le(c,a,t[6]):a,e[6]=c?$e(e[5],tt):t[6]),(a=t[7])&&(e[7]=a),128&i&&(e[8]=null==e[8]?t[8]:nt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(f,p),e=f[0],t=f[1],n=f[2],i=f[3],r=f[4],!(c=f[9]=void 0===f[9]?l?0:e.length:it(f[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var i=re(e);return function r(){for(var o=arguments.length,a=Array(o),c=o,l=Je(r);c--;)a[c]=arguments[c];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:$e(a,l);return(o-=u.length)<n?Ye(e,t,et,r.placeholder,void 0,a,u,void 0,void 0,n-o):oe(this&&this!==s&&this instanceof r?i:e,this,a)}}(e,t,c):32!=t&&33!=t||r.length?et.apply(void 0,f):function(e,t,n,i){var r=1&t,o=re(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=i.length,d=Array(u+c),h=this&&this!==s&&this instanceof t?o:e;++l<u;)d[l]=i[l];for(;c--;)d[l++]=arguments[++a];return oe(h,r?n:this,d)}}(e,t,n,i);else var v=function(e,t,n){var i=1&t,r=re(e);return function t(){return(this&&this!==s&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n);return Ge((p?te:Ie)(v,f),e,t)},ot=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,rt(e,128,void 0,void 0,void 0,void 0,t)},st=function(e,t,n){"__proto__"==t&&ke?ke(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},at=function(e,t){return e===t||e!=e&&t!=t},ct=Object.prototype.hasOwnProperty,lt=function(e,t,n){var i=e[t];ct.call(e,t)&&at(i,n)&&(void 0!==n||t in e)||st(e,t,n)},ut=function(e,t,n,i){var r=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=i?i(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),r?st(n,a,c):lt(n,a,c)}return n},dt=Math.max,ht=function(e,t,n){return t=dt(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,o=dt(i.length-t,0),s=Array(o);++r<o;)s[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(s),oe(e,this,a)}},pt=function(e,t){return Fe(ht(e,t,F),e+"")},ft=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},vt=function(e){return null!=e&&ft(e.length)&&!B(e)},mt=function(e,t,n){if(!O(n))return!1;var i=typeof t;return!!("number"==i?vt(n)&&Ze(t,n.length):"string"==i&&t in n)&&at(n[t],e)},gt=function(e){return pt((function(t,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,s&&mt(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),t=Object(t);++i<r;){var a=n[i];a&&e(t,a,i,o)}return t}))},wt=Object.prototype,yt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||wt)},Et=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i},bt=function(e){return v(e)&&"[object Arguments]"==f(e)},Pt=Object.prototype,_t=Pt.hasOwnProperty,Tt=Pt.propertyIsEnumerable,St=bt(function(){return arguments}())?bt:function(e){return v(e)&&_t.call(e,"callee")&&!Tt.call(e,"callee")},Vt=St,Rt=function(){return!1},At="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ot=At&&"object"==typeof module&&module&&!module.nodeType&&module,It=Ot&&Ot.exports===At?s.Buffer:void 0,Lt=(It?It.isBuffer:void 0)||Rt,Ct={};Ct["[object Float32Array]"]=Ct["[object Float64Array]"]=Ct["[object Int8Array]"]=Ct["[object Int16Array]"]=Ct["[object Int32Array]"]=Ct["[object Uint8Array]"]=Ct["[object Uint8ClampedArray]"]=Ct["[object Uint16Array]"]=Ct["[object Uint32Array]"]=!0,Ct["[object Arguments]"]=Ct["[object Array]"]=Ct["[object ArrayBuffer]"]=Ct["[object Boolean]"]=Ct["[object DataView]"]=Ct["[object Date]"]=Ct["[object Error]"]=Ct["[object Function]"]=Ct["[object Map]"]=Ct["[object Number]"]=Ct["[object Object]"]=Ct["[object RegExp]"]=Ct["[object Set]"]=Ct["[object String]"]=Ct["[object WeakMap]"]=!1;var xt=function(e){return function(t){return e(t)}},Dt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nt=Dt&&"object"==typeof module&&module&&!module.nodeType&&module,kt=Nt&&Nt.exports===Dt&&r.process,Mt=function(){try{return Nt&&Nt.require&&Nt.require("util").types||kt&&kt.binding&&kt.binding("util")}catch(e){}}(),Ft=Mt&&Mt.isTypedArray,Bt=Ft?xt(Ft):function(e){return v(e)&&ft(e.length)&&!!Ct[f(e)]},jt=Object.prototype.hasOwnProperty,Ht=function(e,t){var n=y(e),i=!n&&Vt(e),r=!n&&!i&&Lt(e),o=!n&&!i&&!r&&Bt(e),s=n||i||r||o,a=s?Et(e.length,String):[],c=a.length;for(var l in e)!t&&!jt.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ze(l,c))||a.push(l);return a},Wt=function(e,t){return function(n){return e(t(n))}},Ut=Wt(Object.keys,Object),zt=Object.prototype.hasOwnProperty,Gt=function(e){if(!yt(e))return Ut(e);var t=[];for(var n in Object(e))zt.call(e,n)&&"constructor"!=n&&t.push(n);return t},Yt=function(e){return vt(e)?Ht(e):Gt(e)},Jt=Object.prototype.hasOwnProperty,qt=gt((function(e,t){if(yt(t)||vt(t))ut(t,Yt(t),e);else for(var n in t)Jt.call(t,n)&&lt(e,n,t[n])})),Zt=qt,Xt=Object.prototype.hasOwnProperty,Qt=function(e){if(!O(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=yt(e),n=[];for(var i in e)("constructor"!=i||!t&&Xt.call(e,i))&&n.push(i);return n},Kt=function(e){return vt(e)?Ht(e,!0):Qt(e)},$t=gt((function(e,t){ut(t,Kt(t),e)})),en=$t,tn=gt((function(e,t,n,i){ut(t,Kt(t),e,i)})),nn=tn,rn=gt((function(e,t,n,i){ut(t,Yt(t),e,i)})),on=rn,sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,an=/^\w*$/,cn=function(e,t){if(y(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!m(e))||an.test(e)||!sn.test(e)||null!=t&&e in Object(t)},ln=Q(Object,"create"),un=Object.prototype.hasOwnProperty,dn=Object.prototype.hasOwnProperty;function hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}hn.prototype.clear=function(){this.__data__=ln?ln(null):{},this.size=0},hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},hn.prototype.get=function(e){var t=this.__data__;if(ln){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return un.call(t,e)?t[e]:void 0},hn.prototype.has=function(e){var t=this.__data__;return ln?void 0!==t[e]:dn.call(t,e)},hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ln&&void 0===t?"__lodash_hash_undefined__":t,this};var pn=hn,fn=function(e,t){for(var n=e.length;n--;)if(at(e[n][0],t))return n;return-1},vn=Array.prototype.splice;function mn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}mn.prototype.clear=function(){this.__data__=[],this.size=0},mn.prototype.delete=function(e){var t=this.__data__,n=fn(t,e);return!(n<0||(n==t.length-1?t.pop():vn.call(t,n,1),--this.size,0))},mn.prototype.get=function(e){var t=this.__data__,n=fn(t,e);return n<0?void 0:t[n][1]},mn.prototype.has=function(e){return fn(this.__data__,e)>-1},mn.prototype.set=function(e,t){var n=this.__data__,i=fn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var gn=mn,wn=Q(s,"Map"),yn=function(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map};function En(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}En.prototype.clear=function(){this.size=0,this.__data__={hash:new pn,map:new(wn||gn),string:new pn}},En.prototype.delete=function(e){var t=yn(this,e).delete(e);return this.size-=t?1:0,t},En.prototype.get=function(e){return yn(this,e).get(e)},En.prototype.has=function(e){return yn(this,e).has(e)},En.prototype.set=function(e,t){var n=yn(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var bn=En;function Pn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Pn.Cache||bn),n}Pn.Cache=bn;var _n=Pn,Tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sn=/\\(\\)?/g,Vn=function(e){var t=_n(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Tn,(function(e,n,i,r){t.push(i?r.replace(Sn,"$1"):n||e)})),t})),Rn=Vn,An=function(e){return null==e?"":P(e)},On=function(e,t){return y(e)?e:cn(e,t)?[e]:Rn(An(e))},In=function(e){if("string"==typeof e||m(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Ln=function(e,t){for(var n=0,i=(t=On(t,e)).length;null!=e&&n<i;)e=e[In(t[n++])];return n&&n==i?e:void 0},Cn=function(e,t,n){var i=null==e?void 0:Ln(e,t);return void 0===i?n:i},xn=function(e,t){for(var n=-1,i=t.length,r=Array(i),o=null==e;++n<i;)r[n]=o?void 0:Cn(e,t[n]);return r},Dn=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e},Nn=a?a.isConcatSpreadable:void 0,kn=function(e){return y(e)||Vt(e)||!!(Nn&&e&&e[Nn])},Mn=function e(t,n,i,r,o){var s=-1,a=t.length;for(i||(i=kn),o||(o=[]);++s<a;){var c=t[s];n>0&&i(c)?n>1?e(c,n-1,i,r,o):Dn(o,c):r||(o[o.length]=c)}return o},Fn=function(e){return null!=e&&e.length?Mn(e,1):[]},Bn=function(e){return Fe(ht(e,void 0,Fn),e+"")},jn=Bn(xn),Hn=Wt(Object.getPrototypeOf,Object),Wn=Function.prototype,Un=Object.prototype,zn=Wn.toString,Gn=Un.hasOwnProperty,Yn=zn.call(Object),Jn=function(e){if(!v(e)||"[object Object]"!=f(e))return!1;var t=Hn(e);if(null===t)return!0;var n=Gn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&zn.call(n)==Yn},qn=function(e){if(!v(e))return!1;var t=f(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Jn(e)},Zn=pt((function(e,t){try{return oe(e,void 0,t)}catch(e){return qn(e)?e:new Error(e)}})),Xn=Zn,Qn=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=k(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}},Kn=pt((function(e,t,n){var i=1;if(n.length){var r=$e(n,Je(Kn));i|=32}return rt(e,i,t,n,r)}));Kn.placeholder={};var $n=Kn,ei=Bn((function(e,t){return Be(t,(function(t){t=In(t),st(e,t,$n(e[t],e))})),e})),ti=pt((function(e,t,n){var i=3;if(n.length){var r=$e(n,Je(ti));i|=32}return rt(t,i,e,n,r)}));ti.placeholder={};var ni=ti,ii=function(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o},ri=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:ii(e,t,n)},oi=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),si=function(e){return oi.test(e)},ai="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ci="\\ud83c[\\udffb-\\udfff]",li="[^\\ud800-\\udfff]",ui="(?:\\ud83c[\\udde6-\\uddff]){2}",di="[\\ud800-\\udbff][\\udc00-\\udfff]",hi="(?:"+ai+"|"+ci+")?",pi="[\\ufe0e\\ufe0f]?",fi=pi+hi+"(?:\\u200d(?:"+[li,ui,di].join("|")+")"+pi+hi+")*",vi="(?:"+[li+ai+"?",ai,ui,di,"[\\ud800-\\udfff]"].join("|")+")",mi=RegExp(ci+"(?="+ci+")|"+vi+fi,"g"),gi=function(e){return si(e)?function(e){return e.match(mi)||[]}(e):function(e){return e.split("")}(e)},wi=function(e){return function(t){t=An(t);var n=si(t)?gi(t):void 0,i=n?n[0]:t.charAt(0),r=n?ri(n,1).join(""):t.slice(1);return i[e]()+r}},yi=wi("toUpperCase"),Ei=function(e){return yi(An(e).toLowerCase())},bi=function(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n},Pi=function(e){return function(t){return null==e?void 0:e[t]}},_i=Pi({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ti=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Si=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Vi=function(e){return(e=An(e))&&e.replace(Ti,_i).replace(Si,"")},Ri=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ai=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Oi="a-z\\xdf-\\xf6\\xf8-\\xff",Ii="A-Z\\xc0-\\xd6\\xd8-\\xde",Li="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ci="["+Li+"]",xi="\\d+",Di="["+Oi+"]",Ni="[^\\ud800-\\udfff"+Li+xi+"\\u2700-\\u27bf"+Oi+Ii+"]",ki="(?:\\ud83c[\\udde6-\\uddff]){2}",Mi="[\\ud800-\\udbff][\\udc00-\\udfff]",Fi="["+Ii+"]",Bi="(?:"+Di+"|"+Ni+")",ji="(?:"+Fi+"|"+Ni+")",Hi="(?:['’](?:d|ll|m|re|s|t|ve))?",Wi="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ui="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",zi="[\\ufe0e\\ufe0f]?",Gi=zi+Ui+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",ki,Mi].join("|")+")"+zi+Ui+")*",Yi="(?:"+["[\\u2700-\\u27bf]",ki,Mi].join("|")+")"+Gi,Ji=RegExp([Fi+"?"+Di+"+"+Hi+"(?="+[Ci,Fi,"$"].join("|")+")",ji+"+"+Wi+"(?="+[Ci,Fi+Bi,"$"].join("|")+")",Fi+"?"+Bi+"+"+Hi,Fi+"+"+Wi,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xi,Yi].join("|"),"g"),qi=function(e,t,n){return e=An(e),void 0===(t=n?void 0:t)?function(e){return Ai.test(e)}(e)?function(e){return e.match(Ji)||[]}(e):function(e){return e.match(Ri)||[]}(e):e.match(t)||[]},Zi=RegExp("['’]","g"),Xi=function(e){return function(t){return bi(qi(Vi(t).replace(Zi,"")),e,"")}},Qi=Xi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ei(t):t)})),Ki=function(){if(!arguments.length)return[];var e=arguments[0];return y(e)?e:[e]},$i=s.isFinite,er=Math.min,tr=function(e){var t=Math[e];return function(e,n){if(e=D(e),(n=null==n?0:er(k(n),292))&&$i(e)){var i=(An(e)+"e").split("e"),r=t(i[0]+"e"+(+i[1]+n));return+((i=(An(r)+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}},nr=tr("ceil"),ir=function(e){var t=Ve(e);return t.__chain__=!0,t},rr=Math.ceil,or=Math.max,sr=function(e,t,n){t=(n?mt(e,t,n):void 0===t)?1:or(k(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var r=0,o=0,s=Array(rr(i/t));r<i;)s[o++]=ii(e,r,r+=t);return s},ar=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},cr=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=D(n))==n?n:0),void 0!==t&&(t=(t=D(t))==t?t:0),ar(D(e),t,n)};function lr(e){var t=this.__data__=new gn(e);this.size=t.size}lr.prototype.clear=function(){this.__data__=new gn,this.size=0},lr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},lr.prototype.get=function(e){return this.__data__.get(e)},lr.prototype.has=function(e){return this.__data__.has(e)},lr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof gn){var i=n.__data__;if(!wn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new bn(i)}return n.set(e,t),this.size=n.size,this};var ur=lr,dr=function(e,t){return e&&ut(t,Yt(t),e)},hr="object"==typeof exports&&exports&&!exports.nodeType&&exports,pr=hr&&"object"==typeof module&&module&&!module.nodeType&&module,fr=pr&&pr.exports===hr?s.Buffer:void 0,vr=fr?fr.allocUnsafe:void 0,mr=function(e,t){if(t)return e.slice();var n=e.length,i=vr?vr(n):new e.constructor(n);return e.copy(i),i},gr=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o},wr=function(){return[]},yr=Object.prototype.propertyIsEnumerable,Er=Object.getOwnPropertySymbols,br=Er?function(e){return null==e?[]:(e=Object(e),gr(Er(e),(function(t){return yr.call(e,t)})))}:wr,Pr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Dn(t,br(e)),e=Hn(e);return t}:wr,_r=function(e,t,n){var i=t(e);return y(e)?i:Dn(i,n(e))},Tr=function(e){return _r(e,Yt,br)},Sr=function(e){return _r(e,Kt,Pr)},Vr=Q(s,"DataView"),Rr=Q(s,"Promise"),Ar=Q(s,"Set"),Or="[object Map]",Ir="[object Promise]",Lr="[object Set]",Cr="[object WeakMap]",xr="[object DataView]",Dr=U(Vr),Nr=U(wn),kr=U(Rr),Mr=U(Ar),Fr=U(K),Br=f;(Vr&&Br(new Vr(new ArrayBuffer(1)))!=xr||wn&&Br(new wn)!=Or||Rr&&Br(Rr.resolve())!=Ir||Ar&&Br(new Ar)!=Lr||K&&Br(new K)!=Cr)&&(Br=function(e){var t=f(e),n="[object Object]"==t?e.constructor:void 0,i=n?U(n):"";if(i)switch(i){case Dr:return xr;case Nr:return Or;case kr:return Ir;case Mr:return Lr;case Fr:return Cr}return t});var jr=Br,Hr=Object.prototype.hasOwnProperty,Wr=s.Uint8Array,Ur=function(e){var t=new e.constructor(e.byteLength);return new Wr(t).set(new Wr(e)),t},zr=/\w*$/,Gr=a?a.prototype:void 0,Yr=Gr?Gr.valueOf:void 0,Jr=function(e,t){var n=t?Ur(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},qr=function(e,t,n){var i,r,o,s=e.constructor;switch(t){case"[object ArrayBuffer]":return Ur(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return function(e,t){var n=t?Ur(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Jr(e,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return(o=new(r=e).constructor(r.source,zr.exec(r))).lastIndex=r.lastIndex,o;case"[object Set]":return new s;case"[object Symbol]":return i=e,Yr?Object(Yr.call(i)):{}}},Zr=function(e){return"function"!=typeof e.constructor||yt(e)?{}:ie(Hn(e))},Xr=Mt&&Mt.isMap,Qr=Xr?xt(Xr):function(e){return v(e)&&"[object Map]"==jr(e)},Kr=Mt&&Mt.isSet,$r=Kr?xt(Kr):function(e){return v(e)&&"[object Set]"==jr(e)},eo="[object Arguments]",to="[object Function]",no={};no[eo]=no["[object Array]"]=no["[object ArrayBuffer]"]=no["[object DataView]"]=no["[object Boolean]"]=no["[object Date]"]=no["[object Float32Array]"]=no["[object Float64Array]"]=no["[object Int8Array]"]=no["[object Int16Array]"]=no["[object Int32Array]"]=no["[object Map]"]=no["[object Number]"]=no["[object Object]"]=no["[object RegExp]"]=no["[object Set]"]=no["[object String]"]=no["[object Symbol]"]=no["[object Uint8Array]"]=no["[object Uint8ClampedArray]"]=no["[object Uint16Array]"]=no["[object Uint32Array]"]=!0,no["[object Error]"]=no[to]=no["[object WeakMap]"]=!1;var io=function e(t,n,i,r,o,s){var a,c=1&n,l=2&n,u=4&n;if(i&&(a=o?i(t,r,o,s):i(t)),void 0!==a)return a;if(!O(t))return t;var d=y(t);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Hr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(t),!c)return Pe(t,a)}else{var h=jr(t),p=h==to||"[object GeneratorFunction]"==h;if(Lt(t))return mr(t,c);if("[object Object]"==h||h==eo||p&&!o){if(a=l||p?{}:Zr(t),!c)return l?function(e,t){return ut(e,Pr(e),t)}(t,function(e,t){return e&&ut(t,Kt(t),e)}(a,t)):function(e,t){return ut(e,br(e),t)}(t,dr(a,t))}else{if(!no[h])return o?t:{};a=qr(t,h,c)}}s||(s=new ur);var f=s.get(t);if(f)return f;s.set(t,a),$r(t)?t.forEach((function(r){a.add(e(r,n,i,r,t,s))})):Qr(t)&&t.forEach((function(r,o){a.set(o,e(r,n,i,o,t,s))}));var v=d?void 0:(u?l?Sr:Tr:l?Kt:Yt)(t);return Be(v||t,(function(r,o){v&&(r=t[o=r]),lt(a,o,e(r,n,i,o,t,s))})),a},ro=function(e){return io(e,4)},oo=function(e){return io(e,5)},so=function(e,t){return io(e,5,t="function"==typeof t?t:void 0)},ao=function(e,t){return io(e,4,t="function"==typeof t?t:void 0)},co=function(){return new be(this.value(),this.__chain__)},lo=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},uo=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Dn(y(n)?Pe(n):[n],Mn(t,1))};function ho(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new bn;++t<n;)this.add(e[t])}ho.prototype.add=ho.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ho.prototype.has=function(e){return this.__data__.has(e)};var po=ho,fo=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},vo=function(e,t){return e.has(t)},mo=function(e,t,n,i,r,o){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,p=2&n?new po:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var f=e[d],v=t[d];if(i)var m=s?i(v,f,d,t,e,o):i(f,v,d,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!fo(t,(function(e,t){if(!vo(p,t)&&(f===e||r(f,e,n,i,o)))return p.push(t)}))){h=!1;break}}else if(f!==v&&!r(f,v,n,i,o)){h=!1;break}}return o.delete(e),o.delete(t),h},go=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n},wo=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},yo=a?a.prototype:void 0,Eo=yo?yo.valueOf:void 0,bo=Object.prototype.hasOwnProperty,Po="[object Arguments]",_o="[object Array]",To="[object Object]",So=Object.prototype.hasOwnProperty,Vo=function(e,t,n,i,r,o){var s=y(e),a=y(t),c=s?_o:jr(e),l=a?_o:jr(t),u=(c=c==Po?To:c)==To,d=(l=l==Po?To:l)==To,h=c==l;if(h&&Lt(e)){if(!Lt(t))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new ur),s||Bt(e)?mo(e,t,n,i,r,o):function(e,t,n,i,r,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Wr(e),new Wr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return at(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=go;case"[object Set]":var c=1&i;if(a||(a=wo),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;i|=2,s.set(e,t);var u=mo(a(e),a(t),i,r,o,s);return s.delete(e),u;case"[object Symbol]":if(Eo)return Eo.call(e)==Eo.call(t)}return!1}(e,t,c,n,i,r,o);if(!(1&n)){var p=u&&So.call(e,"__wrapped__"),f=d&&So.call(t,"__wrapped__");if(p||f){var v=p?e.value():e,m=f?t.value():t;return o||(o=new ur),r(v,m,n,i,o)}}return!!h&&(o||(o=new ur),function(e,t,n,i,r,o){var s=1&n,a=Tr(e),c=a.length;if(c!=Tr(t).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in t:bo.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=s;++l<c;){var v=e[u=a[l]],m=t[u];if(i)var g=s?i(m,v,u,t,e,o):i(v,m,u,e,t,o);if(!(void 0===g?v===m||r(v,m,n,i,o):g)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var w=e.constructor,y=t.constructor;w==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,i,r,o))},Ro=function e(t,n,i,r,o){return t===n||(null==t||null==n||!v(t)&&!v(n)?t!=t&&n!=n:Vo(t,n,i,r,e,o))},Ao=function(e,t,n,i){var r=n.length,o=r,s=!i;if(null==e)return!o;for(e=Object(e);r--;){var a=n[r];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){var c=(a=n[r])[0],l=e[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in e))return!1}else{var d=new ur;if(i)var h=i(l,u,c,e,t,d);if(!(void 0===h?Ro(u,l,3,i,d):h))return!1}}return!0},Oo=function(e){return e==e&&!O(e)},Io=function(e){for(var t=Yt(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Oo(r)]}return t},Lo=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},Co=function(e){var t=Io(e);return 1==t.length&&t[0][2]?Lo(t[0][0],t[0][1]):function(n){return n===e||Ao(n,e,t)}},xo=function(e,t){return null!=e&&t in Object(e)},Do=function(e,t,n){for(var i=-1,r=(t=On(t,e)).length,o=!1;++i<r;){var s=In(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&ft(r)&&Ze(s,r)&&(y(e)||Vt(e))},No=function(e,t){return null!=e&&Do(e,t,xo)},ko=function(e,t){return cn(e)&&Oo(t)?Lo(In(e),t):function(n){var i=Cn(n,e);return void 0===i&&i===t?No(n,e):Ro(t,i,3)}},Mo=function(e){return function(t){return null==t?void 0:t[e]}},Fo=function(e){return cn(e)?Mo(In(e)):function(e){return function(t){return Ln(t,e)}}(e)},Bo=function(e){return"function"==typeof e?e:null==e?F:"object"==typeof e?y(e)?ko(e[0],e[1]):Co(e):Fo(e)},jo=function(e){var t=null==e?0:e.length,n=Bo;return e=t?w(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[n(e[0]),e[1]]})):[],pt((function(n){for(var i=-1;++i<t;){var r=e[i];if(oe(r[0],this,n))return oe(r[1],this,n)}}))},Ho=function(e,t,n){var i=n.length;if(null==e)return!i;for(e=Object(e);i--;){var r=n[i],o=t[r],s=e[r];if(void 0===s&&!(r in e)||!o(s))return!1}return!0},Wo=function(e){return function(e){var t=Yt(e);return function(n){return Ho(n,e,t)}}(io(e,1))},Uo=function(e,t){return null==t||Ho(e,t,Yt(t))},zo=function(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(i,s,n(s),e)}return i},Go=function(e){return function(t,n,i){for(var r=-1,o=Object(t),s=i(t),a=s.length;a--;){var c=s[e?a:++r];if(!1===n(o[c],c,o))break}return t}},Yo=Go(),Jo=function(e,t){return e&&Yo(e,t,Yt)},qo=function(e,t){return function(n,i){if(null==n)return n;if(!vt(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=Object(n);(t?o--:++o<r)&&!1!==i(s[o],o,s););return n}},Zo=qo(Jo),Xo=function(e,t,n,i){return Zo(e,(function(e,r,o){t(i,e,n(e),o)})),i},Qo=function(e,t){return function(n,i){var r=y(n)?zo:Xo,o=t?t():{};return r(n,e,Bo(i),o)}},Ko=Object.prototype.hasOwnProperty,$o=Qo((function(e,t,n){Ko.call(e,n)?++e[n]:st(e,n,1)})),es=function(e,t){var n=ie(e);return null==t?n:dr(n,t)};function ts(e,t,n){var i=rt(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return i.placeholder=ts.placeholder,i}ts.placeholder={};var ns=ts;function is(e,t,n){var i=rt(e,16,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return i.placeholder=is.placeholder,i}is.placeholder={};var rs=is,os=function(){return s.Date.now()},ss=Math.max,as=Math.min,cs=function(e,t,n){var i,r,o,s,a,c,l=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,o=r;return i=r=void 0,l=t,s=e.apply(o,n)}function f(e){return l=e,a=setTimeout(m,t),u?p(e):s}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=o}function m(){var e=os();if(v(e))return g(e);a=setTimeout(m,function(e){var n=t-(e-c);return d?as(n,o-(e-l)):n}(e))}function g(e){return a=void 0,h&&i?p(e):(i=r=void 0,s)}function w(){var e=os(),n=v(e);if(i=arguments,r=this,c=e,n){if(void 0===a)return f(c);if(d)return clearTimeout(a),a=setTimeout(m,t),p(c)}return void 0===a&&(a=setTimeout(m,t)),s}return t=D(t)||0,O(n)&&(u=!!n.leading,o=(d="maxWait"in n)?ss(D(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=c=r=a=void 0},w.flush=function(){return void 0===a?s:g(os())},w},ls=function(e,t){return null==e||e!=e?t:e},us=Object.prototype,ds=us.hasOwnProperty,hs=pt((function(e,t){e=Object(e);var n=-1,i=t.length,r=i>2?t[2]:void 0;for(r&&mt(t[0],t[1],r)&&(i=1);++n<i;)for(var o=t[n],s=Kt(o),a=-1,c=s.length;++a<c;){var l=s[a],u=e[l];(void 0===u||at(u,us[l])&&!ds.call(e,l))&&(e[l]=o[l])}return e})),ps=hs,fs=function(e,t,n){(void 0!==n&&!at(e[t],n)||void 0===n&&!(t in e))&&st(e,t,n)},vs=function(e){return v(e)&&vt(e)},ms=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},gs=function(e){return ut(e,Kt(e))},ws=function e(t,n,i,r,o){t!==n&&Yo(n,(function(s,a){if(o||(o=new ur),O(s))!function(e,t,n,i,r,o,s){var a=ms(e,n),c=ms(t,n),l=s.get(c);if(l)fs(e,n,l);else{var u=o?o(a,c,n+"",e,t,s):void 0,d=void 0===u;if(d){var h=y(c),p=!h&&Lt(c),f=!h&&!p&&Bt(c);u=c,h||p||f?y(a)?u=a:vs(a)?u=Pe(a):p?(d=!1,u=mr(c,!0)):f?(d=!1,u=Jr(c,!0)):u=[]:Jn(c)||Vt(c)?(u=a,Vt(a)?u=gs(a):O(a)&&!B(a)||(u=Zr(c))):d=!1}d&&(s.set(c,u),r(u,c,i,o,s),s.delete(c)),fs(e,n,u)}}(t,n,a,i,e,r,o);else{var c=r?r(ms(t,a),s,a+"",t,n,o):void 0;void 0===c&&(c=s),fs(t,a,c)}}),Kt)},ys=function e(t,n,i,r,o,s){return O(t)&&O(n)&&(s.set(n,t),ws(t,n,void 0,e,s),s.delete(n)),t},Es=gt((function(e,t,n,i){ws(e,t,n,i)})),bs=Es,Ps=pt((function(e){return e.push(void 0,ys),oe(bs,void 0,e)})),_s=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)},Ts=pt((function(e,t){return _s(e,1,t)})),Ss=Ts,Vs=pt((function(e,t,n){return _s(e,D(t)||0,n)})),Rs=Vs,As=function(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1},Os=function(e,t,n,i){var r=-1,o=Ue,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=w(t,xt(n))),i?(o=As,s=!1):t.length>=200&&(o=vo,s=!1,t=new po(t));e:for(;++r<a;){var u=e[r],d=null==n?u:n(u);if(u=i||0!==u?u:0,s&&d==d){for(var h=l;h--;)if(t[h]===d)continue e;c.push(u)}else o(t,d,i)||c.push(u)}return c},Is=pt((function(e,t){return vs(e)?Os(e,Mn(t,1,vs,!0)):[]})),Ls=Is,Cs=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},xs=pt((function(e,t){var n=Cs(t);return vs(n)&&(n=void 0),vs(e)?Os(e,Mn(t,1,vs,!0),Bo(n)):[]})),Ds=xs,Ns=pt((function(e,t){var n=Cs(t);return vs(n)&&(n=void 0),vs(e)?Os(e,Mn(t,1,vs,!0),void 0,n):[]})),ks=Ns,Ms=_((function(e,t){return e/t}),1),Fs=function(e,t,n){var i=null==e?0:e.length;return i?(t=n||void 0===t?1:k(t),ii(e,t<0?0:t,i)):[]},Bs=function(e,t,n){var i=null==e?0:e.length;return i?(t=n||void 0===t?1:k(t),ii(e,0,(t=i-t)<0?0:t)):[]},js=function(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?ii(e,i?0:o,i?o+1:r):ii(e,i?o+1:0,i?r:o)},Hs=function(e,t){return e&&e.length?js(e,Bo(t),!0,!0):[]},Ws=function(e,t){return e&&e.length?js(e,Bo(t),!0):[]},Us=function(e){return"function"==typeof e?e:F},zs=function(e,t){return(y(e)?Be:Zo)(e,Us(t))},Gs=function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e},Ys=Go(!0),Js=function(e,t){return e&&Ys(e,t,Yt)},qs=qo(Js,!0),Zs=function(e,t){return(y(e)?Gs:qs)(e,Us(t))},Xs=function(e,t,n){e=An(e),t=P(t);var i=e.length,r=n=void 0===n?i:ar(k(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},Qs=function(e){return function(t){var n,i,r,o=jr(t);return"[object Map]"==o?go(t):"[object Set]"==o?(n=t,i=-1,r=Array(n.size),n.forEach((function(e){r[++i]=[e,e]})),r):function(e,t){return w(t,(function(t){return[t,e[t]]}))}(t,e(t))}},Ks=Qs(Yt),$s=Qs(Kt),ea=Pi({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),ta=/[&<>"']/g,na=RegExp(ta.source),ia=function(e){return(e=An(e))&&na.test(e)?e.replace(ta,ea):e},ra=/[\\^$.*+?()[\]{}|]/g,oa=RegExp(ra.source),sa=function(e){return(e=An(e))&&oa.test(e)?e.replace(ra,"\\$&"):e},aa=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0},ca=function(e,t){var n=!0;return Zo(e,(function(e,i,r){return n=!!t(e,i,r)})),n},la=function(e,t,n){var i=y(e)?aa:ca;return n&&mt(e,t,n)&&(t=void 0),i(e,Bo(t))},ua=function(e){return e?ar(k(e),0,4294967295):0},da=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&mt(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=k(n))<0&&(n=-n>r?0:r+n),(i=void 0===i||i>r?r:k(i))<0&&(i+=r),i=n>i?0:ua(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},ha=function(e,t){var n=[];return Zo(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n},pa=function(e,t){return(y(e)?gr:ha)(e,Bo(t))},fa=function(e){return function(t,n,i){var r=Object(t);if(!vt(t)){var o=Bo(n);t=Yt(t),n=function(e){return o(r[e],e,r)}}var s=e(t,n,i);return s>-1?r[o?t[s]:s]:void 0}},va=Math.max,ma=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:k(n);return r<0&&(r=va(i+r,0)),je(e,Bo(t),r)},ga=fa(ma),wa=function(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i},ya=function(e,t){return wa(e,Bo(t),Jo)},Ea=Math.max,ba=Math.min,Pa=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return void 0!==n&&(r=k(n),r=n<0?Ea(i+r,0):ba(r,i-1)),je(e,Bo(t),r,!0)},_a=fa(Pa),Ta=function(e,t){return wa(e,Bo(t),Js)},Sa=function(e){return e&&e.length?e[0]:void 0},Va=function(e,t){var n=-1,i=vt(e)?Array(e.length):[];return Zo(e,(function(e,r,o){i[++n]=t(e,r,o)})),i},Ra=function(e,t){return(y(e)?w:Va)(e,Bo(t))},Aa=function(e,t){return Mn(Ra(e,t),1)},Oa=function(e,t){return Mn(Ra(e,t),1/0)},Ia=function(e,t,n){return n=void 0===n?1:k(n),Mn(Ra(e,t),n)},La=function(e){return null!=e&&e.length?Mn(e,1/0):[]},Ca=function(e,t){return null!=e&&e.length?(t=void 0===t?1:k(t),Mn(e,t)):[]},xa=function(e){return rt(e,512)},Da=tr("floor"),Na=function(e){return Bn((function(t){var n=t.length,i=n,r=be.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new TypeError("Expected a function");if(r&&!s&&"wrapper"==ye(o))var s=new be([],!0)}for(i=s?i:n;++i<n;){o=t[i];var a=ye(o),c="wrapper"==a?me(o):void 0;s=c&&Re(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[ye(c[0])].apply(s,c[3]):1==o.length&&Re(o)?s[a]():s.thru(o)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&y(i))return s.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}}))},ka=Na(),Ma=Na(!0),Fa=function(e,t){return null==e?e:Yo(e,Us(t),Kt)},Ba=function(e,t){return null==e?e:Ys(e,Us(t),Kt)},ja=function(e,t){return e&&Jo(e,Us(t))},Ha=function(e,t){return e&&Js(e,Us(t))},Wa=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Ua=function(e,t){return gr(t,(function(t){return B(e[t])}))},za=function(e){return null==e?[]:Ua(e,Yt(e))},Ga=function(e){return null==e?[]:Ua(e,Kt(e))},Ya=Object.prototype.hasOwnProperty,Ja=Qo((function(e,t,n){Ya.call(e,n)?e[n].push(t):st(e,n,[t])})),qa=function(e,t){return e>t},Za=function(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=D(t),n=D(n)),e(t,n)}},Xa=Za(qa),Qa=Za((function(e,t){return e>=t})),Ka=Object.prototype.hasOwnProperty,$a=function(e,t){return null!=e&&Ka.call(e,t)},ec=function(e,t){return null!=e&&Do(e,t,$a)},tc=Math.max,nc=Math.min,ic=function(e,t,n){return t=N(t),void 0===n?(n=t,t=0):n=N(n),function(e,t,n){return e>=nc(t,n)&&e<tc(t,n)}(e=D(e),t,n)},rc=function(e){return"string"==typeof e||!y(e)&&v(e)&&"[object String]"==f(e)},oc=function(e,t){return w(t,(function(t){return e[t]}))},sc=function(e){return null==e?[]:oc(e,Yt(e))},ac=Math.max,cc=function(e,t,n,i){e=vt(e)?e:sc(e),n=n&&!i?k(n):0;var r=e.length;return n<0&&(n=ac(r+n,0)),rc(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&We(e,t,n)>-1},lc=Math.max,uc=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:k(n);return r<0&&(r=lc(i+r,0)),We(e,t,r)},dc=function(e){return null!=e&&e.length?ii(e,0,-1):[]},hc=Math.min,pc=function(e,t,n){for(var i=n?As:Ue,r=e[0].length,o=e.length,s=o,a=Array(o),c=1/0,l=[];s--;){var u=e[s];s&&t&&(u=w(u,xt(t))),c=hc(u.length,c),a[s]=!n&&(t||r>=120&&u.length>=120)?new po(s&&u):void 0}u=e[0];var d=-1,h=a[0];e:for(;++d<r&&l.length<c;){var p=u[d],f=t?t(p):p;if(p=n||0!==p?p:0,!(h?vo(h,f):i(l,f,n))){for(s=o;--s;){var v=a[s];if(!(v?vo(v,f):i(e[s],f,n)))continue e}h&&h.push(f),l.push(p)}}return l},fc=function(e){return vs(e)?e:[]},vc=pt((function(e){var t=w(e,fc);return t.length&&t[0]===e[0]?pc(t):[]})),mc=pt((function(e){var t=Cs(e),n=w(e,fc);return t===Cs(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?pc(n,Bo(t)):[]})),gc=pt((function(e){var t=Cs(e),n=w(e,fc);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?pc(n,void 0,t):[]})),wc=function(e,t){return function(n,i){return function(e,t,n,i){return Jo(e,(function(e,r,o){t(i,n(e),r,o)})),i}(n,e,t(i),{})}},yc=Object.prototype.toString,Ec=wc((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=yc.call(t)),e[t]=n}),De(F)),bc=Object.prototype,Pc=bc.hasOwnProperty,_c=bc.toString,Tc=wc((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_c.call(t)),Pc.call(e,t)?e[t].push(n):e[t]=[n]}),Bo),Sc=function(e,t){return t.length<2?e:Ln(e,ii(t,0,-1))},Vc=function(e,t,n){t=On(t,e);var i=null==(e=Sc(e,t))?e:e[In(Cs(t))];return null==i?void 0:oe(i,e,n)},Rc=pt(Vc),Ac=pt((function(e,t,n){var i=-1,r="function"==typeof t,o=vt(e)?Array(e.length):[];return Zo(e,(function(e){o[++i]=r?oe(t,e,n):Vc(e,t,n)})),o})),Oc=Mt&&Mt.isArrayBuffer,Ic=Oc?xt(Oc):function(e){return v(e)&&"[object ArrayBuffer]"==f(e)},Lc=function(e){return!0===e||!1===e||v(e)&&"[object Boolean]"==f(e)},Cc=Mt&&Mt.isDate,xc=Cc?xt(Cc):function(e){return v(e)&&"[object Date]"==f(e)},Dc=function(e){return v(e)&&1===e.nodeType&&!Jn(e)},Nc=Object.prototype.hasOwnProperty,kc=function(e){if(null==e)return!0;if(vt(e)&&(y(e)||"string"==typeof e||"function"==typeof e.splice||Lt(e)||Bt(e)||Vt(e)))return!e.length;var t=jr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(yt(e))return!Gt(e).length;for(var n in e)if(Nc.call(e,n))return!1;return!0},Mc=function(e,t){return Ro(e,t)},Fc=function(e,t,n){var i=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===i?Ro(e,t,void 0,n):!!i},Bc=s.isFinite,jc=function(e){return"number"==typeof e&&Bc(e)},Hc=function(e){return"number"==typeof e&&e==k(e)},Wc=function(e,t){return e===t||Ao(e,t,Io(t))},Uc=function(e,t,n){return n="function"==typeof n?n:void 0,Ao(e,t,Io(t),n)},zc=function(e){return"number"==typeof e||v(e)&&"[object Number]"==f(e)},Gc=function(e){return zc(e)&&e!=+e},Yc=j?B:Rt,Jc=function(e){if(Yc(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return X(e)},qc=function(e){return null==e},Zc=function(e){return null===e},Xc=Mt&&Mt.isRegExp,Qc=Xc?xt(Xc):function(e){return v(e)&&"[object RegExp]"==f(e)},Kc=function(e){return Hc(e)&&e>=-9007199254740991&&e<=9007199254740991},$c=function(e){return void 0===e},el=function(e){return v(e)&&"[object WeakMap]"==jr(e)},tl=function(e){return v(e)&&"[object WeakSet]"==f(e)},nl=function(e){return Bo("function"==typeof e?e:io(e,1))},il=Array.prototype.join,rl=function(e,t){return null==e?"":il.call(e,t)},ol=Xi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),sl=Qo((function(e,t,n){st(e,n,t)})),al=Math.max,cl=Math.min,ll=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return void 0!==n&&(r=(r=k(n))<0?al(i+r,0):cl(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):je(e,He,r,!0)},ul=Xi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),dl=wi("toLowerCase"),hl=function(e,t){return e<t},pl=Za(hl),fl=Za((function(e,t){return e<=t})),vl=function(e,t){var n={};return t=Bo(t),Jo(e,(function(e,i,r){st(n,t(e,i,r),e)})),n},ml=function(e,t){var n={};return t=Bo(t),Jo(e,(function(e,i,r){st(n,i,t(e,i,r))})),n},gl=function(e){return Co(io(e,1))},wl=function(e,t){return ko(e,io(t,1))},yl=function(e,t,n){for(var i=-1,r=e.length;++i<r;){var o=e[i],s=t(o);if(null!=s&&(void 0===a?s==s&&!m(s):n(s,a)))var a=s,c=o}return c},El=function(e){return e&&e.length?yl(e,F,qa):void 0},bl=function(e,t){return e&&e.length?yl(e,Bo(t),qa):void 0},Pl=function(e,t){for(var n,i=-1,r=e.length;++i<r;){var o=t(e[i]);void 0!==o&&(n=void 0===n?o:n+o)}return n},_l=function(e,t){var n=null==e?0:e.length;return n?Pl(e,t)/n:NaN},Tl=function(e){return _l(e,F)},Sl=function(e,t){return _l(e,Bo(t))},Vl=gt((function(e,t,n){ws(e,t,n)})),Rl=Vl,Al=pt((function(e,t){return function(n){return Vc(n,e,t)}})),Ol=pt((function(e,t){return function(n){return Vc(e,n,t)}})),Il=function(e){return e&&e.length?yl(e,F,hl):void 0},Ll=function(e,t){return e&&e.length?yl(e,Bo(t),hl):void 0},Cl=function(e,t,n){var i=Yt(t),r=Ua(t,i),o=!(O(n)&&"chain"in n&&!n.chain),s=B(e);return Be(r,(function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=Pe(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Dn([this.value()],arguments))})})),e},xl=_((function(e,t){return e*t}),1),Dl=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},Nl=a?a.iterator:void 0,kl=function(e){if(!e)return[];if(vt(e))return rc(e)?gi(e):Pe(e);if(Nl&&e[Nl])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Nl]());var t=jr(e);return("[object Map]"==t?go:"[object Set]"==t?wo:sc)(e)},Ml=function(){void 0===this.__values__&&(this.__values__=kl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},Fl=function(e,t){var n=e.length;if(n)return Ze(t+=t<0?n:0,n)?e[t]:void 0},Bl=function(e,t){return e&&e.length?Fl(e,k(t)):void 0},jl=function(e){return e=k(e),pt((function(t){return Fl(t,e)}))},Hl=function(e,t){return t=On(t,e),null==(e=Sc(e,t))||delete e[In(Cs(t))]},Wl=function(e){return Jn(e)?void 0:e},Ul=Bn((function(e,t){var n={};if(null==e)return n;var i=!1;t=w(t,(function(t){return t=On(t,e),i||(i=t.length>1),t})),ut(e,Sr(e),n),i&&(n=io(n,7,Wl));for(var r=t.length;r--;)Hl(n,t[r]);return n})),zl=function(e,t,n,i){if(!O(e))return e;for(var r=-1,o=(t=On(t,e)).length,s=o-1,a=e;null!=a&&++r<o;){var c=In(t[r]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(r!=s){var u=a[c];void 0===(l=i?i(u,c,a):void 0)&&(l=O(u)?u:Ze(t[r+1])?[]:{})}lt(a,c,l),a=a[c]}return e},Gl=function(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=Ln(e,s);n(a,s)&&zl(o,On(s,e),a)}return o},Yl=function(e,t){if(null==e)return{};var n=w(Sr(e),(function(e){return[e]}));return t=Bo(t),Gl(e,n,(function(e,n){return t(e,n[0])}))},Jl=function(e,t){return Yl(e,Dl(Bo(t)))},ql=function(e){return Qn(2,e)},Zl=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,r=e==e,o=m(e),s=void 0!==t,a=null===t,c=t==t,l=m(t);if(!a&&!l&&!o&&e>t||o&&s&&c&&!a&&!l||i&&s&&c||!n&&c||!r)return 1;if(!i&&!o&&!l&&e<t||l&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!c)return-1}return 0},Xl=function(e,t,n){t=t.length?w(t,(function(e){return y(e)?function(t){return Ln(t,1===e.length?e[0]:e)}:e})):[F];var i=-1;return t=w(t,xt(Bo)),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Va(e,(function(e,n,r){return{criteria:w(t,(function(t){return t(e)})),index:++i,value:e}})),(function(e,t){return function(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;++i<s;){var c=Zl(r[i],o[i]);if(c)return i>=a?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))},Ql=function(e,t,n,i){return null==e?[]:(y(t)||(t=null==t?[]:[t]),y(n=i?void 0:n)||(n=null==n?[]:[n]),Xl(e,t,n))},Kl=function(e){return Bn((function(t){return t=w(t,xt(Bo)),pt((function(n){var i=this;return e(t,(function(e){return oe(e,i,n)}))}))}))},$l=Kl(w),eu=pt,tu=Math.min,nu=eu((function(e,t){var n=(t=1==t.length&&y(t[0])?w(t[0],xt(Bo)):w(Mn(t,1),xt(Bo))).length;return pt((function(i){for(var r=-1,o=tu(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return oe(e,this,i)}))})),iu=nu,ru=Kl(aa),ou=Kl(fo),su=Math.floor,au=function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=su(t/2))&&(e+=e)}while(t);return n},cu=Mo("length"),lu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",uu="[^\\ud800-\\udfff]",du="(?:\\ud83c[\\udde6-\\uddff]){2}",hu="[\\ud800-\\udbff][\\udc00-\\udfff]",pu="(?:"+lu+"|\\ud83c[\\udffb-\\udfff])?",fu="[\\ufe0e\\ufe0f]?",vu=fu+pu+"(?:\\u200d(?:"+[uu,du,hu].join("|")+")"+fu+pu+")*",mu="(?:"+[uu+lu+"?",lu,du,hu,"[\\ud800-\\udfff]"].join("|")+")",gu=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+mu+vu,"g"),wu=function(e){return si(e)?function(e){for(var t=gu.lastIndex=0;gu.test(e);)++t;return t}(e):cu(e)},yu=Math.ceil,Eu=function(e,t){var n=(t=void 0===t?" ":P(t)).length;if(n<2)return n?au(t,e):t;var i=au(t,yu(e/wu(t)));return si(t)?ri(gi(i),0,e).join(""):i.slice(0,e)},bu=Math.ceil,Pu=Math.floor,_u=function(e,t,n){e=An(e);var i=(t=k(t))?wu(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Eu(Pu(r),n)+e+Eu(bu(r),n)},Tu=function(e,t,n){e=An(e);var i=(t=k(t))?wu(e):0;return t&&i<t?e+Eu(t-i,n):e},Su=function(e,t,n){e=An(e);var i=(t=k(t))?wu(e):0;return t&&i<t?Eu(t-i,n)+e:e},Vu=/^\s+/,Ru=s.parseInt,Au=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Ru(An(e).replace(Vu,""),t||0)},Ou=pt((function(e,t){var n=$e(t,Je(Ou));return rt(e,32,void 0,t,n)}));Ou.placeholder={};var Iu=Ou,Lu=pt((function(e,t){var n=$e(t,Je(Lu));return rt(e,64,void 0,t,n)}));Lu.placeholder={};var Cu,xu,Du=Lu,Nu=Qo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),ku=Nu,Mu=Bn((function(e,t){return null==e?{}:function(e,t){return Gl(e,t,(function(t,n){return No(e,n)}))}(e,t)})),Fu=function(e){for(var t,n=this;n instanceof de;){var i=_e(n);i.__index__=0,i.__values__=void 0,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},Bu=function(e){return function(t){return null==e?void 0:Ln(e,t)}},ju=function(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1},Hu=Array.prototype.splice,Wu=function(e,t,n,i){var r=i?ju:We,o=-1,s=t.length,a=e;for(e===t&&(t=Pe(t)),n&&(a=w(e,xt(n)));++o<s;)for(var c=0,l=t[o],u=n?n(l):l;(c=r(a,u,c,i))>-1;)a!==e&&Hu.call(a,c,1),Hu.call(e,c,1);return e},Uu=function(e,t){return e&&e.length&&t&&t.length?Wu(e,t):e},zu=pt(Uu),Gu=function(e,t,n){return e&&e.length&&t&&t.length?Wu(e,t,Bo(n)):e},Yu=function(e,t,n){return e&&e.length&&t&&t.length?Wu(e,t,void 0,n):e},Ju=Array.prototype.splice,qu=function(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;Ze(r)?Ju.call(e,r,1):Hl(e,r)}}return e},Zu=Bn((function(e,t){var n=null==e?0:e.length,i=xn(e,t);return qu(e,w(t,(function(e){return Ze(e,n)?+e:e})).sort(Zl)),i})),Xu=Math.floor,Qu=Math.random,Ku=function(e,t){return e+Xu(Qu()*(t-e+1))},$u=parseFloat,ed=Math.min,td=Math.random,nd=function(e,t,n){if(n&&"boolean"!=typeof n&&mt(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=N(e),void 0===t?(t=e,e=0):t=N(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=td();return ed(e+r*(t-e+$u("1e-"+((r+"").length-1))),t)}return Ku(e,t)},id=Math.ceil,rd=Math.max,od=function(e){return function(t,n,i){return i&&"number"!=typeof i&&mt(t,n,i)&&(n=i=void 0),t=N(t),void 0===n?(n=t,t=0):n=N(n),function(e,t,n,i){for(var r=-1,o=rd(id((t-e)/(n||1)),0),s=Array(o);o--;)s[i?o:++r]=e,e+=n;return s}(t,n,i=void 0===i?t<n?1:-1:N(i),e)}},sd=od(),ad=od(!0),cd=Bn((function(e,t){return rt(e,256,void 0,void 0,void 0,t)})),ld=cd,ud=function(e,t,n,i,r){return r(e,(function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)})),n},dd=function(e,t,n){var i=y(e)?bi:ud,r=arguments.length<3;return i(e,Bo(t),n,r,Zo)},hd=function(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n},pd=function(e,t,n){var i=y(e)?hd:ud,r=arguments.length<3;return i(e,Bo(t),n,r,qs)},fd=function(e,t){return(y(e)?gr:ha)(e,Dl(Bo(t)))},vd=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=Bo(t);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return qu(e,r),n},md=function(e,t,n){return t=(n?mt(e,t,n):void 0===t)?1:k(t),au(An(e),t)},gd=function(){var e=arguments,t=An(e[0]);return e.length<3?t:t.replace(e[1],e[2])},wd=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=void 0===t?t:k(t),pt(e,t)},yd=function(e,t,n){var i=-1,r=(t=On(t,e)).length;for(r||(r=1,e=void 0);++i<r;){var o=null==e?void 0:e[In(t[i])];void 0===o&&(i=r,o=n),e=B(o)?o.call(e):o}return e},Ed=Array.prototype.reverse,bd=function(e){return null==e?e:Ed.call(e)},Pd=tr("round"),_d=function(e){var t=e.length;return t?e[Ku(0,t-1)]:void 0},Td=function(e){return _d(sc(e))},Sd=function(e){return(y(e)?_d:Td)(e)},Vd=function(e,t){var n=-1,i=e.length,r=i-1;for(t=void 0===t?i:t;++n<t;){var o=Ku(n,r),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e},Rd=function(e,t){return Vd(Pe(e),ar(t,0,e.length))},Ad=function(e,t){var n=sc(e);return Vd(n,ar(t,0,n.length))},Od=function(e,t,n){return t=(n?mt(e,t,n):void 0===t)?1:k(t),(y(e)?Rd:Ad)(e,t)},Id=function(e,t,n){return null==e?e:zl(e,t,n)},Ld=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:zl(e,t,n,i)},Cd=function(e){return Vd(Pe(e))},xd=function(e){return Vd(sc(e))},Dd=function(e){return(y(e)?Cd:xd)(e)},Nd=function(e){if(null==e)return 0;if(vt(e))return rc(e)?wu(e):e.length;var t=jr(e);return"[object Map]"==t||"[object Set]"==t?e.size:Gt(e).length},kd=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&mt(e,t,n)?(t=0,n=i):(t=null==t?0:k(t),n=void 0===n?i:k(n)),ii(e,t,n)):[]},Md=Xi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),Fd=function(e,t){var n;return Zo(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n},Bd=function(e,t,n){var i=y(e)?fo:Fd;return n&&mt(e,t,n)&&(t=void 0),i(e,Bo(t))},jd=pt((function(e,t){if(null==e)return[];var n=t.length;return n>1&&mt(e,t[0],t[1])?t=[]:n>2&&mt(t[0],t[1],t[2])&&(t=[t[0]]),Xl(e,Mn(t,1),[])})),Hd=Math.floor,Wd=Math.min,Ud=function(e,t,n,i){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,a=null===t,c=m(t),l=void 0===t;r<o;){var u=Hd((r+o)/2),d=n(e[u]),h=void 0!==d,p=null===d,f=d==d,v=m(d);if(s)var g=i||f;else g=l?f&&(i||h):a?f&&h&&(i||!p):c?f&&h&&!p&&(i||!v):!p&&!v&&(i?d<=t:d<t);g?r=u+1:o=u}return Wd(o,4294967294)},zd=function(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=e[o];null!==s&&!m(s)&&(n?s<=t:s<t)?i=o+1:r=o}return r}return Ud(e,t,F,n)},Gd=function(e,t){return zd(e,t)},Yd=function(e,t,n){return Ud(e,t,Bo(n))},Jd=function(e,t){var n=null==e?0:e.length;if(n){var i=zd(e,t);if(i<n&&at(e[i],t))return i}return-1},qd=function(e,t){return zd(e,t,!0)},Zd=function(e,t,n){return Ud(e,t,Bo(n),!0)},Xd=function(e,t){if(null!=e&&e.length){var n=zd(e,t,!0)-1;if(at(e[n],t))return n}return-1},Qd=function(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!at(a,c)){var c=a;o[r++]=0===s?0:s}}return o},Kd=function(e){return e&&e.length?Qd(e):[]},$d=function(e,t){return e&&e.length?Qd(e,Bo(t)):[]},eh=function(e,t,n){return n&&"number"!=typeof n&&mt(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=An(e))&&("string"==typeof t||null!=t&&!Qc(t))&&!(t=P(t))&&si(e)?ri(gi(e),0,n):e.split(t,n):[]},th=Math.max,nh=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:th(k(t),0),pt((function(n){var i=n[t],r=ri(n,0,t);return i&&Dn(r,i),oe(e,this,r)}))},ih=Xi((function(e,t,n){return e+(n?" ":"")+yi(t)})),rh=function(e,t,n){return e=An(e),n=null==n?0:ar(k(n),0,e.length),t=P(t),e.slice(n,n+t.length)==t},oh=function(){return{}},sh=function(){return""},ah=function(){return!0},ch=_((function(e,t){return e-t}),0),lh=function(e){return e&&e.length?Pl(e,F):0},uh=function(e,t){return e&&e.length?Pl(e,Bo(t)):0},dh=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},hh=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:k(t),ii(e,0,t<0?0:t)):[]},ph=function(e,t,n){var i=null==e?0:e.length;return i?(t=n||void 0===t?1:k(t),ii(e,(t=i-t)<0?0:t,i)):[]},fh=function(e,t){return e&&e.length?js(e,Bo(t),!1,!0):[]},vh=function(e,t){return e&&e.length?js(e,Bo(t)):[]},mh=function(e,t){return t(e),e},gh=Object.prototype,wh=gh.hasOwnProperty,yh=function(e,t,n,i){return void 0===e||at(e,gh[n])&&!wh.call(i,n)?t:e},Eh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bh=function(e){return"\\"+Eh[e]},Ph=/<%=([\s\S]+?)%>/g,_h={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ph,variable:"",imports:{_:{escape:ia}}},Th=/\b__p \+= '';/g,Sh=/\b(__p \+=) '' \+/g,Vh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rh=/[()=,{}\[\]\/\s]/,Ah=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oh=/($^)/,Ih=/['\n\r\u2028\u2029\\]/g,Lh=Object.prototype.hasOwnProperty,Ch=function(e,t,n){var i=_h.imports._.templateSettings||_h;n&&mt(e,t,n)&&(t=void 0),e=An(e),t=nn({},t,i,yh);var r,o,s=nn({},t.imports,i.imports,yh),a=Yt(s),c=oc(s,a),l=0,u=t.interpolate||Oh,d="__p += '",h=RegExp((t.escape||Oh).source+"|"+u.source+"|"+(u===Ph?Ah:Oh).source+"|"+(t.evaluate||Oh).source+"|$","g"),p=Lh.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,n,i,s,a,c){return i||(i=s),d+=e.slice(l,c).replace(Ih,bh),n&&(r=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var f=Lh.call(t,"variable")&&t.variable;if(f){if(Rh.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(Th,""):d).replace(Sh,"$1").replace(Vh,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Xn((function(){return Function(a,p+"return "+d).apply(void 0,c)}));if(v.source=d,qn(v))throw v;return v},xh=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return O(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),cs(e,t,{leading:i,maxWait:t,trailing:r})},Dh=function(e,t){return t(e)},Nh=4294967295,kh=Math.min,Mh=function(e,t){if((e=k(e))<1||e>9007199254740991)return[];var n=Nh,i=kh(e,Nh);t=Us(t),e-=Nh;for(var r=Et(i,t);++n<e;)t(n);return r},Fh=function(){return this},Bh=function(e,t){var n=e;return n instanceof pe&&(n=n.value()),bi(t,(function(e,t){return t.func.apply(t.thisArg,Dn([e],t.args))}),n)},jh=function(){return Bh(this.__wrapped__,this.__actions__)},Hh=function(e){return An(e).toLowerCase()},Wh=function(e){return y(e)?w(e,In):m(e)?[e]:Pe(Rn(An(e)))},Uh=function(e){return e?ar(k(e),-9007199254740991,9007199254740991):0===e?e:0},zh=function(e){return An(e).toUpperCase()},Gh=function(e,t,n){var i=y(e),r=i||Lt(e)||Bt(e);if(t=Bo(t),null==n){var o=e&&e.constructor;n=r?i?new o:[]:O(e)&&B(o)?ie(Hn(e)):{}}return(r?Be:Jo)(e,(function(e,i,r){return t(n,e,i,r)})),n},Yh=function(e,t){for(var n=e.length;n--&&We(t,e[n],0)>-1;);return n},Jh=function(e,t){for(var n=-1,i=e.length;++n<i&&We(t,e[n],0)>-1;);return n},qh=function(e,t,n){if((e=An(e))&&(n||void 0===t))return A(e);if(!e||!(t=P(t)))return e;var i=gi(e),r=gi(t),o=Jh(i,r),s=Yh(i,r)+1;return ri(i,o,s).join("")},Zh=function(e,t,n){if((e=An(e))&&(n||void 0===t))return e.slice(0,V(e)+1);if(!e||!(t=P(t)))return e;var i=gi(e),r=Yh(i,gi(t))+1;return ri(i,0,r).join("")},Xh=/^\s+/,Qh=function(e,t,n){if((e=An(e))&&(n||void 0===t))return e.replace(Xh,"");if(!e||!(t=P(t)))return e;var i=gi(e),r=Jh(i,gi(t));return ri(i,r).join("")},Kh=/\w*$/,$h=function(e,t){var n=30,i="...";if(O(t)){var r="separator"in t?t.separator:r;n="length"in t?k(t.length):n,i="omission"in t?P(t.omission):i}var o=(e=An(e)).length;if(si(e)){var s=gi(e);o=s.length}if(n>=o)return e;var a=n-wu(i);if(a<1)return i;var c=s?ri(s,0,a).join(""):e.slice(0,a);if(void 0===r)return c+i;if(s&&(a+=c.length-a),Qc(r)){if(e.slice(a).search(r)){var l,u=c;for(r.global||(r=RegExp(r.source,An(Kh.exec(r))+"g")),r.lastIndex=0;l=r.exec(u);)var d=l.index;c=c.slice(0,void 0===d?a:d)}}else if(e.indexOf(P(r),a)!=a){var h=c.lastIndexOf(r);h>-1&&(c=c.slice(0,h))}return c+i},ep=function(e){return ot(e,1)},tp=Pi({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),np=/&(?:amp|lt|gt|quot|#39);/g,ip=RegExp(np.source),rp=function(e){return(e=An(e))&&ip.test(e)?e.replace(np,tp):e},op=Ar&&1/wo(new Ar([,-0]))[1]==1/0?function(e){return new Ar(e)}:fe,sp=function(e,t,n){var i=-1,r=Ue,o=e.length,s=!0,a=[],c=a;if(n)s=!1,r=As;else if(o>=200){var l=t?null:op(e);if(l)return wo(l);s=!1,r=vo,c=new po}else c=t?[]:a;e:for(;++i<o;){var u=e[i],d=t?t(u):u;if(u=n||0!==u?u:0,s&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),a.push(u)}else r(c,d,n)||(c!==a&&c.push(d),a.push(u))}return a},ap=pt((function(e){return sp(Mn(e,1,vs,!0))})),cp=pt((function(e){var t=Cs(e);return vs(t)&&(t=void 0),sp(Mn(e,1,vs,!0),Bo(t))})),lp=pt((function(e){var t=Cs(e);return t="function"==typeof t?t:void 0,sp(Mn(e,1,vs,!0),void 0,t)})),up=function(e){return e&&e.length?sp(e):[]},dp=function(e,t){return e&&e.length?sp(e,Bo(t)):[]},hp=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?sp(e,void 0,t):[]},pp=0,fp=function(e){var t=++pp;return An(e)+t},vp=function(e,t){return null==e||Hl(e,t)},mp=Math.max,gp=function(e){if(!e||!e.length)return[];var t=0;return e=gr(e,(function(e){if(vs(e))return t=mp(e.length,t),!0})),Et(t,(function(t){return w(e,Mo(t))}))},wp=function(e,t){if(!e||!e.length)return[];var n=gp(e);return null==t?n:w(n,(function(e){return oe(t,void 0,e)}))},yp=function(e,t,n,i){return zl(e,t,n(Ln(e,t)),i)},Ep=function(e,t,n){return null==e?e:yp(e,t,Us(n))},bp=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:yp(e,t,Us(n),i)},Pp=Xi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),_p=function(e){return null==e?[]:oc(e,Kt(e))},Tp=pt((function(e,t){return vs(e)?Os(e,t):[]})),Sp=function(e,t){return Iu(Us(t),e)},Vp=Bn((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return xn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof pe&&Ze(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:Dh,args:[r],thisArg:void 0}),new be(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(r)})),Rp=function(){return ir(this)},Ap=function(){var e=this.__wrapped__;if(e instanceof pe){var t=e;return this.__actions__.length&&(t=new pe(this)),(t=t.reverse()).__actions__.push({func:Dh,args:[bd],thisArg:void 0}),new be(t,this.__chain__)}return this.thru(bd)},Op=function(e,t,n){var i=e.length;if(i<2)return i?sp(e[0]):[];for(var r=-1,o=Array(i);++r<i;)for(var s=e[r],a=-1;++a<i;)a!=r&&(o[r]=Os(o[r]||s,e[a],t,n));return sp(Mn(o,1),t,n)},Ip=pt((function(e){return Op(gr(e,vs))})),Lp=pt((function(e){var t=Cs(e);return vs(t)&&(t=void 0),Op(gr(e,vs),Bo(t))})),Cp=pt((function(e){var t=Cs(e);return t="function"==typeof t?t:void 0,Op(gr(e,vs),void 0,t)})),xp=pt(gp),Dp=function(e,t,n){for(var i=-1,r=e.length,o=t.length,s={};++i<r;){var a=i<o?t[i]:void 0;n(s,e[i],a)}return s},Np=function(e,t){return Dp(e||[],t||[],lt)},kp=function(e,t){return Dp(e||[],t||[],zl)},Mp=pt((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,wp(e,n)})),Fp={chunk:sr,compact:lo,concat:uo,difference:Ls,differenceBy:Ds,differenceWith:ks,drop:Fs,dropRight:Bs,dropRightWhile:Hs,dropWhile:Ws,fill:da,findIndex:ma,findLastIndex:Pa,first:Sa,flatten:Fn,flattenDeep:La,flattenDepth:Ca,fromPairs:Wa,head:Sa,indexOf:uc,initial:dc,intersection:vc,intersectionBy:mc,intersectionWith:gc,join:rl,last:Cs,lastIndexOf:ll,nth:Bl,pull:zu,pullAll:Uu,pullAllBy:Gu,pullAllWith:Yu,pullAt:Zu,remove:vd,reverse:bd,slice:kd,sortedIndex:Gd,sortedIndexBy:Yd,sortedIndexOf:Jd,sortedLastIndex:qd,sortedLastIndexBy:Zd,sortedLastIndexOf:Xd,sortedUniq:Kd,sortedUniqBy:$d,tail:dh,take:hh,takeRight:ph,takeRightWhile:fh,takeWhile:vh,union:ap,unionBy:cp,unionWith:lp,uniq:up,uniqBy:dp,uniqWith:hp,unzip:gp,unzipWith:wp,without:Tp,xor:Ip,xorBy:Lp,xorWith:Cp,zip:xp,zipObject:Np,zipObjectDeep:kp,zipWith:Mp},Bp={countBy:$o,each:zs,eachRight:Zs,every:la,filter:pa,find:ga,findLast:_a,flatMap:Aa,flatMapDeep:Oa,flatMapDepth:Ia,forEach:zs,forEachRight:Zs,groupBy:Ja,includes:cc,invokeMap:Ac,keyBy:sl,map:Ra,orderBy:Ql,partition:ku,reduce:dd,reduceRight:pd,reject:fd,sample:Sd,sampleSize:Od,shuffle:Dd,size:Nd,some:Bd,sortBy:jd},jp={now:os},Hp={after:M,ary:ot,before:Qn,bind:$n,bindKey:ni,curry:ns,curryRight:rs,debounce:cs,defer:Ss,delay:Rs,flip:xa,memoize:_n,negate:Dl,once:ql,overArgs:iu,partial:Iu,partialRight:Du,rearg:ld,rest:wd,spread:nh,throttle:xh,unary:ep,wrap:Sp},Wp={castArray:Ki,clone:ro,cloneDeep:oo,cloneDeepWith:so,cloneWith:ao,conformsTo:Uo,eq:at,gt:Xa,gte:Qa,isArguments:Vt,isArray:y,isArrayBuffer:Ic,isArrayLike:vt,isArrayLikeObject:vs,isBoolean:Lc,isBuffer:Lt,isDate:xc,isElement:Dc,isEmpty:kc,isEqual:Mc,isEqualWith:Fc,isError:qn,isFinite:jc,isFunction:B,isInteger:Hc,isLength:ft,isMap:Qr,isMatch:Wc,isMatchWith:Uc,isNaN:Gc,isNative:Jc,isNil:qc,isNull:Zc,isNumber:zc,isObject:O,isObjectLike:v,isPlainObject:Jn,isRegExp:Qc,isSafeInteger:Kc,isSet:$r,isString:rc,isSymbol:m,isTypedArray:Bt,isUndefined:$c,isWeakMap:el,isWeakSet:tl,lt:pl,lte:fl,toArray:kl,toFinite:N,toInteger:k,toLength:ua,toNumber:D,toPlainObject:gs,toSafeInteger:Uh,toString:An},Up={add:T,ceil:nr,divide:Ms,floor:Da,max:El,maxBy:bl,mean:Tl,meanBy:Sl,min:Il,minBy:Ll,multiply:xl,round:Pd,subtract:ch,sum:lh,sumBy:uh},zp={clamp:cr,inRange:ic,random:nd},Gp={assign:Zt,assignIn:en,assignInWith:nn,assignWith:on,at:jn,create:es,defaults:ps,defaultsDeep:Ps,entries:Ks,entriesIn:$s,extend:en,extendWith:nn,findKey:ya,findLastKey:Ta,forIn:Fa,forInRight:Ba,forOwn:ja,forOwnRight:Ha,functions:za,functionsIn:Ga,get:Cn,has:ec,hasIn:No,invert:Ec,invertBy:Tc,invoke:Rc,keys:Yt,keysIn:Kt,mapKeys:vl,mapValues:ml,merge:Rl,mergeWith:bs,omit:Ul,omitBy:Jl,pick:Mu,pickBy:Yl,result:yd,set:Id,setWith:Ld,toPairs:Ks,toPairsIn:$s,transform:Gh,unset:vp,update:Ep,updateWith:bp,values:sc,valuesIn:_p},Yp={at:Vp,chain:ir,commit:co,lodash:Ve,next:Ml,plant:Fu,reverse:Ap,tap:mh,thru:Dh,toIterator:Fh,toJSON:jh,value:jh,valueOf:jh,wrapperChain:Rp},Jp={camelCase:Qi,capitalize:Ei,deburr:Vi,endsWith:Xs,escape:ia,escapeRegExp:sa,kebabCase:ol,lowerCase:ul,lowerFirst:dl,pad:_u,padEnd:Tu,padStart:Su,parseInt:Au,repeat:md,replace:gd,snakeCase:Md,split:eh,startCase:ih,startsWith:rh,template:Ch,templateSettings:_h,toLower:Hh,toUpper:zh,trim:qh,trimEnd:Zh,trimStart:Qh,truncate:$h,unescape:rp,upperCase:Pp,upperFirst:yi,words:qi},qp={attempt:Xn,bindAll:ei,cond:jo,conforms:Wo,constant:De,defaultTo:ls,flow:ka,flowRight:Ma,identity:F,iteratee:nl,matches:gl,matchesProperty:wl,method:Al,methodOf:Ol,mixin:Cl,noop:fe,nthArg:jl,over:$l,overEvery:ru,overSome:ou,property:Fo,propertyOf:Bu,range:sd,rangeRight:ad,stubArray:wr,stubFalse:Rt,stubObject:oh,stubString:sh,stubTrue:ah,times:Mh,toPath:Wh,uniqueId:fp},Zp=Math.max,Xp=Math.min,Qp=Math.min,Kp=4294967295,$p=Array.prototype,ef=Object.prototype.hasOwnProperty,tf=a?a.iterator:void 0,nf=Math.max,rf=Math.min,of=(Cu=Cl,function(e,t,n){if(null==n){var i=O(t),r=i&&Yt(t),o=r&&r.length&&Ua(t,r);(o?o.length:i)||(n=t,t=e,e=this)}return Cu(e,t,n)});Ve.after=Hp.after,Ve.ary=Hp.ary,Ve.assign=Gp.assign,Ve.assignIn=Gp.assignIn,Ve.assignInWith=Gp.assignInWith,Ve.assignWith=Gp.assignWith,Ve.at=Gp.at,Ve.before=Hp.before,Ve.bind=Hp.bind,Ve.bindAll=qp.bindAll,Ve.bindKey=Hp.bindKey,Ve.castArray=Wp.castArray,Ve.chain=Yp.chain,Ve.chunk=Fp.chunk,Ve.compact=Fp.compact,Ve.concat=Fp.concat,Ve.cond=qp.cond,Ve.conforms=qp.conforms,Ve.constant=qp.constant,Ve.countBy=Bp.countBy,Ve.create=Gp.create,Ve.curry=Hp.curry,Ve.curryRight=Hp.curryRight,Ve.debounce=Hp.debounce,Ve.defaults=Gp.defaults,Ve.defaultsDeep=Gp.defaultsDeep,Ve.defer=Hp.defer,Ve.delay=Hp.delay,Ve.difference=Fp.difference,Ve.differenceBy=Fp.differenceBy,Ve.differenceWith=Fp.differenceWith,Ve.drop=Fp.drop,Ve.dropRight=Fp.dropRight,Ve.dropRightWhile=Fp.dropRightWhile,Ve.dropWhile=Fp.dropWhile,Ve.fill=Fp.fill,Ve.filter=Bp.filter,Ve.flatMap=Bp.flatMap,Ve.flatMapDeep=Bp.flatMapDeep,Ve.flatMapDepth=Bp.flatMapDepth,Ve.flatten=Fp.flatten,Ve.flattenDeep=Fp.flattenDeep,Ve.flattenDepth=Fp.flattenDepth,Ve.flip=Hp.flip,Ve.flow=qp.flow,Ve.flowRight=qp.flowRight,Ve.fromPairs=Fp.fromPairs,Ve.functions=Gp.functions,Ve.functionsIn=Gp.functionsIn,Ve.groupBy=Bp.groupBy,Ve.initial=Fp.initial,Ve.intersection=Fp.intersection,Ve.intersectionBy=Fp.intersectionBy,Ve.intersectionWith=Fp.intersectionWith,Ve.invert=Gp.invert,Ve.invertBy=Gp.invertBy,Ve.invokeMap=Bp.invokeMap,Ve.iteratee=qp.iteratee,Ve.keyBy=Bp.keyBy,Ve.keys=Yt,Ve.keysIn=Gp.keysIn,Ve.map=Bp.map,Ve.mapKeys=Gp.mapKeys,Ve.mapValues=Gp.mapValues,Ve.matches=qp.matches,Ve.matchesProperty=qp.matchesProperty,Ve.memoize=Hp.memoize,Ve.merge=Gp.merge,Ve.mergeWith=Gp.mergeWith,Ve.method=qp.method,Ve.methodOf=qp.methodOf,Ve.mixin=of,Ve.negate=Dl,Ve.nthArg=qp.nthArg,Ve.omit=Gp.omit,Ve.omitBy=Gp.omitBy,Ve.once=Hp.once,Ve.orderBy=Bp.orderBy,Ve.over=qp.over,Ve.overArgs=Hp.overArgs,Ve.overEvery=qp.overEvery,Ve.overSome=qp.overSome,Ve.partial=Hp.partial,Ve.partialRight=Hp.partialRight,Ve.partition=Bp.partition,Ve.pick=Gp.pick,Ve.pickBy=Gp.pickBy,Ve.property=qp.property,Ve.propertyOf=qp.propertyOf,Ve.pull=Fp.pull,Ve.pullAll=Fp.pullAll,Ve.pullAllBy=Fp.pullAllBy,Ve.pullAllWith=Fp.pullAllWith,Ve.pullAt=Fp.pullAt,Ve.range=qp.range,Ve.rangeRight=qp.rangeRight,Ve.rearg=Hp.rearg,Ve.reject=Bp.reject,Ve.remove=Fp.remove,Ve.rest=Hp.rest,Ve.reverse=Fp.reverse,Ve.sampleSize=Bp.sampleSize,Ve.set=Gp.set,Ve.setWith=Gp.setWith,Ve.shuffle=Bp.shuffle,Ve.slice=Fp.slice,Ve.sortBy=Bp.sortBy,Ve.sortedUniq=Fp.sortedUniq,Ve.sortedUniqBy=Fp.sortedUniqBy,Ve.split=Jp.split,Ve.spread=Hp.spread,Ve.tail=Fp.tail,Ve.take=Fp.take,Ve.takeRight=Fp.takeRight,Ve.takeRightWhile=Fp.takeRightWhile,Ve.takeWhile=Fp.takeWhile,Ve.tap=Yp.tap,Ve.throttle=Hp.throttle,Ve.thru=Dh,Ve.toArray=Wp.toArray,Ve.toPairs=Gp.toPairs,Ve.toPairsIn=Gp.toPairsIn,Ve.toPath=qp.toPath,Ve.toPlainObject=Wp.toPlainObject,Ve.transform=Gp.transform,Ve.unary=Hp.unary,Ve.union=Fp.union,Ve.unionBy=Fp.unionBy,Ve.unionWith=Fp.unionWith,Ve.uniq=Fp.uniq,Ve.uniqBy=Fp.uniqBy,Ve.uniqWith=Fp.uniqWith,Ve.unset=Gp.unset,Ve.unzip=Fp.unzip,Ve.unzipWith=Fp.unzipWith,Ve.update=Gp.update,Ve.updateWith=Gp.updateWith,Ve.values=Gp.values,Ve.valuesIn=Gp.valuesIn,Ve.without=Fp.without,Ve.words=Jp.words,Ve.wrap=Hp.wrap,Ve.xor=Fp.xor,Ve.xorBy=Fp.xorBy,Ve.xorWith=Fp.xorWith,Ve.zip=Fp.zip,Ve.zipObject=Fp.zipObject,Ve.zipObjectDeep=Fp.zipObjectDeep,Ve.zipWith=Fp.zipWith,Ve.entries=Gp.toPairs,Ve.entriesIn=Gp.toPairsIn,Ve.extend=Gp.assignIn,Ve.extendWith=Gp.assignInWith,of(Ve,Ve),Ve.add=Up.add,Ve.attempt=qp.attempt,Ve.camelCase=Jp.camelCase,Ve.capitalize=Jp.capitalize,Ve.ceil=Up.ceil,Ve.clamp=zp.clamp,Ve.clone=Wp.clone,Ve.cloneDeep=Wp.cloneDeep,Ve.cloneDeepWith=Wp.cloneDeepWith,Ve.cloneWith=Wp.cloneWith,Ve.conformsTo=Wp.conformsTo,Ve.deburr=Jp.deburr,Ve.defaultTo=qp.defaultTo,Ve.divide=Up.divide,Ve.endsWith=Jp.endsWith,Ve.eq=Wp.eq,Ve.escape=Jp.escape,Ve.escapeRegExp=Jp.escapeRegExp,Ve.every=Bp.every,Ve.find=Bp.find,Ve.findIndex=Fp.findIndex,Ve.findKey=Gp.findKey,Ve.findLast=Bp.findLast,Ve.findLastIndex=Fp.findLastIndex,Ve.findLastKey=Gp.findLastKey,Ve.floor=Up.floor,Ve.forEach=Bp.forEach,Ve.forEachRight=Bp.forEachRight,Ve.forIn=Gp.forIn,Ve.forInRight=Gp.forInRight,Ve.forOwn=Gp.forOwn,Ve.forOwnRight=Gp.forOwnRight,Ve.get=Gp.get,Ve.gt=Wp.gt,Ve.gte=Wp.gte,Ve.has=Gp.has,Ve.hasIn=Gp.hasIn,Ve.head=Fp.head,Ve.identity=F,Ve.includes=Bp.includes,Ve.indexOf=Fp.indexOf,Ve.inRange=zp.inRange,Ve.invoke=Gp.invoke,Ve.isArguments=Wp.isArguments,Ve.isArray=y,Ve.isArrayBuffer=Wp.isArrayBuffer,Ve.isArrayLike=Wp.isArrayLike,Ve.isArrayLikeObject=Wp.isArrayLikeObject,Ve.isBoolean=Wp.isBoolean,Ve.isBuffer=Wp.isBuffer,Ve.isDate=Wp.isDate,Ve.isElement=Wp.isElement,Ve.isEmpty=Wp.isEmpty,Ve.isEqual=Wp.isEqual,Ve.isEqualWith=Wp.isEqualWith,Ve.isError=Wp.isError,Ve.isFinite=Wp.isFinite,Ve.isFunction=Wp.isFunction,Ve.isInteger=Wp.isInteger,Ve.isLength=Wp.isLength,Ve.isMap=Wp.isMap,Ve.isMatch=Wp.isMatch,Ve.isMatchWith=Wp.isMatchWith,Ve.isNaN=Wp.isNaN,Ve.isNative=Wp.isNative,Ve.isNil=Wp.isNil,Ve.isNull=Wp.isNull,Ve.isNumber=Wp.isNumber,Ve.isObject=O,Ve.isObjectLike=Wp.isObjectLike,Ve.isPlainObject=Wp.isPlainObject,Ve.isRegExp=Wp.isRegExp,Ve.isSafeInteger=Wp.isSafeInteger,Ve.isSet=Wp.isSet,Ve.isString=Wp.isString,Ve.isSymbol=Wp.isSymbol,Ve.isTypedArray=Wp.isTypedArray,Ve.isUndefined=Wp.isUndefined,Ve.isWeakMap=Wp.isWeakMap,Ve.isWeakSet=Wp.isWeakSet,Ve.join=Fp.join,Ve.kebabCase=Jp.kebabCase,Ve.last=Cs,Ve.lastIndexOf=Fp.lastIndexOf,Ve.lowerCase=Jp.lowerCase,Ve.lowerFirst=Jp.lowerFirst,Ve.lt=Wp.lt,Ve.lte=Wp.lte,Ve.max=Up.max,Ve.maxBy=Up.maxBy,Ve.mean=Up.mean,Ve.meanBy=Up.meanBy,Ve.min=Up.min,Ve.minBy=Up.minBy,Ve.stubArray=qp.stubArray,Ve.stubFalse=qp.stubFalse,Ve.stubObject=qp.stubObject,Ve.stubString=qp.stubString,Ve.stubTrue=qp.stubTrue,Ve.multiply=Up.multiply,Ve.nth=Fp.nth,Ve.noop=qp.noop,Ve.now=jp.now,Ve.pad=Jp.pad,Ve.padEnd=Jp.padEnd,Ve.padStart=Jp.padStart,Ve.parseInt=Jp.parseInt,Ve.random=zp.random,Ve.reduce=Bp.reduce,Ve.reduceRight=Bp.reduceRight,Ve.repeat=Jp.repeat,Ve.replace=Jp.replace,Ve.result=Gp.result,Ve.round=Up.round,Ve.sample=Bp.sample,Ve.size=Bp.size,Ve.snakeCase=Jp.snakeCase,Ve.some=Bp.some,Ve.sortedIndex=Fp.sortedIndex,Ve.sortedIndexBy=Fp.sortedIndexBy,Ve.sortedIndexOf=Fp.sortedIndexOf,Ve.sortedLastIndex=Fp.sortedLastIndex,Ve.sortedLastIndexBy=Fp.sortedLastIndexBy,Ve.sortedLastIndexOf=Fp.sortedLastIndexOf,Ve.startCase=Jp.startCase,Ve.startsWith=Jp.startsWith,Ve.subtract=Up.subtract,Ve.sum=Up.sum,Ve.sumBy=Up.sumBy,Ve.template=Jp.template,Ve.times=qp.times,Ve.toFinite=Wp.toFinite,Ve.toInteger=k,Ve.toLength=Wp.toLength,Ve.toLower=Jp.toLower,Ve.toNumber=Wp.toNumber,Ve.toSafeInteger=Wp.toSafeInteger,Ve.toString=Wp.toString,Ve.toUpper=Jp.toUpper,Ve.trim=Jp.trim,Ve.trimEnd=Jp.trimEnd,Ve.trimStart=Jp.trimStart,Ve.truncate=Jp.truncate,Ve.unescape=Jp.unescape,Ve.uniqueId=qp.uniqueId,Ve.upperCase=Jp.upperCase,Ve.upperFirst=Jp.upperFirst,Ve.each=Bp.forEach,Ve.eachRight=Bp.forEachRight,Ve.first=Fp.head,of(Ve,(xu={},Jo(Ve,(function(e,t){ef.call(Ve.prototype,t)||(xu[t]=e)})),xu),{chain:!1}),Ve.VERSION="4.17.21",(Ve.templateSettings=Jp.templateSettings).imports._=Ve,Be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ve[e].placeholder=Ve})),Be(["drop","take"],(function(e,t){pe.prototype[e]=function(n){n=void 0===n?1:nf(k(n),0);var i=this.__filtered__&&!t?new pe(this):this.clone();return i.__filtered__?i.__takeCount__=rf(n,i.__takeCount__):i.__views__.push({size:rf(n,Kp),type:e+(i.__dir__<0?"Right":"")}),i},pe.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Be(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;pe.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Bo(e),type:n}),t.__filtered__=t.__filtered__||i,t}})),Be(["head","last"],(function(e,t){var n="take"+(t?"Right":"");pe.prototype[e]=function(){return this[n](1).value()[0]}})),Be(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");pe.prototype[e]=function(){return this.__filtered__?new pe(this):this[n](1)}})),pe.prototype.compact=function(){return this.filter(F)},pe.prototype.find=function(e){return this.filter(e).head()},pe.prototype.findLast=function(e){return this.reverse().find(e)},pe.prototype.invokeMap=pt((function(e,t){return"function"==typeof e?new pe(this):this.map((function(n){return Vc(n,e,t)}))})),pe.prototype.reject=function(e){return this.filter(Dl(Bo(e)))},pe.prototype.slice=function(e,t){e=k(e);var n=this;return n.__filtered__&&(e>0||t<0)?new pe(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=k(t))<0?n.dropRight(-t):n.take(t-e)),n)},pe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},pe.prototype.toArray=function(){return this.take(Kp)},Jo(pe.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=Ve[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);r&&(Ve.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,a=t instanceof pe,c=s[0],l=a||y(t),u=function(e){var t=r.apply(Ve,Dn([e],s));return i&&d?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(a=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,f=a&&!h;if(!o&&l){t=f?t:new pe(this);var v=e.apply(t,s);return v.__actions__.push({func:Dh,args:[u],thisArg:void 0}),new be(v,d)}return p&&f?e.apply(this,s):(v=this.thru(u),p?i?v.value()[0]:v.value():v)})})),Be(["pop","push","shift","sort","splice","unshift"],(function(e){var t=$p[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Ve.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(y(r)?r:[],e)}return this[n]((function(n){return t.apply(y(n)?n:[],e)}))}})),Jo(pe.prototype,(function(e,t){var n=Ve[t];if(n){var i=n.name+"";ef.call(ge,i)||(ge[i]=[]),ge[i].push({name:t,func:n})}})),ge[et(void 0,2).name]=[{name:"wrapper",func:void 0}],pe.prototype.clone=function(){var e=new pe(this.__wrapped__);return e.__actions__=Pe(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pe(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pe(this.__views__),e},pe.prototype.reverse=function(){if(this.__filtered__){var e=new pe(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},pe.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=y(e),i=t<0,r=n?e.length:0,o=function(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Xp(t,e+s);break;case"takeRight":e=Zp(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=i?a:s-1,u=this.__iteratees__,d=u.length,h=0,p=Qp(c,this.__takeCount__);if(!n||!i&&r==c&&p==c)return Bh(e,this.__actions__);var f=[];e:for(;c--&&h<p;){for(var v=-1,m=e[l+=t];++v<d;){var g=u[v],w=g.iteratee,E=g.type,b=w(m);if(2==E)m=b;else if(!b){if(1==E)continue e;break e}}f[h++]=m}return f},Ve.prototype.at=Yp.at,Ve.prototype.chain=Yp.wrapperChain,Ve.prototype.commit=Yp.commit,Ve.prototype.next=Yp.next,Ve.prototype.plant=Yp.plant,Ve.prototype.reverse=Yp.reverse,Ve.prototype.toJSON=Ve.prototype.valueOf=Ve.prototype.value=Yp.value,Ve.prototype.first=Ve.prototype.head,tf&&(Ve.prototype[tf]=Yp.toIterator);var sf=Ve},7418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var s,a,c=r(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))n.call(s,u)&&(c[u]=s[u]);if(t){a=t(s);for(var d=0;d<a.length;d++)i.call(s,a[d])&&(c[a[d]]=s[a[d]])}}return c}},7563:function(e,t,n){"use strict";var i=n(610),r=n(7418),o=n(4020);function s(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"==typeof e?a(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,i){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return function(e,n,i){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=r({arrayFormat:"none"},t)),i=Object.create(null);return"string"!=typeof e?i:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),s=t.length>0?t.join("="):void 0;s=void 0===s?null:o(s),n(o(r),s,i)})),Object.keys(i).sort().reduce((function(e,t){var n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=a(n):e[t]=n,e}),Object.create(null))):i}t.extract=c,t.parse=l,t.stringify=function(e,t){!1===(t=r({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,i){return null===n?[s(t,e),"[",i,"]"].join(""):[s(t,e),"[",s(i,e),"]=",s(n,e)].join("")};case"bracket":return function(t,n){return null===n?s(t,e):[s(t,e),"[]=",s(n,e)].join("")};default:return function(t,n){return null===n?s(t,e):[s(t,e),"=",s(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(i){var r=e[i];if(void 0===r)return"";if(null===r)return s(i,t);if(Array.isArray(r)){var o=[];return r.slice().forEach((function(e){void 0!==e&&o.push(n(i,e,o.length))})),o.join("&")}return s(i,t)+"="+s(r,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:l(c(e),t)}}},610:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},655:function(e,t,n){"use strict";n.d(t,{ZT:function(){return r},pi:function(){return o},_T:function(){return s},XA:function(){return a},CR:function(){return c},fl:function(){return l}});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}},7570:function(e){var t;t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t){"use strict";function n(e){for(var t=(e||window.location.href).split("?")[1],n="string"==typeof t&&t.length>0?t.split("&"):"",i={},r=0;r<n.length;r++){var o=n[r].split("="),s=o[0],a=o[1];-1===s.indexOf("[]")?a&&""!==a&&(i[s]=decodeURIComponent(a)):(void 0===i[s=s.replace(/[\[|\]]/g,"")]&&(i[s]=[]),i[s].push(decodeURIComponent(a)))}return Object.keys(i).length>0?i:null}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&function(){var i=encodeURIComponent(n),r=e[n];void 0!==r&&(r instanceof Array?r.map((function(e){t.push(i+"[]="+(null==e?"":encodeURIComponent(e)))})):t.push(i+"="+(null===r?"":encodeURIComponent(r))))}();return t.join("&")}function r(e,t){var n=(t||window.location.href).split("?")[0],r=i(e);return n+(r.length>0?"?"+r:"")}Object.defineProperty(t,"__esModule",{value:!0}),t.getParams=n,t.getParam=function(e,t){var i=n(t);return i?i[e]:null},t.buildQueryString=i,t.buildQueryStringURL=r,t.replaceParam=function(e,t,i){var o=n(i)||{};return o[e]=t,r(o,i)},t.removeParam=function(e,t){var i=n(t)||{};return delete i[e],r(i,t)}}])},e.exports=t()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}();var i={};!function(){"use strict";n.d(i,{W:function(){return ho}});var e={};n.r(e),n.d(e,{Express:function(){return to},Mongo:function(){return co},Mysql:function(){return oo},Postgres:function(){return ro}});var t=n(3723),r=n.n(t);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Promise.prototype.spread=function(e,t){return this.then((function(t){return e.apply(null,t)}),t)};var s,a="Handled Promise Rejection (this should not end up in Sentry): ",c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.resolvePromise=null,this.rejectPromise=null,this.promise=new Promise(function(e,t){this.resolvePromise=e,this.rejectPromise=t}.bind(this))}return t=e,(n=[{key:"resolve",value:function(e){this.resolvePromise(e)}},{key:"reject",value:function(e){this.rejectPromise(e)}}])&&o(t.prototype,n),i&&o(t,i),e;var t,n,i}(),l=navigator.userAgent,u={},d=/ip(hone|od|ad)/i.test(l),h=/android/i.test(l),p=/blackberry/i.test(l),f=/webos/i.test(l),v=/silk|kindle/i.test(l);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}/MSIE|Trident/i.test(l)&&(u.ie=!0,s=/MSIE/i.test(l)?/MSIE\s+(\d+\.\d+)/i.exec(l):/Trident.*rv[ :](\d+\.\d+)/.exec(l),u.version=s&&parseFloat(s[1]),u.ielt9=u.version<9,u.ielt10=u.version<10,u.ielt11=u.version<11),d&&(u.ios=!0,s=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u.version=s&&parseFloat(s[1]+"."+s[2])),u.mobile=/mobile/i.test(l)||d||h||p||f||v,u.firefox=/firefox/i.test(l),/safari/i.test(l)&&(u.chrome=/chrome/i.test(l),u.safari=!u.chrome),u.safari&&(s=navigator.appVersion.match(/Version\/(\d+(\.\d+)?)/),u.version=s&&parseFloat(s[1])),u.phone=u.mobile&&(window.matchMedia&&window.matchMedia("(max-width: 520px)").matches||window.matchMedia&&window.matchMedia("(max-width: 736px) and (orientation:landscape)").matches);var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"on",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===i)e.addEventListener(t,n);else{var r=[t.toUpperCase(),n,i];i=r[0],t=r[1],n=r[2],e.addEventListener(t,o)}function o(t){for(var r=t.target;r.tagName!==i&&r!==e;)r=r.parentNode;r.tagName===i&&n(t,r)}}},{key:"off",value:function(e,t,n){e.removeEventListener(t,n)}},{key:"index",value:function(e){for(var t=0,n=e;null!==n.previousSibling;)n=n.previousSibling,t++;return t}},{key:"isInResponsiveMobileMode",value:function(){return window.matchMedia&&window.matchMedia("(max-width: 520px)").matches||window.matchMedia&&window.matchMedia("(max-width: 736px) and (orientation:landscape)").matches}},{key:"doesBrowserSupportSvg",value:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{key:"doesBrowserSupportTouch",value:function(){return"ontouchstart"in document.documentElement}},{key:"hideElement",value:function(e){if("none"!==e.style.display){var t=e.getAttribute("data-display")||e.style.display;e.setAttribute("data-display",t),e.style.display="none"}}},{key:"showElement",value:function(e){e.style.display=e.getAttribute("data-display")||"block"}},{key:"showElementAs",value:function(e,t){e.style.display=e.getAttribute("data-display")||t}},{key:"addClass",value:function(t,n){if(null===n)throw new Error("Invalid element specified for addClass: ".concat(n));if("object"===m(t)&&"number"==typeof t.length)t.forEach((function(t){return e.addClass(t,n)}));else{if("string"!=typeof t)throw new Error("Invalid class name specified for addClass: ".concat(t));if(n instanceof Element)e.hasClass(t,n)||n.classList.add(t);else{if("object"!==m(n)||"number"!=typeof n.length)throw new Error("Invalid elements specified for addClass: ".concat(n));n.forEach((function(n){return e.addClass(t,n)}))}}}},{key:"removeClass",value:function(t,n){if(null===n)throw new Error("Invalid element specified for removeClass: ".concat(n));if("object"===m(t)&&"number"==typeof t.length)t.forEach((function(t){return e.removeClass(t,n)}));else{if("string"!=typeof t)throw new Error("Invalid class name specified for removeClass: ".concat(t));if(n instanceof Element)e.hasClass(t,n)&&n.classList.remove(t);else{if("object"!==m(n)||"number"!=typeof n.length)throw new Error("Invalid element specified for removeClass: ".concat(n));n.forEach((function(n){return e.removeClass(t,n)}))}}}},{key:"toggleClass",value:function(t,n){if("object"===m(t)&&"number"==typeof t.length)t.forEach((function(t){return e.toggleClass(t,n)}));else{if("string"!=typeof t)throw new Error("Invalid class name specified for toggleClass: ".concat(t));if("object"===m(n)&&"number"==typeof n.length)n.forEach((function(n){return e.toggleClass(t,n)}));else{if(!(n instanceof Element))throw new Error("Invalid element specified for toggleClass: ".concat(n));e.hasClass(t,n)?e.removeClass(t,n):e.addClass(t,n)}}}},{key:"hasClass",value:function(e,t){if("string"!=typeof e)throw new Error("Invalid class name specified");if(!(t instanceof Element))throw new Error("Invalid element specified");return t.classList.contains(e)}},{key:"htmlEntities",value:function(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#".concat(e.charCodeAt(0),";")}))}},{key:"linkify",value:function(e){return e.replace(/((http(s)?(\:\/\/))+(www\.)?([\w\-\.\/])*(\.[a-zA-Z]{2,3}\/?)[^\s\r\n\?\!\@\^\$\"\'\(\)\]\<\>|]*[^.,;:\s\r\n\?\!\@\^\$\"\'\(\)\]\<\>|-])/g,'<a href="$1" target="_blank">$1</a>')}},{key:"fadeOutAndRemove",value:function(e,t){return function(e){return new Promise((function(t,n){e.style.opacity=1,function i(){try{e.style.opacity=Number(e.style.opacity)-400/6e3}catch(e){return void n(e)}e.style.opacity>0?requestAnimationFrame(i):(e.style.opacity=0,t())}()}))}(e).then((function(){try{t.removeChild(e)}catch(e){console&&console.warn&&console.warn("could not remove the element")}}))}},{key:"appendAndFadeIn",value:function(e,t){return e.style.opacity=0,t.appendChild(e),function(e){return new Promise((function(t,n){e.style.opacity=0,function i(){try{e.style.opacity=Number(e.style.opacity)+.06666666666666667}catch(e){return void n(e)}e.style.opacity<1?requestAnimationFrame(i):(e.style.opacity=1,t())}()}))}(e)}},{key:"createElement",value:function(e){var t=document.createElement("div");if(t.innerHTML=e,t.children.length>1)throw new Error("Create element expects 1 root node");return t.children[0]}},{key:"setElementText",value:function(e,t){document.body.hasOwnProperty("textContent")?e.textContent=t:e.innerText=t}},{key:"getClampedDimensionsForElement",value:function(e){for(var t=e.getBoundingClientRect(),n=window.devicePixelRatio||2,i=Math.max(t.width,t.height)*n,r=[160,320,480,640,800,1600],o=0,s=r[o];s<i;)s=r[++o];return s}},{key:"findParent",value:function(e,t){var n=null;if(e.tagName===t)n=e;else for(var i=10,r=e.parentNode;null===n&&null!==r&&--i>0;)r.tagName===t&&(n=r),r=r.parentNode;return n}}],null&&g(t.prototype,null),n&&g(t,n),e}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={}}var t,n;return t=e,(n=[{key:"set",value:function(e,t){if(this.elements.hasOwnProperty(e)&&null!==this.elements[e])throw new Error("The key '".concat(e,"' is already used"));this.elements[e]=t}},{key:"get",value:function(e){if(!this.elements.hasOwnProperty(e)||null===this.elements[e])throw new Error("The key '".concat(e,"' is not initialized"));return this.elements[e]}},{key:"has",value:function(e){return this.elements.hasOwnProperty(e)&&null!==this.elements[e]}},{key:"remove",value:function(e){this.elements[e]=null}}])&&y(t.prototype,n),e}();function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}for(var T=window.location.origin||window.location.protocol+"//"+window.location.host,S={baseUrl:T,apiBase:"".concat(T,"/api/v3")},V=P(P({},window.__env||{}),S),R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,A=function(e){return"string"==typeof e&&R.test(e)},O=[],I=0;I<256;++I)O.push((I+256).toString(16).substr(1));var L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase();if(!A(n))throw TypeError("Stringified UUID is invalid");return n};function C(e){return 14+(e+64>>>9<<4)+1}function x(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function D(e,t,n,i,r,o){return x((s=x(x(t,e),x(i,o)))<<(a=r)|s>>>32-a,n);var s,a}function N(e,t,n,i,r,o,s){return D(t&n|~t&i,e,t,r,o,s)}function k(e,t,n,i,r,o,s){return D(t&i|n&~i,e,t,r,o,s)}function M(e,t,n,i,r,o,s){return D(t^n^i,e,t,r,o,s)}function F(e,t,n,i,r,o,s){return D(n^(t|~i),e,t,r,o,s)}var B=function(e,t,n){function i(e,t,i,r){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof t&&(t=function(e){if(!A(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}(t)),16!==t.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(t),o.set(e,t.length),(o=n(o))[6]=15&o[6]|48,o[8]=63&o[8]|128,i){r=r||0;for(var s=0;s<16;++s)i[r+s]=o[s];return i}return L(o)}try{i.name="v3"}catch(e){}return i.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",i}(0,0,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,i="0123456789abcdef",r=0;r<n;r+=8){var o=e[r>>5]>>>r%32&255,s=parseInt(i.charAt(o>>>4&15)+i.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[C(t)-1]=t;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,c=i,l=r,u=o;n=N(n,i,r,o,e[s],7,-680876936),o=N(o,n,i,r,e[s+1],12,-389564586),r=N(r,o,n,i,e[s+2],17,606105819),i=N(i,r,o,n,e[s+3],22,-1044525330),n=N(n,i,r,o,e[s+4],7,-176418897),o=N(o,n,i,r,e[s+5],12,1200080426),r=N(r,o,n,i,e[s+6],17,-1473231341),i=N(i,r,o,n,e[s+7],22,-45705983),n=N(n,i,r,o,e[s+8],7,1770035416),o=N(o,n,i,r,e[s+9],12,-1958414417),r=N(r,o,n,i,e[s+10],17,-42063),i=N(i,r,o,n,e[s+11],22,-1990404162),n=N(n,i,r,o,e[s+12],7,1804603682),o=N(o,n,i,r,e[s+13],12,-40341101),r=N(r,o,n,i,e[s+14],17,-1502002290),n=k(n,i=N(i,r,o,n,e[s+15],22,1236535329),r,o,e[s+1],5,-165796510),o=k(o,n,i,r,e[s+6],9,-1069501632),r=k(r,o,n,i,e[s+11],14,643717713),i=k(i,r,o,n,e[s],20,-373897302),n=k(n,i,r,o,e[s+5],5,-701558691),o=k(o,n,i,r,e[s+10],9,38016083),r=k(r,o,n,i,e[s+15],14,-660478335),i=k(i,r,o,n,e[s+4],20,-405537848),n=k(n,i,r,o,e[s+9],5,568446438),o=k(o,n,i,r,e[s+14],9,-1019803690),r=k(r,o,n,i,e[s+3],14,-187363961),i=k(i,r,o,n,e[s+8],20,1163531501),n=k(n,i,r,o,e[s+13],5,-1444681467),o=k(o,n,i,r,e[s+2],9,-51403784),r=k(r,o,n,i,e[s+7],14,1735328473),n=M(n,i=k(i,r,o,n,e[s+12],20,-1926607734),r,o,e[s+5],4,-378558),o=M(o,n,i,r,e[s+8],11,-2022574463),r=M(r,o,n,i,e[s+11],16,1839030562),i=M(i,r,o,n,e[s+14],23,-35309556),n=M(n,i,r,o,e[s+1],4,-1530992060),o=M(o,n,i,r,e[s+4],11,1272893353),r=M(r,o,n,i,e[s+7],16,-155497632),i=M(i,r,o,n,e[s+10],23,-1094730640),n=M(n,i,r,o,e[s+13],4,681279174),o=M(o,n,i,r,e[s],11,-358537222),r=M(r,o,n,i,e[s+3],16,-722521979),i=M(i,r,o,n,e[s+6],23,76029189),n=M(n,i,r,o,e[s+9],4,-640364487),o=M(o,n,i,r,e[s+12],11,-421815835),r=M(r,o,n,i,e[s+15],16,530742520),n=F(n,i=M(i,r,o,n,e[s+2],23,-995338651),r,o,e[s],6,-198630844),o=F(o,n,i,r,e[s+7],10,1126891415),r=F(r,o,n,i,e[s+14],15,-1416354905),i=F(i,r,o,n,e[s+5],21,-57434055),n=F(n,i,r,o,e[s+12],6,1700485571),o=F(o,n,i,r,e[s+3],10,-1894986606),r=F(r,o,n,i,e[s+10],15,-1051523),i=F(i,r,o,n,e[s+1],21,-2054922799),n=F(n,i,r,o,e[s+8],6,1873313359),o=F(o,n,i,r,e[s+15],10,-30611744),r=F(r,o,n,i,e[s+6],15,-1560198380),i=F(i,r,o,n,e[s+13],21,1309151649),n=F(n,i,r,o,e[s+4],6,-145523070),o=F(o,n,i,r,e[s+11],10,-1120210379),r=F(r,o,n,i,e[s+2],15,718787259),i=F(i,r,o,n,e[s+9],21,-343485551),n=x(n,a),i=x(i,c),r=x(r,l),o=x(o,u)}return[n,i,r,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(C(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}(e),8*e.length))})),j=B;function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U="".concat("/","share/"),z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"assertUrlMapExists",value:function(){"object"!==H(e.urls)&&(e.urls={})}},{key:"setUrl",value:function(t,n){e.assertUrlMapExists(),e.urls[t]=n}},{key:"getUrlWithParams",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.assertUrlMapExists(),G(e.urls,t),Y(n),J(e.urls[t],n)}},{key:"parseShareHash",value:function(e){var t=new RegExp("^".concat(U,"([A-Za-z0-9]+)")),n=e.match(t);if(null===n)throw new Error("Path ".concat(e," has no share hash"));var i=n[1];return["".concat(V.baseUrl,"/showcase"),i]}},{key:"getShowpadSubdomain",value:function(){var e=V.baseUrl;return e.substring(0,e.indexOf(".showpad"))}},{key:"getShowcaseBaseUrl",value:function(){return"".concat(V.baseUrl,"/share")}},{key:"hasShareHash",value:function(e){return new RegExp("^".concat(U,"[A-Za-z0-9]+")).test(e)}},{key:"getSegment",value:function(e){var t=window.location.pathname.split("/");return t.shift(),e>=0?t[e]:t}},{key:"updateUrl",value:function(e){try{window.history.replaceState(null,null,e)}catch(e){}}},{key:"setAssetUrl",value:function(t){var n=e.getSegment(2),i="".concat(U).concat(n);void 0!==t&&(i="".concat(i,"/").concat(t)),e.updateUrl(i)}}],null&&W(t.prototype,null),n&&W(t,n),e}();function G(e,t){if(!e.hasOwnProperty(t))throw new Error("key <".concat(t,"> was not found"))}function Y(e){if("object"!==H(e))throw new Error("Invalid parameters specified")}function J(e,t){var n=e;for(var i in t)if(t.hasOwnProperty(i)){var r=new RegExp(":".concat(i,"\\b"),"g");n=n.replace(r,t[i])}return n}function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"set",value:function(e,t){return new Promise((function(n,i){try{window.localStorage.setItem(e,JSON.stringify(t)),n()}catch(e){i(e)}}))}},{key:"get",value:function(e){return new Promise((function(t,n){try{t(JSON.parse(window.localStorage.getItem(e)))}catch(e){n(e)}}))}}],null&&q(t.prototype,null),n&&q(t,n),e}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=se(e);if(t){var r=se(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return oe(this,n)}}function oe(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ce="application/json",le="post",ue="deviceId",de="onlinecatalog",he="contactsessionasset",pe="viewed",fe="download",ve="childview",me="ffa8959d-1e33-3974-890d-405c3ab6fb1a",ge=function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;ae(this,e),this.shareHash=t,this.context=n,this.action=i,this.begin=r,this.end=o},we=function(e){ne(n,e);var t=re(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(this,n),t.call(this,e,de,pe,i,r)}return te(n,null,[{key:"build",value:function(e){return new n(e.shareHash,e.start,e.end)}}]),n}(ge),ye=function(e){ne(n,e);var t=re(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(this,n),(i=t.call(this,e,he,pe,r,o)).assetPosition=null,i}return te(n,null,[{key:"build",value:function(e){var t=new n(e.shareHash,e.start,e.end);return t.assetPosition=e.itemPosition,t.page=e.page,t.shareHash=e.shareHash,t}}]),n}(ge),Ee=function(e){ne(n,e);var t=re(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return ae(this,n),(i=t.call(this,e,he,fe,r,o)).assetPosition=null,i}return te(n,null,[{key:"build",value:function(e){var t=new n(e.shareHash,e.start,e.end);return t.assetPosition=e.itemPosition,t}}]),n}(ge),be=function(e){ne(n,e);var t=re(n);function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ae(this,n),t.call(this,e,he,ve,i)}return te(n,null,[{key:"build",value:function(e){var t=new n(e.shareHash,e.start);return t.metadata={pageLocation:e.pageLocation,assetId:e.assetId},t.parentId=e.parentId,t.assetPosition=e.assetPosition,t}}]),n}(ge),Pe=function(){function e(){ae(this,e)}return te(e,null,[{key:"createDeviceEvent",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=z.getUrlWithParams("device-event-create"),s=Array.isArray(t)?t:[t];return e.getDeviceId().then((function(t){var r=e.getSessionId(t,n),a={method:le,credentials:"include",headers:K({Accept:ce,"Content-Type":ce,"X-SHOWPAD-SESSION-ID":r},i),body:JSON.stringify(s.map((function(e){return e.deviceId=t,e})))};return fetch(o,a)})).then((function(e){return e.json()})).then((function(o){if(!o.success){var s=!o.hasOwnProperty("retry")||o.retry;if(s&&r>=2)throw new Error("Failed to send 'Create' device event after ".concat(r," attempts"));if(s)return e.createDeviceEvent(t,n,i,r+1)}return o.data[0]}))}},{key:"createAsyncDeviceEvent",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.isArray(t)?t:[t];return e.createDeviceEvent(r.map((function(e){return e.storeAsynchronously=!0,e})),n,i).then((function(){return null}))}},{key:"updateDeviceEvent",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.eventId=t.id;var o=z.getUrlWithParams("device-event-update");return e.getDeviceId().then((function(r){var s=e.getSessionId(r,n),a={method:le,credentials:"include",headers:K({Accept:ce,"Content-Type":ce,"X-SHOWPAD-SESSION-ID":s},i),body:JSON.stringify([t])};return fetch(o,a)})).then((function(e){return e.json()})).then((function(o){if(!o.success){var s=!o.hasOwnProperty("retry")||o.retry;if(s&&r>=2)throw new Error("Failed to send 'Update' device event after ".concat(r," attempts"));if(s)return e.updateDeviceEvent(t,n,i,r+1)}return!0}))}},{key:"getDeviceId",value:function(){return Z.get(ue).then((function(e){if(null===e)throw new Error("no device id found");return e})).catch((function(){return e.createDevice().then((function(e){return e.id})).then((function(e){return Z.set(ue,e).catch((function(){})),e}))}))}},{key:"createDevice",value:function(){return new Promise((function(t,n){var i={appDistributionType:"release",appVersion:1,appRevision:0,model:window.navigator.userAgent,os:e.getUserOs(),type:"browser",app:"scv"},r={method:le,credentials:"include",headers:{Accept:ce,"Content-Type":ce},body:JSON.stringify(i)};fetch(z.getUrlWithParams("device-create"),r).then((function(e){return e.json()})).then((function(e){if(!0!==e.success)throw new Error("invalid json response");t(e.data)})).catch((function(e){n(e)}))}))}},{key:"getUserOs",value:function(){var e=window.navigator.userAgent,t="windows";return e.toLowerCase().indexOf("linux")>-1?t="linux":(e.toLowerCase().indexOf("macintosh")>-1||e.toLowerCase().indexOf("mac os")>-1)&&(t="osx"),t}},{key:"getSessionId",value:function(e,t){if(!t)throw new Error("No start session timestamp");var n=z.getShowpadSubdomain(),i=Math.round(t/1e3),r="".concat(i).concat(e).concat(n);return j(r,me)}},{key:"getEveId",value:function(e,t,n){var i=z.getShowpadSubdomain(),r=Math.round(n/1e3),o="".concat(r).concat(e).concat(t).concat(i);return j(o,me)}}]),e}(),_e=n(655),Te=n(2162);function Se(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=(0,Te.Gd)();if(i&&i[e])return i[e].apply(i,(0,_e.fl)(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function Ve(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return Se("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function Re(e){Se("withScope",e)}function Ae(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ne="asset-download",ke="asset-view",Me=-1,Fe=2e3,Be=1e4;function je(e){return!(ho.includes(e)||e&&e.stack&&ho.includes(e.stack)||e&&e.message&&ho.includes(e.message)||e&&e.status&&e.status>400&&e.status<500||e&&e.status&&[502,503].includes(e.status))}var He=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xe(this,e),this.trackEvents=n,this.consentRequired=i,this.itemViewDeviceEvent=null,this.shareHash=t,this.startSessionTimestamp=null}var t,n;return t=e,n=[{key:"canTrack",get:function(){return!this.consentRequired}},{key:"trackShowcaseView",value:function(){var e=this,t=Date.now();if(this.startSessionTimestamp=t,this.canTrack&&this.trackEvents.indexOf("showcase-view")>Me){var n=we.build({shareHash:this.shareHash,start:t,end:t});return Pe.createAsyncDeviceEvent(n,this.startSessionTimestamp).catch((function(t){je(t)&&e.notify(t,"could not track showcase view")}))}return Promise.resolve()}},{key:"trackShowcaseShare",value:function(){}},{key:"trackItemDownload",value:function(e){var t=this;if(this.canTrack&&this.trackEvents.indexOf(Ne)>Me){var n=(new Date).getTime(),i=e.parentPosition,r=Ee.build({itemPosition:"number"==typeof e.position?e.position:i,shareHash:this.shareHash,start:n,end:n});"number"==typeof i&&(r.metadata={assetId:e.assetId}),Pe.createAsyncDeviceEvent(r,this.startSessionTimestamp).catch((function(e){je(e)&&t.notify(e,"could not track item download")}))}}},{key:"trackItemsDownload",value:function(e){var t=this;if(this.canTrack&&this.trackEvents.indexOf(Ne)>Me){var n=(new Date).getTime(),i=e.map((function(e){var i=e.parentPosition,r=Ee.build({itemPosition:"number"==typeof e.position?e.position:i,shareHash:t.shareHash,start:n,end:n});return"number"==typeof i&&(r.metadata={assetId:e.assetId}),r}));Pe.createAsyncDeviceEvent(i,this.startSessionTimestamp).catch((function(e){je(e)&&t.notify(e,"could not track item download")}))}}},{key:"startViewingAsset",value:function(e,t,n,i){var r=this;if(this.canTrack&&this.trackEvents.indexOf(ke)>Me){var o=(new Date).getTime(),s=o;!0===i&&(s-=Fe);var c=ye.build({shareHash:this.shareHash,start:s,end:o,itemPosition:"number"==typeof e.position?e.position:n,page:t});"number"==typeof n&&(c.metadata={assetId:e.assetId});var l={"X-SHOWPAD-EVE-ID":Pe.getEveId(this.shareHash,e.position,s)};return Pe.createDeviceEvent(c,this.startSessionTimestamp,l).then((function(n){return r.itemViewDeviceEvent=Le(Le(Le({},c),n),{},{itemPosition:e.position,page:t})})).then((function(){return r.itemViewDeviceEvent})).catch((function(e){return Promise.reject(a+"could not track asset viewer star")}))}return Promise.reject(a+"Expected promise rejection: tracking disabled")}},{key:"createUrlAssetViewDeviceEvent",value:function(e){var t=this;if(this.canTrack&&this.trackEvents.indexOf(ke)>Me){var n=(new Date).getTime(),i=e.parentPosition,r=ye.build({shareHash:this.shareHash,start:n,end:n,itemPosition:"number"==typeof e.position?e.position:i,page:null});"number"==typeof i&&(r.metadata={assetId:e.assetId});var o={"X-SHOWPAD-EVE-ID":Pe.getEveId(this.shareHash,e.position,n)};return Pe.createDeviceEvent(r,this.startSessionTimestamp,o).catch((function(e){je(e)&&t.notify(e,"could not track url asset")}))}return Promise.resolve()}},{key:"trackHtmlNavigation",value:function(e,t){var n=this;if(this.canTrack){var i=e.map((function(e){return be.build({shareHash:n.shareHash,start:(new Date).getTime(),parentId:t.parentId,assetPosition:t.assetPosition,pageLocation:e.pageLocation,assetId:t.assetId})}));return Pe.createAsyncDeviceEvent(i,this.startSessionTimestamp)}return Promise.resolve()}},{key:"stopViewingAsset",value:function(e,t){var n=this;if(this.canTrack&&this.trackEvents.indexOf(ke)>Me)if(null===e)this.notify(new Error("EventLogger:stopViewingAsset:tried to update a device event without the original event"),"EventLogger:stopViewingAsset:tried to update a device event without the original event");else{e.end=(new Date).getTime(),e.updateType="stop";var i={"X-SHOWPAD-EVE-ID":Pe.getEveId(this.shareHash,t.position,e.start)};Pe.updateDeviceEvent(e,this.startSessionTimestamp,i).then((function(){return e=null})).catch((function(t){e=null,je(t)&&n.notify(t,"could not track item view stop")}))}}},{key:"stillViewingAsset",value:function(e,t){var n=this;if(this.canTrack&&this.trackEvents.indexOf(ke)>Me)if(null===e)this.notify(new Error("EventLogger:stopViewingAsset:tried to update a device event without the original event"),"EventLogger:stopViewingAsset:tried to update a device event without the original event");else{e.end=(new Date).getTime(),e.updateType="heartbeat";var i={"X-SHOWPAD-EVE-ID":Pe.getEveId(this.shareHash,t.position,e.start)};Pe.updateDeviceEvent(e,this.startSessionTimestamp,i).catch((function(e){je(e)&&n.notify(e,"could not update the item view")}))}}},{key:"log",value:function(){if(window.console&&window.console.log){var e=Array.prototype.slice.call(arguments);window.console.log.apply(window.console,e)}}},{key:"warn",value:function(){if(window.console&&window.console.warn){var e=Array.prototype.slice.call(arguments);window.console.warn.apply(window.console,e)}}},{key:"info",value:function(){if(window.console&&window.console.info){var e=Array.prototype.slice.call(arguments);window.console.info.apply(window.console,e)}}},{key:"error",value:function(){if(window.console&&window.console.error){var e,t=Array.prototype.slice.call(arguments);2===t.length&&"string"==typeof t[0]&&t[1]instanceof Error?(window.console.group(t[0]),window.console.error(t[1].message),window.console.error(t[1].stack),window.console.groupEnd()):(e=window.console).error.apply(e,Ae(t))}}},{key:"notify",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"warn";Ve(e,{extra:{message:t,metaData:n},level:i}),"function"==typeof this[i]&&this[i](e,t,n)}}],n&&De(t.prototype,n),e}(),We=He;function Ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}var t,n;return t=e,n=[{key:"on",value:function(e,t){var n=this.listeners[e];n||(n=[],this.listeners[e]=n),n.push(t)}},{key:"off",value:function(e,t){var n=this.listeners[e],i=n.indexOf(t);!n||i<0||n.splice(i,1)}},{key:"dispatch",value:function(e){var t=this.listeners[e];if(t&&0!==t.length){var n=Array.prototype.slice.call(arguments,1);t.slice(0).forEach((function(e){return e.apply(null,n)}))}}}],n&&Ue(t.prototype,n),e}(),Ge=/^(?!\/)[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,24}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/i;function Ye(e){var t=1===e.length&&"url"===e[0].type&&!1===e[0].canRenderInIframe;if(!t)return!1;var n=e[0].presentations.find((function(e){return"url"===e.type})),i=n&&n.url?n.url:n&&n.urls?n.urls[0]:null;return t&&function(e){return Ge.test(e)}(i)}function Je(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qe="application/json",Ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,null,n=[{key:"getJson",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{credentials:"include"};return t.hasOwnProperty("contentType")||(t.contentType=qe),fetch(e,t).then((function(e){return n(e)}));function n(e){return e.ok?e.json():Promise.reject(e)}}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{credentials:"include"};return t.hasOwnProperty("contentType")||(t.contentType=qe),fetch(e,t)}))},{key:"getText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{credentials:"include"};return fetch(e,t).then((function(e){return n(e)}));function n(e){return e.ok?e.text():Promise.reject(e)}}}],n&&Je(t,n),e}();function Xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Qe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.sessionTtl=n,n&&this.keepAlive(!1)}var t,n;return t=e,n=[{key:"keepAlive",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(t?fetch(this.url).catch((function(){return Promise.resolve()})):Promise.resolve()).then((function(){window.setTimeout((function(){return e.keepAlive(!0)}),1e3*(e.sessionTtl-60))})).catch((function(){throw new Error("error thrown by keep alive promise")}))}}],n&&Xe(t.prototype,n),e}();function Ke(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $e,et=function(){return'<div class="modal-consent__outer-wrapper">\n    <div class="modal-consent__inner-wrapper">\n        <div class="modal-consent__wrapper">\n            <aside class="modal-consent">\n                <h1 class="modal-consent__header">Privacy Policy</h1>\n                <main class="modal-consent__message">\n                </main>\n                <footer class="modal-consent__accept">\n                    <label class="control control--checkbox">\n                        <input type="checkbox" class="consent-modal-checkbox">\n                        <div class="control__indicator"></div>\n                        <span class="control__label--custom">\n                            By checking this box, I confirm having read,\n                            understood and accepted the <a class="privacy-policy-link" target="_blank">Privacy\n                                Policy</a>.\n                        </span>\n                    </label>\n                    <div class="modal-consent__buttons">\n                        <button class="button--m consent-modal-button modal-consent__continue"\n                            disabled><span>Continue</span>\n                            <div class="button_focus-overlay"></div>\n                        </button>\n                    </div>\n                </footer>\n            </aside>\n        </div>\n    </div>\n</div>'}.call($e,$e),tt="consent-modal-open",nt="privacy-modal-hidden",it="optional",rt=function(){function e(t,n,i,r,o,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.consentType=r,this.privacyPolicyUrl=o,this.container=t,this.domManager=n,this.eventBus=i,this.element=null,this.onSubmitButtonClick=this.onSubmitButtonClick.bind(this),this.onCheckboxChange=this.onCheckboxChange.bind(this),this.onViewContentButtonClick=this.onViewContentButtonClick.bind(this),this.onViewContent=a,this.onConsentAccepted=s,this.isOpen=!1,this.render()}var t,n,i;return t=e,i=[{key:"shouldShow",value:function(e,t,n){return!1===n||!1===e?Promise.resolve(!1):"mandatory"===t?Promise.resolve(!0):t===it?Z.get(nt).catch((function(){return 0})).then((function(e){var t=parseInt(e,10);return!(Date.now()-t<6048e5)})):Promise.resolve(!1)}}],(n=[{key:"open",value:function(){this.isOpen=!0,w.addClass(tt,this.domManager.get("body"))}},{key:"close",value:function(){this.isOpen=!1,w.removeClass(tt,this.domManager.get("body")),this.destroy(),this.eventBus.dispatch("modal:close")}},{key:"render",value:function(){var e=window.__SP__translations["privacy-policy"],t=e.welcome,n=e.confirmation,i=e.continue,r=e.viewContent;if(this.element=w.createElement(et),this.element.querySelector(".modal-consent__header").textContent=t,this.element.querySelector(".modal-consent__accept .control__label--custom").innerHTML=n,this.element.querySelector(".modal-consent__continue span").textContent=i,this.consentType===it){this.element.querySelector(".modal-consent__message").innerHTML="<p>".concat(e.message,"</p><p>").concat(e.messageOptional,"</p>");var o=w.createElement('<button class="button--m consent-modal-view-content-button button button-tint--reversed">'.concat(r,"</button>"));this.element.querySelector(".modal-consent__buttons").appendChild(o)}else this.element.querySelector(".modal-consent__message").innerHTML="<p>".concat(e.message,"</p>");this.element.querySelector(".privacy-policy-link").href=this.privacyPolicyUrl,this.element.querySelector(".message__privacy-policy-link").href=this.privacyPolicyUrl,this.container.appendChild(this.element),this.domManager.set("consent-modal-button",this.element.querySelector(".consent-modal-button")),this.consentType===it&&this.domManager.set("consent-modal-view-content-button",this.element.querySelector(".consent-modal-view-content-button")),this.domManager.set("consent-modal-checkbox",this.element.querySelector(".consent-modal-checkbox")),this.addEventListeners()}},{key:"destroy",value:function(){this.removeEventListeners()}},{key:"addEventListeners",value:function(){w.on(this.domManager.get("consent-modal-button"),"click",this.onSubmitButtonClick),this.consentType===it&&w.on(this.domManager.get("consent-modal-view-content-button"),"click",this.onViewContentButtonClick),w.on(this.domManager.get("consent-modal-checkbox"),"change",this.onCheckboxChange)}},{key:"removeEventListeners",value:function(){w.off(this.domManager.get("consent-modal-button"),"click",this.onSubmitButtonClick),this.consentType===it&&w.off(this.domManager.get("consent-modal-view-content-button"),"click",this.onViewContentButtonClick),w.off(this.domManager.get("consent-modal-checkbox"),"change",this.onCheckboxChange)}},{key:"onCheckboxChange",value:function(e){e.target.checked?(this.domManager.get("consent-modal-button").removeAttribute("disabled"),this.consentType===it&&(this.domManager.get("consent-modal-view-content-button").style.display="none")):(this.domManager.get("consent-modal-button").setAttribute("disabled",!0),this.consentType===it&&(this.domManager.get("consent-modal-view-content-button").style.display="block"))}},{key:"onSubmitButtonClick",value:function(){this.onConsentAccepted(),this.close()}},{key:"onViewContentButtonClick",value:function(){Z.set(nt,Date.now()),this.onViewContent(),this.close()}}])&&Ke(t.prototype,n),i&&Ke(t,i),e}(),ot=n(7856),st=n.n(ot);function at(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"timestampToFormattedDate",value:function(t){var n=new Date(1e3*t);return e.dateToLocaleDateString(n,{day:"numeric",month:"long",year:"numeric"})}},{key:"dateToInfoObject",value:function(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}}},{key:"getUserLocale",value:function(){return navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage}},{key:"dateToLocaleDateString",value:function(t,n){var i=e.getUserLocale();return"function"==typeof t.toLocaleDateString?t.toLocaleDateString(i,n):e.dateToFallbackLocaleDateString(t,i,n)}},{key:"dateToFallbackLocaleDateString",value:function(t,n){var i="YYYY/MM/DD",r="MM/DD/YYYY",o=function(e){var t=e.toLowerCase().replace("-","_"),n="DD/MM/YYYY";return["fa","zh","hu","lt","ja","ko","mn"].indexOf(t.split("_")[0])>-1?n=i:["en_us","en_as","en_bb","en_bm","en_bw","en_gu","en_gy","en_jm","en_mh","en_mp","en_vi","en_um","en_tt","en_ph","en_na"].indexOf(t)>-1&&(n=r),n}(n),s=e.dateToInfoObject(t);return o===r?"".concat(s.month,"/").concat(s.day,"/").concat(s.year):o===i?"".concat(s.year,"/").concat(s.month,"/").concat(s.day):"".concat(s.day,"/").concat(s.month,"/").concat(s.year)}}],null&&at(t.prototype,null),n&&at(t,n),e}();function lt(){return'<div class="about-modal">\n    <div class="modal-header">\n        <div class="modal-header-title">About</div>\n        <button type="button" class="button-transparent button-close">\n            <i class="spsc-icon-close"></i>\n            <div class="button_focus-overlay"></div>\n        </button>\n    </div>\n    <div class="modal-body">\n        <div class="creator-info">\n            <h2 class="section-title">Sent on <span class="showcase-creation-date">'.concat(this.sharedAt,'</span></h2>\n            <div class="showcase-creator">\n                <div class="showcase-creator-avatar-wrapper">\n                    <div class="showcase-creator-avatar"></div>\n                </div>\n                <div class="showcase-creator-info">\n                    <div class="showcase-creator-name-role">\n                        <div class="showcase-creator-name"></div>\n                        <div class="showcase-creator-role"></div>\n                    </div>\n                    <div class="showcase-creator-phone ').concat(this.creator.phoneNumber?"":"hidden",'"></div>\n                    <div><a href="mailto:').concat(this.creator.email,'" class="showcase-creator-email"> </a><br /></div>\n                </div>\n            </div>\n        </div>\n        <div class="info-wrapper').concat(null!==this.theme.promoImageUrl?" with-promo-image":"",'">\n            <h2 class="section-title">About</h2>\n\n            <div class="promo-image" style="background-image: url(').concat(this.theme.promoImageUrl||"",')"></div>\n\n            <div class="company-biography">\n                <p class="company-biography-content">').concat(this.theme.biographySafe,'</p>\n            </div>\n        </div>\n\n        <div class="privacy-info-actions" style="').concat(this.showPrivacyPolicy?"":"display: none",'">\n            <ul class="list">\n                <li><a href="http://www.showpad.com" target="_blank">Showpad</a></li>\n                &bull;\n                <li><a id="privacy-policy" href="').concat(this.privacyPolicyUrl,'" target="_blank">Privacy Policy</a></li>\n            </ul>\n        </div>\n    </div>\n</div>')}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ft=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="about",this.element=null,this.parentModal=t,this.domManager=this.parentModal.domManager,this.eventLogger=this.parentModal.eventLogger||null,this.showcaseViewer=n.showcaseViewer,this.info=null,this.init()}var t,n;return t=e,n=[{key:"init",value:function(){this.render()}},{key:"render",value:function(){var e=window.__SP__translations,t=e.about,n=e["sent-on-date"],i=e.entity;if(null!==this.element)throw new Exception("AboutModal already rendered");this.parseInfo();var r=function(e){return lt.call(e,e)}(this.info);this.element=w.createElement(r),this.domManager.get("modal").appendChild(this.element),this.element.querySelector(".showcase-creator-role").textContent="".concat(this.info.creator.companyRole?this.info.creator.companyRole+", ":""," ").concat(this.info.creator.company||this.info.organisation.name),this.element.querySelector(".showcase-creator-phone").textContent=this.info.creator.phoneNumber||"",this.element.querySelector(".showcase-creator-avatar").textContent=this.info.creator.initials,this.element.querySelector(".showcase-creator-name").textContent=this.info.creator.name,this.element.querySelector(".showcase-creator-email").textContent=this.info.creator.email,this.element.querySelector(".modal-header-title").textContent=t,this.element.querySelector(".creator-info .section-title").textContent=n.replace("{{date}}",this.info.sharedAt),this.element.querySelector(".info-wrapper .section-title").textContent=t,this.element.querySelector("#privacy-policy").textContent=i["privacy-policy"],this.cacheElements(),this.bindCallbacks(),this.addEventListeners()}},{key:"parseInfo",value:function(){var e,t,n,i,r,o,s=this,a=void 0!==this.showcaseViewer.hasCustomPrivacyDisclaimer&&this.showcaseViewer.hasCustomPrivacyDisclaimer,c=Object.keys(this.showcaseViewer.creator).reduce((function(e,t){return e[t]=st().sanitize(s.showcaseViewer.creator[t]),e}),{});this.info={sharedAt:ct.timestampToFormattedDate(this.showcaseViewer.sharedAt),creator:dt(dt({},c),{},{initials:(e=c.firstName,t=c.lastName,n=c.email,i=e&&e.trim(),r=t&&t.trim(),o=n&&n.trim(),(i||r?"".concat(i?i[0]:"").concat(r?r[0]:""):o?o[0]:"").toUpperCase())}),organisation:this.showcaseViewer.organisation,theme:this.showcaseViewer.theme,showPrivacyPolicy:this.showcaseViewer.showPrivacyPolicy&&!a,privacyPolicyUrl:this.showcaseViewer.consent&&this.showcaseViewer.consent.privacyPolicyUrl||"http://www.showpad.com/privacy-policy"},this.info&&this.info.theme&&this.info.theme.biography?this.info.theme.biographySafe=w.linkify(w.htmlEntities(this.info.theme.biography).replace(/\n/g,"<br>")):this.info.theme.biographySafe=""}},{key:"cacheElements",value:function(){this.domManager.set("about-modal-privacy",this.element.querySelector(".privacy-info-actions")),this.domManager.set("about-modal-close-button",this.element.querySelector(".button-close"))}},{key:"bindCallbacks",value:function(){var e=this;this.boundClose=function(){return e.close()}}},{key:"addEventListeners",value:function(){w.on(this.domManager.get("about-modal-close-button"),"click",this.boundClose),w.on(this.domManager.get("modal"),"click",this.stopBubble),w.on(this.domManager.get("modal-wrapper"),"click",this.boundClose)}},{key:"removeEventListeners",value:function(){w.off(this.domManager.get("about-modal-close-button"),"click",this.boundClose),w.off(this.domManager.get("modal"),"click",this.stopBubble),w.off(this.domManager.get("modal-wrapper"),"click",this.boundClose)}},{key:"close",value:function(){this.parentModal.close(this.type),this.destroy()}},{key:"stopBubble",value:function(e){e.stopPropagation()}},{key:"destroy",value:function(){this.removeEventListeners(),this.domManager.remove("about-modal-privacy"),this.domManager.remove("about-modal-close-button"),this.domManager.get("modal").removeChild(this.element)}}],n&&pt(t.prototype,n),e}();function vt(){return'<div class="modal-wrapper">\n    <div class="modal">\n    </div>\n</div>\n'}function mt(){return'<div class="alert alert--inline alert--success toast">\n    <div class="icon--alert">\n        <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewbox="0 0 512 512">\n            <path\n                d="M256 .5C114.893.5.5 114.893.5 256S114.893 511.5 256 511.5 511.5 397.107 511.5 256 397.107.5 256 .5zm-44.636 361.958l-88.755-93.824 28.993-29.771 59.762 64.952 149.031-154.273 28.993 28.869-178.024 184.047z"\n            />\n        </svg>\n    </div>\n    <div class="alert__container">\n        <span class="alert__title toast-message"></span>\n    </div>\n</div>\n'}function gt(e){return mt.call(e,e)}function wt(){return'<div class="alert alert--inline alert--information toast">\n    <div class="icon--alert">\n        <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewbox="0 0 512 512">\n            <path\n                d="M256 .5C114.893.5.5 114.893.5 256S114.893 511.5 256 511.5 511.5 397.107 511.5 256 397.107.5 256 .5zm-21.292 149.042h42.583v42.583h-42.583v-42.583zm63.875 212.916h-85.166v-21.291h21.292V234.708h-21.292v-21.292h63.875v127.75h21.291v21.292z"\n            />\n        </svg>\n    </div>\n    <div class="alert__container">\n        <span class="alert__title toast-message"></span>\n    </div>\n</div>\n'}function yt(){return'<div class="alert alert--inline alert--danger toast">\n    <div class="icon--alert">\n        <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewbox="0 0 512 512">\n            <path\n                d="M256 .5C114.893.5.5 114.893.5 256S114.893 511.5 256 511.5 511.5 397.107 511.5 256 397.107.5 256 .5zm30.241 373.59h-60.482v-41.877h60.482v41.877zm-5.839-68.046h-48.805l-6.886-168.134h62.578l-6.887 168.134z"\n            />\n        </svg>\n    </div>\n    <div class="alert__container">\n        <span class="alert__title toast-message"></span>\n    </div>\n</div>\n'}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pt(e,t,n){return t&&bt(e.prototype,t),n&&bt(e,n),e}var _t=function(){function e(t,n){Et(this,e),this.element=w.createElement("<div></div>"),this.element.innerHTML=this.getToastTemplate(n),this.element.querySelector(".toast-message").innerHTML=t}return Pt(e,[{key:"getToastTemplate",value:function(e){switch(e){case"success":return gt();case"info":return function(e){return wt.call(e,e)}();case"error":return function(e){return yt.call(e,e)}();default:return gt()}}}]),e}(),Tt=function(){function e(t){Et(this,e),this.toastContainer=t}return Pt(e,[{key:"showToast",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500,r=arguments.length>3?arguments[3]:void 0,o=300,s=new _t(e,n);this.toastContainer.appendChild(s.element),this.toastContainer.style.maxWidth="90%",r&&(this.toastContainer.style.width=r+"px"),setTimeout((function(){w.addClass("fade-out",s.element.querySelector(".toast")),setTimeout((function(){t.toastContainer.removeChild(s.element)}),o)}),i)}}]),e}();function St(){return'<div class="share-modal">\n    <div class="modal-header">\n        <div class="modal-header-title">Share This</div>\n        <button type="button" class="button-transparent button-close">\n            <i class="spsc-icon-close"></i>\n            <div class="button_focus-overlay"></div>\n        </button>\n    </div>\n    <form class="share-modal-form">\n        <div class="modal-body">\n            <p class="share-error">\n                Due to a technical issue the content could not be shared. <br />\n                Our developers have been notified of this problem.\n            </p>\n\n            <div class="field-wrapper">\n                <label id="tags-input-email__label">Recipients</label>\n                <div class="share-recipients">\n                    <input type="tags" class="tags-input-email" placeholder="Email Address" />\n                </div>\n            </div>\n\n            <div class="field-wrapper">\n                <label id="tags-input-message__label">Message</label>\n                <textarea class="share-body"></textarea>\n            </div>\n        </div>\n\n        <div class="modal-footer">\n            <div class="reshare-policy">\n                By sharing this content you agree to our\n                <a href="https://www.showpad.com/online-terms" target="_blank">Acceptable Use policy</a>\n            </div>\n            <button type="submit" class="button--m button-tint button-send"><span>Send</span>\n                <div class="button_focus-overlay"></div>\n            </button>\n        </div>\n    </form>\n</div>'}var Vt="placeholder pattern spellcheck autocomplete autocapitalize autofocus accessKey accept lang minLength maxLength required".split(" ");function Rt(e){function t(e,t,n,i){var r=document.createElement(e);for(var o in t&&(r.className=t),n&&(r.textContent=n),i)r.setAttribute("data-".concat(o),i[o]);return r}function n(e,t){return!0===t?Array.prototype.slice.call(d.querySelectorAll(e)):d.querySelector(e)}function i(){return n(".tag",!0).map((function(e){return e.textContent})).concat(d.input.value||[]).join(",")}function r(e){n(".tag",!0).forEach((function(e){return d.removeChild(e)})),l(e)}function o(){e.value=i()}function s(i){if(~i.indexOf(",")&&(i=i.split(",")),Array.isArray(i))return i.forEach(s);var r=i&&i.trim();if(!r)return!1;if(function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(e)}(r)){if(!e.getAttribute("duplicates")){var a=n('[data-tag="'.concat(r,'"]'));if(a)return a.classList.add("dupe"),setTimeout((function(){return a.classList.remove("dupe")}),100),!1}var l=t("div","tag",!1,{tag:r}),u=t("span","tag-name",r),h=t("span","tag-remove");h.addEventListener("click",(function(e){d.removeChild(l),c(),o()})),h.innerHTML='<i class="spsc-icon-close"></i>',l.appendChild(u),l.appendChild(h),d.insertBefore(l,d.input)}}function a(e){var t=n(".selected");t&&t.classList.remove("selected"),e&&e.classList.add("selected")}function c(){var e=n(".tag",!0).pop(),t=d.offsetWidth;t&&(d.input.style.width=Math.max(t-(e?e.offsetLeft+e.offsetWidth:5)-5,t/4)+"px")}function l(e){"string"==typeof e||Array.isArray(e)||(e=d.input.value),!1!==s(e)&&(d.input.value="",o(),c())}function u(e){return e.target.classList.contains("tag")&&a(e.target),e.target===d.input?a():(d.input.focus(),e.preventDefault(),!1)}var d=t("div","tags-input"),h=e.nextSibling;return e.parentNode[h?"insertBefore":"appendChild"](d,h),e.style.cssText="position:absolute;left:0;top:-99px;width:1px;height:1px;opacity:0.01;",e.tabIndex=-1,d.input=t("input"),d.input.setAttribute("type","text"),Vt.forEach((function(t){if(e[t]!==d.input[t]){d.input[t]=e[t];try{delete e[t]}catch(e){}}})),d.appendChild(d.input),e.addEventListener("focus",(function(){d.input.focus()})),d.input.addEventListener("focus",(function(){d.classList.add("focus"),a()})),d.input.addEventListener("blur",(function(){d.classList.remove("focus"),a(),l()})),d.input.addEventListener("keydown",(function(e){var t=d.input,i=e.keyCode||e.which,r=n(".tag.selected"),s=t.selectionStart===t.selectionEnd&&t.selectionStart,u=n(".tag",!0).pop();if(c(),13===i||188===i||9===i||32===i){if(!t.value&&188!==i)return;l()}else if(46===i&&r)r.nextSibling!==d.input&&a(r.nextSibling),d.removeChild(r),c(),o();else if(8===i)if(r)a(r.previousSibling),d.removeChild(r),c(),o();else{if(!u||0!==s)return;a(u)}else if(37===i)if(r)r.previousSibling&&a(r.previousSibling);else{if(0!==s)return;a(u)}else{if(39!==i)return a();if(!r)return;a(r.nextSibling)}return e.preventDefault(),!1})),d.input.addEventListener("input",(function(){e.value=i()})),d.input.addEventListener("paste",(function(){return setTimeout(l,0)})),d.addEventListener("mousedown",u),d.addEventListener("touchstart",u),d.setValue=r,d.getValue=i,l(e.value),{getValue:i,setValue:r,focus:function(){return d.input.focus(),!1}}}function At(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Rt.enhance=Rt.tagsInput=Rt;var Ot=function(e){return St.call(e,e)}(),It=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="share",this.parentModal=t,this.confirmBeforeClose=!0,this.domManager=this.parentModal.domManager,this.eventLogger=this.parentModal.eventLogger||null,this.toastService=new Tt(this.domManager.get("toast-container")),this.element=null,this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){var e=this,t=window.__SP__translations,n=t["share-modal"],i=n.title,r=n["share-error"],o=n["reshare-policy"],s=t.entity,a=s.recipient_plural,l=s["email-address"],u=s.message,d=t.action.send,h=new c;if(Promise.resolve(),null!==this.element)throw new Exception("ShareModal already rendered");this.element=w.createElement(Ot),this.domManager.get("modal").appendChild(this.element);var p=this.element.querySelector(".share-recipients");return this.domManager.set("share-modal",this.element),this.domManager.set("share-modal-close-button",this.element.querySelector(".button-close")),this.domManager.set("share-modal-form",this.element.querySelector(".share-modal-form")),this.domManager.set("share-modal-textarea",this.element.querySelector(".share-body")),this.domManager.set("share-modal-recipients",p),this.domManager.set("share-modal-send-button",this.element.querySelector(".button-send")),this.tagsInputEmail=Rt(this.element.querySelector(".tags-input-email")),this.element.querySelector(".modal-header-title").textContent=i,this.element.querySelector(".share-error").textContent=r,this.element.querySelector("#tags-input-email__label").textContent=a,this.element.querySelector("#tags-input-message__label").textContent=u,this.element.querySelector(".tags-input").input.placeholder=l,this.element.querySelector(".button-send span").textContent=d,this.element.querySelector(".reshare-policy").innerHTML=o,this.element.querySelector(".privacy-policy-link").href=this.parentModal.privacyPolicyUrl,this.bindCallbacks(),this.addEventListeners(),setTimeout((function(){e.tagsInputEmail.focus()}),50),h.promise}},{key:"bindCallbacks",value:function(){var e=this;this.boundClose=function(){return e.close()},this.boundShare=function(t){return e.share(t)}}},{key:"addEventListeners",value:function(){w.on(this.domManager.get("share-modal-close-button"),"click",this.boundClose),w.on(this.domManager.get("modal-wrapper"),"click",this.boundClose),w.on(this.domManager.get("modal"),"click",this.stopBubble),w.on(this.domManager.get("share-modal-form"),"submit",this.boundShare)}},{key:"removeEventListeners",value:function(){w.off(this.domManager.get("share-modal-close-button"),"click",this.boundClose),w.off(this.domManager.get("modal-wrapper"),"click",this.boundClose),w.off(this.domManager.get("modal"),"click",this.stopBubble),w.off(this.domManager.get("share-modal-form"),"submit",this.boundShare)}},{key:"close",value:function(){var e=this,t=(this.domManager.get("share-modal-recipients"),this.domManager.get("share-modal-textarea")),n=this.tagsInputEmail.getValue().split(",").filter(Boolean)||[],i=t.value.trim();(function(){var t=!0;return!0===e.confirmBeforeClose&&(n.length>0||i.length>0)&&(t=window.confirm("Are you sure you want to leave? Your changes will be lost.")),t})&&(e.parentModal.close(e.type),e.destroy())}},{key:"stopBubble",value:function(e){e.stopPropagation()}},{key:"destroy",value:function(){this.removeEventListeners(),this.domManager.remove("share-modal"),this.domManager.remove("share-modal-close-button"),this.domManager.remove("share-modal-form"),this.domManager.remove("share-modal-textarea"),this.domManager.remove("share-modal-recipients"),this.domManager.remove("share-modal-send-button"),this.domManager.get("modal").removeChild(this.element)}},{key:"share",value:function(e){var t=this;e.preventDefault();var n=this.domManager.get("share-modal-recipients"),i=this.domManager.get("share-modal-textarea"),r=this.tagsInputEmail.getValue().split(",").filter(Boolean)||[],o=i.value.trim(),s=[];0===r.length?(w.addClass("error",n),s.push("recipients"),1===s.length&&this.tagsInputEmail.focus()):w.removeClass("error",n),0===o.length?(w.addClass("error",i),s.push("body"),1===s.length&&i.focus()):w.removeClass("error",i),0===s.length&&(this.domManager.get("share-modal-send-button").setAttribute("disabled","disabled"),Pe.getDeviceId().then((function(e){var t=JSON.stringify(r.map((function(e){return{text:e}}))),n=z.getUrlWithParams("showcase-share"),i={method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"recipients=".concat(encodeURIComponent(t),"&body=").concat(encodeURIComponent(o))};return null!==e&&(i.body+="&deviceId=".concat(encodeURIComponent(e))),Ze.getJson(n,i).then((function(e){return function(e){if("true"!=="".concat(e.success))throw this.eventLogger.notify("could not share showcase",e.message,{response:e}),new Error("invalid json response")}(e)}))})).then((function(){t.tagsInputEmail.setValue(""),i.value="";var e=window.__SP__translations["content-shared"];t.toastService.showToast(e),t.close()})).catch((function(){t.domManager.get("share-modal-send-button").removeAttribute("disabled"),w.addClass("has-share-error",t.domManager.get("share-modal"))})),this.parentModal.eventBus.dispatch("track:share"))}}])&&At(t.prototype,n),e}();function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var xt=function(e){return vt.call(e,e)}(),Dt="overlay-open",Nt="modal-open",kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;Lt(this,e),this.domManager=t,this.eventLogger=n,this.eventBus=i,this.privacyPolicyUrl=r,this.element=null,this.isOpen=!1,this.modals={about:null,share:null},this.constructors={share:It,about:ft},this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){this.render()}},{key:"open",value:function(e,t){this.isOpen=!0,w.addClass(Dt,this.domManager.get("body")),w.addClass(Nt,this.domManager.get("body")),this.modals[e]||(this.modals[e]=new this.constructors[e](this,t))}},{key:"close",value:function(e){this.isOpen=!1,w.removeClass(Dt,this.domManager.get("body")),w.removeClass(Nt,this.domManager.get("body")),this.eventBus.dispatch("modal:close"),delete this.modals[e]}},{key:"render",value:function(){if(null!==this.element)throw new Exception("ShareModal already rendered");this.element=w.createElement(xt),this.domManager.get("body").appendChild(this.element),this.domManager.set("modal-wrapper",document.querySelector(".modal-wrapper")),this.domManager.set("modal",document.querySelector(".modal"))}}])&&Ct(t.prototype,n),e}();function Mt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ft=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domManager=new E,this.element=t,this.parent=n,this.data={}}var t,n;return t=e,(n=[{key:"getElementContainer",value:function(){return this.element}},{key:"getParentElementContainer",value:function(){return this.parent}},{key:"show",value:function(){w.showElement(this.element)}},{key:"hide",value:function(){w.hideElement(this.element)}},{key:"fetchDomElements",value:function(){}},{key:"addEventListeners",value:function(){}},{key:"render",value:function(){}}])&&Mt(t.prototype,n),e}();function Bt(){return'<div class="privacy-warning">\n    <span class="privacy-content"></span>\n    <button class="hide-button">\n        <i class="spsc-icon-close"></i>\n    </button>\n</div>'}function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Wt(e,t){return Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wt(e,t)}function Ut(e,t){if(t&&("object"===jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zt(e){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zt(e)}var Gt="privacy-warning-hidden",Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(a,e);var t,n,i,r,o,s=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zt(r);if(o){var n=zt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ut(this,e)});function a(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(i=s.call(this,e,t)).element.innerHTML=function(e){return Bt.call(e,e)}(),i.fetchDomElements(),i.addEventListeners(),i.privacyContent=n,i.domManager.get("privacy-content").innerHTML=i.privacyContent,i}return t=a,i=[{key:"shouldShow",value:function(){return Z.get(Gt).catch((function(){return"false"})).then((function(e){return"true"!==e}))}}],(n=[{key:"fetchDomElements",value:function(){this.domManager.set("privacy-close-button",this.element.querySelector(".hide-button")),this.domManager.set("privacy-content",this.element.querySelector(".privacy-content"))}},{key:"addEventListeners",value:function(){var e=this;w.on(this.domManager.get("privacy-close-button"),"click",(function(){return e.close()}))}},{key:"render",value:function(){w.addClass("show-privacy-warning",this.parent)}},{key:"close",value:function(){Z.set(Gt,"true"),this.hide(),w.removeClass("show-privacy-warning",this.parent)}}])&&Ht(t.prototype,n),i&&Ht(t,i),a}(Ft);function Jt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var qt=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.info=n,this.logoUrl=n.theme.logoUrl,this.organisationName=n.organisation.name,this.eventBus=i,this.domManager=t,this.addEventListeners()}var t,n;return t=e,(n=[{key:"render",value:function(){var e=this;w.removeClass("hide",this.domManager.get("showcase-header")),this.domManager.get("company-name").forEach((function(t){return t.innerHTML=w.htmlEntities(e.info.organisation.organisationName)})),this.domManager.get("company-description").forEach((function(t){return t.innerHTML=w.htmlEntities(e.info.organisation.biography).replace(/\n/g,"<br>")}));var t=this.domManager.get("company-logo");"string"==typeof this.logoUrl&&this.logoUrl.length>0?(t.classList.add("has-logo"),t.style.backgroundImage="url(".concat(this.logoUrl,")"),t.innerHTML=""):t.innerHTML=w.htmlEntities(this.organisationName);try{this.info.disableReshare&&w.hideElement(this.domManager.get("showcase-header-share-button"))}catch(e){}}},{key:"onClickOpenModal",value:function(e){this.openModal=e}},{key:"addEventListeners",value:function(){var e=this;w.on(this.domManager.get("showcase-header-about-button"),"click",(function(){return e.openModal("about")})),w.on(this.domManager.get("showcase-header-share-button"),"click",(function(){e.eventBus.dispatch("track:shareClick"),e.openModal("share")}))}}])&&Jt(t.prototype,n),e}();function Zt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.accentColor=null,this.fontColor=null,this.allowContentDownload=null,this.organisationName=null,this.logoUrl=null,this.promoImageUrl=null,this.biography=null,this.domManager=t,this.element=null}var t,n,i;return t=e,i=[{key:"fromConfig",value:function(t,n,i){var r=new e(i);return r.accentColor=t.accentColor,r.fontColor=t.fontColor,r.allowContentDownload=t.allowContentDownload,r.logoUrl=t.logoUrl,r.promoImageUrl=t.promoImageUrl,r.biography=t.biography,r.organisationName=n.name,r}}],(n=[{key:"render",value:function(){if(null!==this.element)throw new Error("Showcase Theme already rendered");var e=null,t=function(e){return-1!==["ffffff","f6f6f6"].indexOf(e.toLowerCase())};return(e=null===this.element?w.createElement("<style></style>"):this.element).innerHTML="\n            .header {\n                background-color: #".concat(this.accentColor,";\n                color: #").concat(this.fontColor,";\n            }\n            .header-actions-list .button { color: #").concat(this.fontColor,"; }\n            .button-tint {\n                background-color: #").concat(this.accentColor," !important;\n                color: #").concat(this.fontColor," !important;\n                border: 1px solid #").concat(t(this.accentColor)?"d9d9d9":this.accentColor,' !important;\n            }\n            .button-tint--reversed {\n                color: #$4d4d4d !important;\n            }\n            .control--checkbox input[type="checkbox"]:checked + .control__indicator {\n                background-color: #').concat(this.accentColor," !important;\n                ").concat(t(this.accentColor)?"border: 1px solid #737373;":"","\n            }\n            .control--checkbox .control__indicator:after {\n                border-color: #f6f6f6 !important;\n            }\n            \n            a {\n                color: #333333;\n            }\n        "),this.domManager.get("title").innerHTML="".concat(this.organisationName," | Showpad"),null===this.element&&(this.element=e),this.domManager.get("body").appendChild(this.element),this.element}},{key:"destroy",value:function(){document.querySelector("body").removeChild(this.element),this.element=null}},{key:"getElement",value:function(){return this.element}},{key:"getInstance",value:function(){return this}}])&&Zt(t.prototype,n),i&&Zt(t,i),e}(),Qt=n(2255);function Kt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $t=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],en="fake-fullscreen",tn=[],nn=!1,rn=!1,on=null;function sn(){nn||($t.forEach((function(e){return w.on(document,e,an)})),nn=!0)}function an(){tn.forEach((function(e){return e.call()}))}function cn(e){w.on(document.body,"keydown",un),w.addClass(en,e),w.addClass(en,document.body),rn=!0,on=e,an()}function ln(){w.off(document,"keydown",un),w.removeClass(en,on),w.removeClass(en,document.body),rn=!1,on=null,an()}function un(e){27===e.keyCode&&ln()}var dn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"enterFullscreen",value:function(e){sn(),function(e){var t=cn;return"function"==typeof e.requestFullScreen?t=e.requestFullscreen.bind(e):"function"==typeof e.mozRequestFullScreen?t=e.mozRequestFullScreen.bind(e):"function"==typeof e.webkitRequestFullScreen?t=e.webkitRequestFullScreen.bind(e):"function"==typeof e.msRequestFullscreen&&(t=e.msRequestFullscreen.bind(e)),t}(e)(e)}},{key:"exitFullscreen",value:function(){var e;sn(),(e=ln,"function"==typeof document.cancelFullScreen?e=document.cancelFullScreen.bind(document):"function"==typeof document.exitFullscreen?e=document.exitFullscreen.bind(document):"function"==typeof document.mozCancelFullScreen?e=document.mozCancelFullScreen.bind(document):"function"==typeof document.webkitCancelFullScreen?e=document.webkitCancelFullScreen.bind(document):"function"==typeof document.msExitFullscreen&&(e=document.msExitFullscreen.bind(document)),e)()}},{key:"addFullscreenChangeListener",value:function(e){sn(),tn.push(e)}},{key:"removeFullscreenChangeListener",value:function(e){tn=tn.filter((function(t){return t!==e}))}},{key:"isFullscreenSupported",value:function(){return"function"==typeof document.body.requestFullScreen||"function"==typeof document.body.mozRequestFullScreen||"function"==typeof document.body.webkitRequestFullScreen||"function"==typeof document.body.msRequestFullscreen}},{key:"isFullscreen",value:function(){return!1!==(document.fullScreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||rn)}}],null&&Kt(t.prototype,null),n&&Kt(t,n),e}();function hn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"download",value:function(e){setTimeout((function(){var t=document.createElement("a");t.setAttribute("href",e),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}),10)}}],null&&hn(t.prototype,null),n&&hn(t,n),e}();function fn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vn,mn="action-bar-hidden",gn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.assetViewer=t.assetViewer,this.eventLogger=t.eventLogger,this.viewer=this.assetViewer.viewer,this.eventBus=this.viewer.eventBus,this.config=this.viewer.config,this.hideActionBarTimeout=null,this.currentView=null,this.onFocusChange=this.onFocusChange.bind(this),this.onSetView=this.onSetView.bind(this),this.onViewportChange=this.onViewportChange.bind(this),this.onLayoutZoomChange=this.onLayoutZoomChange.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.downloadAsset=this.downloadAsset.bind(this),this.addEventListeners()}var t,n;return t=e,(n=[{key:"addEventListeners",value:function(){this.eventBus.on(Qt.ViewerEventType.FocusChange,this.onFocusChange),this.eventBus.on(Qt.ViewerEventType.SetView,this.onSetView),this.eventBus.on(Qt.ViewerEventType.ViewportChange,this.onViewportChange),this.eventBus.on(Qt.ViewerEventType.LayoutZoomChange,this.onLayoutZoomChange),this.container.onmousemove=this.onMouseMove,this.container.ontouchmove=this.onMouseMove}},{key:"render",value:function(){this.actionBar=this.createActionBar(),this.container.appendChild(this.actionBar),this.show()}},{key:"show",value:function(){clearTimeout(this.hideActionBarTimeout),this.actionBar.classList.remove(mn),this.setHideTimeout()}},{key:"hide",value:function(){this.actionBar.classList.add(mn)}},{key:"focus",value:function(){this.clearHideTimeout(),this.actionBar.classList.remove(mn)}},{key:"onMouseMove",value:function(e){if(this.actionBar.contains(e.target))return this.focus();this.show()}},{key:"update",value:function(e){e&&(this.currentView=e,this.downloadContainer.style.display=!0===e.assetViewerItem.isDownloadable?"flex":"none"),e&&this.displayNameContainer&&(this.displayNameContainer.textContent=e.assetViewerItem.displayName,this.displayNameContainer.title=e.assetViewerItem.displayName,this.currentPageContainer.innerHTML=e.page&&e.numPages>1?e.page:"",this.numPagesContainer.innerHTML=e.numPages&&e.numPages>1?"/"+e.numPages:""),this.viewer&&this.viewer.viewerLayout.canZoomIn&&this.zoomInContainer?(this.zoomInContainer.classList.remove("disabled"),this.zoomInContainer.onclick=this.onZoomInClick.bind(this)):this.zoomInContainer&&(this.zoomInContainer.classList.add("disabled"),this.zoomInContainer.onclick=function(){}),this.viewer&&this.viewer.viewerLayout.canZoomOut&&this.zoomOutContainer?(this.zoomOutContainer.classList.remove("disabled"),this.zoomOutContainer.onclick=this.onZoomOutClick.bind(this)):this.zoomInContainer&&(this.zoomOutContainer.classList.add("disabled"),this.zoomOutContainer.onclick=function(){})}},{key:"clearHideTimeout",value:function(){clearTimeout(this.hideActionBarTimeout)}},{key:"setHideTimeout",value:function(){var e=this;this.hideActionBarTimeout=setTimeout((function(){return e.hide()}),this.config.ACTION_BAR_HIDE_TIMEOUT)}},{key:"onSetView",value:function(e){var t=this.assetViewer.getAssetViewerViewComponentById(e.payload.assetViewerView.id);this.actionBar||this.render(),this.update(t)}},{key:"onFocusChange",value:function(e){var t=this.assetViewer.getAssetViewerViewComponentById(e.payload.assetViewerView.id);this.actionBar||this.render(),this.update(t)}},{key:"onViewportChange",value:function(){this.actionBar||this.render(),this.show()}},{key:"onLayoutZoomChange",value:function(){this.update()}},{key:"createActionBar",value:function(){var e=this,t=this.actionBar=document.createElement("div"),n=document.createElement("div");n.classList.add("action-bar-info-container");var i=document.createElement("div");i.classList.add("action-bar-button-container");var r=document.createElement("div");r.classList.add("action-bar-page-container");var o=this.displayNameContainer=document.createElement("div");o.classList.add("action-bar-displayname");var s=this.currentPageContainer=document.createElement("div");s.classList.add("action-bar-page");var a=this.numPagesContainer=document.createElement("div");a.classList.add("action-bar-numpages");var c=this.previousContainer=document.createElement("div");c.classList.add("action-bar-previous"),c.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><g id="5151e0c8492e5103c096af88a5270478"><path display="inline" d="M417.197,504.225L67.135,285.431c-25.9-16.188-25.9-42.673,0-58.86L417.197,7.776\n                    c25.9-16.188,47.093-4.441,47.093,26.101v444.248C464.29,508.666,443.098,520.412,417.197,504.225z"></path></g></svg>\n        ',c.onclick=function(){return e.viewer.previous()};var l=this.nextContainer=document.createElement("div");l.classList.add("action-bar-next"),l.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><g id="5151e0c8492e5103c096af88a526f803"><path display="inline" d="M444.865,285.434L94.797,504.229c-25.899,16.182-47.087,4.436-47.087-26.105V33.874\n                    c0-30.542,21.188-42.288,47.087-26.095l350.068,218.794C470.766,242.755,470.766,269.24,444.865,285.434z"></path></g></svg>\n        ',l.onclick=function(){return e.viewer.next()};var d=this.zoomInContainer=document.createElement("div");d.classList.add("action-bar-zoom-in"),d.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="afcae5a789ccd549f9c6e2a2f80d1e54"><path style="display: inline;" d="M306.594,208.262H508.97v101.188H306.594v202.377H205.406V309.449H3.03V208.262h202.375V0.826\n                    h101.188V208.262z"></path></g></svg>\n        ',d.onclick=this.onZoomInClick.bind(this);var h=this.zoomOutContainer=document.createElement("div");h.classList.add("action-bar-zoom-out"),h.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="afcae5a789ccd549f9c6e2a2f80d22a0"><path style="display: inline;" d="M511.5,204.9v102.2H0.5V204.9H511.5z"></path></g></svg>\n        ',h.onclick=this.onZoomOutClick.bind(this);var p=this.downloadContainer=document.createElement("div");p.classList.add("action-bar-download"),p.setAttribute("role","button"),p.setAttribute("aria-label","downloadButton"),p.setAttribute("aria-pressed","false"),p.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="afcae5a789ccd549f9c6e2a2f80cccc2"><path style="display: inline;" d="M400.617,154.126L256,332.976l-144.617-178.85H204.9V0.825h102.2v153.301H400.617z\n                     M460.399,154.126v102.2v204.401H51.6V256.326v-102.2l-51.1-51.1v51.1v102.2v255.5h511v-255.5v-102.2v-51.1L460.399,154.126z"></path></g></svg>\n        ',p.onclick=function(){e.downloadAsset()};var f=this.fullScreenContainer=document.createElement("div");return f.classList.add("action-bar-fullscreen"),f.innerHTML='\n            <svg  version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px"\n                 height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g id="afcae5a789ccd549f9c6e2a2f8071638"><path style="display: inline;" d="M391.928,180.997L180.994,391.931l119.567,119.566H0.503L0.5,211.431\n                    l119.566,119.567l210.939-210.926L211.431,0.503H511.5v300.061L391.928,180.997z"></path></g></svg>\n        ',f.onclick=function(){return e.assetViewer.toggleFullscreen()},r.appendChild(s),r.appendChild(a),n.appendChild(o),n.appendChild(r),u.mobile||(i.appendChild(h),i.appendChild(d)),i.appendChild(p),u.mobile||i.appendChild(f),t.appendChild(n),t.appendChild(i),t.classList.add("action-bar"),t.classList.add(mn),this.config.actionBarPositionTop?t.classList.add("action-bar-top"):t.classList.add("action-bar-bottom"),t}},{key:"onZoomInClick",value:function(){this.viewer.viewerLayout.zoomIn(),this.update()}},{key:"onZoomOutClick",value:function(){this.viewer.viewerLayout.zoomOut(),this.update()}},{key:"downloadAsset",value:function(){this.eventLogger.trackItemDownload(this.currentView.assetViewerItem),pn.download(this.currentView.assetViewerItem.downloadUrl)}}])&&fn(t.prototype,n),e}();function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function En(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pn=(bn(vn={},Qt.THREE_JS_DEPS_KEYS.THREE,{type:Qt.FILE_TYPE_JS,src:n(5754).Z}),bn(vn,Qt.THREE_JS_DEPS_KEYS.COLLADA_LOADER,{type:Qt.FILE_TYPE_JS,src:n(2451).Z}),bn(vn,Qt.THREE_JS_DEPS_KEYS.TGA_LOADER,{type:Qt.FILE_TYPE_JS,src:n(9155).Z}),bn(vn,Qt.THREE_JS_DEPS_KEYS.ORBIT_CONTROLS,{type:Qt.FILE_TYPE_JS,src:n(2425).Z}),vn),_n=n(539).Z,Tn=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventBus=t,this.pdfJsService=n,this.eventLogger=i,this.assetViewerItems=null,this.assetViewer=null,this.initialAsset=1,dn.addFullscreenChangeListener((function(){dn.isFullscreen()?document.body.classList.add("fullscreen"):document.body.classList.remove("fullscreen")}))}var t,i;return t=e,(i=[{key:"createAssetViewer",value:function(e,t,i,r,o,s){var a,c,l=this,u=(bn(a={},Qt.ASSET_TYPE.PHOTO,[Qt.PRESENTATION_RENDERERS.IMAGE]),bn(a,Qt.ASSET_TYPE.AUDIO,[Qt.PRESENTATION_RENDERERS.AUDIO]),bn(a,Qt.ASSET_TYPE.VIDEO,[Qt.PRESENTATION_RENDERERS.VIDEO]),bn(a,Qt.ASSET_TYPE.PERSONAL_VIDEO_RECORDING,[Qt.PRESENTATION_RENDERERS.VIDEO]),bn(a,Qt.ASSET_TYPE.WEBAPP,[Qt.PRESENTATION_RENDERERS.IFRAME]),bn(a,Qt.ASSET_TYPE.SCORM,[Qt.PRESENTATION_RENDERERS.IFRAME]),bn(a,Qt.ASSET_TYPE.DOCUMENT,[Qt.PRESENTATION_RENDERERS.ASSET_VIEWER]),bn(a,Qt.ASSET_TYPE["3D-MODEL"],[Qt.PRESENTATION_RENDERERS.THREEJS]),bn(a,Qt.ASSET_TYPE.RAW,[Qt.PRESENTATION_RENDERERS.ERROR]),bn(a,Qt.ASSET_TYPE.MEETING_VIDEO,[Qt.PRESENTATION_RENDERERS.VIDEO]),bn(a,Qt.ASSET_TYPE.URL,o.viewInShowpadScvEnabled?[Qt.PRESENTATION_RENDERERS.IFRAME,Qt.PRESENTATION_RENDERERS.URL]:[Qt.PRESENTATION_RENDERERS.URL]),bn(a,Qt.ASSET_TYPE.PAGE,[Qt.PRESENTATION_RENDERERS.IFRAME]),a);if(this.initialAsset=r,window.name="showpad_webview",this.assetViewerItems=i,0===i.length){var d="No content is present, it may have been unshared or deleted";throw this.eventBus.dispatch("error:message",d,"number of filtered (sharable or deleted) items is 0",items),new Error(d)}var h=[];o.viewInShowpadScvEnabled?(h=[Qt.PRESENTATION_RENDERERS.IFRAME,Qt.PRESENTATION_RENDERERS.URL],e.classList.add("dynamic-renderer")):h=1===i.length?[Qt.PRESENTATION_RENDERERS.IFRAME,Qt.PRESENTATION_RENDERERS.URL]:[Qt.PRESENTATION_RENDERERS.URL];var p=(bn(c={},Qt.ASSET_TYPE.PHOTO,[Qt.PRESENTATION_RENDERERS.IMAGE]),bn(c,Qt.ASSET_TYPE.AUDIO,[Qt.PRESENTATION_RENDERERS.AUDIO]),bn(c,Qt.ASSET_TYPE.VIDEO,[Qt.PRESENTATION_RENDERERS.VIDEO]),bn(c,Qt.ASSET_TYPE.PERSONAL_VIDEO_RECORDING,[Qt.PRESENTATION_RENDERERS.VIDEO]),bn(c,Qt.ASSET_TYPE.WEBAPP,1===i.length?[Qt.PRESENTATION_RENDERERS.IFRAME]:[Qt.PRESENTATION_RENDERERS.NEW_WINDOW]),bn(c,Qt.ASSET_TYPE.SCORM,[Qt.PRESENTATION_RENDERERS.NEW_WINDOW]),bn(c,Qt.ASSET_TYPE.DOCUMENT,[Qt.PRESENTATION_RENDERERS.SVG,Qt.PRESENTATION_RENDERERS.PDFJS]),bn(c,Qt.ASSET_TYPE["3D-MODEL"],[Qt.PRESENTATION_RENDERERS.THREEJS]),bn(c,Qt.ASSET_TYPE.RAW,[Qt.PRESENTATION_RENDERERS.ERROR]),bn(c,Qt.ASSET_TYPE.MEETING_VIDEO,[Qt.PRESENTATION_RENDERERS.VIDEO]),bn(c,Qt.ASSET_TYPE.URL,h),bn(c,Qt.ASSET_TYPE.PAGE,[Qt.PRESENTATION_RENDERERS.OBSERVABLE_DIMENSIONS_IFRAME]),c),f=Object.keys(Qt.TranslationKeys).map((function(e){return Qt.TranslationKeys[e]})).filter((function(e){return-1===[Qt.TranslationKeys.OfficeOnlineBarExcelMessage,Qt.TranslationKeys.OfficeOnlineBarPowerpointMessage,Qt.TranslationKeys.OfficeOnlineBarWordMessage,Qt.TranslationKeys.OpenInExcel,Qt.TranslationKeys.OpenInPowerpoint,Qt.TranslationKeys.OpenInWord].indexOf(e)})).reduce((function(e,t){var n=window.__SP__translations["asset-viewer"][t];return n||console.error('Asset viewer: Translation key: "asset-viewer.'.concat(t,'" not found.')),e[t]=n,e}),{}),v=!(1===i.length&&(i[0].type===Qt.ASSET_TYPE.WEBAPP||i[0].type===Qt.ASSET_TYPE.PAGE)),m={container:e,thumbnailContainer:t,thumbnailViewer:!!t&!s,TRANSLATIONS:f,VIEWER_LAYOUT:Qt.LAYOUT.VERTICAL,PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP:p,THREE_JS_DEPS:Pn,THREEJS_USE_PREVIEW_DIMENSIONS:!0,THREEJS_VIEW_FULLSCREEN:!0,PDFJS_PINCH_ZOOM_ENABLED:!0,VIDEO_POSTER_IMAGE_ENABLED:!0,HLS_JS_PATH:_n,SHOWPAD_JS_PATH:n(8597).Z,TRACK_HTML_PAGE_LOCATION_ENABLED:o.trackHtmlPageLocationEnabled,getText:function(e){return Ze.getText(e)},getPdfJs:function(){return l.pdfJsService.loadPdfJsResources()},getPdfJsWorker:function(){return l.pdfJsService.getWorker()},canZoom:v,MAX_CONTENT_WIDTH:1200,MAX_CONTENT_WIDTH_PAGES:1600},g=yn(yn({},m),{},{thumbnailViewer:!0,VIEW_BORDER:0,PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP:yn(yn({},u),{},bn({},Qt.ASSET_TYPE.DOCUMENT,[Qt.PRESENTATION_RENDERERS.SVG,Qt.PRESENTATION_RENDERERS.PDFJS]))}),w=yn(yn({},m),{},{VIEW_BORDER:0,VIEWER_LAYOUT:Qt.LAYOUT.HORIZONTAL,PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP:u,DOCUMENT_ASSET_VIEWER_CONFIG:g}),y=s?w:m;o.viewInShowpadScvEnabled||1!==i.length||y.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP[i[0].type][0]!==Qt.PRESENTATION_RENDERERS.IFRAME&&y.PRESENTATION_RENDERERS_FOR_ASSET_TYPE_MAP[i[0].type][0]!==Qt.PRESENTATION_RENDERERS.OBSERVABLE_DIMENSIONS_IFRAME||e.classList.add("single-iframe-presentation-renderer"),this.assetViewer=new Qt.AssetViewer(i,y),s||(this.actionBar=new gn({container:e.parentNode,assetViewer:this.assetViewer,eventLogger:this.eventLogger}))}},{key:"init",value:function(){if(this.assetViewer){var e=this.initialAsset;this.assetViewer.init(e),this.assetViewer.initThumbnailViewer()}}},{key:"destroy",value:function(){this.assetViewer&&this.assetViewer.destroy()}},{key:"resize",value:function(){this.assetViewer&&this.assetViewer.resize()}}])&&En(t.prototype,i),e}();function Sn(){return'<div class="collection-sidebar-header">\n    <div class="collection-sidebar-toggle button-light">\n        <i class="spsc-icon-icons-unused-system-actions-sidebar-outlined"></i>\n    </div>\n    View All Files\n</div>\n<div class="button-close-web-wrapper">\n    <button type="button" class="button button-close__web collection-sidebar-close button-light" title="Toggle Sidebar"\n        aria-label="Toggle Sidebar">\n        <i class="spsc-icon-icons-unused-system-actions-sidebar-outlined"></i>\n        <div class="button_focus-overlay"></div>\n    </button>\n\n</div>\n<div class="collection-sidebar">\n    <div class="collection-sidebar-subheader">\n        <button type="button" class="button collection-sidebar-close-mobile button-light" title="Toggle Sidebar"\n            aria-label="Toggle Sidebar">\n            <i class="spsc-icon-icons-unused-system-actions-sidebar-outlined"></i>\n        </button>\n        <span class="collection-sidebar-count"></span>\n        <button type="button" class="button-transparent collection-sidebar-download-all-button" title="Download all"\n            aria-label="Download all">\n            <i class="spsc-icon-download"></i>\n            <div class="button_focus-overlay"></div>\n        </button>\n        <div class="collection-sidebar-dropdown">\n            <div class="dropdown-item" id="download-as-one-button">As a single PDF</div>\n            <div class="dropdown-item" id="download-separate-button">As separate items</div>\n        </div>\n\n    </div>\n    <div class="collection-sidebar-thumbs"></div>\n</div>\n'}function Vn(e){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(e)}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function An(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function On(e,t){return On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},On(e,t)}function In(e,t){if(t&&("object"===Vn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ln(e)}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}var xn="collection-sidebar-closed",Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(s,e);var t,n,i,r,o=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cn(i);if(r){var n=Cn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return In(this,e)});function s(e,t,n,i,r,a){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(c=o.call(this,e,t)).data={itemCount:n,isClosed:!1},c.listenToWindowClick=c.listenToWindowClick.bind(Ln(c)),c.domManager=i,c.eventBus=r,c.element.innerHTML=function(e){return Sn.call(e,e)}(),c.allowDownloadAll=a.allowDownloadAll,c.downloadAsPdfEnabled=a.downloadAsPdfEnabled,c.toastService=new Tt(c.domManager.get("toast-container")),c.downloadeableItems=a.content.items.filter((function(e){return!!e.asset&&(e.isDownloadable||"url"===e.asset.type)})),c.notDownloadableFilesCount=a.content.items.filter((function(e){return!!e.asset&&!e.isDownloadable&&"url"!==e.asset.type})).length,c.actionsDisabled=!1,c.fetchDomElements(),c.setI18NLabels(),c.addEventListeners(),c}return t=s,n=[{key:"fetchDomElements",value:function(){this.domManager.set("collection-sidebar",this.element.querySelector(".collection-sidebar")),this.domManager.set("collection-sidebar-thumbs",this.element.querySelector(".collection-sidebar-thumbs")),this.domManager.set("shared-collection-sidebar-count",this.element.querySelector(".collection-sidebar-count")),this.domManager.set("collection-sidebar-toggle",this.element.querySelector(".collection-sidebar-header")),this.domManager.set("collection-sidebar-close",this.element.querySelector(".collection-sidebar-close")),this.domManager.set("collection-sidebar-close-mobile",this.element.querySelector(".collection-sidebar-close-mobile")),this.domManager.set("collection-sidebar-subheader",this.element.querySelector(".collection-sidebar-subheader")),this.domManager.set("collection-sidebar-download-all-button",this.element.querySelector(".collection-sidebar-download-all-button")),this.domManager.set("collection-sidebar-dropdown",this.element.querySelector(".collection-sidebar-dropdown")),this.domManager.set("collection-download-as-one-button",this.element.querySelector("#download-as-one-button")),this.domManager.set("collection-download-separate-button",this.element.querySelector("#download-separate-button"))}},{key:"setI18NLabels",value:function(){var e=window.__SP__translations.download,t=e.all,n=e["as-1-pdf"],i=e["as-separate"];this.domManager.get("collection-download-as-one-button").textContent=n,this.domManager.get("collection-download-separate-button").textContent=i,this.domManager.get("collection-sidebar-download-all-button").title=t}},{key:"addEventListeners",value:function(){var e=this;w.on(this.domManager.get("collection-sidebar-close"),"click",(function(){return e.toggleSidebar()})),w.on(this.domManager.get("collection-sidebar-close-mobile"),"click",(function(){return e.toggleSidebar()})),w.on(this.domManager.get("collection-sidebar-toggle"),"click",(function(){return e.toggleSidebar()})),this.allowDownloadAll&&(this.downloadAsPdfEnabled&&this.downloadeableItems.length>1?(w.on(this.domManager.get("collection-sidebar-download-all-button"),"click",(function(){return e.toggleDropdown()})),w.on(this.domManager.get("collection-download-as-one-button"),"click",(function(){e.toggleDropdown(),e.downloadAsPdf()})),w.on(this.domManager.get("collection-download-separate-button"),"click",(function(){e.toggleDropdown(),e.downloadAll()}))):w.on(this.domManager.get("collection-sidebar-download-all-button"),"click",(function(){return e.downloadAll()})))}},{key:"getAssetThumbsContainer",value:function(){return this.domManager.get("collection-sidebar-thumbs")}},{key:"render",value:function(){var e=window.__SP__translations,t=e["file-plural"],n=e["file-single"],i=this.data.itemCount>1?t:n;w.setElementText(this.domManager.get("shared-collection-sidebar-count"),"".concat(this.data.itemCount," ").concat(i," ")),this.allowDownloadAll&&0!==this.downloadeableItems.length||w.hideElement(this.domManager.get("collection-sidebar-download-all-button"))}},{key:"isClosed",value:function(){return this.data.isClosed}},{key:"open",value:function(){w.removeClass(xn,this.parent),w.removeClass("closed",this.domManager.get("collection-sidebar-subheader")),this.data.isClosed=!1,this.eventBus.dispatch("sidebar:toggle",this.data.isClosed)}},{key:"close",value:function(){w.addClass(xn,this.parent),w.addClass("closed",this.domManager.get("collection-sidebar-subheader")),this.data.isClosed=!0,this.eventBus.dispatch("sidebar:toggle",this.data.isClosed)}},{key:"toggleSidebar",value:function(){this.actionsDisabled||(this.isClosed()?this.open():this.close())}},{key:"toggleDropdown",value:function(){var e=this;w.toggleClass("open",this.domManager.get("collection-sidebar-dropdown")),this.domManager.get("collection-sidebar-dropdown").classList.contains("open")?setTimeout((function(){return window.addEventListener("click",e.listenToWindowClick)}),1):window.removeEventListener("click",this.listenToWindowClick)}},{key:"listenToWindowClick",value:function(){this.toggleDropdown()}},{key:"downloadAsPdf",value:function(){this.eventBus.dispatch("downloadBar:toggle",!0)}},{key:"downloadAll",value:function(){if(this.eventBus.dispatch("track:downloadAll"),1===this.downloadeableItems.length)this.eventBus.dispatch("download-only-item");else{var e=window.location.pathname,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(z.parseShareHash(e),2),n=(t[0],t[1],z.getUrlWithParams("zip-download"));pn.download(n)}this.showDownloadStartedToast()}},{key:"showDownloadStartedToast",value:function(){if(this.notDownloadableFilesCount>0){var e=window.__SP__translations,t=e["download-toast-non-downloadable-file"],n=e["download-toast-non-downloadable-files_plural"],i=1===this.notDownloadableFilesCount?t:n;this.toastService.showToast(i.replace("{{count}}",this.notDownloadableFilesCount),"info",8e3,685)}else{var r=window.__SP__translations["download-as-one-started-toast"];this.toastService.showToast(r)}}},{key:"disableButtons",value:function(){this.close(),this.actionsDisabled=!0}},{key:"enableButtons",value:function(){this.actionsDisabled=!1}}],n&&An(t.prototype,n),s}(Ft);function Nn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventBus=t,this.downloadBar=document.querySelector(".download-bar"),this.closeButton=this.downloadBar.querySelector(".close-button"),this.closeButton.classList.remove("hide"),this.closeButton.onclick=function(){return n.eventBus.dispatch("downloadBar:toggle",!1)}}var t,n;return t=e,(n=[{key:"setMessage",value:function(e){this.downloadBar.querySelector(".download-bar-message").textContent=e}},{key:"toggle",value:function(){this.downloadBar.classList.toggle("open")}},{key:"isOpen",value:function(){return this.downloadBar.classList.contains("open")}}])&&Nn(t.prototype,n),e}();function Mn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Fn="hide",Bn="sidebar-hidden",jn="sidebar-collapsed",Hn="sidebar-open",Wn="scv-thumbnails-visible",Un=function(){function e(t,n,i,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayAssetViewer=null,this.unregisterAssetViewer=null,this.isOpen=!1,this.domManager=t,this.eventLogger=n,this.eventBus=i,this.assetViewerLogger=r,this.overlayContainer=document.querySelector(".".concat("asset-viewer-overlay__container")),this.overlayPresentationContainer=document.querySelector(".".concat("asset-viewer-overlay__main")),this.container=document.querySelector(".".concat("asset-viewer-overlay__asset-viewer-container")),this.thumbnailContainer=document.querySelector(".".concat("asset-viewer-overlay__asset-viewer-thumbnail-container")),this.sidebar=document.querySelector(".".concat("asset-viewer-overlay__sidebar")),this.closeButton=document.querySelector(".".concat("asset-viewer-overlay__toolbar__close-button")),this.displayName=document.querySelector(".".concat("asset-viewer-overlay__toolbar__display-name")),this.sidebarToggleButton=document.querySelector(".".concat("asset-viewer-overlay__sidebar-toggle-button")),this.sidebarToggleButtonMobile=document.querySelector(".".concat("asset-viewer-overlay__sidebar-toggle-button-mobile")),this.sidebarHeaderToggleButton=document.querySelector(".".concat("asset-viewer-overlay__header-toggle")),this.downloadButton=document.querySelector(".".concat("asset-viewer-overlay__download-button")),this.showThumbnailsPreference=!0,Z.get(Wn).then((function(e){o.showThumbnailsPreference="true"===e})).catch((function(){})),this.reset(),this.close=this.close.bind(this),this.toggleThumbnails=this.toggleThumbnails.bind(this),this.download=this.download.bind(this),this.addEventListeners()}var t,n;return t=e,(n=[{key:"open",value:function(){this.isOpen=!0,w.removeClass(Fn,this.overlayContainer)}},{key:"close",value:function(){this.isOpen=!1,w.addClass(Fn,this.overlayContainer),w.removeClass(Bn,this.overlayContainer),w.removeClass(jn,this.overlayContainer),w.removeClass(Hn,this.overlayContainer),w.removeClass(Hn,this.overlayPresentationContainer),w.removeClass(Hn,this.sidebar),this.reset()}},{key:"reset",value:function(){this.resetDisplayName(),this.resetDownloadEnabled(),this.destroyAssetViewer(),this.container.innerHTML="",this.thumbnailContainer.innerHTML=""}},{key:"registerAssetViewer",value:function(e){this.overlayAssetViewer=e,this.unregisterAssetViewer=this.assetViewerLogger.registerChildAssetViewer(e.assetViewer),this.overlayAssetViewer.init();var t=this.overlayAssetViewer.assetViewer.viewer.currentView.presentationRenderer.assetViewer;t&&t.thumbnailViewer&&(t.initThumbnailViewer(),t.setActive()),window.overlayAssetViewer=e}},{key:"destroyAssetViewer",value:function(){this.unregisterAssetViewer&&(this.unregisterAssetViewer(),this.unregisterAssetViewer=null),this.overlayAssetViewer&&(this.overlayAssetViewer.destroy(),this.overlayAssetViewer=null),window.overlayAssetViewer=null}},{key:"addEventListeners",value:function(){w.on(this.closeButton,"click",this.close),w.on(this.sidebarToggleButton,"click",this.toggleThumbnails),w.on(this.sidebarToggleButtonMobile,"click",this.toggleThumbnails),w.on(this.sidebarHeaderToggleButton,"click",this.toggleThumbnails),w.on(this.downloadButton,"click",this.download)}},{key:"setDisplayName",value:function(e){this.displayName.innerText=e}},{key:"resetDisplayName",value:function(){this.displayName.innerText=""}},{key:"setDownloadEnabled",value:function(){this.downloadButton.removeAttribute("disabled")}},{key:"resetDownloadEnabled",value:function(){this.downloadButton.setAttribute("disabled","disabled")}},{key:"showSidebar",value:function(){var e=this;w.removeClass(Bn,this.overlayContainer),this.showThumbnailsPreference?w.addClass(Hn,this.overlayContainer):w.addClass(jn,this.overlayContainer),setTimeout((function(){e.overlayAssetViewer.resize()}),350)}},{key:"hideSidebar",value:function(){w.addClass(Bn,this.overlayContainer)}},{key:"toggleThumbnails",value:function(){var e=this;this.showThumbnailsPreference?(this.showThumbnailsPreference=!1,Z.set(Wn,"false").catch((function(){})),w.addClass(jn,this.overlayContainer),w.removeClass(Hn,this.overlayContainer),w.removeClass(Hn,this.sidebar),w.removeClass(Hn,this.overlayPresentationContainer)):(this.showThumbnailsPreference=!0,Z.set(Wn,"true").catch((function(){})),w.removeClass(jn,this.overlayContainer),w.addClass(Hn,this.overlayContainer),w.addClass(Hn,this.sidebar),w.addClass(Hn,this.overlayPresentationContainer)),setTimeout((function(){e.overlayAssetViewer.resize()}),350)}},{key:"download",value:function(){this.overlayAssetViewer&&this.overlayAssetViewer.assetViewer.viewer.viewerLayout.currentView.download()}}])&&Mn(t.prototype,n),e}();function zn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.p="/share/static/";var Gn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pdfJsResourcesPromise=null}var t,i;return t=e,(i=[{key:"loadPdfJsResources",value:function(){if(this.pdfJsResourcesPromise)return this.pdfJsResourcesPromise;var e=n(5269).Z,t=n(5105).Z,i=n(5202).Z,r=[e,t];if(!window.Uint8ClampedArray||!window.Uint8ClampedArray.prototype.set){var o=n(4178).Z;r.unshift(o)}return this.pdfJsResourcesPromise=Qt.DomHelper.loadScriptsInOrder(r).then((function(){return window.PDFJS.disableAutoFetch=!0,window.PDFJS.disableStream=!0,window.PDFJS.disableRange=!1,window.PDFJS.workerSrc=i,window.PDFJS.cMapUrl="/share/static/cmaps/",window.PDFJS.cMapPacked=!0,window.PDFJS})),this.pdfJsResourcesPromise}},{key:"getWorker",value:function(){return new window.PDFJS.PDFWorker}}])&&zn(t.prototype,i),e}(),Yn=n(387);function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Zn=function(){return void 0!==document.hidden||void 0!==document.mozHidden||void 0!==document.msHidden||void 0!==document.webkitHidden},Xn=function(){var e=null,t=null;return void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),[e,t]},Qn=function(){var e,t,n=(t=(e=Jn(Xn(),2))[0],e[1],t);return document[n]};function Kn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers=[],this.isAppFocussed="function"!=typeof document.hasFocus||document.hasFocus(),this.focusCheckInterval=null,this.onWindowBlur=this.onWindowBlur.bind(this),this.onWindowFocus=this.onWindowFocus.bind(this)}var t,n;return t=e,(n=[{key:"addEventListeners",value:function(){var e=this;"function"==typeof document.hasFocus&&(this.focusCheckInterval=setInterval((function(){var t=document.hasFocus();e.isAppFocussed!==t&&(e.isAppFocussed=t,e.emit())}),2e3)),window.addEventListener("blur",this.onWindowBlur),window.addEventListener("focus",this.onWindowFocus)}},{key:"removeEventListeners",value:function(){clearInterval(this.focusCheckInterval),window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("focus",this.onWindowFocus)}},{key:"onWindowBlur",value:function(){var e="function"==typeof document.hasFocus&&document.hasFocus();this.isAppFocussed!==e&&(this.isAppFocussed=e,this.emit())}},{key:"onWindowFocus",value:function(){var e="function"!=typeof document.hasFocus||document.hasFocus();this.isAppFocussed!==e&&(this.isAppFocussed=e,this.emit())}},{key:"emit",value:function(){var e=this;this.handlers.forEach((function(t){t(e.isAppFocussed)}))}},{key:"subscribe",value:function(e){var t=this;return 0===this.handlers.length&&this.addEventListeners(),this.handlers.push(e),e(this.isAppFocussed),{unsubscribe:function(){return t.unsubscribe(e)}}}},{key:"unsubscribe",value:function(e){this.handlers=this.handlers.filter((function(t){if(t!==e)return t})),0===this.handlers.length&&this.removeEventListeners()}}])&&Kn(t.prototype,n),e}();function ei(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ti,ni=[Qt.ASSET_TYPE.AUDIO,Qt.ASSET_TYPE.VIDEO],ii=[Qt.ASSET_TYPE.AUDIO,Qt.ASSET_TYPE.VIDEO,Qt.ASSET_TYPE.URL,Qt.ASSET_TYPE["3D-MODEL"],Qt.ASSET_TYPE.MEETING_VIDEO],ri=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventLogger=t,this.assetViewer=n,this.childAssetViewer=null,this.isLogging=!1,this.canRefocus=!0,this.lastFocusedParentAssetViewerItem=null,this.lastLoggedEvent={},this.lastLoggedEventMap={},this.parentEventPromiseMap={},this.appFocusHelper=new $n}var t,n;return t=e,n=[{key:"startLogging",value:function(){var e=this;this.isLogging=!0,this.appFocusHelper.subscribe((function(t){t?e.resume():e.pause()})),w.on(window,"message",(function(t){if(t.data&&"showpad-track-event"===t.data.type&&t.data.data&&t.data.data.event){var n=Array.isArray(t.data.data.event)?t.data.data.event:[t.data.data.event],i=(e.childAssetViewer||e.assetViewer).viewer.currentView;if(!i||i&&!i.assetViewerItem)throw new Error("showpad-track-event received without parent assetViewerItem");var r=i.assetViewerItem.id,o="number"==typeof i.assetViewerItem.position?i.assetViewerItem.position:i.assetViewerItem.parentPosition,s=e.parentEventPromiseMap[r];s&&s.then((function(t){e.eventLogger.trackHtmlNavigation(n,{parentId:t.id,assetPosition:o,assetId:e.childAssetViewer?i.assetViewerItem.assetId:void 0})})).catch((function(){}))}})),this.addAssetViewerEventListeners(this.assetViewer),(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/IEMobile/i))&&this.fallbackBackgroundEventLogging(!0)}},{key:"registerChildAssetViewer",value:function(e){this.childAssetViewer=e;var t=this.addAssetViewerEventListeners(e);return function(){t(),this.childAssetViewer=null}}},{key:"addAssetViewerEventListeners",value:function(e){var t=this,n=function(n){var i=e.getAssetViewerViewComponentById(n.payload.assetViewerView.id);if("number"==typeof i.assetViewerItem.position&&(t.lastFocusedParentAssetViewerItem=i.assetViewerItem),i.assetViewerItem.type===Qt.ASSET_TYPE.URL&&i.presentationRenderer instanceof Yn.IframePresentationRenderer)t.eventLogger.createUrlAssetViewDeviceEvent(i.assetViewerItem).catch((function(){}));else{var r=i.assetViewerItem.type===Qt.ASSET_TYPE.DOCUMENT?i.page:null;t.handleViewEvents(i.assetViewerItem,r,!0)}},i=function(e){t.handleDynamicViewEvent(e.payload.assetViewerView.assetViewerItem)},r=function(e){t.resetDynamicDeviceEvent(e.payload.assetViewerView.assetViewerItem)},o=function(e){t.resetDynamicDeviceEvent(e.payload.assetViewerView.assetViewerItem)},s=function(e){t.handleDynamicViewEvent(e.payload.assetViewerItem)},a=function(e){t.resetDynamicDeviceEvent(e.payload.assetViewerItem)},c=function(e){t.handleDynamicViewEvent(e.payload.assetViewerView.assetViewerItem)},l=function(e){t.handleViewEvents(e.payload.assetViewerView.assetViewerItem)},u=function(e){t.eventLogger.createUrlAssetViewDeviceEvent(e.payload.assetViewerView.assetViewerItem).catch((function(){}))},d=function(e){t.eventLogger.trackItemDownload(e.payload.assetViewerItem)};return e.eventBus.on(Qt.ViewerEventType.PublicRenderedViewFocus,n),e.eventBus.on(Qt.ViewerEventType.PlaybackStart,i),e.eventBus.on(Qt.ViewerEventType.PlaybackPause,r),e.eventBus.on(Qt.ViewerEventType.PlaybackEnd,o),e.eventBus.on(Qt.ViewerEventType.WebappOpen,s),e.eventBus.on(Qt.ViewerEventType.WebappClose,a),e.eventBus.on(Qt.ViewerEventType.StartViewing3dModel,c),e.eventBus.on(Qt.ViewerEventType.StopViewing3dModel,l),e.eventBus.on(Qt.ViewerEventType.UrlAssetClicked,u),e.eventBus.on(Qt.ViewerEventType.DownloadAsset,d),function(){e.eventBus.off(Qt.ViewerEventType.PublicRenderedViewFocus,n),e.eventBus.off(Qt.ViewerEventType.PlaybackStart,i),e.eventBus.off(Qt.ViewerEventType.PlaybackPause,r),e.eventBus.off(Qt.ViewerEventType.PlaybackEnd,o),e.eventBus.off(Qt.ViewerEventType.WebappOpen,s),e.eventBus.off(Qt.ViewerEventType.WebappClose,a),e.eventBus.off(Qt.ViewerEventType.StartViewing3dModel,c),e.eventBus.off(Qt.ViewerEventType.StopViewing3dModel,l),e.eventBus.off(Qt.ViewerEventType.UrlAssetClicked,u),e.eventBus.off(Qt.ViewerEventType.DownloadAsset,d)}}},{key:"fallbackBackgroundEventLogging",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&!0===Zn()&&this.pageVisibilityEventLogging()}},{key:"pageVisibilityEventLogging",value:function(){var e,t,n,i=this;e=function(){!0===Qn()?i.pause():!1===Qn()&&i.resume()},(t=Jn(Xn(),2))[0],n=t[1],w.on(document,n,e)}},{key:"handleViewEvents",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==t&&i&&(t-=1),this.lastLoggedEvent&&this.lastLoggedEvent.data&&this.lastLoggedEvent.deviceEvent&&e.id===this.lastLoggedEvent.data.assetViewerItem.id&&this.lastLoggedEvent.data.page!==t)return this.lastLoggedEvent.data={assetViewerItem:e,page:t},void this.updateDeviceEvent(this.lastLoggedEvent);this.resetLoggedDeviceEvent(this.lastLoggedEvent),this.isDeviceEventHandledBySeparateEvent(e)||(this.lastLoggedEvent.data={assetViewerItem:e,page:t},this.lastLoggedEvent.createTimeout=setTimeout((function(){n.startDeviceEvent(n.lastLoggedEvent,e,t,!0)}),Fe))}},{key:"handleDynamicViewEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!1;-1===ni.indexOf(e.type)?(this.lastLoggedEvent.data={assetViewerItem:e,page:t},this.startDeviceEvent(this.lastLoggedEvent,e,t,n)):(this.lastLoggedEventMap[e.id]={},this.lastLoggedEventMap[e.id].data={assetViewerItem:e,page:t},this.startDeviceEvent(this.lastLoggedEventMap[e.id],e,t,n))}},{key:"resetDynamicDeviceEvent",value:function(e){-1===ni.indexOf(e.type)?this.resetLoggedDeviceEvent(this.lastLoggedEvent):this.resetLoggedDeviceEvent(this.lastLoggedEventMap[e.id])}},{key:"startDeviceEvent",value:function(e,t,n){var i=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.parentPosition,s=this.eventLogger.startViewingAsset(t,n,o,r).then((function(t){return e.deviceEvent=t,t}));this.parentEventPromiseMap[t.id]=s,s.catch((function(){})),e.updateInterval=setInterval((function(){e.deviceEvent&&e.data&&i.eventLogger.stillViewingAsset(e.deviceEvent,e.data.assetViewerItem)}),Be)}},{key:"updateDeviceEvent",value:function(e){var t=this;clearInterval(e.updateInterval),clearTimeout(e.createTimeout),e.createTimeout=setTimeout((function(){e.deviceEvent.page=e.data.page,t.eventLogger.stillViewingAsset(e.deviceEvent,e.data.assetViewerItem),e.updateInterval=setInterval((function(){e.deviceEvent&&e.data&&t.eventLogger.stillViewingAsset(e.deviceEvent,e.data.assetViewerItem)}),Be)}),Fe)}},{key:"stopLoggedDeviceEvent",value:function(e){e.createTimeout&&(clearTimeout(e.createTimeout),e.createTimeout=null),e.updateInterval&&(clearInterval(e.updateInterval),e.updateInterval=null),e.deviceEvent&&e.data&&(this.eventLogger.stopViewingAsset(e.deviceEvent,e.data.assetViewerItem),e.deviceEvent=null)}},{key:"resetLoggedDeviceEvent",value:function(e){this.stopLoggedDeviceEvent(e),e.data=null,e=null}},{key:"pause",value:function(){var e=this;!0===this.isLogging&&(this.isLogging=!1,this.stopLoggedDeviceEvent(this.lastLoggedEvent),Object.keys(this.lastLoggedEventMap).map((function(t){return e.lastLoggedEventMap[t]})).filter(Boolean).forEach((function(t){e.stopLoggedDeviceEvent(t)})))}},{key:"isDeviceEventHandledBySeparateEvent",value:function(e){return("number"==typeof e.parentPosition||1===this.assetViewer.assetViewerItems.length?ii:[].concat(ii,[Qt.ASSET_TYPE.WEBAPP])).includes(e.type)}},{key:"resume",value:function(){var e=this;!1===this.isLogging&&!0===this.canRefocus&&(this.isLogging=!0,this.lastLoggedEvent.data&&(this.isDeviceEventHandledBySeparateEvent(this.lastLoggedEvent.data.assetViewerItem.type)?this.startDeviceEvent(this.lastLoggedEvent,this.lastLoggedEvent.data.assetViewerItem,this.lastLoggedEvent.data.page):this.handleViewEvents(this.lastLoggedEvent.data.assetViewerItem,this.lastLoggedEvent.data.page)),Object.keys(this.lastLoggedEventMap).map((function(t){return e.lastLoggedEventMap[t]})).filter(Boolean).forEach((function(t){t.data&&e.startDeviceEvent(t,t.data.assetViewerItem,t.data.page)})))}}],n&&ei(t.prototype,n),e}(),oi=new Uint8Array(16);function si(){if(!ti&&!(ti="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ti(oi)}var ai=function(e,t,n){var i=(e=e||{}).random||(e.rng||si)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return L(i)};function ci(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var li=/(.+)\.[^.]+$/,ui=!1,di=function(){function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventLogger=n,this.domManager=t,this.eventBus=i,this.pdfJsService=new Gn,this.info=r,this.shareHash=o,this.showcaseItems=null,this.assetViewerItems=null,this.toastService=new Tt(this.domManager.get("toast-container")),this.sideBar=null,this.assetViewer=null,this.assetViewerOverlay=null,this.mergePdfInterval=null,this.flags={trackHtmlPageLocationEnabled:r.trackHtmlPageLocationEnabled,viewInShowpadScvEnabled:r.viewInShowpadScvEnabled}}var t,n;return t=e,n=[{key:"load",value:function(){var e=this,t=z.getUrlWithParams("showcase-info-with-svg"),n="Invalid json response, items/with-svg";return Ze.getJson(t).then((function(e){if(!0===e.success)return e.data.items;throw new Error(n)})).catch((function(t){return e.eventBus.dispatch("error:messagelog","The content could not be retrieved",n,t),Promise.reject(a+n)}))}},{key:"handle",value:function(e){var t=e.filter((function(e){return e&&e.isShareable&&e.asset}));if(this.showcaseItems=t,0===t.length){var n="showcase items endpoint /items/with-svg returned 0 undeleted, shareable items";return this.eventBus.dispatch("error:message","We could not find the content, access may be revoked",n,e),Promise.reject(a+n)}this.sideBar=this.createSidebar(t.length,this.info);var i=this.sideBar.getAssetThumbsContainer(),r=this.domManager.get("showcase-items-container"),o=this.createAssetViewerItemsFromShowcaseItems(t);if(this.assetViewerItems=o,!Ye(o)){this.assetViewer=this.createAssetViewer(r,i,o),this.assetViewerLogger=new ri(this.eventLogger,this.assetViewer.assetViewer),this.assetViewerOverlay=this.createAssetViewerOverlay();var s=window.__SP__translations["preparing-download"];this.info.allowDownloadAll&&this.info.downloadAsPdfEnabled&&(this.downloadBar=new kn(this.eventBus),this.downloadBar.setMessage(s)),this.addEventListeners(),this.assetViewerLogger.startLogging(),this.assetViewer.init(),!0===w.isInResponsiveMobileMode()&&this.assetViewer&&this.assetViewer.assetViewer&&(this.assetViewer.assetViewer.viewer.config.VIDEO_POSTER_IMAGE_ENABLED=!0),window.assetViewer=this.assetViewer}}},{key:"createSidebar",value:function(e){var t=this,n=new Dn(this.domManager.get("collection-sidebar-container"),this.domManager.get("shared-collection"),e,this.domManager,this.eventBus,this.info);return!0!==w.isInResponsiveMobileMode()&&1!==e||n.close(),n.render(),setTimeout((function(){w.addClass("animate",t.domManager.get("shared-collection-content"))}),1),n}},{key:"createAssetViewerItemsFromShowcaseItems",value:function(e){return e.filter((function(e){return e.asset&&e.isShareable})).sort((function(e,t){return e.position-t.position})).map((function(e){var t=ai(),n="number"==typeof e.page?e.page+1:null,i=e.annotations&&e.annotations.length?Qt.AnnotationsMapper.annotationsArrayToAnnotationsPageMap(e.annotations):null,r="page"===e.asset.type?e.asset.displayName.replace(li,"$1"):e.asset.displayName,o=e.asset.type!==Qt.ASSET_TYPE.VIDEO&&e.asset.type!==Qt.ASSET_TYPE.PERSONAL_VIDEO_RECORDING||!e.thumbnailUrl?e.previewUrl:e.thumbnailUrl,s=new Qt.AssetViewerItem(r,e.asset.type,e.asset.downloadUrl,o,e.asset.presentations,e.asset.isPdf?"pdf":"",t,i,n,e.position,e.isDownloadable,e.asset.embeddedData,void 0,void 0,!1===e.asset.allowRenderExternal,e.asset.description,!1);return s.assetId=e.asset.id,s.loadStylesheet=function(){var t=Qt.PresentationHelper.getStylesheet(e.asset.presentations);return t&&null===s.stylesheetPromise&&(s.stylesheetPromise=Ze.getText(t)),s.stylesheetPromise},s}))}},{key:"createAssetViewer",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.getAssetToOpen(n),o=new Tn(this.eventBus,this.pdfJsService,this.eventLogger);return o.createAssetViewer(e,t,n,r,this.flags,i),o}},{key:"createAssetViewerOverlay",value:function(){if(!(this.domManager&&this.eventLogger&&this.eventBus&&this.assetViewerLogger))throw new Error("overlayAssetViewer dependencies have not been initialised");return new Un(this.domManager,this.eventLogger,this.eventBus,this.assetViewerLogger)}},{key:"openOverlayAssetViewer",value:function(e,t){var n=this;this.assetViewerOverlay.open(),this.fetchPageAsset(e,t).then((function(e){return e.data})).then((function(t){var i=n.createAssetViewerItemsFromShowcaseItems([t])[0],r=n.showcaseItems.find((function(t){return t.pageInfo&&t.pageInfo.id===e}));i.parentPosition=r.position,n.assetViewerOverlay.setDisplayName(i.displayName),i.isDownloadable&&n.assetViewerOverlay.setDownloadEnabled(),i.type===Qt.ASSET_TYPE.DOCUMENT?n.assetViewerOverlay.showSidebar():n.assetViewerOverlay.hideSidebar();var o=n.createAssetViewer(n.assetViewerOverlay.container,n.assetViewerOverlay.thumbnailContainer,[i],!0);n.assetViewerOverlay.registerAssetViewer(o)})).data}},{key:"addEventListeners",value:function(){var e=this;if(this.assetViewer&&this.assetViewer.assetViewer&&(this.eventBus.on("sidebar:toggle",(function(t){!1===w.isInResponsiveMobileMode()?setTimeout((function(){return e.assetViewer.resize()}),300):t?(e.assetViewerLogger.canRefocus=!0,e.assetViewerLogger.resume(),e.assetViewer.assetViewer.viewer.setActive()):(e.assetViewerLogger.canRefocus=!1,e.assetViewerLogger.pause(),e.assetViewer.assetViewer.viewer.setPassive())})),!0===w.isInResponsiveMobileMode())){var t=!1;this.assetViewer.assetViewer.eventBus.on(Qt.ViewerEventType.SetView,(function(){e.sideBar.close(),t=!0,setTimeout((function(){return t=!1}),30)})),this.assetViewer.assetViewer.eventBus.on(Qt.ViewerEventType.ViewportChange,(function(n){var i=n.payload.viewState;!1===t&&e.eventBus.dispatch("viewport:change",i.top,i.scroll)}))}this.eventBus.on("download-only-item",(function(){var t=e.assetViewer.assetViewerItems.find((function(e){return e.isDownloadable}));pn.download(t.downloadUrl)})),this.info.allowDownloadAll&&this.info.downloadAsPdfEnabled&&this.eventBus.on("downloadBar:toggle",(function(t){t?e.isMergingPdf()?e.alreadyMergingPdf():e.startPdfMerge():e.stopPdfMerge()})),this.eventBus.on("downloading-enabled",(function(t){t?e.sideBar.enableButtons():e.sideBar.disableButtons()})),w.on(window,"message",(function(t){t.data&&"PAGE_RENDERER_READY"===t.data.action&&t.data.payload&&t.data.payload.pageId&&e.onPageRendererReady(t.data.payload.pageId,t.source),t.data&&"showpad-asset-link"===t.data.type&&e.handleAssetLinkMessage(t)}))}},{key:"fetchPageAsset",value:function(e,t){var n=z.getUrlWithParams("showcase-page-item",{pageId:e,assetId:t});return Ze.getJson(n)}},{key:"onPageRendererReady",value:function(e,t){var n=this.showcaseItems.find((function(t){return t.pageInfo&&t.pageInfo.id===e}));n&&t&&t.postMessage({action:"PAGE_RENDER_DATA",origin:"shared-content-viewer",payload:n.pageInfo},"*"),t.pageId=e}},{key:"handleAssetLinkMessage",value:function(e){var t=function(e){var t,n={},i=new RegExp("\\b(profile|folder|file)/([a-z0-9-]+)","i");if(0!==e.indexOf("showpad://"))throw new Error(e+" is not a valid asset link");var r=(e.split("?")[1]||"").toLowerCase();for(e=e.split("?")[0];null!==(t=i.exec(e));)3===t.length&&(n[t[1].toLowerCase()]=t[2]),e=e.replace(t[0],"");var o=r.split("&").reduce((function(e,t){return e[t.split("=")[0]]=t.split("=")[1],e}),{});return void 0!==o.page&&(n.page=parseInt(o.page,10)),void 0!==o.nodeid&&(n.nodeId=o.nodeid),"1"!==o.modal&&"true"!==o.modal||(n.modal=!0),n}(e.data.data.link).file;if(t){var n=e.source.pageId,i=this.showcaseItems.find((function(e){return e.pageInfo&&e.pageInfo.id===n}));if(!i)throw new Error("no pageJson found in showcaseItems");var r=function(e,t){if(e&&e.resources&&e.resources.assets){var n=e.resources.assets,i=Object.keys(n).find((function(e){return n[e].appLink&&n[e].appLink.includes(t)}));return i?e.resources.assets[i]:null}return null}(i.pageInfo,t);if(!r)throw new Error("no asset for slug found in pageJson");this.openOverlayAssetViewer(n,r.id)}}},{key:"fetchPdfMergeInfo",value:function(){var e=z.getUrlWithParams("pdf-merge-info");return Ze.fetch(e)}},{key:"downloadMergedPdf",value:function(){var e=z.getUrlWithParams("pdf-merge-download");pn.download(e),this.eventBus.dispatch("track:downloadAll")}},{key:"isMergingPdf",value:function(){return!!this.mergePdfInterval}},{key:"checkPdfMerge",value:function(){var e=this;this.fetchPdfMergeInfo(this.shareHash).then((function(t){200===t.status?e.pdfMergeReady():t.status>=400&&e.pdfMergeInfoFailed()})).catch((function(e){if(je(e)&&!ui)throw ui=!0,new Error(e)}))}},{key:"startPdfMerge",value:function(){var e=this;this.mergePdfInterval||(this.toggleDownloadBar(),this.mergePdfInterval=setInterval((function(){return e.checkPdfMerge()}),5e3),this.checkPdfMerge())}},{key:"pdfMergeReady",value:function(){this.clearMergePdfInterval(),this.toggleDownloadBar(),this.downloadMergedPdf(),this.sideBar.showDownloadStartedToast()}},{key:"pdfMergeInfoFailed",value:function(){this.clearMergePdfInterval(),this.toggleDownloadBar();var e=window.__SP__translations["download-as-one-info-check-failed-toast"];this.toastService.showToast(e,"error")}},{key:"stopPdfMerge",value:function(){this.isMergingPdf()&&(this.clearMergePdfInterval(),this.toggleDownloadBar())}},{key:"clearMergePdfInterval",value:function(){clearInterval(this.mergePdfInterval),this.mergePdfInterval=null}},{key:"toggleDownloadBar",value:function(){this.downloadBar.toggle(),w.toggleClass("with-download-bar",this.domManager.get("shared-collection-content")),w.toggleClass("with-download-bar",this.domManager.get("collection-sidebar"))}},{key:"alreadyMergingPdf",value:function(){var e=window.__SP__translations.download["already-merging-pdf"];this.toastService.showToast(e,"info")}},{key:"getAssetToOpen",value:function(e){var t=e.length-1,n=Number(z.getSegment(2));return isNaN(n)&&(n=0),Math.min(n,t)}}],n&&ci(t.prototype,n),e}();function hi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pi={success:!1,status:404,data:{}};function fi(e){return[404,410].includes(e.status)||"cancelled"===e.message}var vi,mi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.info=null,this.modal=null,this.consentModal=null,this.domManager=new E,this.fetchDomElements(),this.eventBus=new ze,w.doesBrowserSupportTouch()||w.addClass("no-touch",this.domManager.get("body")),u.ie&&w.addClass("browser-ie",this.domManager.get("body")),this.consentDeferPromise=new c,this.trackShowcaseViewDeferPromise=new c}var t,n;return t=e,n=[{key:"preload",value:function(e,t,n){this.shareHash=t,this.prepareDataUrls(e,t),this.storeShareHash(e,t,n)}},{key:"load",value:function(e,t,n){var i=this,r=this;this.setIsShowcaseLoading(!0),this.preload(e,t,n);var o=z.getUrlWithParams("showcase-shallow-info");return this.eventLogger=new We(t,[]),Ze.getJson(o).then((function(e){var n=e.data.consent&&e.data.consent.required&&e.data.consent.enabled;return i.eventLogger=new We(t,e.data.trackEvents,n),e})).catch((function(e){return function(e){var t,n=window.__SP__translations["content-load-error"];return r.setShowcaseErrorMessage(n),fi(e)||r.eventLogger.notify(e,"Http Failure on endpoint /info",{errorMessage:n}),[404,410].includes(e.status)?Promise.resolve(pi):(500!==e.status&&503!==e.status&&504!==e.status||(t=e.status,window.location.href="".concat(V.baseUrl,"/errors/").concat(t,".html")),Promise.reject(a+"Http Failure on endpoint /info"))}(e)}))}},{key:"handle",value:function(e){var t=this;if(!1===e.success){var n=window.__SP__translations["content-load-error"];return this.setShowcaseErrorMessage(n),fi(e)||this.eventLogger.notify(n,"Http failure",e),Promise.reject(a+"Http Failure")}if(!1===e.data.available||null!==e.data.revokedAt){var i=e.data.creator&&e.data.creator.email?window.__SP__translations["content-expired-reach-out"].replace("{{email}}",e.data.creator.email):window.__SP__translations["content-expired"];return this.setShowcaseErrorMessage(i),Promise.reject(a+"Revoked share")}var r=Promise.resolve();return this.info=e.data,this.modal=new kt(this.domManager,this.eventLogger,this.eventBus,this.info.consent&&this.info.consent.privacyPolicyUrl),this.render(),this.addEventListeners(),e.success&&(this.keepAlive=new Qe(z.getUrlWithParams("showcase-keep-alive"),1440)),e.success&&e.data.hasOwnProperty("adn")&&(r=function(e,t){var n=new c,i=new XMLHttpRequest,r=(new Date).getTime();i.open("POST","".concat(e.host,"/cookie?ct=").concat(r,"&st=").concat(t),!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.withCredentials=!0;var o=[e.hasOwnProperty("identifier")&&"string"==typeof e.identifier&&e.identifier.length>0?"SHOWPAD_SESSION=".concat(e.identifier):null].filter((function(e){return null!==e}));return o.length>0?(i.onreadystatechange=function(){4===i.readyState&&n.resolve()},i.send(o.join("&")),n.promise):Promise.resolve()}(e.data.adn,e.data.serverTime)),this.eventBus.on("track:downloadAll",(function(){var e=t.info.content.items.filter((function(e){return e.isDownloadable}));t.eventLogger.trackItemsDownload(e)})),r}},{key:"render",value:function(){var e=this,t=window.__SP__translations["empty-message"];this.header=this.createShowCaseHeader();var n=this.info.consent&&this.info.consent.required,i=this.info.consent&&this.info.consent.type,r=this.info.consent&&this.info.consent.enabled;rt.shouldShow(n,i,r).then((function(t){if(t){e.toggleShareButton(t);var o=e.domManager.get("body"),s=e.info.consent&&e.info.consent.privacyPolicyUrl,a=function(){e.showcaseViewer&&e.showcaseViewer.sideBar&&e.showcaseViewer.sideBar.data.itemCount>1&&!w.isInResponsiveMobileMode()&&e.showcaseViewer.sideBar.open()};e.consentModal=new rt(o,e.domManager,e.eventBus,i,s,(function(){e.eventLogger.consentRequired=!1,e.eventLogger.trackShowcaseView().finally((function(){e.trackShowcaseViewDeferPromise.resolve()})).catch((function(){})),e.consentDeferPromise.resolve(),e.toggleShareButton(!1),a(),e.updatePolicyAcceptedAt().catch((function(t){je(t)&&e.eventLogger.notify(t,"updatePolicyAcceptedAt failed")}))}),(function(){a()}))}else r&&!n&&e.updatePolicyAcceptedAt().catch((function(t){je(t)&&e.eventLogger.notify(t,"updatePolicyAcceptedAt failed")})),e.consentDeferPromise.resolve(),e.eventLogger.trackShowcaseView().finally((function(){e.trackShowcaseViewDeferPromise.resolve()})).catch((function(){}))})).catch((function(){throw new Error("Promise returned by ConsentModal.shouldShow threw an error")}));var o=this.info.consent&&this.info.consent.showPrivacyPolicy||!this.info.consent&&this.info.showPrivacyPolicy,s=this.info.consent&&this.info.consent.privacyPolicyUrl||"http://www.showpad.com/privacy-policy";o&&Yt.shouldShow().then((function(t){if(t){var n='By using this site you agree to our <a href="'.concat(s,'" target="_blank">Privacy Policy</a>');e.info.privacyPolicyContent&&(n=e.info.privacyPolicyContent),e.privacyWarning=e.createPrivacyWarning(n)}})).catch((function(){throw new Error("Promise returned by PrivacyWarning.shouldShow() was rejected")})),this.renderShowCaseTheme(),this.domManager.get("error-message").innerHTML=t}},{key:"createShowCaseHeader",value:function(){var e=this,t=new qt(this.domManager,this.info,this.eventBus);return t.onClickOpenModal((function(t){return e.openModal(t)})),t.render(),t}},{key:"createPrivacyWarning",value:function(e){var t=new Yt(this.domManager.get("privacy-warning"),this.domManager.get("body"),e);return t.render(),t}},{key:"renderShowCaseTheme",value:function(){Xt.fromConfig(this.info.theme,this.info.organisation,this.domManager).render()}},{key:"createShowCaseViewer",value:function(){var e=this,t=new di(this.domManager,this.eventLogger,this.eventBus,this.info,this.shareHash);return t.load().then((function(e){return t.handle(e)})).then((function(){e.showcaseViewer=t;var n=e.showcaseViewer.assetViewerItems;if(function(e){return 1===e.length&&"url"===e[0].type&&!0===e[0].canRenderInIframe&&e[0].presentations.filter((function(e){var t=e.url?e.url:e.urls?e.urls[0]:null;return"url"===e.type&&/^(https:\/\/)/.test(t)})).length>0}(n)){var i=document.createElement("style");document.head.appendChild(i),i.type="text/css",i.appendChild(document.createTextNode("\n                        .collection-content {\n                            left: 0 !important;\n                        }\n                        .collection-sidebar-container {\n                            display: none !important;\n                        }\n                        .vrow-content-container-url {\n                            position: absolute !important;\n                            top: 0 !important;\n                            left: 0 !important;\n                            bottom: 0 !important;\n                            width: 100% !important;\n                            height: auto !important;\n                        }\n                        @media all and (max-width: 520px), screen and (max-width: 736px) and (orientation: landscape) {\n                            .collection-content {\n                                top: 64px !important;\n                            }\n                        }\n                    "))}if(Ye(n)){var r=n[0].presentations.find((function(e){return"url"===e.type})),o=r&&r.url?r.url:r&&r.urls?r.urls[0]:null;o&&Promise.all([e.consentDeferPromise.promise,e.trackShowcaseViewDeferPromise.promise,e.eventLogger.createUrlAssetViewDeviceEvent(n[0])]).then((function(){return window.location.replace(o)})).catch((function(){throw new Error("Url asset redirect failed, one of the promises rejected")}))}var s=e.info.consent&&e.info.consent.required,a=e.info.consent&&e.info.consent.type;rt.shouldShow(s,a).then((function(t){t?(e.eventBus.dispatch("downloading-enabled",!1),e.openConsentModal()):e.eventBus.dispatch("downloading-enabled",!0)})).catch((function(){throw new Error("Promise returned by ConsentModal.shouldShow in createShowCaseViewer threw an error")}))}))}},{key:"addEventListeners",value:function(){var e=this;this.onViewportChangeHeadroom(),this.eventBus.on("modal:close",(function(){return e.onCloseModal()})),this.eventBus.on("error:messagelog",(function(t,n,i){return e.setShowcaseErrorMessageAndLog(t,n,i)})),this.eventBus.on("error:message",(function(t){return e.setShowcaseErrorMessage(t)}))}},{key:"onViewportChangeHeadroom",value:function(){var e=this,t=0,n=0;this.eventBus.on("viewport:change",(function(i,r){var o=r.lastY,s=r.down,a=!1;s&&n<112&&o>0?(n+=i-t,n=Math.min(n,112),a=!0):!1===s&&n>0&&(n-=t-i,n=Math.max(n,0),a=!0),!0===a&&window.requestAnimationFrame((function(){return function(t){e.domManager.get("showcase-header").style.transform="translate3d(0, -".concat(t,"px, 0)"),e.domManager.has("collection-sidebar-toggle")&&(e.domManager.get("collection-sidebar-toggle").style.transform="translate3d(0, -".concat(t,"px, 0)"))}(n)})),t=i}))}},{key:"fetchDomElements",value:function(){this.domManager.set("title",document.querySelector("title")),this.domManager.set("body",document.querySelector("body")),this.domManager.set("overlay",document.querySelector(".overlay")),this.domManager.set("privacy-warning",document.querySelector(".privacy-warning-container")),this.domManager.set("error-message",document.querySelector(".empty-message")),this.domManager.set("showcase-header",document.querySelector(".header")),this.domManager.set("company-logo",document.querySelector(".company-logo")),this.domManager.set("showcase-header-about-button",document.querySelector(".about-button")),this.domManager.set("showcase-header-share-button",document.querySelector(".share-button")),this.domManager.set("showcase-header-share-text",document.querySelector(".share-text"));var e=document.querySelector(".shared-collection"),t=e.querySelector(".collection-content");this.domManager.set("shared-collection",e),this.domManager.set("collection-sidebar-container",e.querySelector(".collection-sidebar-container")),this.domManager.set("showcase-items-container",t.querySelector(".viewer-app-container")),this.domManager.set("shared-collection-content",t),this.domManager.set("company-description",Array.prototype.slice.call(document.querySelectorAll(".company-biography-content"))),this.domManager.set("company-name",Array.prototype.slice.call(document.querySelectorAll(".company-name-content"))),this.domManager.set("toast-container",document.querySelector(".toast-container"))}},{key:"prepareDataUrls",value:function(e,t){var n="".concat(e.split("/").slice(0,-1).join("/"),"/deviceevent");z.setUrl("showcase-shallow-info","".concat(e,"/share/").concat(t,"/info")),z.setUrl("showcase-info-with-svg","".concat(e,"/share/").concat(t,"/items/with-svg")),z.setUrl("showcase-page-item","".concat(e,"/share/").concat(t,"/page/:pageId/items/:assetId")),z.setUrl("showcase-keep-alive","".concat(e,"/share/").concat(t,"/keep-alive")),z.setUrl("showcase-share","".concat(e,"/share/").concat(t,"/share")),z.setUrl("showcase-privacy-policy","".concat(V.apiBase,"/consent.json")),z.setUrl("device-event-create","".concat(n,"/create")),z.setUrl("device-event-update","".concat(n,"/update")),z.setUrl("device-create","".concat(n,"/device/create/catalog/").concat(t)),z.setUrl("pdf-merge-info","".concat(e,"/share/").concat(t,"/merge")),z.setUrl("pdf-merge-download","".concat(e,"/share/").concat(t,"/download-pdf")),z.setUrl("zip-download","".concat(e,"/share/").concat(t,"/download"))}},{key:"setIsShowcaseLoading",value:function(e){e?w.addClass("loading",document.querySelector("body")):w.removeClass("loading",document.querySelector("body"))}},{key:"setShowcaseErrorMessage",value:function(e){this.domManager.get("error-message").innerHTML=e}},{key:"setShowcaseErrorMessageAndLog",value:function(e,t,n){this.setShowcaseErrorMessage(e),this.eventLogger.notify(n,t,{message:e})}},{key:"setShowcaseError",value:function(e){e?w.addClass("error",this.domManager.get("body")):w.removeClass("error",this.domManager.get("body"))}},{key:"pauseAssetViewerLogger",value:function(){this.showcaseViewer&&this.showcaseViewer.assetViewerLogger&&(this.showcaseViewer.assetViewerLogger.canRefocus=!1,this.showcaseViewer.assetViewerLogger.pause())}},{key:"resumeAssetViewerLogger",value:function(){this.showcaseViewer&&this.showcaseViewer.assetViewerLogger&&(this.showcaseViewer.assetViewerLogger.canRefocus=!0,this.showcaseViewer.assetViewerLogger.resume())}},{key:"setShowcaseViewerPassive",value:function(){this.showcaseViewer&&this.showcaseViewer.assetViewer&&(this.pauseAssetViewerLogger(),this.showcaseViewer.assetViewer.assetViewer.setPassive())}},{key:"setShowcaseViewerActive",value:function(){this.showcaseViewer&&this.showcaseViewer.assetViewer&&(this.resumeAssetViewerLogger(),this.showcaseViewer.assetViewer.assetViewer.setActive())}},{key:"openConsentModal",value:function(){this.pauseAssetViewerLogger(),this.consentModal.open()}},{key:"openModal",value:function(e){var t={showcaseViewer:this.info};this.setShowcaseViewerPassive(),this.modal.open(e,t)}},{key:"onCloseModal",value:function(){this.consentModal&&this.consentModal.isOpen||(this.setShowcaseViewerActive(),this.eventBus.dispatch("downloading-enabled",!0))}},{key:"storeShareHash",value:function(e,t,n){if("string"==typeof t&&"string"==typeof e){var i=this.domManager.get("body"),r=i.childNodes[0],o=document.createElement("script");o.innerHTML="window.shareHash = '".concat(t,"'; window.shareBaseUrl = '").concat(e,"'; window.showcaseBaseUrl = '").concat(n,"'"),i.insertBefore(o,r)}}},{key:"toggleShareButton",value:function(e){var t=this.domManager.get("showcase-header-share-button");e?(t.setAttribute("disabled","disabled"),w.addClass("disabled",t)):(t.removeAttribute("disabled"),w.removeClass("disabled",t))}},{key:"updatePolicyAcceptedAt",value:function(){var e=z.getUrlWithParams("showcase-privacy-policy"),t={method:"POST",credentials:"include",body:'{ "share": "'.concat(window.shareHash,'" }')};return Ze.getJson(e,t)}}],n&&hi(t.prototype,n),e}(),gi=n(2343),wi=n(6769),yi=n(2844),Ei=n(7321),bi=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Pi=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){(0,wi.c)((function(t){var n=(0,Te.Gd)();if(!n)return t;var i=n.getIntegration(e);if(i){var r=n.getClient(),o=r?r.getOptions():{},s="function"==typeof i._mergeOptions?i._mergeOptions(o):{};return"function"!=typeof i._shouldDropEvent?t:i._shouldDropEvent(t,s)?null:t}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(gi.k.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,yi.jH)(e)),!0):this._isIgnoredError(e,t)?(gi.k.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,yi.jH)(e)),!0):this._isDeniedUrl(e,t)?(gi.k.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+(0,yi.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(gi.k.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+(0,yi.jH)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return(0,Ei.zC)(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return(0,Ei.zC)(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return(0,Ei.zC)(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:(0,_e.fl)(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:(0,_e.fl)(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:(0,_e.fl)(this._options.ignoreErrors||[],e.ignoreErrors||[],bi),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,i=void 0===n?"":n,r=t.value,o=void 0===r?"":r;return[""+o,i+": "+o]}catch(t){return gi.k.error("Cannot extract message for event "+(0,yi.jH)(e)),[]}return[]},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(t){return gi.k.error("Cannot extract url for event "+(0,yi.jH)(e)),null}},e.id="InboundFilters",e}(),_i=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){vi=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return vi.apply(n,e)}},e.id="FunctionToString",e}(),Ti=n(9732),Si="6.4.1",Vi=n(7199),Ri=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}),Ai=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return i.message=t,i.name=n.prototype.constructor.name,Ri(i,n.prototype),i}return(0,_e.ZT)(t,e),t}(Error),Oi=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,Ii=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,i=t.path,r=t.pass,o=t.port,s=t.projectId;return t.protocol+"://"+t.publicKey+(e&&r?":"+r:"")+"@"+n+(o?":"+o:"")+"/"+(i?i+"/":i)+s},e.prototype._fromString=function(e){var t=Oi.exec(e);if(!t)throw new Ai("Invalid Dsn");var n=(0,_e.CR)(t.slice(1),6),i=n[0],r=n[1],o=n[2],s=void 0===o?"":o,a=n[3],c=n[4],l=void 0===c?"":c,u="",d=n[5],h=d.split("/");if(h.length>1&&(u=h.slice(0,-1).join("/"),d=h.pop()),d){var p=d.match(/^\d+/);p&&(d=p[0])}this._fromComponents({host:a,pass:s,path:u,projectId:d,port:l,protocol:i,publicKey:r})},e.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new Ai("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new Ai("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new Ai("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new Ai("Invalid Dsn: Invalid port "+this.port)},e}(),Li=n(7597),Ci=n(6893),xi=n(1170),Di=n(2470),Ni=[];function ki(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}var Mi,Fi=function(){function e(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new Ii(t.dsn))}return e.prototype.captureException=function(e,t,n){var i=this,r=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return i._captureEvent(e,t,n)})).then((function(e){r=e}))),r},e.prototype.captureMessage=function(e,t,n,i){var r=this,o=n&&n.event_id,s=(0,Li.pt)(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(s.then((function(e){return r._captureEvent(e,n,i)})).then((function(e){o=e}))),o},e.prototype.captureEvent=function(e,t,n){var i=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){i=e}))),i},e.prototype.captureSession=function(e){"string"!=typeof e.release?gi.k.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1}))},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then((function(n){return t._getBackend().getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){var e,t;this._isEnabled()&&(this._integrations=(e=this._options,t={},function(e){var t=e.defaultIntegrations&&(0,_e.fl)(e.defaultIntegrations)||[],n=e.integrations,i=(0,_e.fl)(ki(t));Array.isArray(n)?i=(0,_e.fl)(i.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),ki(n)):"function"==typeof n&&(i=n(i),i=Array.isArray(i)?i:[i]);var r=i.map((function(e){return e.name})),o="Debug";return-1!==r.indexOf(o)&&i.push.apply(i,(0,_e.fl)(i.splice(r.indexOf(o),1))),i}(e).forEach((function(e){t[e.name]=e,function(e){-1===Ni.indexOf(e.name)&&(e.setupOnce(wi.c,Te.Gd),Ni.push(e.name),gi.k.log("Integration installed: "+e.name))}(e)})),t))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return gi.k.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,i,r,o=!1,s=!1,a=t.exception&&t.exception.values;if(a){s=!0;try{for(var c=(0,_e.XA)(a),l=c.next();!l.done;l=c.next()){var u=l.value.mechanism;if(u&&!1===u.handled){o=!0;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}var d=t.user;if(!e.userAgent){var h=t.request?t.request.headers:{};for(var p in h)if("user-agent"===p.toLowerCase()){r=h[p];break}}e.update((0,_e.pi)((0,_e.pi)({},o&&{status:Vi.$.Crashed}),{user:d,userAgent:r,errors:e.errors+Number(s||o)})),this.captureSession(e)},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientProcessing=function(e){var t=this;return new Ci.c((function(n){var i=0,r=setInterval((function(){0==t._processing?(clearInterval(r),n(!0)):(i+=1,e&&i>=e&&(clearInterval(r),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var i=this,r=this.getOptions().normalizeDepth,o=void 0===r?3:r,s=(0,_e.pi)((0,_e.pi)({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:(0,yi.DM)()),timestamp:e.timestamp||(0,xi.yW)()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var a=t;n&&n.captureContext&&(a=wi.s.clone(a).update(n.captureContext));var c=Ci.c.resolve(s);return a&&(c=a.applyToEvent(s,n)),c.then((function(e){return"number"==typeof o&&o>0?i._normalizeEvent(e,o):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=(0,_e.pi)((0,_e.pi)((0,_e.pi)((0,_e.pi)((0,_e.pi)({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return(0,_e.pi)((0,_e.pi)({},e),e.data&&{data:(0,Di.Fv)(e.data,t)})}))}),e.user&&{user:(0,Di.Fv)(e.user,t)}),e.contexts&&{contexts:(0,Di.Fv)(e.contexts,t)}),e.extra&&{extra:(0,Di.Fv)(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,i=t.release,r=t.dist,o=t.maxValueLength,s=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==r&&(e.dist=r),e.message&&(e.message=(0,Ei.$G)(e.message,s));var a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=(0,Ei.$G)(a.value,s));var c=e.request;c&&c.url&&(c.url=(0,Ei.$G)(c.url,s))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=(0,_e.fl)(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){gi.k.error(e)}))},e.prototype._processEvent=function(e,t,n){var i=this,r=this.getOptions(),o=r.beforeSend,s=r.sampleRate;if(!this._isEnabled())return Ci.c.reject(new Ai("SDK not enabled, will not send event."));var a="transaction"===e.type;return!a&&"number"==typeof s&&Math.random()>s?Ci.c.reject(new Ai("Discarding event because it's not included in the random sample (sampling rate = "+s+")")):this._prepareEvent(e,n,t).then((function(e){if(null===e)throw new Ai("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||a||!o)return e;var n=o(e,t);if(void 0===n)throw new Ai("`beforeSend` method has to return `null` or a valid event.");return(0,Li.J8)(n)?n.then((function(e){return e}),(function(e){throw new Ai("beforeSend rejected with "+e)})):n})).then((function(e){if(null===e)throw new Ai("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!a&&t&&i._updateSessionFromEvent(t,e),i._sendEvent(e),e})).then(null,(function(e){if(e instanceof Ai)throw e;throw i.captureException(e,{data:{__sentry__:!0},originalException:e}),new Ai("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._processing+=1,e.then((function(e){return t._processing-=1,e}),(function(e){return t._processing-=1,e}))},e}();!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(Mi||(Mi={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(Mi||(Mi={}));var Bi,ji=function(){function e(){}return e.prototype.sendEvent=function(e){return Ci.c.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Mi.Skipped})},e.prototype.close=function(e){return Ci.c.resolve(!0)},e}(),Hi=function(){function e(e){this._options=e,this._options.dsn||gi.k.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new Ai("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new Ai("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){gi.k.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){gi.k.error("Error while sending session: "+e)})):gi.k.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new ji},e}();!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(Bi||(Bi={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;default:return e.Log}}}(Bi||(Bi={}));var Wi=n(8823),Ui="?",zi=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Gi=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Yi=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ji=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,qi=/\((\S*)(?::(\d+))(?::(\d+))\)/,Zi=/Minified React error #\d+;/i;function Xi(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:Zi.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,r=e.stacktrace.split("\n"),o=[],s=0;s<r.length;s+=2){var a=null;(t=n.exec(r[s]))?a={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=i.exec(r[s]))&&(a={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),a&&(!a.func&&a.line&&(a.func=Ui),o.push(a))}return o.length?{message:Ki(e),name:e.name,stack:o}:null}(e),t)return Qi(t,n)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,n,i,r=[],o=e.stack.split("\n"),s=0;s<o.length;++s){if(n=zi.exec(o[s])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=qi.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]);var c=n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],l=n[1]||Ui,u=-1!==l.indexOf("safari-extension"),d=-1!==l.indexOf("safari-web-extension");(u||d)&&(l=-1!==l.indexOf("@")?l.split("@")[0]:Ui,c=u?"safari-extension:"+c:"safari-web-extension:"+c),i={url:c,func:l,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=Yi.exec(o[s]))i={url:n[2],func:n[1]||Ui,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=Gi.exec(o[s])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=Ji.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==s||n[5]||void 0===e.columnNumber||(r[0].column=e.columnNumber+1),i={url:n[3],func:n[1]||Ui,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!i.func&&i.line&&(i.func=Ui),r.push(i)}return r.length?{message:Ki(e),name:e.name,stack:r}:null}(e),t)return Qi(t,n)}catch(e){}return{message:Ki(e),name:e&&e.name,stack:[],failed:!0}}function Qi(e,t){try{return(0,_e.pi)((0,_e.pi)({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function Ki(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function $i(e){var t=tr(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function er(e){return{exception:{values:[$i(e)]}}}function tr(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",i=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function nr(e,t,n){var i;if(void 0===n&&(n={}),(0,Li.VW)(e)&&e.error)return er(Xi(e=e.error));if((0,Li.TX)(e)||(0,Li.fm)(e)){var r=e,o=r.name||((0,Li.TX)(r)?"DOMError":"DOMException"),s=r.message?o+": "+r.message:o;return i=ir(s,t,n),(0,yi.Db)(i,s),"code"in r&&(i.tags=(0,_e.pi)((0,_e.pi)({},i.tags),{"DOMException.code":""+r.code})),i}return(0,Li.VZ)(e)?i=er(Xi(e)):(0,Li.PO)(e)||(0,Li.cO)(e)?(i=function(e,t,n){var i={exception:{values:[{type:(0,Li.cO)(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+(0,Di.zf)(e)}]},extra:{__serialized__:(0,Di.Qy)(e)}};if(t){var r=tr(Xi(t).stack);i.stacktrace={frames:r}}return i}(e,t,n.rejection),(0,yi.EG)(i,{synthetic:!0}),i):(i=ir(e,t,n),(0,yi.Db)(i,""+e,void 0),(0,yi.EG)(i,{synthetic:!0}),i)}function ir(e,t,n){void 0===n&&(n={});var i={message:e};if(n.attachStacktrace&&t){var r=tr(Xi(t).stack);i.stacktrace={frames:r}}return i}function rr(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function or(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=(0,_e.fl)(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=(0,_e.fl)(e.sdk.packages||[],t.packages||[]),e):e}function sr(e,t){var n=rr(t),i="aggregates"in e?"sessions":"session";return{body:JSON.stringify((0,_e.pi)({sent_at:(new Date).toISOString()},n&&{sdk:n}))+"\n"+JSON.stringify({type:i})+"\n"+JSON.stringify(e),type:i,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function ar(e,t){var n=rr(t),i=e.type||"event",r="transaction"===i,o=e.debug_meta||{},s=o.transactionSampling,a=(0,_e._T)(o,["transactionSampling"]),c=s||{},l=c.method,u=c.rate;0===Object.keys(a).length?delete e.debug_meta:e.debug_meta=a;var d={body:JSON.stringify(n?or(e,t.metadata.sdk):e),type:i,url:r?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(r){var h=JSON.stringify((0,_e.pi)({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}))+"\n"+JSON.stringify({type:e.type,sample_rates:[{id:l,rate:u}]})+"\n"+d.body;d.body=h}return d}var cr=function(){function e(e,t){void 0===t&&(t={}),this.dsn=e,this._dsnObject=new Ii(e),this.metadata=t}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this._dsnObject,i=["Sentry sentry_version=7"];return i.push("sentry_client="+e+"/"+t),i.push("sentry_key="+n.publicKey),n.pass&&i.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",i=[];for(var r in i.push("dsn="+t.toString()),e)if("dsn"!==r)if("user"===r){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return i.length?n+"?"+i.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e={sentry_key:this._dsnObject.publicKey,sentry_version:"7"};return(0,Di._j)(e)},e}(),lr=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then((function(){return t.remove(e)})).then(null,(function(){return t.remove(e).then(null,(function(){}))})),e):Ci.c.reject(new Ai("Not adding Promise due to buffer limit reached."))},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new Ci.c((function(n){var i=setTimeout((function(){e&&e>0&&n(!1)}),e);Ci.c.all(t._buffer).then((function(){clearTimeout(i),n(!0)})).then(null,(function(){n(!0)}))}))},e}(),ur={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},dr=function(){function e(e){this.options=e,this._buffer=new lr(30),this._rateLimits={},this._api=new cr(e.dsn,e._metadata),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new Ai("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,i=e.headers,r=e.resolve,o=e.reject,s=Mi.fromHttpCode(n.status);this._handleRateLimit(i)&&gi.k.warn("Too many requests, backing off until: "+this._disabledUntil(t)),s!==Mi.Success?o(n):r({status:s})},e.prototype._disabledUntil=function(e){var t=ur[e];return this._rateLimits[t]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,i,r,o=Date.now(),s=e["x-sentry-rate-limits"],a=e["retry-after"];if(s){try{for(var c=(0,_e.XA)(s.trim().split(",")),l=c.next();!l.done;l=c.next()){var u=l.value.split(":",2),d=parseInt(u[0],10),h=1e3*(isNaN(d)?60:d);try{for(var p=(i=void 0,(0,_e.XA)(u[1].split(";"))),f=p.next();!f.done;f=p.next()){var v=f.value;this._rateLimits[v||"all"]=new Date(o+h)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}return!!a&&(this._rateLimits.all=new Date(o+(0,yi.JY)(o,a)),!0)},e}(),hr=function(e){function t(t,n){void 0===n&&(n=function(){var e,t,n=(0,yi.Rf)();if((0,Wi.Du)(n.fetch))return n.fetch.bind(n);var i=n.document,r=n.fetch;if("function"==typeof(null===(e=i)||void 0===e?void 0:e.createElement))try{var o=i.createElement("iframe");o.hidden=!0,i.head.appendChild(o),(null===(t=o.contentWindow)||void 0===t?void 0:t.fetch)&&(r=o.contentWindow.fetch),i.head.removeChild(o)}catch(e){gi.k.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return r.bind(n)}());var i=e.call(this,t)||this;return i._fetch=n,i}return(0,_e.ZT)(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(ar(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(sr(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var i={body:e.body,method:"POST",referrerPolicy:(0,Wi.hv)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(i,this.options.fetchParameters),void 0!==this.options.headers&&(i.headers=this.options.headers),this._buffer.add(new Ci.c((function(t,r){n._fetch(e.url,i).then((function(i){var o={"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})})).catch(r)})))},t}(dr),pr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,_e.ZT)(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(ar(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(sr(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add(new Ci.c((function(t,i){var r=new XMLHttpRequest;for(var o in r.onreadystatechange=function(){if(4===r.readyState){var o={"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})}},r.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&r.setRequestHeader(o,n.options.headers[o]);r.send(e.body)})))},t}(dr),fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,_e.ZT)(t,e),t.prototype.eventFromException=function(e,t){return function(e,t,n){var i=nr(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return(0,yi.EG)(i,{handled:!0,type:"generic"}),i.level=Bi.Error,n&&n.event_id&&(i.event_id=n.event_id),Ci.c.resolve(i)}(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=Bi.Info),function(e,t,n,i){void 0===n&&(n=Bi.Info);var r=ir(t,i&&i.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return r.level=n,i&&i.event_id&&(r.event_id=i.event_id),Ci.c.resolve(r)}(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=(0,_e.pi)((0,_e.pi)({},this._options.transportOptions),{dsn:this._options.dsn,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):(0,Wi.Ak)()?new hr(t):new pr(t)},t}(Hi),vr=0;function mr(){return vr>0}function gr(){vr+=1,setTimeout((function(){vr-=1}))}function wr(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var i=function(){var i=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var r=i.map((function(e){return wr(e,t)}));return e.handleEvent?e.handleEvent.apply(this,r):e.apply(this,r)}catch(e){throw gr(),Re((function(n){n.addEventProcessor((function(e){var n=(0,_e.pi)({},e);return t.mechanism&&((0,yi.Db)(n,void 0,void 0),(0,yi.EG)(n,t.mechanism)),n.extra=(0,_e.pi)((0,_e.pi)({},n.extra),{arguments:i}),n})),Ve(e)})),e}};try{for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch(e){}e.prototype=e.prototype||{},i.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:i}),Object.defineProperties(i,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:function(){return e.name}})}catch(e){}return i}var yr,Er,br=n(8464),Pr=function(){function e(t){this.name=e.id,this._options=(0,_e.pi)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&(0,Te.Gd)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:(0,yi.jH)(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&(0,Ti.o)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,(0,_e.fl)(t))},type:"console"}),this._options.dom&&(0,Ti.o)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,(0,_e.fl)(t))},type:"dom"}),this._options.xhr&&(0,Ti.o)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,(0,_e.fl)(t))},type:"xhr"}),this._options.fetch&&(0,Ti.o)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,(0,_e.fl)(t))},type:"fetch"}),this._options.history&&(0,Ti.o)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,(0,_e.fl)(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:Bi.fromString(e.level),message:(0,Ei.nK)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+((0,Ei.nK)(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}(0,Te.Gd)().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?(0,br.R)(e.event.target):(0,br.R)(e.event)}catch(e){t="<unknown>"}0!==t.length&&(0,Te.Gd)().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,i=t.url,r=t.status_code,o=t.body;(0,Te.Gd)().addBreadcrumb({category:"xhr",data:{method:n,url:i,status_code:r},type:"http"},{xhr:e.xhr,input:o})}},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?(0,Te.Gd)().addBreadcrumb({category:"fetch",data:e.fetchData,level:Bi.Error,type:"http"},{data:e.error,input:e.args}):(0,Te.Gd)().addBreadcrumb({category:"fetch",data:(0,_e.pi)((0,_e.pi)({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=(0,yi.Rf)(),n=e.from,i=e.to,r=(0,yi.en)(t.location.href),o=(0,yi.en)(n),s=(0,yi.en)(i);o.path||(o=r),r.protocol===s.protocol&&r.host===s.host&&(i=s.relative),r.protocol===o.protocol&&r.host===o.host&&(n=o.relative),(0,Te.Gd)().addBreadcrumb({category:"navigation",data:{from:n,to:i}})},e.id="Breadcrumbs",e}(),_r=function(e){function t(t){return void 0===t&&(t={}),t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:Si}],version:Si},e.call(this,fr,t)||this}return(0,_e.ZT)(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),(0,yi.Rf)().document&&(this._isEnabled()?function(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var t=document.createElement("script");t.async=!0,t.src=new cr(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}else gi.k.error("Missing dsn option in showReportDialog call");else gi.k.error("Missing eventId option in showReportDialog call")}((0,_e.pi)((0,_e.pi)({},e),{dsn:e.dsn||this.getDsn()})):gi.k.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,i){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,i)},t.prototype._sendEvent=function(t){var n=this.getIntegration(Pr);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(Fi),Tr=n(360),Sr=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Vr=function(){function e(t){this.name=e.id,this._options=(0,_e.pi)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=(0,yi.Rf)();this._options.setTimeout&&(0,Di.hl)(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&(0,Di.hl)(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&(0,Di.hl)(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&(0,Di.hl)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Sr).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0];return t[0]=wr(i,{mechanism:{data:{function:(0,Tr.$)(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,wr(t,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,Tr.$)(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=(0,yi.Rf)(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,Di.hl)(n,"addEventListener",(function(t){return function(n,i,r){try{"function"==typeof i.handleEvent&&(i.handleEvent=wr(i.handleEvent.bind(i),{mechanism:{data:{function:"handleEvent",handler:(0,Tr.$)(i),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,wr(i,{mechanism:{data:{function:"addEventListener",handler:(0,Tr.$)(i),target:e},handled:!0,type:"instrument"}}),r)}})),(0,Di.hl)(n,"removeEventListener",(function(e){return function(t,n,i){var r,o=n;try{var s=null===(r=o)||void 0===r?void 0:r.__sentry_wrapped__;s&&e.call(this,t,s,i)}catch(e){}return e.call(this,t,o,i)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this,r=["onload","onerror","onprogress","onreadystatechange"];return r.forEach((function(e){e in i&&"function"==typeof i[e]&&(0,Di.hl)(i,e,(function(t){var n={mechanism:{data:{function:e,handler:(0,Tr.$)(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=(0,Tr.$)(t.__sentry_original__)),wr(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),Rr=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=(0,_e.pi)({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(gi.k.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(gi.k.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||((0,Ti.o)({callback:function(n){var i=n.error,r=(0,Te.Gd)(),o=r.getIntegration(e),s=i&&!0===i.__sentry_own_request__;if(o&&!mr()&&!s){var a=r.getClient(),c=(0,Li.pt)(i)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(nr(i,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);(0,yi.EG)(c,{handled:!1,type:"onerror"}),r.captureEvent(c,{originalException:i})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||((0,Ti.o)({callback:function(n){var i=n;try{"reason"in n?i=n.reason:"detail"in n&&"reason"in n.detail&&(i=n.detail.reason)}catch(e){}var r=(0,Te.Gd)(),o=r.getIntegration(e),s=i&&!0===i.__sentry_own_request__;if(!o||mr()||s)return!0;var a=r.getClient(),c=(0,Li.pt)(i)?t._eventFromRejectionWithPrimitive(i):nr(i,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!0});c.level=Bi.Error,(0,yi.EG)(c,{handled:!1,type:"onunhandledrejection"}),r.captureEvent(c,{originalException:i})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,i){var r,o=(0,Li.VW)(e)?e.message:e;if((0,Li.HD)(o)){var s=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(r=s[1],o=s[2])}var a={exception:{values:[{type:r||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(a,t,n,i)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var r=isNaN(parseInt(i,10))?void 0:i,o=isNaN(parseInt(n,10))?void 0:n,s=(0,Li.HD)(t)&&t.length>0?t:(0,yi.l4)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:r,filename:s,function:"?",in_app:!0,lineno:o}),e},e.id="GlobalHandlers",e}(),Ar=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){(0,wi.c)((function(t,n){var i=(0,Te.Gd)().getIntegration(e);return i?i._handler(t,n):t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&(0,Li.V9)(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=(0,_e.fl)(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!(0,Li.V9)(e[t],Error)||n.length+1>=this._limit)return n;var i=$i(Xi(e[t]));return this._walkErrorTree(e[t],t,(0,_e.fl)([i],n))},e.id="LinkedErrors",e}(),Or=(0,yi.Rf)(),Ir=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){(0,wi.c)((function(t){var n,i,r;if((0,Te.Gd)().getIntegration(e)){if(!Or.navigator&&!Or.location&&!Or.document)return t;var o=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(i=Or.location)||void 0===i?void 0:i.href),s=(Or.document||{}).referrer,a=(Or.navigator||{}).userAgent,c=(0,_e.pi)((0,_e.pi)((0,_e.pi)({},null===(r=t.request)||void 0===r?void 0:r.headers),s&&{Referer:s}),a&&{"User-Agent":a}),l=(0,_e.pi)((0,_e.pi)({},o&&{url:o}),{headers:c});return(0,_e.pi)((0,_e.pi)({},t),{request:l})}return t}))},e.id="UserAgent",e}(),Lr=[new Pi,new _i,new Vr,new Pr,new Rr,new Ar,new Ir],Cr=n(1109),xr=n(6458),Dr=n(5734),Nr=n(3233),kr=(0,yi.Rf)(),Mr=n(1422),Fr=function(e,t,n,i){var r;return function(){n&&t.isFinal&&n.disconnect(),t.value>=0&&(i||t.isFinal||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),(t.delta||t.isFinal||void 0===r)&&(e(t),r=t.value))}},Br=function(e,t){return void 0===t&&(t=-1),{name:e,value:t,delta:0,entries:[],id:Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12),isFinal:!1}},jr=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},Hr=!1,Wr=!1,Ur=function(e){Hr=!e.persisted},zr=function(e,t){void 0===t&&(t=!1),Wr||(addEventListener("pagehide",Ur),addEventListener("beforeunload",(function(){})),Wr=!0),addEventListener("visibilitychange",(function(t){var n=t.timeStamp;"hidden"===document.visibilityState&&e({timeStamp:n,isUnloading:Hr})}),{capture:!0,once:t})},Gr=function(){return void 0===yr&&(yr="hidden"===document.visibilityState?0:1/0,zr((function(e){var t=e.timeStamp;return yr=t}),!0)),{get timeStamp(){return yr}}},Yr=(0,yi.Rf)(),Jr=function(){function e(){var e;this._measurements={},this._performanceCursor=0,!(0,Mr.KV)()&&(null===(e=Yr)||void 0===e?void 0:e.performance)&&(Yr.performance.mark&&Yr.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID())}return e.prototype.addPerformanceEntries=function(e){var t=this;if(Yr&&Yr.performance&&Yr.performance.getEntries&&xi.Z1){gi.k.log("[Tracing] Adding & adjusting spans using Performance API");var n,i,r,o,s,a=(0,Nr.XL)(xi.Z1);if(Yr.document)for(var c=0;c<document.scripts.length;c++)if("true"===document.scripts[c].dataset.entry){n=document.scripts[c].src;break}if(Yr.performance.getEntries().slice(this._performanceCursor).forEach((function(c){var l=(0,Nr.XL)(c.startTime),u=(0,Nr.XL)(c.duration);if(!("navigation"===e.op&&a+l<e.startTimestamp))switch(c.entryType){case"navigation":!function(e,t,n){qr({transaction:e,entry:t,event:"unloadEvent",timeOrigin:n}),qr({transaction:e,entry:t,event:"redirect",timeOrigin:n}),qr({transaction:e,entry:t,event:"domContentLoadedEvent",timeOrigin:n}),qr({transaction:e,entry:t,event:"loadEvent",timeOrigin:n}),qr({transaction:e,entry:t,event:"connect",timeOrigin:n}),qr({transaction:e,entry:t,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),qr({transaction:e,entry:t,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),qr({transaction:e,entry:t,event:"domainLookup",timeOrigin:n,description:"DNS"}),function(e,t,n){Zr(e,{op:"browser",description:"request",startTimestamp:n+(0,Nr.XL)(t.requestStart),endTimestamp:n+(0,Nr.XL)(t.responseEnd)}),Zr(e,{op:"browser",description:"response",startTimestamp:n+(0,Nr.XL)(t.responseStart),endTimestamp:n+(0,Nr.XL)(t.responseEnd)})}(e,t,n)}(e,c,a),o=a+(0,Nr.XL)(c.responseStart),s=a+(0,Nr.XL)(c.requestStart);break;case"mark":case"paint":case"measure":var d=function(e,t,n,i,r){var o=r+n,s=o+i;return Zr(e,{description:t.name,endTimestamp:s,op:t.entryType,startTimestamp:o}),o}(e,c,l,u,a);void 0===r&&"sentry-tracing-init"===c.name&&(r=d);var h=Gr(),p=c.startTime<h.timeStamp;"first-paint"===c.name&&p&&(gi.k.log("[Measurements] Adding FP"),t._measurements.fp={value:c.startTime},t._measurements["mark.fp"]={value:d}),"first-contentful-paint"===c.name&&p&&(gi.k.log("[Measurements] Adding FCP"),t._measurements.fcp={value:c.startTime},t._measurements["mark.fcp"]={value:d});break;case"resource":var f=c.name.replace(window.location.origin,""),v=function(e,t,n,i,r,o){if("xmlhttprequest"!==t.initiatorType&&"fetch"!==t.initiatorType){var s={};"transferSize"in t&&(s["Transfer Size"]=t.transferSize),"encodedBodySize"in t&&(s["Encoded Body Size"]=t.encodedBodySize),"decodedBodySize"in t&&(s["Decoded Body Size"]=t.decodedBodySize);var a=o+i,c=a+r;return Zr(e,{description:n,endTimestamp:c,op:t.initiatorType?"resource."+t.initiatorType:"resource",startTimestamp:a,data:s}),c}}(e,c,f,l,u,a);void 0===i&&(n||"").indexOf(f)>-1&&(i=v)}})),void 0!==i&&void 0!==r&&Zr(e,{description:"evaluation",endTimestamp:r,op:"script",startTimestamp:i}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(e),"pageload"===e.op){var l=(0,Nr.XL)(xi.Z1);"number"==typeof o&&(gi.k.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:1e3*(o-e.startTimestamp)},"number"==typeof s&&s<=o&&(this._measurements["ttfb.requestTime"]={value:1e3*(o-s)})),["fcp","fp","lcp"].forEach((function(n){if(t._measurements[n]&&!(l>=e.startTimestamp)){var i=t._measurements[n].value,r=l+(0,Nr.XL)(i),o=Math.abs(1e3*(r-e.startTimestamp)),s=o-i;gi.k.log("[Measurements] Normalized "+n+" from "+i+" to "+o+" ("+s+")"),t._measurements[n].value=o}})),this._measurements["mark.fid"]&&this._measurements.fid&&Zr(e,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+(0,Nr.XL)(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),e.setMeasurements(this._measurements),this._lcpEntry&&(gi.k.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&e.setTag("lcp.element",(0,br.R)(this._lcpEntry.element)),this._lcpEntry.id&&e.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&e.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),e.setTag("lcp.size",this._lcpEntry.size))}}},e.prototype._trackCLS=function(){var e=this;!function(t,n){void 0===n&&(n=!1);var i,r=Br("CLS",0),o=function(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),i())},s=jr("layout-shift",o);s&&(i=Fr((function(t){t.entries.pop()&&(gi.k.log("[Measurements] Adding CLS"),e._measurements.cls={value:t.value})}),r,s,n),zr((function(e){var t=e.isUnloading;s.takeRecords().map(o),t&&(r.isFinal=!0),i()})))}()},e.prototype._trackNavigator=function(e){var t=Yr.navigator;if(t){var n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Xr(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),Xr(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),Xr(t.deviceMemory)&&e.setTag("deviceMemory",String(t.deviceMemory)),Xr(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}},e.prototype._trackLCP=function(){var e=this;!function(e,t){void 0===t&&(t=!1);var n,i=Br("LCP"),r=Gr(),o=function(e){var t=e.startTime;t<r.timeStamp?(i.value=t,i.entries.push(e)):i.isFinal=!0,n()},s=jr("largest-contentful-paint",o);if(s){n=Fr(e,i,s,t);var a=function(){i.isFinal||(s.takeRecords().map(o),i.isFinal=!0,n())};(Er||(Er=new Promise((function(e){return["scroll","keydown","pointerdown"].map((function(t){addEventListener(t,e,{once:!0,passive:!0,capture:!0})}))}))),Er).then(a),zr(a,!0)}}((function(t){var n=t.entries.pop();if(n){var i=(0,Nr.XL)(xi.Z1),r=(0,Nr.XL)(n.startTime);gi.k.log("[Measurements] Adding LCP"),e._measurements.lcp={value:t.value},e._measurements["mark.lcp"]={value:i+r},e._lcpEntry=n}}))},e.prototype._trackFID=function(){var e,t,n,i,r,o,s=this;e=function(e){var t=e.entries.pop();if(t){var n=(0,Nr.XL)(xi.Z1),i=(0,Nr.XL)(t.startTime);gi.k.log("[Measurements] Adding FID"),s._measurements.fid={value:e.value},s._measurements["mark.fid"]={value:n+i}}},t=Br("FID"),n=Gr(),r=jr("first-input",i=function(e){e.startTime<n.timeStamp&&(t.value=e.processingStart-e.startTime,t.entries.push(e),t.isFinal=!0,o())}),o=Fr(e,t,r),r?zr((function(){r.takeRecords().map(i),r.disconnect()}),!0):window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&window.perfMetrics.onFirstInputDelay((function(e,i){i.timeStamp<n.timeStamp&&(t.value=e,t.isFinal=!0,t.entries=[{entryType:"first-input",name:i.type,target:i.target,cancelable:i.cancelable,startTime:i.timeStamp,processingStart:i.timeStamp+e}],o())}))},e}();function qr(e){var t=e.transaction,n=e.entry,i=e.event,r=e.timeOrigin,o=e.eventEnd,s=e.description,a=o?n[o]:n[i+"End"],c=n[i+"Start"];c&&a&&Zr(t,{op:"browser",description:null!=s?s:i,startTimestamp:r+(0,Nr.XL)(c),endTimestamp:r+(0,Nr.XL)(a)})}function Zr(e,t){var n=t.startTimestamp,i=(0,_e._T)(t,["startTimestamp"]);return n&&e.startTimestamp>n&&(e.startTimestamp=n),e.startChild((0,_e.pi)({startTimestamp:n},i))}function Xr(e){return"number"==typeof e&&isFinite(e)}var Qr={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};var Kr=(0,yi.Rf)(),$r=(0,_e.pi)({idleTimeout:xr.nT,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!0),Kr&&Kr.location){var i,r=Kr.location.href;t&&(i=e({name:Kr.location.pathname,op:"pageload"})),n&&(0,Ti.o)({callback:function(t){var n=t.to,o=t.from;void 0===o&&r&&-1!==r.indexOf(n)?r=void 0:o!==n&&(r=void 0,i&&(gi.k.log("[Tracing] Finishing current transaction with op: "+i.op),i.finish()),i=e({name:Kr.location.pathname,op:"navigation"}))},type:"history"})}else gi.k.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},Qr),eo=function(){function e(t){this.name=e.id,this._metrics=new Jr,this._emitOptionsWarning=!1;var n=Qr.tracingOrigins;t&&t.tracingOrigins&&Array.isArray(t.tracingOrigins)&&0!==t.tracingOrigins.length?n=t.tracingOrigins:this._emitOptionsWarning=!0,this.options=(0,_e.pi)((0,_e.pi)((0,_e.pi)({},$r),t),{tracingOrigins:n})}return e.prototype.setupOnce=function(e,t){var n=this;this._getCurrentHub=t,this._emitOptionsWarning&&(gi.k.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),gi.k.warn("[Tracing] We added a reasonable default for you: "+Qr.tracingOrigins));var i=this.options,r=i.routingInstrumentation,o=i.startTransactionOnLocationChange,s=i.startTransactionOnPageLoad,a=i.markBackgroundTransactions,c=i.traceFetch,l=i.traceXHR,u=i.tracingOrigins,d=i.shouldCreateSpanForRequest;r((function(e){return n._createRouteTransaction(e)}),s,o),a&&(kr&&kr.document?kr.document.addEventListener("visibilitychange",(function(){var e=(0,Nr.x1)();kr.document.hidden&&e&&(gi.k.log("[Tracing] Transaction: "+Dr.p.Cancelled+" -> since tab moved to the background, op: "+e.op),e.status||e.setStatus(Dr.p.Cancelled),e.setTag("visibilitychange","document.hidden"),e.finish())})):gi.k.warn("[Tracing] Could not set up background tab detection due to lack of global document")),function(e){var t=(0,_e.pi)((0,_e.pi)({},Qr),e),n=t.traceFetch,i=t.traceXHR,r=t.tracingOrigins,o=t.shouldCreateSpanForRequest,s={},a=function(e){if(s[e])return s[e];var t=r;return s[e]=t.some((function(t){return(0,Ei.zC)(e,t)}))&&!(0,Ei.zC)(e,"sentry_key"),s[e]},c=a;"function"==typeof o&&(c=function(e){return a(e)&&o(e)});var l={};n&&(0,Ti.o)({callback:function(e){!function(e,t,n){if((0,Nr.zu)()&&e.fetchData&&t(e.fetchData.url))if(e.endTimestamp&&e.fetchData.__span)(r=n[e.fetchData.__span])&&(e.response?r.setHttpStatus(e.response.status):e.error&&r.setStatus(Dr.p.InternalError),r.finish(),delete n[e.fetchData.__span]);else{var i=(0,Nr.x1)();if(i){var r=i.startChild({data:(0,_e.pi)((0,_e.pi)({},e.fetchData),{type:"fetch"}),description:e.fetchData.method+" "+e.fetchData.url,op:"http"});e.fetchData.__span=r.spanId,n[r.spanId]=r;var o=e.args[0]=e.args[0],s=e.args[1]=e.args[1]||{},a=s.headers;(0,Li.V9)(o,Request)&&(a=o.headers),a?"function"==typeof a.append?a.append("sentry-trace",r.toTraceparent()):a=Array.isArray(a)?(0,_e.fl)(a,[["sentry-trace",r.toTraceparent()]]):(0,_e.pi)((0,_e.pi)({},a),{"sentry-trace":r.toTraceparent()}):a={"sentry-trace":r.toTraceparent()},s.headers=a}}}(e,c,l)},type:"fetch"}),i&&(0,Ti.o)({callback:function(e){!function(e,t,n){var i,r;if((0,Nr.zu)()&&!(null===(i=e.xhr)||void 0===i?void 0:i.__sentry_own_request__)&&(null===(r=e.xhr)||void 0===r?void 0:r.__sentry_xhr__)&&t(e.xhr.__sentry_xhr__.url)){var o=e.xhr.__sentry_xhr__;if(e.endTimestamp&&e.xhr.__sentry_xhr_span_id__)(a=n[e.xhr.__sentry_xhr_span_id__])&&(a.setHttpStatus(o.status_code),a.finish(),delete n[e.xhr.__sentry_xhr_span_id__]);else{var s=(0,Nr.x1)();if(s){var a=s.startChild({data:(0,_e.pi)((0,_e.pi)({},o.data),{type:"xhr",method:o.method,url:o.url}),description:o.method+" "+o.url,op:"http"});if(e.xhr.__sentry_xhr_span_id__=a.spanId,n[e.xhr.__sentry_xhr_span_id__]=a,e.xhr.setRequestHeader)try{e.xhr.setRequestHeader("sentry-trace",a.toTraceparent())}catch(e){}}}}}(e,c,l)},type:"xhr"})}({traceFetch:c,traceXHR:l,tracingOrigins:u,shouldCreateSpanForRequest:d})},e.prototype._createRouteTransaction=function(e){var t=this;if(this._getCurrentHub){var n=this.options,i=n.beforeNavigate,r=n.idleTimeout,o=n.maxTransactionDuration,s="pageload"===e.op?function(){var e,t=("sentry-trace",(e=document.querySelector("meta[name=sentry-trace]"))?e.getAttribute("content"):null);if(t)return(0,Nr.qG)(t)}():void 0,a=(0,_e.pi)((0,_e.pi)((0,_e.pi)({},e),s),{trimEnd:!0}),c="function"==typeof i?i(a):a,l=void 0===c?(0,_e.pi)((0,_e.pi)({},a),{sampled:!1}):c;!1===l.sampled&&gi.k.log("[Tracing] Will not send "+l.op+" transaction because of beforeNavigate."),gi.k.log("[Tracing] Starting "+l.op+" transaction on scope");var u=this._getCurrentHub(),d=(0,yi.Rf)().location,h=(0,Cr.lb)(u,l,r,!0,{location:d});return h.registerBeforeFinishCallback((function(e,n){t._metrics.addPerformanceEntries(e),function(e,t,n){var i=n-t.startTimestamp;n&&(i>e||i<0)&&(t.setStatus(Dr.p.DeadlineExceeded),t.setTag("maxTransactionDurationExceeded","true"))}((0,Nr.WB)(o),e,n)})),h}gi.k.warn("[Tracing] Did not create "+e.op+" transaction because _getCurrentHub is invalid.")},e.id="BrowserTracing",e}(),to=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}return e.prototype.setupOnce=function(){var e,t;this._router?(e=this._router,void 0===(t=this._methods)&&(t=[]),t.forEach((function(t){return function(e,t){var n=e[t];return e[t]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return n.call.apply(n,(0,_e.fl)([this],io(e,t)))},e}(e,t)}))):gi.k.error("ExpressIntegration is missing an Express instance")},e.id="Express",e}();function no(e,t){var n=e.length;switch(n){case 2:return function(n,i){var r=i.__sentry_transaction;if(r){var o=r.startChild({description:e.name,op:"middleware."+t});i.once("finish",(function(){o.finish()}))}return e.call(this,n,i)};case 3:return function(n,i,r){var o,s=null===(o=i.__sentry_transaction)||void 0===o?void 0:o.startChild({description:e.name,op:"middleware."+t});e.call(this,n,i,(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===(e=s)||void 0===e||e.finish(),r.call.apply(r,(0,_e.fl)([this],t))}))};case 4:return function(n,i,r,o){var s,a=null===(s=r.__sentry_transaction)||void 0===s?void 0:s.startChild({description:e.name,op:"middleware."+t});e.call(this,n,i,r,(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===(e=a)||void 0===e||e.finish(),o.call.apply(o,(0,_e.fl)([this],t))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function io(e,t){return e.map((function(e){return"function"==typeof e?no(e,t):Array.isArray(e)?e.map((function(e){return"function"==typeof e?no(e,t):e})):e}))}var ro=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(e,t){var n=(0,Mr.$y)("pg");n?(0,Di.hl)(n.Client.prototype,"query",(function(e){return function(n,i,r){var o,s,a,c=null===(s=null===(o=t().getScope())||void 0===o?void 0:o.getSpan())||void 0===s?void 0:s.startChild({description:"string"==typeof n?n:n.text,op:"db"});if("function"==typeof r)return e.call(this,n,i,(function(e,t){var n;null===(n=c)||void 0===n||n.finish(),r(e,t)}));if("function"==typeof i)return e.call(this,n,(function(e,t){var n;null===(n=c)||void 0===n||n.finish(),i(e,t)}));var l=void 0!==i?e.call(this,n,i):e.call(this,n);return(0,Li.J8)(l)?l.then((function(e){var t;return null===(t=c)||void 0===t||t.finish(),e})):(null===(a=c)||void 0===a||a.finish(),l)}})):gi.k.error("Postgres Integration was unable to require `pg` package.")},e.id="Postgres",e}(),oo=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(e,t){var n=(0,Mr.$y)("mysql/lib/Connection.js");n?(0,Di.hl)(n,"createQuery",(function(e){return function(n,i,r){var o,s,a=null===(s=null===(o=t().getScope())||void 0===o?void 0:o.getSpan())||void 0===s?void 0:s.startChild({description:"string"==typeof n?n:n.sql,op:"db"});return"function"==typeof r?e.call(this,n,i,(function(e,t,n){var i;null===(i=a)||void 0===i||i.finish(),r(e,t,n)})):"function"==typeof i?e.call(this,n,(function(e,t,n){var r;null===(r=a)||void 0===r||r.finish(),i(e,t,n)})):e.call(this,n,i,r)}})):gi.k.error("Mysql Integration was unable to require `mysql` package.")},e.id="Mysql",e}(),so=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],ao={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},co=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._operations=Array.isArray(t.operations)?t.operations:so,this._describeOperations=!("describeOperations"in t)||t.describeOperations,this._useMongoose=!!t.useMongoose}return e.prototype.setupOnce=function(e,t){var n=this._useMongoose?"mongoose":"mongodb",i=(0,Mr.$y)(n);i?this._instrumentOperations(i.Collection,this._operations,t):gi.k.error("Mongo Integration was unable to require `"+n+"` package.")},e.prototype._instrumentOperations=function(e,t,n){var i=this;t.forEach((function(t){return i._patchOperation(e,t,n)}))},e.prototype._patchOperation=function(e,t,n){if(t in e.prototype){var i=this._getSpanContextFromOperationArguments.bind(this);(0,Di.hl)(e.prototype,t,(function(e){return function(){for(var r,o,s,a,c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var u=c[c.length-1],d=n().getScope(),h=null===(r=d)||void 0===r?void 0:r.getSpan();if("function"!=typeof u||"mapReduce"===t&&2===c.length){var p=null===(o=h)||void 0===o?void 0:o.startChild(i(this,t,c)),f=e.call.apply(e,(0,_e.fl)([this],c));return(0,Li.J8)(f)?f.then((function(e){var t;return null===(t=p)||void 0===t||t.finish(),e})):(null===(s=p)||void 0===s||s.finish(),f)}var v=null===(a=h)||void 0===a?void 0:a.startChild(i(this,t,c.slice(0,-1)));return e.call.apply(e,(0,_e.fl)([this],c.slice(0,-1),[function(e,t){var n;null===(n=v)||void 0===n||n.finish(),u(e,t)}]))}}))}},e.prototype._getSpanContextFromOperationArguments=function(e,t,n){var i={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},r={op:"db",description:t,data:i},o=ao[t],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!o||!s)return r;try{if("mapReduce"===t){var a=(0,_e.CR)(n,2),c=a[0],l=a[1];i[o[0]]="string"==typeof c?c:c.name||"<anonymous>",i[o[1]]="string"==typeof l?l:l.name||"<anonymous>"}else for(var u=0;u<o.length;u++)i[o[u]]=JSON.stringify(n[u])}catch(e){}return r},e.id="Mongo",e}(),lo=(0,_e.pi)((0,_e.pi)({},e),{BrowserTracing:eo});function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Cr.ro)(),"addEventListener"in document&&document.addEventListener("DOMContentLoaded",(function(){r().attach(document.body)}),!1);var ho=["ResizeObserver loop limit exceeded","TypeError: Failed to fetch","TypeError: NetworkError when attempting to fetch resource.","TypeError: Network request failed","TypeError: The network connection was lost.","TypeError: The Internet connection appears to be offline.","TypeError: cancelled","UnhandledRejection: Non-Error promise rejection captured with value: "];!function(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=Lr),void 0===e.release){var t=(0,yi.Rf)();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),function(e,t){var n;!0===t.debug&&gi.k.enable();var i=(0,Te.Gd)();null===(n=i.getScope())||void 0===n||n.update(t.initialScope);var r=new e(t);i.bindClient(r)}(_r,e),e.autoSessionTracking&&function(){if(void 0!==(0,yi.Rf)().document){var e=(0,Te.Gd)();"function"==typeof e.startSession&&"function"==typeof e.captureSession&&(e.startSession(),e.captureSession(),(0,Ti.o)({callback:function(){e.startSession(),e.captureSession()},type:"history"}))}else gi.k.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}()}({dsn:V.SENTRY_DSN,environment:V.ENVIRONMENT,release:V.RELEASE_TAG,normalizeDepth:5,integrations:[new lo.BrowserTracing],tracesSampleRate:.2,denyUrls:[/\/share\/static\/pdf/,/^file:\/\//i,/^chrome:\/\//i,/^chrome-extension:\/\//i,/^moz-extension:\/\//i],ignoreErrors:ho});var po,fo,vo=new mi;try{if((po=document.createElement("div")).innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1==po.getElementsByTagName("i").length)vo.setIsShowcaseLoading(!1),vo.setShowcaseErrorMessage('\n        Microsoft has <a href="'.concat("https://www.microsoft.com/en-us/WindowsForBusiness/End-of-IE-support",'">ended support</a> for your browser.<br/>\n        You can access your content by visiting this site on any supported Microsoft, Google, or Apple browser.\n    ')),vo.setShowcaseError(!0);else if(window.shareHash&&window.showcaseBaseUrl){var mo="".concat(window.showcaseBaseUrl,"/").concat(window.shareHash);vo.setIsShowcaseLoading(!1),vo.setShowcaseErrorMessage('\n        You are trying to view this Showcase locally, please visit\n        <a href="'.concat(mo,'">').concat(mo,"</a>\n        for an enhanced experience.\n    ")),vo.setShowcaseError(!0)}else{var go=window.location.pathname,wo=z.getShowcaseBaseUrl(),yo=function(e){if(Array.isArray(e))return e}(fo=z.parseShareHash(go))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),2!==o.length);s=!0);}catch(e){a=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}(fo)||function(e,t){if(e){if("string"==typeof e)return uo(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uo(e,2):void 0}}(fo)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),Eo=yo[0],bo=yo[1];vo.load(Eo,bo,wo).then((function(e){var t="";e&&e.success&&e.data&&e.data.organisation&&(t=e.data.organisation.id);try{!function(e,t,n){if(e){var i=["prod-1","production"].includes(t)?"production":"staging";window.pendo.initialize({visitor:{id:"".concat(i,"-").concat(n,"-showcase_client_").concat(ai()),isProspect:!0,environment:t,screenWidth:window.screen.width,screenHeight:window.screen.height},account:{id:"".concat(i,"-").concat(n)},excludeAllText:!0,disableCookies:!0,disablePersistence:!0})}}(V.PENDO_API_KEY,V.ENVIRONMENT,t)}catch(e){Ve(e)}return vo.handle(e)})).then((function(){return vo.createShowCaseViewer()})).then((function(){return vo.setIsShowcaseLoading(!1)})).catch((function(e){return Po(e)}))}}catch(e){Po(e)}function Po(e){vo.setIsShowcaseLoading(!1),vo.setShowcaseError(!0),!e||"string"==typeof e&&e.includes(a)||(Ve(e),console&&console.error&&console.error(e))}document.querySelector("body").showcase=function(){return vo}}()}();
//# sourceMappingURL=app-b9d7678f5f.js.map